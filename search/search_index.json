{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Introduction Cloudrock is a platform for managing hybrid cloud resources. It is used both for controlling internal enterprise IT resources and for selling cloud services. Cloudrock is composed of the following main components: Cloudrock Metal - broker and orchestrator of cloud services. Responsible for technical service delivery and connected matters. Exposes REST API for management Cloudrock Cloudrock-UI - web-based self-service portal. Talks REST to Metal. Cloudrock is open-source, extendable and comes with a professional support provided by CloudRock. To get a quick feeling what Cloudrock is, take a look at some screenshots . If you are interested in deploying, check the getting started section!","title":"Introduction"},{"location":"#introduction","text":"Cloudrock is a platform for managing hybrid cloud resources. It is used both for controlling internal enterprise IT resources and for selling cloud services. Cloudrock is composed of the following main components: Cloudrock Metal - broker and orchestrator of cloud services. Responsible for technical service delivery and connected matters. Exposes REST API for management Cloudrock Cloudrock-UI - web-based self-service portal. Talks REST to Metal. Cloudrock is open-source, extendable and comes with a professional support provided by CloudRock. To get a quick feeling what Cloudrock is, take a look at some screenshots . If you are interested in deploying, check the getting started section!","title":"Introduction"},{"location":"getting-started/","text":"Getting started Installing Cloudrock is a simple and straightforward process. Pick method of installation There are 2 supported methods: Using docker-compose . Fastest but runs on a single server. Using Helm . For deploying on Kubernetes clusters. Configure Cloudrock Tune Cloudrock configuration to match your deployment. Majority of the configuration is done on Metal side. Exact method of configuration depends on the chosen method of installation. Settings are grouped by modules, you can see all available ones in the configuration guide . The most typical aspects for configuration are: Configuring identity providers . Cloudrock supports a range of OIDC and SAML based IdPs. Adding offerings for sharing among Cloudrock users. Tip For easier management of Cloudrock deployments and configuration we provide Ansible playbooks . Profit You are done! If you are happy and want to support the project, make sure you check the support page . Danger Before going to production, make sure you have completed the go-live checklist .","title":"Getting started"},{"location":"getting-started/#getting-started","text":"Installing Cloudrock is a simple and straightforward process.","title":"Getting started"},{"location":"getting-started/#pick-method-of-installation","text":"There are 2 supported methods: Using docker-compose . Fastest but runs on a single server. Using Helm . For deploying on Kubernetes clusters.","title":"Pick method of installation"},{"location":"getting-started/#configure-cloudrock","text":"Tune Cloudrock configuration to match your deployment. Majority of the configuration is done on Metal side. Exact method of configuration depends on the chosen method of installation. Settings are grouped by modules, you can see all available ones in the configuration guide . The most typical aspects for configuration are: Configuring identity providers . Cloudrock supports a range of OIDC and SAML based IdPs. Adding offerings for sharing among Cloudrock users. Tip For easier management of Cloudrock deployments and configuration we provide Ansible playbooks .","title":"Configure Cloudrock"},{"location":"getting-started/#profit","text":"You are done! If you are happy and want to support the project, make sure you check the support page . Danger Before going to production, make sure you have completed the go-live checklist .","title":"Profit"},{"location":"API/","text":"API index Summary: Authentication User Organization Marketplace Reporting Accounting","title":"API index"},{"location":"API/#api-index","text":"Summary: Authentication User Organization Marketplace Reporting Accounting","title":"API index"},{"location":"API/accounting-api/","text":"Accounting SwaggerUIBundle({ url: 'accounting-docs.json', dom_id: '#swagger-ui', })","title":"Accounting"},{"location":"API/accounting-api/#accounting","text":"SwaggerUIBundle({ url: 'accounting-docs.json', dom_id: '#swagger-ui', })","title":"Accounting"},{"location":"API/authentication-api/","text":"Authentication SwaggerUIBundle({ url: 'authentication-docs.json', dom_id: '#swagger-ui', })","title":"Authentication"},{"location":"API/authentication-api/#authentication","text":"SwaggerUIBundle({ url: 'authentication-docs.json', dom_id: '#swagger-ui', })","title":"Authentication"},{"location":"API/marketplace-api/","text":"Marketplace SwaggerUIBundle({ url: 'marketplace-docs.json', dom_id: '#swagger-ui', })","title":"Marketplace"},{"location":"API/marketplace-api/#marketplace","text":"SwaggerUIBundle({ url: 'marketplace-docs.json', dom_id: '#swagger-ui', })","title":"Marketplace"},{"location":"API/organization-api/","text":"Organization SwaggerUIBundle({ url: 'organization-docs.json', dom_id: '#swagger-ui', })","title":"Organization"},{"location":"API/organization-api/#organization","text":"SwaggerUIBundle({ url: 'organization-docs.json', dom_id: '#swagger-ui', })","title":"Organization"},{"location":"API/reporting-api/","text":"Reporting SwaggerUIBundle({ url: 'reporting-docs.json', dom_id: '#swagger-ui', })","title":"Reporting"},{"location":"API/reporting-api/#reporting","text":"SwaggerUIBundle({ url: 'reporting-docs.json', dom_id: '#swagger-ui', })","title":"Reporting"},{"location":"API/user-api/","text":"User SwaggerUIBundle({ url: 'user-docs.json', dom_id: '#swagger-ui', })","title":"User"},{"location":"API/user-api/#user","text":"SwaggerUIBundle({ url: 'user-docs.json', dom_id: '#swagger-ui', })","title":"User"},{"location":"about/contributing/","text":"Contributing Cloudrock is an open project welcoming contributions. To assure the smooth acceptance of contributions please review the contribution guidelines below. Pull requests We welcome contributions (patches, new features, translations, etc) through pull requests. Please make sure that the following is addressed when making a pull request: a request has a clear scope - new feature, bugfix, refactoring. Granular pull requests make integration much faster; the code is following code conventions of the corresponding platform and linters / tests are passing; Localisation If you see a term, which needs to be translated better, please submit a fix via Localazy . License All contributions to Cloudrock can be accepted only you agree to license your contribution under the MIT license. Please make sure that you have the right to sign off code as MIT. Code repositories Repository Description Cloudrock-UI Code of Cloudrock Cloudrock-UI web interface Metal Code of Cloudrock Metal orchestrator Helm package Helm packaging of Cloudrock for Kubernetes Docker-compose Docker-compose packaging of Cloudrock Ansible module Ansible module for Cloudrock APIs","title":"Contributing"},{"location":"about/contributing/#contributing","text":"Cloudrock is an open project welcoming contributions. To assure the smooth acceptance of contributions please review the contribution guidelines below.","title":"Contributing"},{"location":"about/contributing/#pull-requests","text":"We welcome contributions (patches, new features, translations, etc) through pull requests. Please make sure that the following is addressed when making a pull request: a request has a clear scope - new feature, bugfix, refactoring. Granular pull requests make integration much faster; the code is following code conventions of the corresponding platform and linters / tests are passing;","title":"Pull requests"},{"location":"about/contributing/#localisation","text":"If you see a term, which needs to be translated better, please submit a fix via Localazy .","title":"Localisation"},{"location":"about/contributing/#license","text":"All contributions to Cloudrock can be accepted only you agree to license your contribution under the MIT license. Please make sure that you have the right to sign off code as MIT.","title":"License"},{"location":"about/contributing/#code-repositories","text":"Repository Description Cloudrock-UI Code of Cloudrock Cloudrock-UI web interface Metal Code of Cloudrock Metal orchestrator Helm package Helm packaging of Cloudrock for Kubernetes Docker-compose Docker-compose packaging of Cloudrock Ansible module Ansible module for Cloudrock APIs","title":"Code repositories"},{"location":"about/governance/","text":"Governance Cloudrock is a project developed primarily by CloudRock with contributions from different organizations. To make sure that the project is delivering a sound product, CloudRock maintains control over the authoritative source code and covers Product owner and Architect roles (see below). Cloudrock and all of its components are released under MIT license to be as friendly towards ecosystem as possible. Overview of the development process Cloudrock team tries to maintain a transparent process of development. In a team, each person can have one or more of the roles below. Roles Project manager - collects and provides requirements for a particular Cloudrock-based project. Multiple people can have this role. Product owner - analysis requirements from project managers and fits into a product roadmap. Maintains technical feature list. Single person at a time can have this role. Architect - oversees Cloudrock platform development, including backend, frontend, external tools. Has a final word on the way how components are integrated. Single person at a time can have this role. Developer - responsible for fulfilling tasks created. Multiple people can have this role. Workflow Project manager communicates with customers, defines requirements for product owner. Product owner analyses requirements from all projects and creates epics for technical features implementation. Epics are assigned to the architect. Architect defines general development plan for features from product owner, adds description to the epic and creates separate tasks or stories for component owners. Developers process tasks. Product owner releases tagged versions of the product once a certain amount of functionality or bugfixes went in.","title":"Governance"},{"location":"about/governance/#governance","text":"Cloudrock is a project developed primarily by CloudRock with contributions from different organizations. To make sure that the project is delivering a sound product, CloudRock maintains control over the authoritative source code and covers Product owner and Architect roles (see below). Cloudrock and all of its components are released under MIT license to be as friendly towards ecosystem as possible.","title":"Governance"},{"location":"about/governance/#overview-of-the-development-process","text":"Cloudrock team tries to maintain a transparent process of development. In a team, each person can have one or more of the roles below.","title":"Overview of the development process"},{"location":"about/governance/#roles","text":"Project manager - collects and provides requirements for a particular Cloudrock-based project. Multiple people can have this role. Product owner - analysis requirements from project managers and fits into a product roadmap. Maintains technical feature list. Single person at a time can have this role. Architect - oversees Cloudrock platform development, including backend, frontend, external tools. Has a final word on the way how components are integrated. Single person at a time can have this role. Developer - responsible for fulfilling tasks created. Multiple people can have this role.","title":"Roles"},{"location":"about/governance/#workflow","text":"Project manager communicates with customers, defines requirements for product owner. Product owner analyses requirements from all projects and creates epics for technical features implementation. Epics are assigned to the architect. Architect defines general development plan for features from product owner, adds description to the epic and creates separate tasks or stories for component owners. Developers process tasks. Product owner releases tagged versions of the product once a certain amount of functionality or bugfixes went in.","title":"Workflow"},{"location":"about/reporting-issues/","text":"Reporting issues No software is perfect and issues are to be expected. If you observe something that you think needs fixing, please provide issue report, which includes: From Cloudrock-UI : HAR request that has failed or that contains data required for rendering of the data. What is HAR Zendesk instructions for generating a HAR Box instructions for generating a HAR Screenshot of the error in a high enough resolution. From Metal : Latest metal logs that include stacktrace of the error, typically core.log and celery-celery.log . Warning Logs may contain sensitive data, please make sure that you either cleanup the data or share it with a trusted party before sharing the actual data.","title":"Reporting issues"},{"location":"about/reporting-issues/#reporting-issues","text":"No software is perfect and issues are to be expected. If you observe something that you think needs fixing, please provide issue report, which includes: From Cloudrock-UI : HAR request that has failed or that contains data required for rendering of the data. What is HAR Zendesk instructions for generating a HAR Box instructions for generating a HAR Screenshot of the error in a high enough resolution. From Metal : Latest metal logs that include stacktrace of the error, typically core.log and celery-celery.log . Warning Logs may contain sensitive data, please make sure that you either cleanup the data or share it with a trusted party before sharing the actual data.","title":"Reporting issues"},{"location":"about/roadmap/","text":"Roadmap Disclaimer This document is a living document and is used for planning. Plans for the unreleased features can change without further notice and hence cannot be used as a guaranteed delivery plan, the features can be delivered both earlier and later. Roadmap is created based on the backlog and requests from the existing users of Cloudrock. If you are interested in a specific topic, please reach out to us. Some of the tasks are common and some are functional, listed below. Continuous improvements Documentation There is no such thing as a perfect documentation so we are constantly working on improving it. CI/CD We believe that automation is a key to improving quality of code and happiness of developers, so we are constantly working on improving CI/CD related aspects. Tests A good software is a reliable software, so we are always trying to add more sensible tests. Functional The list below is based on the Epics maintained in Cloudrock's task manager. They are labelled with domains, which have requested them. Domains are: Generic - Common requirements, no extra label. Academia - originating from the research community; Commercial - originating from the commercial deployments; Government - originating from the public sector deployments. Open or in progress Code Description Domain WAL-4077 Integrate external quality metrics of Data repositories with Offerings WAL-4074 FAIR Offerings - background linking of offering PIDs with published articles Academia WAL-4073 FAIR-services - add reminders for users about referrals of consumed resources via PIDs Academia WAL-4072 Expose summaries of Offerings publicly Academia WAL-4000 Allow to limit visibility of Offering by service provider Academia Commercial WAL-3999 Support for customer credits Academia Commercial Government WAL-3997 Add common limit management support to Cloudrock-UI Academia Commercial WAL-3987 Extensions to SLURM module Academia WAL-3964 Implement consolidated approach for remote user accounts management in marketplace offerings Academia WAL-3963 Make order confirmation message a common functionality for all Marketplace Academia Government WAL-3951 Implement more fine grained storage of user name WAL-3943 Shared Openstack Tenant provider phase I Academia WAL-3934 Functionality specific to deployment of Cloudrock in Puhuri project as Core Academia WAL-3811 Improvements to feedback collection Government WAL-3805 Direct LDAP support for Linux identity Academia WAL-3793 Tasks related to simplification of the invoice model Government WAL-3788 Add ability to see popularity of an offering from the list WAL-3759 Add support of versioning for core objects Government WAL-3744 Add support for creating / managing projects and resources through API of external Cloudrock Academia WAL-3736 Allow protecting resources from accidental deletion Government WAL-3689 Expose list of connected VMs for each security group Government WAL-3626 Add ability to generate API docs for select endpoints Academia WAL-3625 Migrate from Issue types to Request types for Jira support backend Government WAL-3606 Introduce Organization level service manager role Government WAL-3596 Allow logins to Rancher via keycloak Academia Government WAL-3595 Expose port management for OpenStack tenant Government WAL-3589 Expose Sankey diagram with costs and Service providers Academia WAL-3585 Rancher access group management Academia Government WAL-3582 Allow editing of invoice data for staff users Government WAL-3563 Tasks related for getting Puhuri Core to work Academia WAL-3524 Add support for sending notifications to users Commercial WAL-3439 Add support for bookmarking offerings as favourites Academia WAL-3400 Tasks related to gitlab dev pipelines WAL-3339 Offerings (Reporting) WAL-3334 Introduce vault for storing secret configuration in Cloudrock WAL-3305 Chart for creating overview of existing organizations WAL-3285 \"Some of the services suggest purchasing of connected offerings To Do WAL-3272 Allow setting limit for the maximal size of the total volume type quota Academia WAL-3218 Payment profiles (Phase III) WAL-3205 UX stabilization (phase I) WAL-3195 Improvements to the request-based item UX WAL-3136 Marketplace Checklists (phase II) Commercial WAL-3135 Support for auto-scalability of Cloudrock running on K8S WAL-3103 Second phase of support for virtual routers in OpenStack. Academia Government WAL-3076 Extend current model with ability to attach VMs directly to external networks Academia Commercial WAL-3072 Support for operations on multiple objects Commercial WAL-3005 Followup tasks for payment profiles Government WAL-2991 Markeplace Scripts plugin phase I Academia Commercial WAL-2965 Enhancements to properly support virtual security gateway use-case Government WAL-2961 Tasks related to Kubernetes ON service development and operation Government WAL-2922 Tasks for exposing Offerings publicly Academia WAL-2921 Extending Organization extended payment options Government WAL-2920 Tasks related for extending Cloudrock with ability to assess compliancy of organizations WAL-2850 Extending Rancher to support Helm charts Government WAL-2843 Tasks related to building up monitoring for EOSC Academia WAL-2780 Integration of PID services with Cloudrock models Academia WAL-2776 A visual checklist for making sure that things are done for the project Government WAL-2749 Tasks connected to improving security of Cloudrock WAL-2748 Collection of tasks aimed at improving UX of Cloudrock WAL-2747 Operational tools for Cloudrock deployments WAL-2676 System for lightweight offering management WAL-2637 Support for creating Rancher clusters Academia WAL-2623 Introduce license support for OpenStack Commercial WAL-2519 Improvements to VMware plugin Commercial WAL-2401 Implement device booking feature Academia WAL-2134 Further developments of Marketplace WAL-1442 Enhancements to Cloudrock for service provider visibility Commercial WAL-1309 Implement backend and frontend support for managing JIRA as a provider and issues as resources WAL-1262 Efforts for getting Cloudrock into Redhat container store WAL-1212 Reanimate Zabbix plugin WAL-1056 IPv6 support for OpenStack provider Academia Commercial Government WAL-868 Refactor cost tracking WAL-842 On-demand demo environment from cloudrock.ca WAL-791 Stress testing & Profiling (vol 1) WAL-500 Cloudrock-specifics for ISKE H audit Government WAL-198 Resource retention management Academia Commercial Government WAL-44 Navigation FTS WAL-30 Quick alerts Finished or discarded Code Description Domain WAL-3998 Add i18n support WAL-3976 Allow setting end of life for project WAL-3850 Convert OrderItems and Invoices PDF to on-the-fly generation WAL-3833 Add an intro header to the personal dashboard WAL-3804 Slurm user list WAL-3710 Add support for tracking historical changes to important models WAL-3592 Expose measured units in invoice details WAL-3587 Render component usage as charts in cloudrock-ui WAL-3579 Support for description for Secgroup Rules WAL-3551 Extensions to request-based item offerings to support Puhuri cases WAL-3523 Add regular reminders for reviewing membership data of users WAL-3520 Add a minimal privilege project member role WAL-3497 Trello integration for feature requests WAL-3466 Support editing of organizations in cloudrock-ui WAL-3407 Extension of checklists to personalized ones WAL-3306 Growth chart shows changes over time of usage Academia WAL-3297 Financial overview improvements WAL-3294 Actions for setting up Cloudrock at VU WAL-3197 ITA PKI extension improvements WAL-3096 Add support for OpenStack Router Academia Government WAL-3022 Redesign of slurm module WAL-2989 Reports visible to support WAL-2967 Basic feature to track quality of handling of a ticket WAL-2666 Extending OpenStack integration with separate pricing for different volume types WAL-2646 Tickets related to extension of OpenStack driver WAL-2596 Drop OpenStack packages WAL-2590 Tasks related to VMware that are need additional analysis WAL-2491 VMware plugin WAL-2025 Tasks related to extension of Metal API for BDG SSP WAL-1988 Marketplace (3) WAL-1808 Cloudrock Marketplace (Phase 2) WAL-1640 Extension of ansible SDK with additional operations WAL-1568 Migrate tables to React WAL-1523 Cloudrock Marketplace (Phase I) WAL-1504 Implement basic support for Dutch government cloud in Cloudrock WAL-1402 Add support for MOAB provider WAL-1289 Add support for Jira attachments WAL-1288 Support view of users WAL-1286 Add support for LDAP-based authentication backends WAL-1255 Add support for Staff only VPC management WAL-1113 Paypal support WAL-1095 Basic Azure VM provider WAL-1060 Cloudrock goes to K8S WAL-1058 Resource import WAL-969 Expert provider extension WAL-962 Add organization self-registration WAL-925 Add eduGain support for authentication WAL-903 Improvements to invoice / accounting WAL-839 Miration to ES 5.x WAL-834 Migrate to Django 1.11 WAL-833 Create a PoC for Expert provider WAL-832 Ansible module for Cloudrock WAL-793 2nd phase of Grafana dashboards WAL-790 Add ability to set cost limit on organization WAL-751 Support for Ansible-playbooks as application providers WAL-730 Cloudrock Mission Control (central management for Cloudrocks) WAL-722 LDAP-based SSH access provider WAL-713 Add TaaT authentication provider to Cloudrock WAL-701 Notifications WAL-686 Add support for smartid.ee IdP WAL-604 Basic support mode WAL-597 /admin improvements WAL-596 Cloudrock-UI localization WAL-595 API Documentation WAL-568 Grafana dashbord (for operators) WAL-566 Predictive analysis for capacity planning (organization-view) WAL-511 Fixes for a broken network model WAL-479 Price estimation WAL-468 Admin and user guides (initial) WAL-463 Extended backup restoration WAL-462 Extend snapshot management WAL-461 Basic resource usage view WAL-454 R: Update django to 1.9. WAL-396 OpenStack providers pricing info WAL-323 Use neutron for network operations. WAL-297 Project policies WAL-289 Optimizer for IaaS resource selection WAL-287 Renaming of artifacts to Cloudrock WAL-270 OpenStack Tenant dashboard access WAL-262 OpenStack Tenant Network Management WAL-259 OpenStack Instance Access Management WAL-213 Basic policy support WAL-199 Provider details WAL-197 Customer support WAL-169 API Token management WAL-168 Extended membership management capabilities WAL-106 Refactoring: Update DRF version. WAL-88 Transactional event logs WAL-82 Controls for user profile updates WAL-79 Tenant Management WAL-77 Request-based Offerings WAL-76 Billing WAL-75 Audit log WAL-68 Cloudrock ServiceStore WAL-43 Cloudrock white-labelling WAL-42 Resource state display WAL-41 Registration WAL-17 Cloudrock Cloudrock-UI L&F WAL-15 Cloudrock web page WAL-9 OpenStack VM backup management WAL-8 OpenStack Storage management WAL-7 OpenStack Instance management WAL-6 Cloudrock Cloudrock-UI navigation WAL-4 VPC / OpenStack Tenant purchase WAL-3 Organization team management WAL-2 I want to be able to manage my SSH keys","title":"Roadmap"},{"location":"about/roadmap/#roadmap","text":"","title":"Roadmap"},{"location":"about/roadmap/#disclaimer","text":"This document is a living document and is used for planning. Plans for the unreleased features can change without further notice and hence cannot be used as a guaranteed delivery plan, the features can be delivered both earlier and later. Roadmap is created based on the backlog and requests from the existing users of Cloudrock. If you are interested in a specific topic, please reach out to us. Some of the tasks are common and some are functional, listed below.","title":"Disclaimer"},{"location":"about/roadmap/#continuous-improvements","text":"","title":"Continuous improvements"},{"location":"about/roadmap/#documentation","text":"There is no such thing as a perfect documentation so we are constantly working on improving it.","title":"Documentation"},{"location":"about/roadmap/#cicd","text":"We believe that automation is a key to improving quality of code and happiness of developers, so we are constantly working on improving CI/CD related aspects.","title":"CI/CD"},{"location":"about/roadmap/#tests","text":"A good software is a reliable software, so we are always trying to add more sensible tests.","title":"Tests"},{"location":"about/roadmap/#functional","text":"The list below is based on the Epics maintained in Cloudrock's task manager. They are labelled with domains, which have requested them. Domains are: Generic - Common requirements, no extra label. Academia - originating from the research community; Commercial - originating from the commercial deployments; Government - originating from the public sector deployments.","title":"Functional"},{"location":"about/roadmap/#open-or-in-progress","text":"Code Description Domain WAL-4077 Integrate external quality metrics of Data repositories with Offerings WAL-4074 FAIR Offerings - background linking of offering PIDs with published articles Academia WAL-4073 FAIR-services - add reminders for users about referrals of consumed resources via PIDs Academia WAL-4072 Expose summaries of Offerings publicly Academia WAL-4000 Allow to limit visibility of Offering by service provider Academia Commercial WAL-3999 Support for customer credits Academia Commercial Government WAL-3997 Add common limit management support to Cloudrock-UI Academia Commercial WAL-3987 Extensions to SLURM module Academia WAL-3964 Implement consolidated approach for remote user accounts management in marketplace offerings Academia WAL-3963 Make order confirmation message a common functionality for all Marketplace Academia Government WAL-3951 Implement more fine grained storage of user name WAL-3943 Shared Openstack Tenant provider phase I Academia WAL-3934 Functionality specific to deployment of Cloudrock in Puhuri project as Core Academia WAL-3811 Improvements to feedback collection Government WAL-3805 Direct LDAP support for Linux identity Academia WAL-3793 Tasks related to simplification of the invoice model Government WAL-3788 Add ability to see popularity of an offering from the list WAL-3759 Add support of versioning for core objects Government WAL-3744 Add support for creating / managing projects and resources through API of external Cloudrock Academia WAL-3736 Allow protecting resources from accidental deletion Government WAL-3689 Expose list of connected VMs for each security group Government WAL-3626 Add ability to generate API docs for select endpoints Academia WAL-3625 Migrate from Issue types to Request types for Jira support backend Government WAL-3606 Introduce Organization level service manager role Government WAL-3596 Allow logins to Rancher via keycloak Academia Government WAL-3595 Expose port management for OpenStack tenant Government WAL-3589 Expose Sankey diagram with costs and Service providers Academia WAL-3585 Rancher access group management Academia Government WAL-3582 Allow editing of invoice data for staff users Government WAL-3563 Tasks related for getting Puhuri Core to work Academia WAL-3524 Add support for sending notifications to users Commercial WAL-3439 Add support for bookmarking offerings as favourites Academia WAL-3400 Tasks related to gitlab dev pipelines WAL-3339 Offerings (Reporting) WAL-3334 Introduce vault for storing secret configuration in Cloudrock WAL-3305 Chart for creating overview of existing organizations WAL-3285 \"Some of the services suggest purchasing of connected offerings To Do WAL-3272 Allow setting limit for the maximal size of the total volume type quota Academia WAL-3218 Payment profiles (Phase III) WAL-3205 UX stabilization (phase I) WAL-3195 Improvements to the request-based item UX WAL-3136 Marketplace Checklists (phase II) Commercial WAL-3135 Support for auto-scalability of Cloudrock running on K8S WAL-3103 Second phase of support for virtual routers in OpenStack. Academia Government WAL-3076 Extend current model with ability to attach VMs directly to external networks Academia Commercial WAL-3072 Support for operations on multiple objects Commercial WAL-3005 Followup tasks for payment profiles Government WAL-2991 Markeplace Scripts plugin phase I Academia Commercial WAL-2965 Enhancements to properly support virtual security gateway use-case Government WAL-2961 Tasks related to Kubernetes ON service development and operation Government WAL-2922 Tasks for exposing Offerings publicly Academia WAL-2921 Extending Organization extended payment options Government WAL-2920 Tasks related for extending Cloudrock with ability to assess compliancy of organizations WAL-2850 Extending Rancher to support Helm charts Government WAL-2843 Tasks related to building up monitoring for EOSC Academia WAL-2780 Integration of PID services with Cloudrock models Academia WAL-2776 A visual checklist for making sure that things are done for the project Government WAL-2749 Tasks connected to improving security of Cloudrock WAL-2748 Collection of tasks aimed at improving UX of Cloudrock WAL-2747 Operational tools for Cloudrock deployments WAL-2676 System for lightweight offering management WAL-2637 Support for creating Rancher clusters Academia WAL-2623 Introduce license support for OpenStack Commercial WAL-2519 Improvements to VMware plugin Commercial WAL-2401 Implement device booking feature Academia WAL-2134 Further developments of Marketplace WAL-1442 Enhancements to Cloudrock for service provider visibility Commercial WAL-1309 Implement backend and frontend support for managing JIRA as a provider and issues as resources WAL-1262 Efforts for getting Cloudrock into Redhat container store WAL-1212 Reanimate Zabbix plugin WAL-1056 IPv6 support for OpenStack provider Academia Commercial Government WAL-868 Refactor cost tracking WAL-842 On-demand demo environment from cloudrock.ca WAL-791 Stress testing & Profiling (vol 1) WAL-500 Cloudrock-specifics for ISKE H audit Government WAL-198 Resource retention management Academia Commercial Government WAL-44 Navigation FTS WAL-30 Quick alerts","title":"Open or  in progress"},{"location":"about/roadmap/#finished-or-discarded","text":"Code Description Domain WAL-3998 Add i18n support WAL-3976 Allow setting end of life for project WAL-3850 Convert OrderItems and Invoices PDF to on-the-fly generation WAL-3833 Add an intro header to the personal dashboard WAL-3804 Slurm user list WAL-3710 Add support for tracking historical changes to important models WAL-3592 Expose measured units in invoice details WAL-3587 Render component usage as charts in cloudrock-ui WAL-3579 Support for description for Secgroup Rules WAL-3551 Extensions to request-based item offerings to support Puhuri cases WAL-3523 Add regular reminders for reviewing membership data of users WAL-3520 Add a minimal privilege project member role WAL-3497 Trello integration for feature requests WAL-3466 Support editing of organizations in cloudrock-ui WAL-3407 Extension of checklists to personalized ones WAL-3306 Growth chart shows changes over time of usage Academia WAL-3297 Financial overview improvements WAL-3294 Actions for setting up Cloudrock at VU WAL-3197 ITA PKI extension improvements WAL-3096 Add support for OpenStack Router Academia Government WAL-3022 Redesign of slurm module WAL-2989 Reports visible to support WAL-2967 Basic feature to track quality of handling of a ticket WAL-2666 Extending OpenStack integration with separate pricing for different volume types WAL-2646 Tickets related to extension of OpenStack driver WAL-2596 Drop OpenStack packages WAL-2590 Tasks related to VMware that are need additional analysis WAL-2491 VMware plugin WAL-2025 Tasks related to extension of Metal API for BDG SSP WAL-1988 Marketplace (3) WAL-1808 Cloudrock Marketplace (Phase 2) WAL-1640 Extension of ansible SDK with additional operations WAL-1568 Migrate tables to React WAL-1523 Cloudrock Marketplace (Phase I) WAL-1504 Implement basic support for Dutch government cloud in Cloudrock WAL-1402 Add support for MOAB provider WAL-1289 Add support for Jira attachments WAL-1288 Support view of users WAL-1286 Add support for LDAP-based authentication backends WAL-1255 Add support for Staff only VPC management WAL-1113 Paypal support WAL-1095 Basic Azure VM provider WAL-1060 Cloudrock goes to K8S WAL-1058 Resource import WAL-969 Expert provider extension WAL-962 Add organization self-registration WAL-925 Add eduGain support for authentication WAL-903 Improvements to invoice / accounting WAL-839 Miration to ES 5.x WAL-834 Migrate to Django 1.11 WAL-833 Create a PoC for Expert provider WAL-832 Ansible module for Cloudrock WAL-793 2nd phase of Grafana dashboards WAL-790 Add ability to set cost limit on organization WAL-751 Support for Ansible-playbooks as application providers WAL-730 Cloudrock Mission Control (central management for Cloudrocks) WAL-722 LDAP-based SSH access provider WAL-713 Add TaaT authentication provider to Cloudrock WAL-701 Notifications WAL-686 Add support for smartid.ee IdP WAL-604 Basic support mode WAL-597 /admin improvements WAL-596 Cloudrock-UI localization WAL-595 API Documentation WAL-568 Grafana dashbord (for operators) WAL-566 Predictive analysis for capacity planning (organization-view) WAL-511 Fixes for a broken network model WAL-479 Price estimation WAL-468 Admin and user guides (initial) WAL-463 Extended backup restoration WAL-462 Extend snapshot management WAL-461 Basic resource usage view WAL-454 R: Update django to 1.9. WAL-396 OpenStack providers pricing info WAL-323 Use neutron for network operations. WAL-297 Project policies WAL-289 Optimizer for IaaS resource selection WAL-287 Renaming of artifacts to Cloudrock WAL-270 OpenStack Tenant dashboard access WAL-262 OpenStack Tenant Network Management WAL-259 OpenStack Instance Access Management WAL-213 Basic policy support WAL-199 Provider details WAL-197 Customer support WAL-169 API Token management WAL-168 Extended membership management capabilities WAL-106 Refactoring: Update DRF version. WAL-88 Transactional event logs WAL-82 Controls for user profile updates WAL-79 Tenant Management WAL-77 Request-based Offerings WAL-76 Billing WAL-75 Audit log WAL-68 Cloudrock ServiceStore WAL-43 Cloudrock white-labelling WAL-42 Resource state display WAL-41 Registration WAL-17 Cloudrock Cloudrock-UI L&F WAL-15 Cloudrock web page WAL-9 OpenStack VM backup management WAL-8 OpenStack Storage management WAL-7 OpenStack Instance management WAL-6 Cloudrock Cloudrock-UI navigation WAL-4 VPC / OpenStack Tenant purchase WAL-3 Organization team management WAL-2 I want to be able to manage my SSH keys","title":"Finished or discarded"},{"location":"about/screenshots/","text":"Screenshots Login page Organization workspace Project workspace Support workspace Marketplace","title":"Screenshots"},{"location":"about/screenshots/#screenshots","text":"","title":"Screenshots"},{"location":"about/screenshots/#login-page","text":"","title":"Login page"},{"location":"about/screenshots/#organization-workspace","text":"","title":"Organization workspace"},{"location":"about/screenshots/#project-workspace","text":"","title":"Project workspace"},{"location":"about/screenshots/#support-workspace","text":"","title":"Support workspace"},{"location":"about/screenshots/#marketplace","text":"","title":"Marketplace"},{"location":"about/support/","text":"Support Cloudrock is an open-source project co-developed by CloudRock and Moose Lodge . Support and sponsored development CloudRock provides several options for support with varying SLAs. If you would like to know more, reach out ! Managed hosting for academical institutions Please reach out to support@cloudrock.ca if you represent an R&D organization and interested in managed Cloudrock hosting.","title":"Support"},{"location":"about/support/#support","text":"Cloudrock is an open-source project co-developed by CloudRock and Moose Lodge .","title":"Support"},{"location":"about/support/#support-and-sponsored-development","text":"CloudRock provides several options for support with varying SLAs. If you would like to know more, reach out !","title":"Support and sponsored development"},{"location":"about/support/#managed-hosting-for-academical-institutions","text":"Please reach out to support@cloudrock.ca if you represent an R&D organization and interested in managed Cloudrock hosting.","title":"Managed hosting for academical institutions"},{"location":"admin-guide/architecture/","text":"Architecture Cloudrock is composed of a several components. Cloudrock-UI (web client, graphical interface) - React application Metal API server - Django/Django REST Framework application implementing the core business logic Celery workers - Background processing of tasks Celery beat - Scheduling of periodic tasks for background processing PostgreSQL database - Storing persistent data, also serves as Celery result store in Kubernetes deployment Redis - Tasks queue and result store for Celery (Docker Compose deployment only) RabbitMQ - Tasks queue and result store for Celery (Kubernetes deployment only)","title":"Architecture"},{"location":"admin-guide/architecture/#architecture","text":"Cloudrock is composed of a several components. Cloudrock-UI (web client, graphical interface) - React application Metal API server - Django/Django REST Framework application implementing the core business logic Celery workers - Background processing of tasks Celery beat - Scheduling of periodic tasks for background processing PostgreSQL database - Storing persistent data, also serves as Celery result store in Kubernetes deployment Redis - Tasks queue and result store for Celery (Docker Compose deployment only) RabbitMQ - Tasks queue and result store for Celery (Kubernetes deployment only)","title":"Architecture"},{"location":"admin-guide/backups/","text":"Backups Cloudrock keeps state in 2 components: Database - main persistency layer. Message queue - contains transient data mostly about scheduled jobs and cache. Of these, only database needs to be backed up. A typical approach to a backup is: 1. Create a DB dump An entire db dump 1 docker exec -t cloudrock-db pg_dump -U cloudrock cloudrock | gzip -9 > cloudrock- $( date + '%Y%m%dT%H%M%S' ) .sql.gz An entire db dump with cleanup commands: 1 docker exec -t cloudrock-db pg_dump --clean -U cloudrock cloudrock | gzip -9 > cloudrock- $( date + '%Y%m%dT%H%M%S' ) .sql.gz A db dump containing only data 1 docker exec -t cloudrock-db pg_dump -a -U cloudrock cloudrock | gzip -9 > cloudrock- $( date + '%Y%m%dT%H%M%S' ) .sql.gz 2. Copy backup to a remote location Using rsync / scp or more specialised tools. 3. Restore the created backup 1 cat cloudrock-backup.sql | docker exec -i cloudrock-db psql -U cloudrock We suggest to make sure that backups are running regularly, e.g. using cron.","title":"Backups"},{"location":"admin-guide/backups/#backups","text":"Cloudrock keeps state in 2 components: Database - main persistency layer. Message queue - contains transient data mostly about scheduled jobs and cache. Of these, only database needs to be backed up. A typical approach to a backup is:","title":"Backups"},{"location":"admin-guide/backups/#1-create-a-db-dump","text":"An entire db dump 1 docker exec -t cloudrock-db pg_dump -U cloudrock cloudrock | gzip -9 > cloudrock- $( date + '%Y%m%dT%H%M%S' ) .sql.gz An entire db dump with cleanup commands: 1 docker exec -t cloudrock-db pg_dump --clean -U cloudrock cloudrock | gzip -9 > cloudrock- $( date + '%Y%m%dT%H%M%S' ) .sql.gz A db dump containing only data 1 docker exec -t cloudrock-db pg_dump -a -U cloudrock cloudrock | gzip -9 > cloudrock- $( date + '%Y%m%dT%H%M%S' ) .sql.gz","title":"1. Create a DB dump"},{"location":"admin-guide/backups/#2-copy-backup-to-a-remote-location","text":"Using rsync / scp or more specialised tools.","title":"2. Copy backup to a remote location"},{"location":"admin-guide/backups/#3-restore-the-created-backup","text":"1 cat cloudrock-backup.sql | docker exec -i cloudrock-db psql -U cloudrock We suggest to make sure that backups are running regularly, e.g. using cron.","title":"3. Restore the created backup"},{"location":"admin-guide/checklist-for-production/","text":"Checklist for Go live General Make sure that privacy policy and terms of use are updated to the site specific ones. Make sure that SMTP server and outgoing email address are configured and emails are sent out. Reboot test: restart all the nodes where Cloudrock components are running, application should recover automatically. Security Remove or disable default staff accounts. Generate a new random secret key. Backups Make sure that configuration of Cloudrock is backed up and versioned. Assure that DB backups are performed, i.e. backups are created when manually triggering Assure that DB backups files are on a persistent storage, preferably outside the storage used for Cloudrock's database. Air-gapped deployments Make sure that Cloudrock docker images are mirrored to a local registry.","title":"Checklist for Go live"},{"location":"admin-guide/checklist-for-production/#checklist-for-go-live","text":"","title":"Checklist for Go live"},{"location":"admin-guide/checklist-for-production/#general","text":"Make sure that privacy policy and terms of use are updated to the site specific ones. Make sure that SMTP server and outgoing email address are configured and emails are sent out. Reboot test: restart all the nodes where Cloudrock components are running, application should recover automatically.","title":"General"},{"location":"admin-guide/checklist-for-production/#security","text":"Remove or disable default staff accounts. Generate a new random secret key.","title":"Security"},{"location":"admin-guide/checklist-for-production/#backups","text":"Make sure that configuration of Cloudrock is backed up and versioned. Assure that DB backups are performed, i.e. backups are created when manually triggering Assure that DB backups files are on a persistent storage, preferably outside the storage used for Cloudrock's database.","title":"Backups"},{"location":"admin-guide/checklist-for-production/#air-gapped-deployments","text":"Make sure that Cloudrock docker images are mirrored to a local registry.","title":"Air-gapped deployments"},{"location":"admin-guide/cookie-policy/","text":"Cookie policy Cloudrock can save data about the user in a browser. Data type and policy depends on the component. Cloudrock-UI Saving of the latest view point of the user. Saving redirect information, i.e. where to forward from a certain state. Saving which authentication method was used by user for logging in. Saving user session token. Saving user language preference. Metal Saving authentication token (cookie) when a user logs into /admin management interface.","title":"Cookie policy"},{"location":"admin-guide/cookie-policy/#cookie-policy","text":"Cloudrock can save data about the user in a browser. Data type and policy depends on the component.","title":"Cookie policy"},{"location":"admin-guide/cookie-policy/#cloudrock-ui","text":"Saving of the latest view point of the user. Saving redirect information, i.e. where to forward from a certain state. Saving which authentication method was used by user for logging in. Saving user session token. Saving user language preference.","title":"Cloudrock-UI"},{"location":"admin-guide/cookie-policy/#metal","text":"Saving authentication token (cookie) when a user logs into /admin management interface.","title":"Metal"},{"location":"admin-guide/grafana/","text":"Grafana and Prometheus Metrics Export Cloudrock metrics with cloudrock-prometheus-exporter Import grafana dashboard json into Grafana","title":"Grafana and Prometheus Metrics"},{"location":"admin-guide/grafana/#grafana-and-prometheus-metrics","text":"Export Cloudrock metrics with cloudrock-prometheus-exporter Import grafana dashboard json into Grafana","title":"Grafana and Prometheus Metrics"},{"location":"admin-guide/hardware-requirements/","text":"Hardware requirements Docker-compose deployment (on a single server) Docker version: 1.13+ Minimal configuration: 4 vCPU, 8 GB RAM Helm-based deployment Kubernetes version: 1.18+ Minimal namespace limits: TODO Component specific requirements Cloudrock Metal (API) By default 4 uWSGI processes are started. Minimum requirements: 1 CPU, 1GB RAM for every node Recommended setup: 2 CPU or more, 2 GB RAM or more Cloudrock Metal (Celery worker) By default a single worker with 10 threads is started. Minimum requirements: 2 CPU, 1 GB RAM Recommended setup: 4 CPU or more, 8 GB RAM or more More memory should be added if more Celery worker processes are running on the same host (512 MB for each 4 Celery workers). Cloudrock Metal (Celery beat) A single Celery beat process is started. Minimum and recommended requirements: 1 CPU, 1 GB RAM PostgreSQL Minimum requirements: 1 CPU, 1 GB RAM Recommended setup: 2 CPU or more, 2 GB RAM or more Redis Minimum requirements: 1 CPU, 512 MB RAM Recommended setup: 2 CPU or more, 1 GB RAM or more Cloudrock Cloudrock-UI (Nginx) Minimum and recommended requirements: 1 CPU and 512MB RAM","title":"Hardware requirements"},{"location":"admin-guide/hardware-requirements/#hardware-requirements","text":"","title":"Hardware requirements"},{"location":"admin-guide/hardware-requirements/#docker-compose-deployment-on-a-single-server","text":"Docker version: 1.13+ Minimal configuration: 4 vCPU, 8 GB RAM","title":"Docker-compose deployment (on a single server)"},{"location":"admin-guide/hardware-requirements/#helm-based-deployment","text":"Kubernetes version: 1.18+ Minimal namespace limits: TODO","title":"Helm-based deployment"},{"location":"admin-guide/hardware-requirements/#component-specific-requirements","text":"","title":"Component specific requirements"},{"location":"admin-guide/hardware-requirements/#cloudrock-metal-api","text":"By default 4 uWSGI processes are started. Minimum requirements: 1 CPU, 1GB RAM for every node Recommended setup: 2 CPU or more, 2 GB RAM or more","title":"Cloudrock Metal (API)"},{"location":"admin-guide/hardware-requirements/#cloudrock-metal-celery-worker","text":"By default a single worker with 10 threads is started. Minimum requirements: 2 CPU, 1 GB RAM Recommended setup: 4 CPU or more, 8 GB RAM or more More memory should be added if more Celery worker processes are running on the same host (512 MB for each 4 Celery workers).","title":"Cloudrock Metal (Celery worker)"},{"location":"admin-guide/hardware-requirements/#cloudrock-metal-celery-beat","text":"A single Celery beat process is started. Minimum and recommended requirements: 1 CPU, 1 GB RAM","title":"Cloudrock Metal (Celery beat)"},{"location":"admin-guide/hardware-requirements/#postgresql","text":"Minimum requirements: 1 CPU, 1 GB RAM Recommended setup: 2 CPU or more, 2 GB RAM or more","title":"PostgreSQL"},{"location":"admin-guide/hardware-requirements/#redis","text":"Minimum requirements: 1 CPU, 512 MB RAM Recommended setup: 2 CPU or more, 1 GB RAM or more","title":"Redis"},{"location":"admin-guide/hardware-requirements/#cloudrock-cloudrock-ui-nginx","text":"Minimum and recommended requirements: 1 CPU and 512MB RAM","title":"Cloudrock Cloudrock-UI (Nginx)"},{"location":"admin-guide/managing-with-ansible/","text":"Managing Cloudrock with Ansible NB! Repository with Ansible playbooks for Cloudrock management is not open-sourced. It is available to Cloudrock users that have purchased support packages. Compatibility Ansible version 2.9 is supported; code in this repository may work with other Ansible versions but it is not guaranteed. Quick setup Make sure that you have: Folder containing managed-ansible Ansible installer (this one). Folder containing deployment-specific settings. Copy setup_deployment.sh.example to setup_deployment.sh , adjust: INSTALLER_PATH - full path to current folder DEPLOYMENT_CONFIG_PATH - full path to folder with deployment-specific information DEPLOYMENT_IDS - list of deployment IDs you want to manage. Run ./setup_deployment.sh. This will create required symlinks. Run ansible-playbook -DC <deployment_id.yml> to check what installer will do. Run ansible-playbook -D <deployment_id.yml> to apply the installer. Upgrading installer Download a new archive into a separate folder and unpack. Check what has changed: rsync --dry-run -avzh unpacked-folder-eg-ansible-3.2.3/ /path/to/installer/ Do the upgrade: rsync -avzh unpacked-folder-eg-ansible-3.2.3/ /path/to/installer/ Upgrading Cloudrock Upgrading Cloudrock to a new version is achieved by following the checklist: Update deployment-specific variables for the new version in groups_vars/<deployment_id>/vars and groups_vars/<deployment_id>/vault (if setting is private). Update target version in groups_vars/<deployment_id>/vars : set cloudrock_cloudrock-ui_version and cloudrock_metal_version to a new version of the Cloudrock release. Run ansible-playbook -DC <deployment_id.yml> to check what installer will do during the upgrade. Run ansible-playbook -D <deployment_id.yml> to perform an upgrade. Add new deployment Infrastructure: Prepare servers matching requirements . Make sure you can access them by SSH by running only ssh <host> . Otherwise you should tweak ~/.ssh/config file or describe connectivity in the Ansible inventory. Ansible (this repository): Add new deployment-specific host group to hosts file (example: [foo] ); add hosts to this group. Add hosts to Cloudrock role groups in hosts file. Add variable files for new deployment: group_vars/foo/vars and group_vars/foo/vault Add deployment specific information under deployments folder. Copy existing playbook that is the closest match for a new deployment; modify as needed Run Ansible playbook to set up deployment: ansible-playbook -D foo.yml Remove deployment Ansible (this repository): Delete deployment-specific playbook, roles, tasks, templates etc. Delete variable files: rm -rf group_vars/foo Delete deployment-specific host group and all deployment-specific hosts from hosts file (example: [foo] ) Managing Cloudrock deployed as Helm Requirements: Installed and running kubernetes system on a node (e. g. minikube) Installed kubectl on the node Place all configuration files for release in next manner: values.yaml -> roles/cloudrock_helm/files/cloudrock_helm/cloudrock/ values.yaml -> roles/cloudrock_helm/files/cloudrock_helm/cloudrock/ Files related to TLS -> deployments/<deployment_id>/tls/ Files related to white-labeling -> deployments/<deployment_id>/whitelabeling/ Files related to metal templates -> deployments/<deployment_id>/metal_templates/ Files related to stress testing -> deployments/<deployment_id>/locust_tasks/ Files related to SAML2 -> deployments/<deployment_id>/cloudrock_saml2/ More configuration info: TLS White-labeling Metal templates","title":"Managing Cloudrock with Ansible"},{"location":"admin-guide/managing-with-ansible/#managing-cloudrock-with-ansible","text":"NB! Repository with Ansible playbooks for Cloudrock management is not open-sourced. It is available to Cloudrock users that have purchased support packages.","title":"Managing Cloudrock with Ansible"},{"location":"admin-guide/managing-with-ansible/#compatibility","text":"Ansible version 2.9 is supported; code in this repository may work with other Ansible versions but it is not guaranteed.","title":"Compatibility"},{"location":"admin-guide/managing-with-ansible/#quick-setup","text":"Make sure that you have: Folder containing managed-ansible Ansible installer (this one). Folder containing deployment-specific settings. Copy setup_deployment.sh.example to setup_deployment.sh , adjust: INSTALLER_PATH - full path to current folder DEPLOYMENT_CONFIG_PATH - full path to folder with deployment-specific information DEPLOYMENT_IDS - list of deployment IDs you want to manage. Run ./setup_deployment.sh. This will create required symlinks. Run ansible-playbook -DC <deployment_id.yml> to check what installer will do. Run ansible-playbook -D <deployment_id.yml> to apply the installer.","title":"Quick setup"},{"location":"admin-guide/managing-with-ansible/#upgrading-installer","text":"Download a new archive into a separate folder and unpack. Check what has changed: rsync --dry-run -avzh unpacked-folder-eg-ansible-3.2.3/ /path/to/installer/ Do the upgrade: rsync -avzh unpacked-folder-eg-ansible-3.2.3/ /path/to/installer/","title":"Upgrading installer"},{"location":"admin-guide/managing-with-ansible/#upgrading-cloudrock","text":"Upgrading Cloudrock to a new version is achieved by following the checklist: Update deployment-specific variables for the new version in groups_vars/<deployment_id>/vars and groups_vars/<deployment_id>/vault (if setting is private). Update target version in groups_vars/<deployment_id>/vars : set cloudrock_cloudrock-ui_version and cloudrock_metal_version to a new version of the Cloudrock release. Run ansible-playbook -DC <deployment_id.yml> to check what installer will do during the upgrade. Run ansible-playbook -D <deployment_id.yml> to perform an upgrade.","title":"Upgrading Cloudrock"},{"location":"admin-guide/managing-with-ansible/#add-new-deployment","text":"Infrastructure: Prepare servers matching requirements . Make sure you can access them by SSH by running only ssh <host> . Otherwise you should tweak ~/.ssh/config file or describe connectivity in the Ansible inventory. Ansible (this repository): Add new deployment-specific host group to hosts file (example: [foo] ); add hosts to this group. Add hosts to Cloudrock role groups in hosts file. Add variable files for new deployment: group_vars/foo/vars and group_vars/foo/vault Add deployment specific information under deployments folder. Copy existing playbook that is the closest match for a new deployment; modify as needed Run Ansible playbook to set up deployment: ansible-playbook -D foo.yml","title":"Add new deployment"},{"location":"admin-guide/managing-with-ansible/#remove-deployment","text":"Ansible (this repository): Delete deployment-specific playbook, roles, tasks, templates etc. Delete variable files: rm -rf group_vars/foo Delete deployment-specific host group and all deployment-specific hosts from hosts file (example: [foo] )","title":"Remove deployment"},{"location":"admin-guide/managing-with-ansible/#managing-cloudrock-deployed-as-helm","text":"Requirements: Installed and running kubernetes system on a node (e. g. minikube) Installed kubectl on the node Place all configuration files for release in next manner: values.yaml -> roles/cloudrock_helm/files/cloudrock_helm/cloudrock/ values.yaml -> roles/cloudrock_helm/files/cloudrock_helm/cloudrock/ Files related to TLS -> deployments/<deployment_id>/tls/ Files related to white-labeling -> deployments/<deployment_id>/whitelabeling/ Files related to metal templates -> deployments/<deployment_id>/metal_templates/ Files related to stress testing -> deployments/<deployment_id>/locust_tasks/ Files related to SAML2 -> deployments/<deployment_id>/cloudrock_saml2/ More configuration info: TLS White-labeling Metal templates","title":"Managing Cloudrock deployed as Helm"},{"location":"admin-guide/cloudrock-shell/","text":"Cloudrock Shell Cloudrock provides a shell for command line scripting. To start a shell, run cloudrock shell in the Metal context. For docker-compose deployments, please run: docker exec -it cloudrock-metal-api cloudrock shell For Helm-based K8s deployments, please run: kubectl exec --stdin --tty cloudrock-metal-worker-POD-ID -- cloudrock shell Examples Creating a new user with token only authentication 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 from rest_framework.authtoken.models import Token from cloudrock_core.core.models import User user = User . objects . create ( username = \"example_accounting_user\" , first_name = \"Accounting\" , last_name = \"Reporter\" , email = \"test@example.com\" , ) user . token_lifetime = None user . set_unusable_password () user . save () token = Token . objects . get ( user = user ) print ( token ) Triggering pulling of usage data from remote Cloudrock 1 2 3 from cloudrock_metal.marketplace_remote.tasks import UsageListPullTask UsageListPullTask () . run () Apply changes in Cloudrock HPC plugin to existing users 1 2 3 4 5 from cloudrock_core.core import models as core_models from cloudrock_hpc.handlers import handle_new_user for user in core_models . User . objects . filter ( is_active = True , registration_method__iexact = 'saml2' ): handle_new_user ( None , user , created = True ) Cleanup leftover ports from OpenStack Project Lookup UUID of an OpenStack tenant (aka backend_id in Cloudrock). 1 2 3 4 5 6 7 8 9 10 11 12 from cloudrock_openstack.openstack.models import Tenant t_uuid = 'UUID_OF_TENANT' t = Tenant . objects . get ( backend_id = t_uuid ) nc = t . get_backend () . neutron_client all_ports = nc . list_ports ()[ 'ports' ] tenant_ports = [ port for port in all_ports if port [ 'tenant_id' ] == t_uuid and port . get ( 'status' ) == 'DOWN' ] for t in tenant_ports : print ( t [ 'id' ], t [ 'fixed_ips' ][ 0 ][ 'ip_address' ]) nc . delete_port ( t [ 'id' ]) Add affiliations to user 1 2 3 4 5 from cloudrock_core.core import models as core_models user = core_models . User . objects . get ( email = 'some.email@abc.example.com' ) user . affiliations = [ 'some.affiliation@domain.example.com' ] user . save () Create a service user for API access To create a service user - without valid access credntials and non-expiring Token, please run the following script. 1 2 3 4 5 6 7 8 9 10 11 from cloudrock_core.core.models import User u = User . objects . create ( username = 'cloudrock_demo_user' , first_name = 'Demo' , last_name = 'Cloudrock user' , email = 'demo@example.com' ) # make sure that token doesn't time out u . token_lifetime = None u . save () # print user authentication token print ( u . auth_token . key ) Synchronise SLURM associations Note : <allocation-uuid> field can be found in an allocations's details page. Select Organization -> Select project -> Select allocation -> Find 'UUID' field in the page. 1 2 3 4 5 6 7 8 from cloudrock_slurm import models as slurm_models allocation = slurm_models . Allocation . objects . get ( uuid = '<allocation-uuid>' ) backend = allocation . get_backend () backend . add_new_users ( allocation ) # Creates associations on SLURM level backend . pull_allocation ( allocation ) # Sync associations on Cloudrock level Lookup user details from Eduteams Note : USER_CUID is a unique ID of user in Eduteams. 1 2 3 4 5 from cloudrock_auth_social.utils import get_remote_eduteams_user_info USER_CUID = 'semi_secret@eduteams.org' get_remote_eduteams_user_info ( USER_CUID ) Generate report for list of projects and their details 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 import sys import csv from cloudrock_core.structure import models as structure_models projects = structure_models . Project . objects . filter ( created__lte = '2022-05-31' ) writer = csv . writer ( sys . stdout ) for project in projects : owner = project . customer . get_owners () . first () writer . writerow ( [ project . name , owner and owner . full_name , project . oecd_fos_2007_code , project . customer . country , ] )","title":"Cloudrock Shell"},{"location":"admin-guide/cloudrock-shell/#cloudrock-shell","text":"Cloudrock provides a shell for command line scripting. To start a shell, run cloudrock shell in the Metal context. For docker-compose deployments, please run: docker exec -it cloudrock-metal-api cloudrock shell For Helm-based K8s deployments, please run: kubectl exec --stdin --tty cloudrock-metal-worker-POD-ID -- cloudrock shell","title":"Cloudrock Shell"},{"location":"admin-guide/cloudrock-shell/#examples","text":"","title":"Examples"},{"location":"admin-guide/cloudrock-shell/#creating-a-new-user-with-token-only-authentication","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 from rest_framework.authtoken.models import Token from cloudrock_core.core.models import User user = User . objects . create ( username = \"example_accounting_user\" , first_name = \"Accounting\" , last_name = \"Reporter\" , email = \"test@example.com\" , ) user . token_lifetime = None user . set_unusable_password () user . save () token = Token . objects . get ( user = user ) print ( token )","title":"Creating a new user with token only authentication"},{"location":"admin-guide/cloudrock-shell/#triggering-pulling-of-usage-data-from-remote-cloudrock","text":"1 2 3 from cloudrock_metal.marketplace_remote.tasks import UsageListPullTask UsageListPullTask () . run ()","title":"Triggering pulling of usage data from remote Cloudrock"},{"location":"admin-guide/cloudrock-shell/#apply-changes-in-cloudrock-hpc-plugin-to-existing-users","text":"1 2 3 4 5 from cloudrock_core.core import models as core_models from cloudrock_hpc.handlers import handle_new_user for user in core_models . User . objects . filter ( is_active = True , registration_method__iexact = 'saml2' ): handle_new_user ( None , user , created = True )","title":"Apply changes in Cloudrock HPC plugin to existing users"},{"location":"admin-guide/cloudrock-shell/#cleanup-leftover-ports-from-openstack-project","text":"Lookup UUID of an OpenStack tenant (aka backend_id in Cloudrock). 1 2 3 4 5 6 7 8 9 10 11 12 from cloudrock_openstack.openstack.models import Tenant t_uuid = 'UUID_OF_TENANT' t = Tenant . objects . get ( backend_id = t_uuid ) nc = t . get_backend () . neutron_client all_ports = nc . list_ports ()[ 'ports' ] tenant_ports = [ port for port in all_ports if port [ 'tenant_id' ] == t_uuid and port . get ( 'status' ) == 'DOWN' ] for t in tenant_ports : print ( t [ 'id' ], t [ 'fixed_ips' ][ 0 ][ 'ip_address' ]) nc . delete_port ( t [ 'id' ])","title":"Cleanup leftover ports from OpenStack Project"},{"location":"admin-guide/cloudrock-shell/#add-affiliations-to-user","text":"1 2 3 4 5 from cloudrock_core.core import models as core_models user = core_models . User . objects . get ( email = 'some.email@abc.example.com' ) user . affiliations = [ 'some.affiliation@domain.example.com' ] user . save ()","title":"Add affiliations to user"},{"location":"admin-guide/cloudrock-shell/#create-a-service-user-for-api-access","text":"To create a service user - without valid access credntials and non-expiring Token, please run the following script. 1 2 3 4 5 6 7 8 9 10 11 from cloudrock_core.core.models import User u = User . objects . create ( username = 'cloudrock_demo_user' , first_name = 'Demo' , last_name = 'Cloudrock user' , email = 'demo@example.com' ) # make sure that token doesn't time out u . token_lifetime = None u . save () # print user authentication token print ( u . auth_token . key )","title":"Create a service user for API access"},{"location":"admin-guide/cloudrock-shell/#synchronise-slurm-associations","text":"Note : <allocation-uuid> field can be found in an allocations's details page. Select Organization -> Select project -> Select allocation -> Find 'UUID' field in the page. 1 2 3 4 5 6 7 8 from cloudrock_slurm import models as slurm_models allocation = slurm_models . Allocation . objects . get ( uuid = '<allocation-uuid>' ) backend = allocation . get_backend () backend . add_new_users ( allocation ) # Creates associations on SLURM level backend . pull_allocation ( allocation ) # Sync associations on Cloudrock level","title":"Synchronise SLURM associations"},{"location":"admin-guide/cloudrock-shell/#lookup-user-details-from-eduteams","text":"Note : USER_CUID is a unique ID of user in Eduteams. 1 2 3 4 5 from cloudrock_auth_social.utils import get_remote_eduteams_user_info USER_CUID = 'semi_secret@eduteams.org' get_remote_eduteams_user_info ( USER_CUID )","title":"Lookup user details from Eduteams"},{"location":"admin-guide/cloudrock-shell/#generate-report-for-list-of-projects-and-their-details","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 import sys import csv from cloudrock_core.structure import models as structure_models projects = structure_models . Project . objects . filter ( created__lte = '2022-05-31' ) writer = csv . writer ( sys . stdout ) for project in projects : owner = project . customer . get_owners () . first () writer . writerow ( [ project . name , owner and owner . full_name , project . oecd_fos_2007_code , project . customer . country , ] )","title":"Generate report for list of projects and their details"},{"location":"admin-guide/deployment/docker-compose/","text":"Cloudrock Docker-compose deployment Prerequisites at least 8GB RAM on Docker Host to run all containers Docker v1.13+ Prepare environment 1 2 3 4 5 # clone repo git clone https://github.com/kubeworkz/cloudrock-docker-compose.git cd cloudrock-docker-compose # setup settings cp .env.example .env Booting up 1 2 3 4 5 6 7 8 9 10 11 12 # start containers docker-compose up -d # verify docker-compose ps docker exec -t cloudrock-metal-worker status # Create user docker exec -t cloudrock-metal-worker cloudrock createstaffuser -u admin -p password -e admin@example.com # Create demo categories for OpenStack: Virtual Private Cloud, VMs and Storage docker exec -t cloudrock-metal-worker cloudrock load_categories vpc vm storage Cloudrock Cloudrock-UI will be accessible on http://localhost . API will listen on http://localhost/api . Healthcheck can be accessed on http://localhost/health-check . Tearing down and cleaning up: 1 docker-compose down Logs Logs emitted by the containers are collected and saved in the cloudrock_logs folder. You can change the location by editing environment variable ( .env ) and updating LOG_FOLDER value. Known issues When Cloudrock is launched for the first time, it applies initial database migrations. It means that you may need to wait few minutes until these migrations are applied. Otherwise you may observe HTTP error 500 rendered by REST API server. This issue would be resolved after upgrade to Docker Compose 1.29 . Upgrading Cloudrock 1 2 docker-compose pull docker-compose restart Using TLS This setup supports following types of SSL certificates: Email - set environment variable TLS to your email to register Let's Encrypt account and get free automatic SSL certificates. Example: 1 TLS = my@email.com Internal - set environment variable TLS to \"internal\" to generate self-signed certificates for dev environments Example: 1 TLS = internal Custom - set environment variable TLS to \"cert.pem key.pem\" where cert.pem and key.pem - are paths to your custom certificates (this needs modifying docker-compose with path to your certificates passed as volumes) Example: 1 TLS = cert.pem key.pem Custom Caddy configuration files To add additional caddy config snippets into the caddy virtual host configuration add .conf files to config/caddy-includes/ Keycloak Keycloak is an Identity and Access Management software bundled with cloudrock-docker-compose. To create a keycloak admin account run: 1 2 docker exec keycloak /opt/jboss/keycloak/bin/add-user-keycloak.sh -u <USERNAME> -p <PASSWORD> docker restart keycloak Login to the admin interface at https://localhost/auth/admin and create Cloudrock users Integration with SLURM SLURM integration requires several major actions. The preparation step is creation of a shared network for Cloudrock and FireCREST: 1 docker network create cloudrock-external This network will be used for communication between Cloudrock and FireCREST services. Deployment of FirecREST NB : FirecREST integration is not implemented for now. Better check the Cloudrock SLURM service setup . The first step is deployment of FirecREST demo . This repository includes build-in SLURM cluster together with FirecREST application itself and several utils (keycloak, minio, jaeger, openapi). An user needs to replace the default keycloak configuration in the firecrest repository. For this, the user should execute the following commands: 1 2 3 cat config/firecrest-override/config.json > firecrest/deploy/demo/keycloak/config.json cat config/firecrest-override/client_secrets.json > firecrest/deploy/demo/demo_client/client_secrets.json cat config/firecrest-override/docker-compose.yml > firecrest/deploy/demo/docker-compose.yml Firecrest deployment can be started with these commands: 1 2 3 4 5 6 cd firecrest docker build -f deploy/docker/base/Dockerfile . -t f7t-base cd deploy/demo/ chmod 400 ../test-build/environment/keys/ca-key ../test-build/environment/keys/user-key docker-compose build --build-arg SLURM_VERSION = 20 .11.9 docker-compose up -d Update of Cloudrock setup Cloudrock setting should be updated in order to interact with Keycloak service from FireCREST and with FreeIPA demo . 1 cat config/firecrest-override/override.conf.py > config/cloudrock-metal/override.conf.py The deployment should be restarted with the fresh settings. 1 2 docker compose down docker compose up -d Service provider setup After this, the service provider should import the SLURM cluster to Cloudrock. This can be done on Cloudrock marketplace level, so the result is an offering with the corresponding data. Go to Public services -> Public offerings -> Add offering Input name and other offering details and choose SLURM remote allocation in \"Management\" tab In the page of the new offering, copy uuid from URL (see image below) The copied value will be used for deployment of Cloudrock-SLURM integration service as CLOUDROCK_OFFERING_UUID variable. Go to user management tab, set API token lifetime to token will not time out and click Update profile button. See the example for more details Copy value from Current API token field. This value will be used as CLOUDROCK_API_TOKEN The value of CLOUDROCK_API_TOKEN and CLOUDROCK_OFFERING_UUID variables should be adjusted in config/cloudrock-slurm-service/service-pull-env and config/cloudrock-slurm-service/service-push-env files. Deployment of Cloudrock SLURM service The final action is deployment of cloudrock-slurm-service module, which is responsible for data synchronization between Cloudrock and SLURM cluster and modification of corresponding object states in these 2 systems. The user needs to start the deployment in the following way in order to enable cloudrock-slurm-service module: 1 docker compose -f docker-compose.yml -f cloudrock-slurm-service.yml up -d For more configuration details, check Cloudrock SLURM service guide .","title":"Cloudrock Docker-compose deployment"},{"location":"admin-guide/deployment/docker-compose/#cloudrock-docker-compose-deployment","text":"","title":"Cloudrock Docker-compose deployment"},{"location":"admin-guide/deployment/docker-compose/#prerequisites","text":"at least 8GB RAM on Docker Host to run all containers Docker v1.13+","title":"Prerequisites"},{"location":"admin-guide/deployment/docker-compose/#prepare-environment","text":"1 2 3 4 5 # clone repo git clone https://github.com/kubeworkz/cloudrock-docker-compose.git cd cloudrock-docker-compose # setup settings cp .env.example .env","title":"Prepare environment"},{"location":"admin-guide/deployment/docker-compose/#booting-up","text":"1 2 3 4 5 6 7 8 9 10 11 12 # start containers docker-compose up -d # verify docker-compose ps docker exec -t cloudrock-metal-worker status # Create user docker exec -t cloudrock-metal-worker cloudrock createstaffuser -u admin -p password -e admin@example.com # Create demo categories for OpenStack: Virtual Private Cloud, VMs and Storage docker exec -t cloudrock-metal-worker cloudrock load_categories vpc vm storage Cloudrock Cloudrock-UI will be accessible on http://localhost . API will listen on http://localhost/api . Healthcheck can be accessed on http://localhost/health-check . Tearing down and cleaning up: 1 docker-compose down","title":"Booting up"},{"location":"admin-guide/deployment/docker-compose/#logs","text":"Logs emitted by the containers are collected and saved in the cloudrock_logs folder. You can change the location by editing environment variable ( .env ) and updating LOG_FOLDER value.","title":"Logs"},{"location":"admin-guide/deployment/docker-compose/#known-issues","text":"When Cloudrock is launched for the first time, it applies initial database migrations. It means that you may need to wait few minutes until these migrations are applied. Otherwise you may observe HTTP error 500 rendered by REST API server. This issue would be resolved after upgrade to Docker Compose 1.29 .","title":"Known issues"},{"location":"admin-guide/deployment/docker-compose/#upgrading-cloudrock","text":"1 2 docker-compose pull docker-compose restart","title":"Upgrading Cloudrock"},{"location":"admin-guide/deployment/docker-compose/#using-tls","text":"This setup supports following types of SSL certificates: Email - set environment variable TLS to your email to register Let's Encrypt account and get free automatic SSL certificates. Example: 1 TLS = my@email.com Internal - set environment variable TLS to \"internal\" to generate self-signed certificates for dev environments Example: 1 TLS = internal Custom - set environment variable TLS to \"cert.pem key.pem\" where cert.pem and key.pem - are paths to your custom certificates (this needs modifying docker-compose with path to your certificates passed as volumes) Example: 1 TLS = cert.pem key.pem","title":"Using TLS"},{"location":"admin-guide/deployment/docker-compose/#custom-caddy-configuration-files","text":"To add additional caddy config snippets into the caddy virtual host configuration add .conf files to config/caddy-includes/","title":"Custom Caddy configuration files"},{"location":"admin-guide/deployment/docker-compose/#keycloak","text":"Keycloak is an Identity and Access Management software bundled with cloudrock-docker-compose. To create a keycloak admin account run: 1 2 docker exec keycloak /opt/jboss/keycloak/bin/add-user-keycloak.sh -u <USERNAME> -p <PASSWORD> docker restart keycloak Login to the admin interface at https://localhost/auth/admin and create Cloudrock users","title":"Keycloak"},{"location":"admin-guide/deployment/docker-compose/#integration-with-slurm","text":"SLURM integration requires several major actions. The preparation step is creation of a shared network for Cloudrock and FireCREST: 1 docker network create cloudrock-external This network will be used for communication between Cloudrock and FireCREST services.","title":"Integration with SLURM"},{"location":"admin-guide/deployment/docker-compose/#deployment-of-firecrest","text":"NB : FirecREST integration is not implemented for now. Better check the Cloudrock SLURM service setup . The first step is deployment of FirecREST demo . This repository includes build-in SLURM cluster together with FirecREST application itself and several utils (keycloak, minio, jaeger, openapi). An user needs to replace the default keycloak configuration in the firecrest repository. For this, the user should execute the following commands: 1 2 3 cat config/firecrest-override/config.json > firecrest/deploy/demo/keycloak/config.json cat config/firecrest-override/client_secrets.json > firecrest/deploy/demo/demo_client/client_secrets.json cat config/firecrest-override/docker-compose.yml > firecrest/deploy/demo/docker-compose.yml Firecrest deployment can be started with these commands: 1 2 3 4 5 6 cd firecrest docker build -f deploy/docker/base/Dockerfile . -t f7t-base cd deploy/demo/ chmod 400 ../test-build/environment/keys/ca-key ../test-build/environment/keys/user-key docker-compose build --build-arg SLURM_VERSION = 20 .11.9 docker-compose up -d","title":"Deployment of FirecREST"},{"location":"admin-guide/deployment/docker-compose/#update-of-cloudrock-setup","text":"Cloudrock setting should be updated in order to interact with Keycloak service from FireCREST and with FreeIPA demo . 1 cat config/firecrest-override/override.conf.py > config/cloudrock-metal/override.conf.py The deployment should be restarted with the fresh settings. 1 2 docker compose down docker compose up -d","title":"Update of Cloudrock setup"},{"location":"admin-guide/deployment/docker-compose/#service-provider-setup","text":"After this, the service provider should import the SLURM cluster to Cloudrock. This can be done on Cloudrock marketplace level, so the result is an offering with the corresponding data. Go to Public services -> Public offerings -> Add offering Input name and other offering details and choose SLURM remote allocation in \"Management\" tab In the page of the new offering, copy uuid from URL (see image below) The copied value will be used for deployment of Cloudrock-SLURM integration service as CLOUDROCK_OFFERING_UUID variable. Go to user management tab, set API token lifetime to token will not time out and click Update profile button. See the example for more details Copy value from Current API token field. This value will be used as CLOUDROCK_API_TOKEN The value of CLOUDROCK_API_TOKEN and CLOUDROCK_OFFERING_UUID variables should be adjusted in config/cloudrock-slurm-service/service-pull-env and config/cloudrock-slurm-service/service-push-env files.","title":"Service provider setup"},{"location":"admin-guide/deployment/docker-compose/#deployment-of-cloudrock-slurm-service","text":"The final action is deployment of cloudrock-slurm-service module, which is responsible for data synchronization between Cloudrock and SLURM cluster and modification of corresponding object states in these 2 systems. The user needs to start the deployment in the following way in order to enable cloudrock-slurm-service module: 1 docker compose -f docker-compose.yml -f cloudrock-slurm-service.yml up -d For more configuration details, check Cloudrock SLURM service guide .","title":"Deployment of Cloudrock SLURM service"},{"location":"admin-guide/deployment/helm/","text":"Cloudrock Helm Cloudrock is a platform for creating hybrid cloud solutions. It allows building enterprise-grade systems and providing self-service environment for the end-users. Introduction This chart bootstraps a Cloudrock deployment on a Kubernetes cluster using the Helm package manager. Installing prerequisites Install Kubernetes server, for example, using minikube Install Kubernetes client, i.e. kubectl Install Helm Installing the chart Clone cloudrock-helm repository 1 2 git clone https://github.com/kubeworkz/cloudrock-helm.git cd cloudrock-helm Add the stable repository 1 helm repo add stable https://charts.helm.sh/stable Setup database: 3.1 Setup single PostgreSQL DB: instructions , or 3.2 Setup PostgreSQL HA DB: instructions NB Only one of these two options should be used. Otherwise, DB will be unavailable. Install minio (for database backups): instructions Install RabbitMQ for task queue: instructions Install Helm package: 1 helm install cloudrock cloudrock NB After this command, Cloudrock release will run in default namespace. Please, pay attention in which namespace which release is running. For instance, you can install Cloudrock release in test namespace in the following way: Create test namespace: 1 kubectl create namespace test Install release: 1 helm install cloudrock cloudrock --namespace test However, postgresql release and cloudrock should be installed in the same namespace in order to share a common secret with DB credentials. Adding admin user Open cloudrock-metal-worker shell and execute the following command: Get cloudrock-metal-worker pod name 1 2 3 # Example: kubectl get pods -A | grep cloudrock-metal-worker # --> # default cloudrock-metal-worker-6d98cd98bd-wps8n 1/1 Running 0 9m9s Connect to pod via shell 1 2 # Example: kubectl exec -it cloudrock-metal-worker-6d98cd98bd-wps8n -- /bin/bash Execute command to add admin user 1 cloudrock createstaffuser -u user -p password -e admin@example.com Cloudrock Helm chart release upgrading Delete initdb job (if exists): 1 kubectl delete job cloudrock-metal-initdb-job || true Delete load features job (if exists): 1 kubectl delete job load-features-job || true Upgrade Cloudrock dependencies and release: 1 2 helm dep update cloudrock/ helm upgrade cloudrock cloudrock/ Restart deployments to apply configmaps changes: 1 2 3 4 kubectl rollout restart deployment cloudrock-metal-beat kubectl rollout restart deployment cloudrock-metal-api kubectl rollout restart deployment cloudrock-metal-worker kubectl rollout restart deployment cloudrock-cloudrock-ui Private registry setup A user can use private registry for Docker images. For this, the corresponding credentials should be registered in a secret, name of which should be placed in .Values.imagePullSecrets . A secret can be created trough CLI . Configuration docs Configuration documentation: index","title":"Cloudrock Helm"},{"location":"admin-guide/deployment/helm/#cloudrock-helm","text":"Cloudrock is a platform for creating hybrid cloud solutions. It allows building enterprise-grade systems and providing self-service environment for the end-users.","title":"Cloudrock Helm"},{"location":"admin-guide/deployment/helm/#introduction","text":"This chart bootstraps a Cloudrock deployment on a Kubernetes cluster using the Helm package manager.","title":"Introduction"},{"location":"admin-guide/deployment/helm/#installing-prerequisites","text":"Install Kubernetes server, for example, using minikube Install Kubernetes client, i.e. kubectl Install Helm","title":"Installing prerequisites"},{"location":"admin-guide/deployment/helm/#installing-the-chart","text":"Clone cloudrock-helm repository 1 2 git clone https://github.com/kubeworkz/cloudrock-helm.git cd cloudrock-helm Add the stable repository 1 helm repo add stable https://charts.helm.sh/stable Setup database: 3.1 Setup single PostgreSQL DB: instructions , or 3.2 Setup PostgreSQL HA DB: instructions NB Only one of these two options should be used. Otherwise, DB will be unavailable. Install minio (for database backups): instructions Install RabbitMQ for task queue: instructions Install Helm package: 1 helm install cloudrock cloudrock NB After this command, Cloudrock release will run in default namespace. Please, pay attention in which namespace which release is running. For instance, you can install Cloudrock release in test namespace in the following way: Create test namespace: 1 kubectl create namespace test Install release: 1 helm install cloudrock cloudrock --namespace test However, postgresql release and cloudrock should be installed in the same namespace in order to share a common secret with DB credentials.","title":"Installing the chart"},{"location":"admin-guide/deployment/helm/#adding-admin-user","text":"Open cloudrock-metal-worker shell and execute the following command: Get cloudrock-metal-worker pod name 1 2 3 # Example: kubectl get pods -A | grep cloudrock-metal-worker # --> # default cloudrock-metal-worker-6d98cd98bd-wps8n 1/1 Running 0 9m9s Connect to pod via shell 1 2 # Example: kubectl exec -it cloudrock-metal-worker-6d98cd98bd-wps8n -- /bin/bash Execute command to add admin user 1 cloudrock createstaffuser -u user -p password -e admin@example.com","title":"Adding admin user"},{"location":"admin-guide/deployment/helm/#cloudrock-helm-chart-release-upgrading","text":"Delete initdb job (if exists): 1 kubectl delete job cloudrock-metal-initdb-job || true Delete load features job (if exists): 1 kubectl delete job load-features-job || true Upgrade Cloudrock dependencies and release: 1 2 helm dep update cloudrock/ helm upgrade cloudrock cloudrock/ Restart deployments to apply configmaps changes: 1 2 3 4 kubectl rollout restart deployment cloudrock-metal-beat kubectl rollout restart deployment cloudrock-metal-api kubectl rollout restart deployment cloudrock-metal-worker kubectl rollout restart deployment cloudrock-cloudrock-ui","title":"Cloudrock Helm chart release upgrading"},{"location":"admin-guide/deployment/helm/#private-registry-setup","text":"A user can use private registry for Docker images. For this, the corresponding credentials should be registered in a secret, name of which should be placed in .Values.imagePullSecrets . A secret can be created trough CLI .","title":"Private registry setup"},{"location":"admin-guide/deployment/helm/#configuration-docs","text":"Configuration documentation: index","title":"Configuration docs"},{"location":"admin-guide/deployment/helm/docs/","text":"Cloudrock Helm chart configuration Outline: Postgres backup management TLS White-labeling Custom Metal templates Bootstrapping SAML2 HPA Stress testing IP whitelisting","title":"Cloudrock Helm chart configuration"},{"location":"admin-guide/deployment/helm/docs/#cloudrock-helm-chart-configuration","text":"Outline: Postgres backup management TLS White-labeling Custom Metal templates Bootstrapping SAML2 HPA Stress testing IP whitelisting","title":"Cloudrock Helm chart configuration"},{"location":"admin-guide/deployment/helm/docs/bootstrap/","text":"Bootstrap configuration You can create a bootstrapping script and Helm will run it right after Cloudrock release installation. Example script: 1 2 3 4 5 6 7 8 #!/bin/bash set -e echo \"[+] Creating staff user\" cloudrock createstaffuser -u admin -p admin -e admin@example.com echo \"[+] Done\" exit 0 This script with all necessary additional files should be placed in bootstrap.dir directory. Additional configuration variables ( bootstrap prefix): enabled - enable/disable bootstrap script - main script file in bootstrap.dir folder. dir - directory with all bootstrap files Moreover, that is better to install release with --wait flag: 1 helm install cloudrock cloudrock/ --wait --timeout 10m0s This allows running migrations job before a bootstrap one. more info: link , Hooks and the Release Lifecycle section) NB : A script, which contains interaction with a db can fail due to not all migrations are applied. Automatical reruning of the bootstrap job is normal behaviour in such situations. Hence, the script should be idempotent .","title":"Bootstrap configuration"},{"location":"admin-guide/deployment/helm/docs/bootstrap/#bootstrap-configuration","text":"You can create a bootstrapping script and Helm will run it right after Cloudrock release installation. Example script: 1 2 3 4 5 6 7 8 #!/bin/bash set -e echo \"[+] Creating staff user\" cloudrock createstaffuser -u admin -p admin -e admin@example.com echo \"[+] Done\" exit 0 This script with all necessary additional files should be placed in bootstrap.dir directory. Additional configuration variables ( bootstrap prefix): enabled - enable/disable bootstrap script - main script file in bootstrap.dir folder. dir - directory with all bootstrap files Moreover, that is better to install release with --wait flag: 1 helm install cloudrock cloudrock/ --wait --timeout 10m0s This allows running migrations job before a bootstrap one. more info: link , Hooks and the Release Lifecycle section) NB : A script, which contains interaction with a db can fail due to not all migrations are applied. Automatical reruning of the bootstrap job is normal behaviour in such situations. Hence, the script should be idempotent .","title":"Bootstrap configuration"},{"location":"admin-guide/deployment/helm/docs/helm/","text":"Official documentation Documentation of installation link: Helm Installing Helm Download and install Helm 1 2 3 curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 chmod 700 get_helm.sh ./get_helm.sh Check the version 1 helm version","title":"Official documentation"},{"location":"admin-guide/deployment/helm/docs/helm/#official-documentation","text":"Documentation of installation link: Helm","title":"Official documentation"},{"location":"admin-guide/deployment/helm/docs/helm/#installing-helm","text":"Download and install Helm 1 2 3 curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 chmod 700 get_helm.sh ./get_helm.sh Check the version 1 helm version","title":"Installing Helm"},{"location":"admin-guide/deployment/helm/docs/hpa/","text":"HPA setup and configuration It is possible to use cpu-utilization-based HPA for API server (aka cloudrock-metal-api) and Celery executor (aka cloudrock-metal-worker and cloudrock-metal-beat ) pods. Setup If you use minikube, you need to enable metrics-server using next command: minikube addons enable metrics-server Configuration In values.yaml file you can configure HPA for: API server ( hpa.api prefix): 1.1 enabled - flag for enabling HPA. Possible values: true for enabling and false for disabling. 1.2 resources - custom resources for server. requests.cpu param is mandatory for proper HPA work. 1.3 cpuUtilizationBorder - border percentage of average CPU utilization per pod for deployment. Celery ( hpa.celery prefix): 1.1 enabled - flag for enabling HPA, the same possible values as for API server. 1.2 workerResources - custom resources for celery worker. requests.cpu param is mandatory for proper HPA work. 1.3 beatResources - custom resources for celery beat. requests.cpu param is mandatory for proper HPA work. 1.4 cpuUtilizationBorder - border percentage of average CPU utilization per pod for deployment.","title":"HPA setup and configuration"},{"location":"admin-guide/deployment/helm/docs/hpa/#hpa-setup-and-configuration","text":"It is possible to use cpu-utilization-based HPA for API server (aka cloudrock-metal-api) and Celery executor (aka cloudrock-metal-worker and cloudrock-metal-beat ) pods.","title":"HPA setup and configuration"},{"location":"admin-guide/deployment/helm/docs/hpa/#setup","text":"If you use minikube, you need to enable metrics-server using next command: minikube addons enable metrics-server","title":"Setup"},{"location":"admin-guide/deployment/helm/docs/hpa/#configuration","text":"In values.yaml file you can configure HPA for: API server ( hpa.api prefix): 1.1 enabled - flag for enabling HPA. Possible values: true for enabling and false for disabling. 1.2 resources - custom resources for server. requests.cpu param is mandatory for proper HPA work. 1.3 cpuUtilizationBorder - border percentage of average CPU utilization per pod for deployment. Celery ( hpa.celery prefix): 1.1 enabled - flag for enabling HPA, the same possible values as for API server. 1.2 workerResources - custom resources for celery worker. requests.cpu param is mandatory for proper HPA work. 1.3 beatResources - custom resources for celery beat. requests.cpu param is mandatory for proper HPA work. 1.4 cpuUtilizationBorder - border percentage of average CPU utilization per pod for deployment.","title":"Configuration"},{"location":"admin-guide/deployment/helm/docs/ip-whitelisting/","text":"Limiting network access to Metal APIs Cloudrock Helm allows limiting network access to Metal API endpoints - i.e. /api/ , /api-auth/ , /admin/ - based on whitelisting the subnets from where access is allowed. To define a list of allowed subnets in CIDR format for the all the API endpoint, please use ingress.whitelistSourceRange option in values.yaml . Example: 1 2 3 4 ... ingress : whitelistSourceRange : '192.168.22.0/24' ... Given this value, only IPs from 192.168.22.0/24 subnet are able to access Cloudrock Metal APIs. In case you want to limit access to /api/admin/ endpoint specifically, there is another option called ingress.whitelistSourceRangeAdmin : 1 2 3 4 ... ingress : whitelistSourceRangeAdmin : '192.168.22.1/32' ... This will limit access to the admin endpoint only for 192.168.22.1 IP. Note: The whitelistSourceRangeAdmin option takes precedence over whitelistSourceRange . In case of multiple subnets/IPs, comma separated list can be used as a value. E.g.: 192.168.22.1/32,192.168.21.0/24 . This works for both options.","title":"Limiting network access to Metal APIs"},{"location":"admin-guide/deployment/helm/docs/ip-whitelisting/#limiting-network-access-to-metal-apis","text":"Cloudrock Helm allows limiting network access to Metal API endpoints - i.e. /api/ , /api-auth/ , /admin/ - based on whitelisting the subnets from where access is allowed. To define a list of allowed subnets in CIDR format for the all the API endpoint, please use ingress.whitelistSourceRange option in values.yaml . Example: 1 2 3 4 ... ingress : whitelistSourceRange : '192.168.22.0/24' ... Given this value, only IPs from 192.168.22.0/24 subnet are able to access Cloudrock Metal APIs. In case you want to limit access to /api/admin/ endpoint specifically, there is another option called ingress.whitelistSourceRangeAdmin : 1 2 3 4 ... ingress : whitelistSourceRangeAdmin : '192.168.22.1/32' ... This will limit access to the admin endpoint only for 192.168.22.1 IP. Note: The whitelistSourceRangeAdmin option takes precedence over whitelistSourceRange . In case of multiple subnets/IPs, comma separated list can be used as a value. E.g.: 192.168.22.1/32,192.168.21.0/24 . This works for both options.","title":"Limiting network access to Metal APIs"},{"location":"admin-guide/deployment/helm/docs/kubectl/","text":"Official documentation Documentation of installation link: doc Installing kubectl Download and install latest kubectl 1 curl -LO https://storage.googleapis.com/kubernetes-release/release/ ` curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt ` /bin/linux/amd64/kubectl Add executable mode for kubectl 1 chmod +x ./kubectl Move kubectl binary into your PATH 1 sudo mv ./kubectl /usr/local/bin/kubectl Check the version 1 kubectl version --client Show running Pods in cluster 1 2 3 4 5 6 7 8 9 10 11 kubectl get po -A # --> # NAMESPACE NAME READY STATUS RESTARTS AGE # kube-system coredns-66bff467f8-dcfxn 1/1 Running 0 ??m # kube-system coredns-66bff467f8-tdgpn 1/1 Running 0 ??m # kube-system etcd-minikube 1/1 Running 0 ??m # kube-system kindnet-4j8t6 1/1 Running 0 ??m # kube-system kube-apiserver-minikube 1/1 Running 0 ??m # kube-system kube-controller-manager-minikube 1/1 Running 0 ??m # kube-system kube-proxy-ft67m 1/1 Running 0 ??m # kube-system kube-scheduler-minikube 1/1 Running 0 ??m # kube-system storage-provisioner 1/1 Running 0 ??m","title":"Official documentation"},{"location":"admin-guide/deployment/helm/docs/kubectl/#official-documentation","text":"Documentation of installation link: doc","title":"Official documentation"},{"location":"admin-guide/deployment/helm/docs/kubectl/#installing-kubectl","text":"Download and install latest kubectl 1 curl -LO https://storage.googleapis.com/kubernetes-release/release/ ` curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt ` /bin/linux/amd64/kubectl Add executable mode for kubectl 1 chmod +x ./kubectl Move kubectl binary into your PATH 1 sudo mv ./kubectl /usr/local/bin/kubectl Check the version 1 kubectl version --client Show running Pods in cluster 1 2 3 4 5 6 7 8 9 10 11 kubectl get po -A # --> # NAMESPACE NAME READY STATUS RESTARTS AGE # kube-system coredns-66bff467f8-dcfxn 1/1 Running 0 ??m # kube-system coredns-66bff467f8-tdgpn 1/1 Running 0 ??m # kube-system etcd-minikube 1/1 Running 0 ??m # kube-system kindnet-4j8t6 1/1 Running 0 ??m # kube-system kube-apiserver-minikube 1/1 Running 0 ??m # kube-system kube-controller-manager-minikube 1/1 Running 0 ??m # kube-system kube-proxy-ft67m 1/1 Running 0 ??m # kube-system kube-scheduler-minikube 1/1 Running 0 ??m # kube-system storage-provisioner 1/1 Running 0 ??m","title":"Installing kubectl"},{"location":"admin-guide/deployment/helm/docs/locust/","text":"Locust cofiguration This chart uses Locust tool for stress testing. Installation Locust runs as another standalone Helm release. Install Locust: 1 helm install locust stable/locust -f locust-values.yaml After release installation, some instructions regarding access to WEB UI for Locust printed in stdout.See this section for more information about UI interaction. Configuration You can change locust config with the folloving variables in locust-values.yaml : image.repository - repository of locust image image.tag - tag of locust image master.config - key-value configuration records for locust master (used as container env vars) master.config.locust-host - URL of target metal service. See this doc for details master.config.target-host - same as master.config.locust-host master.config.locust-mode-master - master mode flag. Please, don't change it, because for new versions of locust this flag is mandatory for a master node. master.config.locust-locustfile - path to the injected locust file. Please, don't change file directory ( /locust-tasks/ ), because it is fixed mountpoint for pods. The filename itself can have any value, but should be the same as key in the configmap ( worker.config.configmapName ). worker.config - key-value configuration records for locust worker (used as container env vars). worker.config.configmapName - name of configmap with locustfile worker.config.locust-mode-worker - worker mode flag. Please, don't change it, because for new versions of locust this flag is mandatory for a worker node. worker.config.locust-locustfile - path to the injected locust file. Same rules as for master.config.locust-locustfile . worker.config.locust-master-node-host - hostname of the locust master service, which is formatted as <locust_release_name>-master-svc worker.replicaCount - number of locust workers You can find available variables for master and worker configuration from chart desription and official locust documentation (most of the flags and args can be injected through env vars). NB : The original helm chart image ( greenbirdit/locust:0.9.0 ) has outdated locust version and doesn't support most of the current env variables from the first link above. Thus master.config.target-host is used only for compatibility and must be equal to master.config.locust-host In the values.yaml you need to setup the following vars ( stressTesting prefix): enabled - enable/disable stress testing locustFilePath - path to the locust file (should be in the cloudrock/ directory)","title":"Locust cofiguration"},{"location":"admin-guide/deployment/helm/docs/locust/#locust-cofiguration","text":"This chart uses Locust tool for stress testing.","title":"Locust cofiguration"},{"location":"admin-guide/deployment/helm/docs/locust/#installation","text":"Locust runs as another standalone Helm release. Install Locust: 1 helm install locust stable/locust -f locust-values.yaml After release installation, some instructions regarding access to WEB UI for Locust printed in stdout.See this section for more information about UI interaction.","title":"Installation"},{"location":"admin-guide/deployment/helm/docs/locust/#configuration","text":"You can change locust config with the folloving variables in locust-values.yaml : image.repository - repository of locust image image.tag - tag of locust image master.config - key-value configuration records for locust master (used as container env vars) master.config.locust-host - URL of target metal service. See this doc for details master.config.target-host - same as master.config.locust-host master.config.locust-mode-master - master mode flag. Please, don't change it, because for new versions of locust this flag is mandatory for a master node. master.config.locust-locustfile - path to the injected locust file. Please, don't change file directory ( /locust-tasks/ ), because it is fixed mountpoint for pods. The filename itself can have any value, but should be the same as key in the configmap ( worker.config.configmapName ). worker.config - key-value configuration records for locust worker (used as container env vars). worker.config.configmapName - name of configmap with locustfile worker.config.locust-mode-worker - worker mode flag. Please, don't change it, because for new versions of locust this flag is mandatory for a worker node. worker.config.locust-locustfile - path to the injected locust file. Same rules as for master.config.locust-locustfile . worker.config.locust-master-node-host - hostname of the locust master service, which is formatted as <locust_release_name>-master-svc worker.replicaCount - number of locust workers You can find available variables for master and worker configuration from chart desription and official locust documentation (most of the flags and args can be injected through env vars). NB : The original helm chart image ( greenbirdit/locust:0.9.0 ) has outdated locust version and doesn't support most of the current env variables from the first link above. Thus master.config.target-host is used only for compatibility and must be equal to master.config.locust-host In the values.yaml you need to setup the following vars ( stressTesting prefix): enabled - enable/disable stress testing locustFilePath - path to the locust file (should be in the cloudrock/ directory)","title":"Configuration"},{"location":"admin-guide/deployment/helm/docs/marketplace-script/","text":"Cloudrock Marketplace script plugin setup Available options in values.yaml : cloudrock.marketplace.script.enabled - enable/disable plugin cloudrock.marketplace.script.dockerImages - key-value structure, where key is a programming language and value - a corresponding docker image tag cloudrock.marketplace.script.k8sNamespace - Kubernetes namespace, where jobs will be executed cloudrock.marketplace.script.kubeconfigPath - path to local file with kubeconfig content cloudrock.marketplace.script.jobTimeout - timeout for Kubernetes jobs","title":"Cloudrock Marketplace script plugin setup"},{"location":"admin-guide/deployment/helm/docs/marketplace-script/#cloudrock-marketplace-script-plugin-setup","text":"Available options in values.yaml : cloudrock.marketplace.script.enabled - enable/disable plugin cloudrock.marketplace.script.dockerImages - key-value structure, where key is a programming language and value - a corresponding docker image tag cloudrock.marketplace.script.k8sNamespace - Kubernetes namespace, where jobs will be executed cloudrock.marketplace.script.kubeconfigPath - path to local file with kubeconfig content cloudrock.marketplace.script.jobTimeout - timeout for Kubernetes jobs","title":"Cloudrock Marketplace script plugin setup"},{"location":"admin-guide/deployment/helm/docs/metal-templates/","text":"Metal templates configuration If you want to configure custom metal templates, you should: Setup cloudrock.metalTemplating.metalTemplatesPath in values.yaml (by default, it is equal to metal_templates/metal-templates.yaml ) Put all the custom templates into the file in a following way: NB : The keys in the file should have <cloudrock_application_name>/<event_name>_<postfix>.<extension> , where <postfix> can be either message or subject , and <extension> - either txt or html 1 2 3 4 5 <file-name1> : | <Custom content1> <file-name2> : | <Custom content2> ... Example: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 users/invitation_notification_message.txt : | Hi! users/invitation_notification_message.html : | <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Invitation has been created</title> </head> <body> <p> Hi! </p> </body> </html> ...","title":"Metal templates configuration"},{"location":"admin-guide/deployment/helm/docs/metal-templates/#metal-templates-configuration","text":"If you want to configure custom metal templates, you should: Setup cloudrock.metalTemplating.metalTemplatesPath in values.yaml (by default, it is equal to metal_templates/metal-templates.yaml ) Put all the custom templates into the file in a following way: NB : The keys in the file should have <cloudrock_application_name>/<event_name>_<postfix>.<extension> , where <postfix> can be either message or subject , and <extension> - either txt or html 1 2 3 4 5 <file-name1> : | <Custom content1> <file-name2> : | <Custom content2> ... Example: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 users/invitation_notification_message.txt : | Hi! users/invitation_notification_message.html : | <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Invitation has been created</title> </head> <body> <p> Hi! </p> </body> </html> ...","title":"Metal templates configuration"},{"location":"admin-guide/deployment/helm/docs/migration-from-psql-ha/","text":"Migration from Postgresql HA Plan: Scale api, beat, worker -> 0 Backup \u2014 using backup job group_vars/puhuri_core_prd - helm_pg_ha_enabled: no ===> CANCEL THE UPDATING PIPELINE! Run dependency update ==> leads to a working single psql Restore DB \u2014 using recovery job Run a common update pipeline Validate that login works Drop old psql ha, drop pvc 1 2 3 4 5 6 7 8 9 10 11 12 # Backup kubectl exec -it postgresql-ha-cloudrock-postgresql-0 -- env PGPASSWORD = cloudrock pg_dump -h 0 .0.0.0 -U cloudrock cloudrock | gzip -9 > backup.sql.gz # Backup restoration # Locally kubectl cp backup.sql.gz postgresql-cloudrock-0:/tmp/backup.sql.gz kubectl exec -it postgresql-cloudrock-0 -- bash # In pgpool pod gzip -d /tmp/backup.sql.gz export PGPASSWORD = cloudrock psql -U cloudrock -h 0 .0.0.0 -f /tmp/backup.sql","title":"Migration from Postgresql HA"},{"location":"admin-guide/deployment/helm/docs/migration-from-psql-ha/#migration-from-postgresql-ha","text":"Plan: Scale api, beat, worker -> 0 Backup \u2014 using backup job group_vars/puhuri_core_prd - helm_pg_ha_enabled: no ===> CANCEL THE UPDATING PIPELINE! Run dependency update ==> leads to a working single psql Restore DB \u2014 using recovery job Run a common update pipeline Validate that login works Drop old psql ha, drop pvc 1 2 3 4 5 6 7 8 9 10 11 12 # Backup kubectl exec -it postgresql-ha-cloudrock-postgresql-0 -- env PGPASSWORD = cloudrock pg_dump -h 0 .0.0.0 -U cloudrock cloudrock | gzip -9 > backup.sql.gz # Backup restoration # Locally kubectl cp backup.sql.gz postgresql-cloudrock-0:/tmp/backup.sql.gz kubectl exec -it postgresql-cloudrock-0 -- bash # In pgpool pod gzip -d /tmp/backup.sql.gz export PGPASSWORD = cloudrock psql -U cloudrock -h 0 .0.0.0 -f /tmp/backup.sql","title":"Migration from Postgresql HA"},{"location":"admin-guide/deployment/helm/docs/minikube/","text":"Official documentation Documentation of installation link: doc Installing minikub Download and install minikube For Debial/Ubuntu: 1 2 curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube_1.9.1-0_amd64.deb sudo dpkg -i minikube_1.9.1-0_amd64.deb For Fedora/Red Hat 1 2 curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-1.9.1-0.x86_64.rpm sudo rpm -ivh minikube-1.9.1-0.x86_64.rpm Others (direct installation) 1 2 curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 sudo install minikube-linux-amd64 /usr/local/bin/minikube Set docker as a default driver 1 2 3 minikube config set driver docker minikube delete # delete previous profile minikube config get driver # --> docker Start local kubernetes cluster 1 2 3 4 5 6 7 minikube start minikube status # --> # m01 # host: Running # kubelet: Running # apiserver: Running # kubeconfig: Configured","title":"Official documentation"},{"location":"admin-guide/deployment/helm/docs/minikube/#official-documentation","text":"Documentation of installation link: doc","title":"Official documentation"},{"location":"admin-guide/deployment/helm/docs/minikube/#installing-minikub","text":"Download and install minikube For Debial/Ubuntu: 1 2 curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube_1.9.1-0_amd64.deb sudo dpkg -i minikube_1.9.1-0_amd64.deb For Fedora/Red Hat 1 2 curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-1.9.1-0.x86_64.rpm sudo rpm -ivh minikube-1.9.1-0.x86_64.rpm Others (direct installation) 1 2 curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 sudo install minikube-linux-amd64 /usr/local/bin/minikube Set docker as a default driver 1 2 3 minikube config set driver docker minikube delete # delete previous profile minikube config get driver # --> docker Start local kubernetes cluster 1 2 3 4 5 6 7 minikube start minikube status # --> # m01 # host: Running # kubelet: Running # apiserver: Running # kubeconfig: Configured","title":"Installing minikub"},{"location":"admin-guide/deployment/helm/docs/minio/","text":"Min.io configuration Min.io storage is used as a database backup storage. Add bitnami repo to helm: 1 helm repo add bitnami https://charts.bitnami.com/bitnami Install minio release: 1 helm install minio bitnami/minio -f minio-values.yaml You can change minio config with next vars (in minio.values file): accessKey.password - access key id for storage secretKey.password - secret key itself serviceAccount.name - name of the service account for MinIO persistence.enabled - persistence enabling flag persistence.size - size of storage per each pod ingress - ingress settings defaultBuckets - default buckets created after release installation (comma-separated list of strings) For more configuration values follow this link . In Cloudrock Helm values.yaml you need to setup: minio.accessKey - should be same as accessKey in minio.values.yaml minio.secretKey - should be same as secretKey in minio.values.yaml minio.bucketName - should be same as a value from defaultBuckets list in minio-values.yaml minio.endpoint - access URL to minio storage ( minio service host and port). See this doc for details.","title":"Min.io configuration"},{"location":"admin-guide/deployment/helm/docs/minio/#minio-configuration","text":"Min.io storage is used as a database backup storage. Add bitnami repo to helm: 1 helm repo add bitnami https://charts.bitnami.com/bitnami Install minio release: 1 helm install minio bitnami/minio -f minio-values.yaml You can change minio config with next vars (in minio.values file): accessKey.password - access key id for storage secretKey.password - secret key itself serviceAccount.name - name of the service account for MinIO persistence.enabled - persistence enabling flag persistence.size - size of storage per each pod ingress - ingress settings defaultBuckets - default buckets created after release installation (comma-separated list of strings) For more configuration values follow this link . In Cloudrock Helm values.yaml you need to setup: minio.accessKey - should be same as accessKey in minio.values.yaml minio.secretKey - should be same as secretKey in minio.values.yaml minio.bucketName - should be same as a value from defaultBuckets list in minio-values.yaml minio.endpoint - access URL to minio storage ( minio service host and port). See this doc for details.","title":"Min.io configuration"},{"location":"admin-guide/deployment/helm/docs/postgres-backup-management/","text":"PostgreSQL backup configuration There are the following jobs for backups management: CronJob for backups creation (running by a schedule postgresBackup.schedule ) CronJob for backups rotation (running by a schedule postgresBackup.rotationSchedule ) Backup configuration values ( postgresBackup prefix): enabled - boolean flag for enabling/disabling backups schedule - cron-like schedule for backups rotationSchedule - cron-like schedule for backups rotation maxNumber - maximum number of backups to store image - Docker image containing potgres and minio (client) binaries ( kubeworkz/postgres-minio by default) Backups restoration To restore backups you need to: Connect to the restoration pod. The major prerequisite for this is stopping the Cloudrock backend pods to avoid errors. NB: During restoration process, the site will be unavailable . For this, please execute the following lines in the Kubernetes node: 1 2 3 4 5 6 # Stop all the API pods kubectl scale --replicas = 0 deployment/cloudrock-metal-api # Stop all the Celery worker pods kubectl scale --replicas = 0 deployment/cloudrock-metal-worker # Connect to the restoration pod kubectl exec -it deployment/cloudrock-db-restore -- bash This will give you access to a terminal of a restoration pod. In this shell, please, execute the command: 1 db-backup-minio-auth This will print the recent 5 backups available for restoration. Example: 1 2 3 4 5 6 7 8 9 10 11 root@cloudrock-db-restore-ff7f586bb-nb8jt:/# db-backup-minio-auth [ + ] LOCAL_PG_BACKUPS_DIR : [ + ] MINIO_PG_BACKUPS_DIR : pg/data/backups/postgres [ + ] Setting up the postgres alias for minio server ( http://minio.default.svc.cluster.local:9000 ) [ + ] Last 5 backups [ 2022 -12-01 05 :00:02 UTC ] 91KiB backup-2022-12-01-05-00.sql.gz [ 2022 -11-30 05 :00:02 UTC ] 91KiB backup-2022-11-30-05-00.sql.gz [ 2022 -11-29 05 :00:02 UTC ] 91KiB backup-2022-11-29-05-00.sql.gz [ 2022 -11-28 16 :30:37 UTC ] 91KiB backup-2022-11-28-16-30.sql.gz [ 2022 -11-28 16 :28:27 UTC ] 91KiB backup-2022-11-28-16-28.sql.gz [ + ] Finished As you can see, the backup name contains the date and time when it was created in YYYY-mm-dd-HH-MM format. You can freely choose the one you need. 1 2 3 4 5 6 7 8 9 10 db-backup-minio-auth export BACKUP_FILENAME = <SELECTED_BACKUP> mc cp pg/ $MINIO_BUCKET /backups/postgres/ $BACKUP_FILENAME backup.sql.gz gzip -d backup.sql.gz # Be careful: the next lines have potentially danger operations psql -d postgres -c \"SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE pg_stat_activity.datname = 'cloudrock' AND pid <> pg_backend_pid();\" psql -d postgres -c 'DROP DATABASE cloudrock;' createdb cloudrock psql -f backup.sql rm backup.sql Restoration from external backup If you want to use a pre-created backup from an external system, copy the backup file: Copy the backup file to your local machine Copy the file to pod 1 2 export RESTORATION_POD_NAME = $( kubectl get pods --template '{{range .items}}{{.metadata.name}}{{\"\\n\"}}{{end}}' | grep restore ) kubectl cp <BACKUP_FILE> $RESTORATION_POD_NAME :/tmp/backup.sql.gz Connect to pod's terminal 1 kubectl exec -it $RESTORATION_POD_NAME -- bash Apply the backup 1 2 3 4 5 6 7 gzip -d /tmp/backup.sql.gz # Be careful: the next lines have potentially danger operations psql -d postgres -c \"SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE pg_stat_activity.datname = 'cloudrock' AND pid <> pg_backend_pid();\" psql -d postgres -c 'DROP DATABASE cloudrock;' createdb cloudrock psql -f /tmp/backup.sql rm /tmp/backup.sql","title":"PostgreSQL backup configuration"},{"location":"admin-guide/deployment/helm/docs/postgres-backup-management/#postgresql-backup-configuration","text":"There are the following jobs for backups management: CronJob for backups creation (running by a schedule postgresBackup.schedule ) CronJob for backups rotation (running by a schedule postgresBackup.rotationSchedule ) Backup configuration values ( postgresBackup prefix): enabled - boolean flag for enabling/disabling backups schedule - cron-like schedule for backups rotationSchedule - cron-like schedule for backups rotation maxNumber - maximum number of backups to store image - Docker image containing potgres and minio (client) binaries ( kubeworkz/postgres-minio by default)","title":"PostgreSQL backup configuration"},{"location":"admin-guide/deployment/helm/docs/postgres-backup-management/#backups-restoration","text":"To restore backups you need to: Connect to the restoration pod. The major prerequisite for this is stopping the Cloudrock backend pods to avoid errors. NB: During restoration process, the site will be unavailable . For this, please execute the following lines in the Kubernetes node: 1 2 3 4 5 6 # Stop all the API pods kubectl scale --replicas = 0 deployment/cloudrock-metal-api # Stop all the Celery worker pods kubectl scale --replicas = 0 deployment/cloudrock-metal-worker # Connect to the restoration pod kubectl exec -it deployment/cloudrock-db-restore -- bash This will give you access to a terminal of a restoration pod. In this shell, please, execute the command: 1 db-backup-minio-auth This will print the recent 5 backups available for restoration. Example: 1 2 3 4 5 6 7 8 9 10 11 root@cloudrock-db-restore-ff7f586bb-nb8jt:/# db-backup-minio-auth [ + ] LOCAL_PG_BACKUPS_DIR : [ + ] MINIO_PG_BACKUPS_DIR : pg/data/backups/postgres [ + ] Setting up the postgres alias for minio server ( http://minio.default.svc.cluster.local:9000 ) [ + ] Last 5 backups [ 2022 -12-01 05 :00:02 UTC ] 91KiB backup-2022-12-01-05-00.sql.gz [ 2022 -11-30 05 :00:02 UTC ] 91KiB backup-2022-11-30-05-00.sql.gz [ 2022 -11-29 05 :00:02 UTC ] 91KiB backup-2022-11-29-05-00.sql.gz [ 2022 -11-28 16 :30:37 UTC ] 91KiB backup-2022-11-28-16-30.sql.gz [ 2022 -11-28 16 :28:27 UTC ] 91KiB backup-2022-11-28-16-28.sql.gz [ + ] Finished As you can see, the backup name contains the date and time when it was created in YYYY-mm-dd-HH-MM format. You can freely choose the one you need. 1 2 3 4 5 6 7 8 9 10 db-backup-minio-auth export BACKUP_FILENAME = <SELECTED_BACKUP> mc cp pg/ $MINIO_BUCKET /backups/postgres/ $BACKUP_FILENAME backup.sql.gz gzip -d backup.sql.gz # Be careful: the next lines have potentially danger operations psql -d postgres -c \"SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE pg_stat_activity.datname = 'cloudrock' AND pid <> pg_backend_pid();\" psql -d postgres -c 'DROP DATABASE cloudrock;' createdb cloudrock psql -f backup.sql rm backup.sql","title":"Backups restoration"},{"location":"admin-guide/deployment/helm/docs/postgres-backup-management/#restoration-from-external-backup","text":"If you want to use a pre-created backup from an external system, copy the backup file: Copy the backup file to your local machine Copy the file to pod 1 2 export RESTORATION_POD_NAME = $( kubectl get pods --template '{{range .items}}{{.metadata.name}}{{\"\\n\"}}{{end}}' | grep restore ) kubectl cp <BACKUP_FILE> $RESTORATION_POD_NAME :/tmp/backup.sql.gz Connect to pod's terminal 1 kubectl exec -it $RESTORATION_POD_NAME -- bash Apply the backup 1 2 3 4 5 6 7 gzip -d /tmp/backup.sql.gz # Be careful: the next lines have potentially danger operations psql -d postgres -c \"SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE pg_stat_activity.datname = 'cloudrock' AND pid <> pg_backend_pid();\" psql -d postgres -c 'DROP DATABASE cloudrock;' createdb cloudrock psql -f /tmp/backup.sql rm /tmp/backup.sql","title":"Restoration from external backup"},{"location":"admin-guide/deployment/helm/docs/postgres-db-ha/","text":"PostgreSQL HA chart configuration bitnami/postgresql-ha is used as a highly available database for Cloudrock. Add bitnami repo to helm: 1 helm repo add bitnami https://charts.bitnami.com/bitnami Install postgresql-ha release: 1 2 helm install postgresql-ha bitnami/postgresql-ha \\ -f postgresql-ha-values.yaml --version 6 .7.0 NB : the value postgresql.HAEnabled for cloudrock release must be true . Chart configuration You can change default PostgreSQL config with the following variables in values.yaml ( postgresql-ha-values.yaml file): postgresql.database - name of a database. NB : must match postgresql.database value in cloudrock/values.yaml postgresql.username - name of a database user. NB : must match postgresql.username value in cloudrock/values.yaml postgresql.password - password of a database user postgresql.replicaCount - number of db replicas postgresql.syncReplication - enable/disable synchronous replication postgresql.repmgrUsername - username of repmgr user postgresql.repmgrPassword - password of repmgr user persistence.size - size of a database (for each replica) pgpoolImage.tag - tag of Pgpool image. Possible tags for default image can be found here postgresqlImage.tag - tag of PostgreSQL image. Possible tags for default image can be found here pgpoolImage.tag - registry of Pgpool image. postgresqlImage.tag - registry of PostgreSQL image. More information related to possible values here .","title":"PostgreSQL HA chart configuration"},{"location":"admin-guide/deployment/helm/docs/postgres-db-ha/#postgresql-ha-chart-configuration","text":"bitnami/postgresql-ha is used as a highly available database for Cloudrock. Add bitnami repo to helm: 1 helm repo add bitnami https://charts.bitnami.com/bitnami Install postgresql-ha release: 1 2 helm install postgresql-ha bitnami/postgresql-ha \\ -f postgresql-ha-values.yaml --version 6 .7.0 NB : the value postgresql.HAEnabled for cloudrock release must be true .","title":"PostgreSQL HA chart configuration"},{"location":"admin-guide/deployment/helm/docs/postgres-db-ha/#chart-configuration","text":"You can change default PostgreSQL config with the following variables in values.yaml ( postgresql-ha-values.yaml file): postgresql.database - name of a database. NB : must match postgresql.database value in cloudrock/values.yaml postgresql.username - name of a database user. NB : must match postgresql.username value in cloudrock/values.yaml postgresql.password - password of a database user postgresql.replicaCount - number of db replicas postgresql.syncReplication - enable/disable synchronous replication postgresql.repmgrUsername - username of repmgr user postgresql.repmgrPassword - password of repmgr user persistence.size - size of a database (for each replica) pgpoolImage.tag - tag of Pgpool image. Possible tags for default image can be found here postgresqlImage.tag - tag of PostgreSQL image. Possible tags for default image can be found here pgpoolImage.tag - registry of Pgpool image. postgresqlImage.tag - registry of PostgreSQL image. More information related to possible values here .","title":"Chart configuration"},{"location":"admin-guide/deployment/helm/docs/postgres-db/","text":"PostgreSQL chart configuration (without HA support) bitnami/postgresql chart is used as a database for Cloudrock. Add bitnami repo to helm: 1 helm repo add bitnami https://charts.bitnami.com/bitnami Install postgresql release: 1 helm install postgresql bitnami/postgresql --version 11 .9.1 -f postgresql-values.yaml NB : the value postgresql.HAEnabled for cloudrock release must be false . Chart configuration You can change default PostgreSQL config with the following variables in postgresql-values.yaml : postgresqlDatabase - name of a database. NB : must match postgresql.database value in cloudrock/values.yaml postgresqlUsername - name of a database user. NB : must match postgresql.username value in cloudrock/values.yaml postgresqlPassword - password of a database user persistence.size - size of a database image.tag - tag of PostgreSQL image. Possible tags for default image can be found here image.registry - registry of PostgreSQL image. More information related to possible values here .","title":"PostgreSQL chart configuration (without HA support)"},{"location":"admin-guide/deployment/helm/docs/postgres-db/#postgresql-chart-configuration-without-ha-support","text":"bitnami/postgresql chart is used as a database for Cloudrock. Add bitnami repo to helm: 1 helm repo add bitnami https://charts.bitnami.com/bitnami Install postgresql release: 1 helm install postgresql bitnami/postgresql --version 11 .9.1 -f postgresql-values.yaml NB : the value postgresql.HAEnabled for cloudrock release must be false .","title":"PostgreSQL chart configuration (without HA support)"},{"location":"admin-guide/deployment/helm/docs/postgres-db/#chart-configuration","text":"You can change default PostgreSQL config with the following variables in postgresql-values.yaml : postgresqlDatabase - name of a database. NB : must match postgresql.database value in cloudrock/values.yaml postgresqlUsername - name of a database user. NB : must match postgresql.username value in cloudrock/values.yaml postgresqlPassword - password of a database user persistence.size - size of a database image.tag - tag of PostgreSQL image. Possible tags for default image can be found here image.registry - registry of PostgreSQL image. More information related to possible values here .","title":"Chart configuration"},{"location":"admin-guide/deployment/helm/docs/rabbitmq/","text":"RabbitMQ configuration For rabbitmq installation, bitnami/rabbitmq is used. Installation Add bitnami repo to helm: 1 helm repo add bitnami https://charts.bitnami.com/bitnami Install rabbitmq-ha release: 1 helm install rmq bitnami/rabbitmq --version 10 .3.5 -f rmq-values.yaml Configuration You can change rabbitmq config with the following variables in rmq-values.yaml : replicaCount - number RMQ instances persistence.enabled - enable/disable persistence persistence.size - size for singe PV persistence.storageClass - storage class for PV auth.username - username for RMQ user auth.password - password for RMQ user For more config values, see this section In values.yaml file, you need to setup the following vars ( rabbitmq prefix): user - should be same as auth.username in the rmq-values.yaml file password - should be same as auth.password in the rmq-values.yaml file host - rabbitmq-ha service hostname (See this doc for details) customManagementPort - custom port for rabbitmq management interface customAMQPPort - custom port for AMQP access","title":"RabbitMQ configuration"},{"location":"admin-guide/deployment/helm/docs/rabbitmq/#rabbitmq-configuration","text":"For rabbitmq installation, bitnami/rabbitmq is used.","title":"RabbitMQ configuration"},{"location":"admin-guide/deployment/helm/docs/rabbitmq/#installation","text":"Add bitnami repo to helm: 1 helm repo add bitnami https://charts.bitnami.com/bitnami Install rabbitmq-ha release: 1 helm install rmq bitnami/rabbitmq --version 10 .3.5 -f rmq-values.yaml","title":"Installation"},{"location":"admin-guide/deployment/helm/docs/rabbitmq/#configuration","text":"You can change rabbitmq config with the following variables in rmq-values.yaml : replicaCount - number RMQ instances persistence.enabled - enable/disable persistence persistence.size - size for singe PV persistence.storageClass - storage class for PV auth.username - username for RMQ user auth.password - password for RMQ user For more config values, see this section In values.yaml file, you need to setup the following vars ( rabbitmq prefix): user - should be same as auth.username in the rmq-values.yaml file password - should be same as auth.password in the rmq-values.yaml file host - rabbitmq-ha service hostname (See this doc for details) customManagementPort - custom port for rabbitmq management interface customAMQPPort - custom port for AMQP access","title":"Configuration"},{"location":"admin-guide/deployment/helm/docs/saml2/","text":"SAML2 configuration To configure SAML2 for Cloudrock: Enable SAML2 support in values.yaml : add SAML2 string into cloudrock.authMethods list Set source directory in cloudrock.saml2.dir Place necessary files in the directory with the following manner ( . is the source directory root): sp.crt -> ./ sp.pem -> ./ saml2.conf.py -> ./","title":"SAML2 configuration"},{"location":"admin-guide/deployment/helm/docs/saml2/#saml2-configuration","text":"To configure SAML2 for Cloudrock: Enable SAML2 support in values.yaml : add SAML2 string into cloudrock.authMethods list Set source directory in cloudrock.saml2.dir Place necessary files in the directory with the following manner ( . is the source directory root): sp.crt -> ./ sp.pem -> ./ saml2.conf.py -> ./","title":"SAML2 configuration"},{"location":"admin-guide/deployment/helm/docs/service-endpoint/","text":"Service endpoints For communication inside a cluster, pods use services. Usually, that needs to define internal endpoints with service URL format. NB : It is important to set up namespace part correctly. If not, requests can come to unexpected service, which will cause errors. Endpoint format Fully qualified endpoint format is: 1 http://<service-name>.<namespace>.svc.<cluster>:<service-port> Where <service-name>.<namespace>.svc.<cluster> - hostname of service <service-port> - port of service For example: hostname is elasticsearch-master.elastic.svc.cluster.local service port is 9200 final URL is http://elasticsearch-master.elastic.svc.cluster.local:9200 If pods run in the same namespace and cluster, it can be simplified to: 1 http://<service-name>:<service-port> For example: http://elasticsearch-master:9200","title":"Service endpoints"},{"location":"admin-guide/deployment/helm/docs/service-endpoint/#service-endpoints","text":"For communication inside a cluster, pods use services. Usually, that needs to define internal endpoints with service URL format. NB : It is important to set up namespace part correctly. If not, requests can come to unexpected service, which will cause errors.","title":"Service endpoints"},{"location":"admin-guide/deployment/helm/docs/service-endpoint/#endpoint-format","text":"Fully qualified endpoint format is: 1 http://<service-name>.<namespace>.svc.<cluster>:<service-port> Where <service-name>.<namespace>.svc.<cluster> - hostname of service <service-port> - port of service For example: hostname is elasticsearch-master.elastic.svc.cluster.local service port is 9200 final URL is http://elasticsearch-master.elastic.svc.cluster.local:9200 If pods run in the same namespace and cluster, it can be simplified to: 1 http://<service-name>:<service-port> For example: http://elasticsearch-master:9200","title":"Endpoint format"},{"location":"admin-guide/deployment/helm/docs/tls-config/","text":"TLS configuration instructions Let\u2019s Encrypt setup It you want co configure letsencrypt certification, you need to: Set ingress.tls.source=\"letsEncrypt\" in values.yaml Create namespace for cert-manager 1 kubectl create namespace cert-manager Add repository and update repos list 1 2 helm repo add jetstack https://charts.jetstack.io helm repo update Install cert-manager release 1 2 3 4 5 helm install \\ cert-manager jetstack/cert-manager \\ --namespace cert-manager \\ --version v1.7.1 \\ --set installCRDs = true After that, cloudrock release is ready for installation. Your own certificate In case, when you want to use own certificate, you need to: Set ingress.tls.source=\"secret\" in values.yaml Set ingress.tls.secretsDir variable to directory with your tls.crt and tls.key files. By default it is set to tls After that, cloudrock release is ready for installation","title":"TLS configuration instructions"},{"location":"admin-guide/deployment/helm/docs/tls-config/#tls-configuration-instructions","text":"","title":"TLS configuration instructions"},{"location":"admin-guide/deployment/helm/docs/tls-config/#lets-encrypt-setup","text":"It you want co configure letsencrypt certification, you need to: Set ingress.tls.source=\"letsEncrypt\" in values.yaml Create namespace for cert-manager 1 kubectl create namespace cert-manager Add repository and update repos list 1 2 helm repo add jetstack https://charts.jetstack.io helm repo update Install cert-manager release 1 2 3 4 5 helm install \\ cert-manager jetstack/cert-manager \\ --namespace cert-manager \\ --version v1.7.1 \\ --set installCRDs = true After that, cloudrock release is ready for installation.","title":"Let\u2019s Encrypt setup"},{"location":"admin-guide/deployment/helm/docs/tls-config/#your-own-certificate","text":"In case, when you want to use own certificate, you need to: Set ingress.tls.source=\"secret\" in values.yaml Set ingress.tls.secretsDir variable to directory with your tls.crt and tls.key files. By default it is set to tls After that, cloudrock release is ready for installation","title":"Your own certificate"},{"location":"admin-guide/deployment/helm/docs/whitelabeling/","text":"White-labeling instructions To setup white-labeling, you can define next variables in cloudrock/values.yaml file: shortPageTitle - custom prefix for page title modePageTitle - custom page title loginLogoPath - path to custom .png image file for login page (should be in cloudrock/ chart directory) sidebarLogoPath - path to custom .png image file for sidebar header (should be in cloudrock/ chart directory) poweredByLogoPath - path to custom .png image file for \"powered by\" part of login page (should be in cloudrock/ chart directory) faviconPath - path to custom favicon .png image file tosHtmlPath - path to custom terms of service file ( tos.html ) privacyHtmlPath - path to custom privacy statement file ( privacy.html ) brandColor - Hex color definition is used in Cloudrock-UI landing page for login button. heroImagePath - Relative path to image rendered at hero section of Cloudrock-UI landing page. heroLinkLabel - Label for link in hero section of Cloudrock-UI landing page. It can be lead to support site or blog post. heroLinkUrl - Link URL in hero section of Cloudrock-UI landing page. siteDescription - text at hero section of Cloudrock-UI landing page. NB: the *Path values take place only if respectful *Url values are not specified. If both types are defined, the precedence is taken by URL ( *Url ) for all cases. all of imported files must be within chart root directory","title":"White-labeling instructions"},{"location":"admin-guide/deployment/helm/docs/whitelabeling/#white-labeling-instructions","text":"To setup white-labeling, you can define next variables in cloudrock/values.yaml file: shortPageTitle - custom prefix for page title modePageTitle - custom page title loginLogoPath - path to custom .png image file for login page (should be in cloudrock/ chart directory) sidebarLogoPath - path to custom .png image file for sidebar header (should be in cloudrock/ chart directory) poweredByLogoPath - path to custom .png image file for \"powered by\" part of login page (should be in cloudrock/ chart directory) faviconPath - path to custom favicon .png image file tosHtmlPath - path to custom terms of service file ( tos.html ) privacyHtmlPath - path to custom privacy statement file ( privacy.html ) brandColor - Hex color definition is used in Cloudrock-UI landing page for login button. heroImagePath - Relative path to image rendered at hero section of Cloudrock-UI landing page. heroLinkLabel - Label for link in hero section of Cloudrock-UI landing page. It can be lead to support site or blog post. heroLinkUrl - Link URL in hero section of Cloudrock-UI landing page. siteDescription - text at hero section of Cloudrock-UI landing page. NB: the *Path values take place only if respectful *Url values are not specified. If both types are defined, the precedence is taken by URL ( *Url ) for all cases. all of imported files must be within chart root directory","title":"White-labeling instructions"},{"location":"admin-guide/identities/LDAP/","text":"LDAP Cloudrock allows you to authenticate using identities from a LDAP server. Prerequisites Below it is assumed that LDAP server is provided by FreeIPA. Although LDAP authentication would work with any other LDAP server as well, you may need to customize configuration for Cloudrock Metal. Please ensure that Cloudrock Metal API server has access to the LDAP server. By default LDAP server listens on TCP and UDP port 389, or on port 636 for LDAPS (LDAP over SSL). If this port is filtered out by firewall, you wouldn't be able to authenticate via LDAP. You should know LDAP server URI, for example, FreeIPA demo server has ldap://ipa.demo1.freeipa.org . You should know username and password of LDAP admin user. For example, FreeIPA demo server uses username=admin and password=Secret123. Add LDAP configuration to Cloudrock Metal configuration Example configuration is below, please adjust to your specific deployment. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 import ldap from django_auth_ldap.config import LDAPSearch , GroupOfNamesType # LDAP authentication. # See also: https://django-auth-ldap.readthedocs.io/en/latest/authentication.html AUTHENTICATION_BACKENDS += ( 'django_auth_ldap.backend.LDAPBackend' , ) AUTH_LDAP_SERVER_URI = 'ldap://ipa.demo1.freeipa.org' # Following variables are not used by django-auth-ldap, # they are used as templates for other variables AUTH_LDAP_BASE = 'cn=accounts,dc=demo1,dc=freeipa,dc=org' AUTH_LDAP_USER_BASE = 'cn=users,' + AUTH_LDAP_BASE # Format authenticating user's distinguished name using template AUTH_LDAP_USER_DN_TEMPLATE = 'uid= %(user)s ,' + AUTH_LDAP_USER_BASE # Credentials for admin user AUTH_LDAP_BIND_DN = 'uid=admin,' + AUTH_LDAP_USER_BASE AUTH_LDAP_BIND_PASSWORD = 'Secret123' # Populate the Django user from the LDAP directory. AUTH_LDAP_USER_ATTR_MAP = { 'full_name' : 'displayName' , 'email' : 'mail' } # Set up the basic group parameters. AUTH_LDAP_GROUP_BASE = \"cn=groups,\" + AUTH_LDAP_BASE AUTH_LDAP_GROUP_FILTER = \"(objectClass=groupOfNames)\" AUTH_LDAP_GROUP_SEARCH = LDAPSearch ( AUTH_LDAP_GROUP_BASE , ldap . SCOPE_SUBTREE , AUTH_LDAP_GROUP_FILTER ) AUTH_LDAP_GROUP_TYPE = GroupOfNamesType ( name_attr = \"cn\" ) AUTH_LDAP_USER_FLAGS_BY_GROUP = { 'is_staff' : 'cn=admins,' + AUTH_LDAP_GROUP_BASE , 'is_support' : 'cn=support,' + AUTH_LDAP_GROUP_BASE , } Configuration above is based on LDAP server exposed by FreeIPA. To make it work, there are some things that need to be verified in FreeIPA: Ensure that admins and support groups exist in LDAP server. You may do it using FreeIPA admin UI. If user is assigned to admins group in LDAP, he becomes staff in Cloudrock. If user is assigned to support group in LDAP, he becomes support user in Cloudrock. For example, consider the manager user which belong to both groups: Field mapping displayName attribute in LDAP is mapped to full_name attribute in Cloudrock. mail field in LDAP is mapped to email attribute in Cloudrock. Consider for example, the following user attributes in LDAP: Here's how it is mapped in Cloudrock: And here's how it is displayed when user initially logs into Cloudrock via Cloudrock-UI:","title":"LDAP"},{"location":"admin-guide/identities/LDAP/#ldap","text":"Cloudrock allows you to authenticate using identities from a LDAP server.","title":"LDAP"},{"location":"admin-guide/identities/LDAP/#prerequisites","text":"Below it is assumed that LDAP server is provided by FreeIPA. Although LDAP authentication would work with any other LDAP server as well, you may need to customize configuration for Cloudrock Metal. Please ensure that Cloudrock Metal API server has access to the LDAP server. By default LDAP server listens on TCP and UDP port 389, or on port 636 for LDAPS (LDAP over SSL). If this port is filtered out by firewall, you wouldn't be able to authenticate via LDAP. You should know LDAP server URI, for example, FreeIPA demo server has ldap://ipa.demo1.freeipa.org . You should know username and password of LDAP admin user. For example, FreeIPA demo server uses username=admin and password=Secret123.","title":"Prerequisites"},{"location":"admin-guide/identities/LDAP/#add-ldap-configuration-to-cloudrock-metal-configuration","text":"Example configuration is below, please adjust to your specific deployment. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 import ldap from django_auth_ldap.config import LDAPSearch , GroupOfNamesType # LDAP authentication. # See also: https://django-auth-ldap.readthedocs.io/en/latest/authentication.html AUTHENTICATION_BACKENDS += ( 'django_auth_ldap.backend.LDAPBackend' , ) AUTH_LDAP_SERVER_URI = 'ldap://ipa.demo1.freeipa.org' # Following variables are not used by django-auth-ldap, # they are used as templates for other variables AUTH_LDAP_BASE = 'cn=accounts,dc=demo1,dc=freeipa,dc=org' AUTH_LDAP_USER_BASE = 'cn=users,' + AUTH_LDAP_BASE # Format authenticating user's distinguished name using template AUTH_LDAP_USER_DN_TEMPLATE = 'uid= %(user)s ,' + AUTH_LDAP_USER_BASE # Credentials for admin user AUTH_LDAP_BIND_DN = 'uid=admin,' + AUTH_LDAP_USER_BASE AUTH_LDAP_BIND_PASSWORD = 'Secret123' # Populate the Django user from the LDAP directory. AUTH_LDAP_USER_ATTR_MAP = { 'full_name' : 'displayName' , 'email' : 'mail' } # Set up the basic group parameters. AUTH_LDAP_GROUP_BASE = \"cn=groups,\" + AUTH_LDAP_BASE AUTH_LDAP_GROUP_FILTER = \"(objectClass=groupOfNames)\" AUTH_LDAP_GROUP_SEARCH = LDAPSearch ( AUTH_LDAP_GROUP_BASE , ldap . SCOPE_SUBTREE , AUTH_LDAP_GROUP_FILTER ) AUTH_LDAP_GROUP_TYPE = GroupOfNamesType ( name_attr = \"cn\" ) AUTH_LDAP_USER_FLAGS_BY_GROUP = { 'is_staff' : 'cn=admins,' + AUTH_LDAP_GROUP_BASE , 'is_support' : 'cn=support,' + AUTH_LDAP_GROUP_BASE , } Configuration above is based on LDAP server exposed by FreeIPA. To make it work, there are some things that need to be verified in FreeIPA: Ensure that admins and support groups exist in LDAP server. You may do it using FreeIPA admin UI. If user is assigned to admins group in LDAP, he becomes staff in Cloudrock. If user is assigned to support group in LDAP, he becomes support user in Cloudrock. For example, consider the manager user which belong to both groups:","title":"Add LDAP configuration to Cloudrock Metal configuration"},{"location":"admin-guide/identities/LDAP/#field-mapping","text":"displayName attribute in LDAP is mapped to full_name attribute in Cloudrock. mail field in LDAP is mapped to email attribute in Cloudrock. Consider for example, the following user attributes in LDAP: Here's how it is mapped in Cloudrock: And here's how it is displayed when user initially logs into Cloudrock via Cloudrock-UI:","title":"Field mapping"},{"location":"admin-guide/identities/TARA/","text":"TARA Cloudrock supports integration with TARA authentication service. To enable it, please register a new client for Cloudrock deployment and set configuration settings for TARA. Check configuration guide for available settings.","title":"TARA"},{"location":"admin-guide/identities/TARA/#tara","text":"Cloudrock supports integration with TARA authentication service. To enable it, please register a new client for Cloudrock deployment and set configuration settings for TARA. Check configuration guide for available settings.","title":"TARA"},{"location":"admin-guide/identities/eduGAIN/","text":"eduGAIN Overview eduGAIN is a global federation of identity and service providers, based technically on SAML2. In order to allow eduGAIN users to access Cloudrock, there are two steps: Cloudrock deployment must be registered as a service provider in eduGAIN federation. Cloudrock must get a list of identities that are trusted for authentication. Tip SAML is a complicated and fragile technology. GEANT provides an alternative to direct integration of SAML - eduTEAMS , which exposes an OpenID Connect protocol for service providers. Cloudrock relies on djangosaml2 for the heavylifting of SAML processing, so for fine tuning configuration, contact corresponding project documentation. Registering Cloudrock as Service Provider Add SAML configuration to Cloudrock Metal configuration Example configuration is below, please adjust to your specific deployment. Once applied, service metadata will be visible at Cloudrock deployment URL: https://cloudrock.example.com/api-auth/saml2/metadata/ . That data needs to be propagated to the federation operator for inclusion into the federation. Tip Managed ansible simplifies configuration of the eduGAIN integration and should be a preferred method for all supported deployments. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 import datetime import saml2 from saml2.entity_category.edugain import COC CLOUDROCK_AUTH_SAML2 = { # used for assigning the registration method to the user 'name' : 'saml2' , # full path to the xmlsec1 binary program 'xmlsec_binary' : '/usr/bin/xmlsec1' , # required for assertion consumer, single logout services and entity ID 'base_url' : '' , # directory with attribute mapping 'attribute_map_dir' : '' , # set to True to output debugging information 'debug' : False , # IdPs metadata XML files stored locally 'idp_metadata_local' : [], # IdPs metadata XML files stored remotely 'idp_metadata_remote' : [], # logging # empty to disable logging SAML2-related stuff to file 'log_file' : '' , 'log_level' : 'INFO' , # Indicates if the entity will sign the logout requests 'logout_requests_signed' : 'true' , # Indicates if the authentication requests sent should be signed by default 'authn_requests_signed' : 'true' , # Identifies the Signature algorithm URL according to the XML Signature specification # SHA1 is used by default 'signature_algorithm' : None , # Identifies the Message Digest algorithm URL according to the XML Signature specification # SHA1 is used by default 'digest_algorithm' : None , # Identified NameID format to use. None means default, empty string (\"\") disables addition of entity 'nameid_format' : None , # PEM formatted certificate chain file 'cert_file' : '' , # PEM formatted certificate key file 'key_file' : '' , # SAML attributes that are required to identify a user 'required_attributes' : [], # SAML attributes that may be useful to have but not required 'optional_attributes' : [], # mapping between SAML attributes and User fields 'saml_attribute_mapping' : {}, # organization responsible for the service # you can set multilanguage information here 'organization' : {}, # links to the entity categories 'categories' : [ COC ], # attributes required by CoC # https://wiki.refeds.org/display/CODE/SAML+2+Profile+for+the+Data+Protection+Code+of+Conduct 'privacy_statement_url' : 'http://example.com/privacy-policy/' , 'display_name' : 'Service provider display name' , 'description' : 'Service provider description' , # mdpi attributes 'registration_policy' : 'http://example.com/registration-policy/' , 'registration_authority' : 'http://example.com/registration-authority/' , 'registration_instant' : datetime . datetime ( 2017 , 1 , 1 ) . isoformat (), 'ENABLE_SINGLE_LOGOUT' : False , 'ALLOW_TO_SELECT_IDENTITY_PROVIDER' : True , 'IDENTITY_PROVIDER_URL' : None , 'IDENTITY_PROVIDER_LABEL' : None , 'DEFAULT_BINDING' : saml2 . BINDING_HTTP_POST , 'DISCOVERY_SERVICE_URL' : None , 'DISCOVERY_SERVICE_LABEL' : None , } Example of generated metadata 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 <?xml version=\"1.0\" encoding=\"UTF-8\"?> <ns0:EntityDescriptor xmlns:ns0= \"urn:oasis:names:tc:SAML:2.0:metadata\" xmlns:ns1= \"urn:oasis:names:tc:SAML:metadata:attribute\" xmlns:ns2= \"urn:oasis:names:tc:SAML:2.0:assertion\" xmlns:ns4= \"urn:oasis:names:tc:SAML:metadata:algsupport\" xmlns:ns5= \"urn:oasis:names:tc:SAML:metadata:rpi\" xmlns:ns6= \"urn:oasis:names:tc:SAML:metadata:ui\" xmlns:ns7= \"http://www.w3.org/2000/09/xmldsig#\" xmlns:xsi= \"http://www.w3.org/2001/XMLSchema-instance\" entityID= \"https://api.etais.ee/api-auth/saml2/metadata/\" > <ns0:Extensions> <ns1:EntityAttributes> <ns2:Attribute Name= \"http://macedir.org/entity-category\" NameFormat= \"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\" > <ns2:AttributeValue xmlns:xs= \"http://www.w3.org/2001/XMLSchema\" xsi:type= \"xs:string\" > http://www.geant.net/uri/dataprotection-code-of-conduct/v1 </ns2:AttributeValue> </ns2:Attribute> </ns1:EntityAttributes> <ns4:DigestMethod Algorithm= \"http://www.w3.org/2000/09/xmldsig#sha1\" /> <ns4:DigestMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#sha224\" /> <ns4:DigestMethod Algorithm= \"http://www.w3.org/2001/04/xmlenc#sha256\" /> <ns4:DigestMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#sha384\" /> <ns4:DigestMethod Algorithm= \"http://www.w3.org/2001/04/xmlenc#sha512\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2000/09/xmldsig#dsa-sha1\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2009/xmldsig11#dsa-sha256\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha1\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha224\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha256\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha384\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha512\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2000/09/xmldsig#rsa-sha1\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#rsa-sha224\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#rsa-sha256\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#rsa-sha384\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#rsa-sha512\" /> <ns5:RegistrationInfo registrationAuthority= \"http://taat.edu.ee\" registrationInstant= \"2017-01-01T00:00:00\" > <ns5:RegistrationPolicy xml:lang= \"en\" > http://taat.edu.ee/main/wp-content/uploads/Federation_Policy_1.3.pdf </ns5:RegistrationPolicy> </ns5:RegistrationInfo> </ns0:Extensions> <ns0:SPSSODescriptor protocolSupportEnumeration= \"urn:oasis:names:tc:SAML:2.0:protocol\" AuthnRequestsSigned= \"true\" WantAssertionsSigned= \"true\" > <ns0:Extensions> <ns6:UIInfo> <ns6:DisplayName xml:lang= \"en\" > ETAIS Self-Service </ns6:DisplayName> <ns6:Description xml:lang= \"en\" > Self-service for users of Canadian Scientific Computing Infrastructure (ETAIS) </ns6:Description> <ns6:Logo> https://minu.etais.ee/login-logo.png </ns6:Logo> <ns6:PrivacyStatementURL xml:lang= \"en\" > https://minu.etais.ee/views/policy/privacy-full.html </ns6:PrivacyStatementURL> </ns6:UIInfo> </ns0:Extensions> <ns0:KeyDescriptor use= \"signing\" > <ns7:KeyInfo> <ns7:X509Data> <ns7:X509Certificate> MIIDVzCCAj+gAwIBAgIJAN80zoFR2/UbMA0GCSqGSIb3DQEBCwUAMEIxCzAJBgNV BAYTAlhYMRUwEwYDVQQHDAxEZWZhdWx0IENpdHkxHDAaBgNVBAoME0RlZmF1bHQg Q29tcGFueSBMdGQwHhcNMTcwNDIxMDczMzA1WhcNMjcwNDIxMDczMzA1WjBCMQsw CQYDVQQGEwJYWDEVMBMGA1UEBwwMRGVmYXVsdCBDaXR5MRwwGgYDVQQKDBNEZWZh dWx0IENvbXBhbnkgTHRkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA o87tb/hEU/igqFPtCFKMvC6LozTbH9y3I4lUVH38FDavDzrHAg1sVr5FEqguApeT xr/cmzsFMIB+XkAf9oI8xi2lUdorgeZFPFnUH0um4yXIJwBjrmgofUcybt84ee44 tM7AZKCAhinFDQUbjYV1LQP44QvFdGiklHGoo2NaVEqJwH6ce/8ioG5aFf2ISS6p fh3qOGVuQgansHFn+v+CvX+JU6FHB7mP+h3Xv+AoVjPz7b7E58rxn9qspy/N4LbB iDk7iBidsXEWYwYsSVP2cTrgKFktn5tB4YYZe0pSZNoCeVq05RK7kBy8yYCWTVZN Emkz5avL9Z2SDaGLY/9CTwIDAQABo1AwTjAdBgNVHQ4EFgQUrdY8o4OeseOy7ReD ZEZCKUZTk2gwHwYDVR0jBBgwFoAUrdY8o4OeseOy7ReDZEZCKUZTk2gwDAYDVR0T BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAQEAoaygm+5U4j3/djWGQulXS2gdrPJV AS8zBuzQPVkhH76WcD8wxzuoceM80jPWLcP6Eq5Tma7rrqOE+QHrY8bm7LIYUEn2 fK/whozFyZ+TswEaDRjN6wL/FDuhu472Lnsg3rvE6s0eW1nlOHuqmqBQPb/kIMOj B3KOI6pqEfb+FqiZ2J/u/4KiOWaA8X9JQUo+HzWNEAPnNUoTl/yGr0Ad6z9YFbsu VnvJVTtGcu8pB5cjm7UtfN73ywEm/a/QXplus0U/Kv5XsSqaGa/Gw6pyX8LOc2yq I0XyOzj7DUcvMVZr5Vf/FVO2Od0Pb03+Wv4JRB5vXM1MsU+xAVgCm0pfew== </ns7:X509Certificate> </ns7:X509Data> </ns7:KeyInfo> </ns0:KeyDescriptor> <ns0:KeyDescriptor use= \"encryption\" > <ns7:KeyInfo> <ns7:X509Data> <ns7:X509Certificate> MIIDVzCCAj+gAwIBAgIJAN80zoFR2/UbMA0GCSqGSIb3DQEBCwUAMEIxCzAJBgNV BAYTAlhYMRUwEwYDVQQHDAxEZWZhdWx0IENpdHkxHDAaBgNVBAoME0RlZmF1bHQg Q29tcGFueSBMdGQwHhcNMTcwNDIxMDczMzA1WhcNMjcwNDIxMDczMzA1WjBCMQsw CQYDVQQGEwJYWDEVMBMGA1UEBwwMRGVmYXVsdCBDaXR5MRwwGgYDVQQKDBNEZWZh dWx0IENvbXBhbnkgTHRkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA o87tb/hEU/igqFPtCFKMvC6LozTbH9y3I4lUVH38FDavDzrHAg1sVr5FEqguApeT xr/cmzsFMIB+XkAf9oI8xi2lUdorgeZFPFnUH0um4yXIJwBjrmgofUcybt84ee44 tM7AZKCAhinFDQUbjYV1LQP44QvFdGiklHGoo2NaVEqJwH6ce/8ioG5aFf2ISS6p fh3qOGVuQgansHFn+v+CvX+JU6FHB7mP+h3Xv+AoVjPz7b7E58rxn9qspy/N4LbB iDk7iBidsXEWYwYsSVP2cTrgKFktn5tB4YYZe0pSZNoCeVq05RK7kBy8yYCWTVZN Emkz5avL9Z2SDaGLY/9CTwIDAQABo1AwTjAdBgNVHQ4EFgQUrdY8o4OeseOy7ReD ZEZCKUZTk2gwHwYDVR0jBBgwFoAUrdY8o4OeseOy7ReDZEZCKUZTk2gwDAYDVR0T BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAQEAoaygm+5U4j3/djWGQulXS2gdrPJV AS8zBuzQPVkhH76WcD8wxzuoceM80jPWLcP6Eq5Tma7rrqOE+QHrY8bm7LIYUEn2 fK/whozFyZ+TswEaDRjN6wL/FDuhu472Lnsg3rvE6s0eW1nlOHuqmqBQPb/kIMOj B3KOI6pqEfb+FqiZ2J/u/4KiOWaA8X9JQUo+HzWNEAPnNUoTl/yGr0Ad6z9YFbsu VnvJVTtGcu8pB5cjm7UtfN73ywEm/a/QXplus0U/Kv5XsSqaGa/Gw6pyX8LOc2yq I0XyOzj7DUcvMVZr5Vf/FVO2Od0Pb03+Wv4JRB5vXM1MsU+xAVgCm0pfew== </ns7:X509Certificate> </ns7:X509Data> </ns7:KeyInfo> </ns0:KeyDescriptor> <ns0:SingleLogoutService Binding= \"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect\" Location= \"https://api.etais.ee/api-auth/saml2/logout/complete/\" /> <ns0:SingleLogoutService Binding= \"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST\" Location= \"https://api.etais.ee/api-auth/saml2/logout/complete/\" /> <ns0:AssertionConsumerService Binding= \"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST\" Location= \"https://api.etais.ee/api-auth/saml2/login/complete/\" index= \"1\" /> <ns0:AttributeConsumingService index= \"1\" > <ns0:ServiceName xml:lang= \"en\" > ETAIS Self-Service </ns0:ServiceName> <ns0:RequestedAttribute Name= \"urn:mace:dir:attribute-def:cn\" NameFormat= \"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\" FriendlyName= \"cn\" isRequired= \"true\" /> <ns0:RequestedAttribute Name= \"urn:oid:0.9.2342.19200300.100.1.3\" NameFormat= \"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\" FriendlyName= \"mail\" isRequired= \"true\" /> <ns0:RequestedAttribute Name= \"schacPersonalUniqueID\" NameFormat= \"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\" isRequired= \"true\" /> <ns0:RequestedAttribute Name= \"urn:oid:1.3.6.1.4.1.5923.1.1.1.6\" NameFormat= \"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\" FriendlyName= \"eduPersonPrincipalName\" isRequired= \"true\" /> <ns0:RequestedAttribute Name= \"schacHomeOrganization\" NameFormat= \"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\" isRequired= \"false\" /> <ns0:RequestedAttribute Name= \"urn:oid:2.16.840.1.113730.3.1.39\" NameFormat= \"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\" FriendlyName= \"preferredLanguage\" isRequired= \"false\" /> <ns0:RequestedAttribute Name= \"urn:oid:1.3.6.1.4.1.5923.1.1.1.9\" NameFormat= \"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\" FriendlyName= \"eduPersonScopedAffiliation\" isRequired= \"false\" /> </ns0:AttributeConsumingService> </ns0:SPSSODescriptor> <ns0:Organization> <ns0:OrganizationName xml:lang= \"et\" > ETAIS </ns0:OrganizationName> <ns0:OrganizationName xml:lang= \"en\" > ETAIS </ns0:OrganizationName> <ns0:OrganizationDisplayName xml:lang= \"et\" > ETAIS </ns0:OrganizationDisplayName> <ns0:OrganizationDisplayName xml:lang= \"en\" > ETAIS </ns0:OrganizationDisplayName> <ns0:OrganizationURL xml:lang= \"et\" > http://etais.ee/ </ns0:OrganizationURL> <ns0:OrganizationURL xml:lang= \"en\" > http://etais.ee/ </ns0:OrganizationURL> </ns0:Organization> <ns0:ContactPerson contactType= \"technical\" > <ns0:GivenName> Administrator </ns0:GivenName> <ns0:EmailAddress> etais@etais.ee </ns0:EmailAddress> </ns0:ContactPerson> </ns0:EntityDescriptor> Adding trusted identity providers In order to configure Cloudrock to use SAML2 authentication you should specify identity provider metadata. If metadata XML is stored locally, it is cached in the local SQL database. Usually metadata XML file is big, so it is necessary to use local cache in this case. But you should ensure that metadata XML file is refreshed via cron on a regular basis. A management command cloudrock sync_saml2_providers performs refreshing of the data. If metadata XML is accessed remotely, it is not cached in SQL database. Therefore you should ensure that metadata XML is small enough. In this case you should download metadata signing certificate locally and specify its path in Cloudrock configuration. The certificate is used to retrieve the metadata securely. Please note that security certificates are updated regularly, therefore you should update configuration whenever certificate is updated. By convention, both metadata signing certificate and metadata itself are downloaded to /etc/cloudrock/saml2 in Cloudrock Metal instances. References TAAT configuration TaaT certificates can be downloaded from: http://taat.edu.ee/main/dokumendid/sertifikaadid/ . Metadata URL for test hub is https://reos.taat.edu.ee/saml2/idp/metadata.php and for production hub is https://sarvik.taat.edu.ee/saml2/idp/metadata.php . Note, the certificate must correspond to the hub you want connect to. Using Janus Janus is a self-service for managing Service Provider records. Create a new connection: New connection ID must be equal to the base_url in saml.conf.py + /apu-auth/saml2/metadata/ Choose SAML 2.0 SP for connection type. Click Create button In connection tab select or create ARP. Fields that ARP include must be in the saml_attribute_mapping. Navigate to the Import metadata tab and paste same URL as in the first step. Click on the Get metadata. Navigate to the Validate tab and check whether all the tests pass. You can fix metadata in Metadata tab. HAKA configuration Production hub metadata is described at https://wiki.eduuni.fi/display/CSCHAKA/Haka+metadata . Test hub metadata is described at https://wiki.eduuni.fi/display/CSCHAKA/Verifying+Haka+compatibility . FEDI configuration Production hub metadata is described at https://fedi.litnet.lt/en/metadata . Discovery is supported: https://discovery.litnet.lt/simplesaml/module.php/discopower/disco.php .","title":"eduGAIN"},{"location":"admin-guide/identities/eduGAIN/#edugain","text":"","title":"eduGAIN"},{"location":"admin-guide/identities/eduGAIN/#overview","text":"eduGAIN is a global federation of identity and service providers, based technically on SAML2. In order to allow eduGAIN users to access Cloudrock, there are two steps: Cloudrock deployment must be registered as a service provider in eduGAIN federation. Cloudrock must get a list of identities that are trusted for authentication. Tip SAML is a complicated and fragile technology. GEANT provides an alternative to direct integration of SAML - eduTEAMS , which exposes an OpenID Connect protocol for service providers. Cloudrock relies on djangosaml2 for the heavylifting of SAML processing, so for fine tuning configuration, contact corresponding project documentation.","title":"Overview"},{"location":"admin-guide/identities/eduGAIN/#registering-cloudrock-as-service-provider","text":"","title":"Registering Cloudrock as Service Provider"},{"location":"admin-guide/identities/eduGAIN/#add-saml-configuration-to-cloudrock-metal-configuration","text":"Example configuration is below, please adjust to your specific deployment. Once applied, service metadata will be visible at Cloudrock deployment URL: https://cloudrock.example.com/api-auth/saml2/metadata/ . That data needs to be propagated to the federation operator for inclusion into the federation. Tip Managed ansible simplifies configuration of the eduGAIN integration and should be a preferred method for all supported deployments. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 import datetime import saml2 from saml2.entity_category.edugain import COC CLOUDROCK_AUTH_SAML2 = { # used for assigning the registration method to the user 'name' : 'saml2' , # full path to the xmlsec1 binary program 'xmlsec_binary' : '/usr/bin/xmlsec1' , # required for assertion consumer, single logout services and entity ID 'base_url' : '' , # directory with attribute mapping 'attribute_map_dir' : '' , # set to True to output debugging information 'debug' : False , # IdPs metadata XML files stored locally 'idp_metadata_local' : [], # IdPs metadata XML files stored remotely 'idp_metadata_remote' : [], # logging # empty to disable logging SAML2-related stuff to file 'log_file' : '' , 'log_level' : 'INFO' , # Indicates if the entity will sign the logout requests 'logout_requests_signed' : 'true' , # Indicates if the authentication requests sent should be signed by default 'authn_requests_signed' : 'true' , # Identifies the Signature algorithm URL according to the XML Signature specification # SHA1 is used by default 'signature_algorithm' : None , # Identifies the Message Digest algorithm URL according to the XML Signature specification # SHA1 is used by default 'digest_algorithm' : None , # Identified NameID format to use. None means default, empty string (\"\") disables addition of entity 'nameid_format' : None , # PEM formatted certificate chain file 'cert_file' : '' , # PEM formatted certificate key file 'key_file' : '' , # SAML attributes that are required to identify a user 'required_attributes' : [], # SAML attributes that may be useful to have but not required 'optional_attributes' : [], # mapping between SAML attributes and User fields 'saml_attribute_mapping' : {}, # organization responsible for the service # you can set multilanguage information here 'organization' : {}, # links to the entity categories 'categories' : [ COC ], # attributes required by CoC # https://wiki.refeds.org/display/CODE/SAML+2+Profile+for+the+Data+Protection+Code+of+Conduct 'privacy_statement_url' : 'http://example.com/privacy-policy/' , 'display_name' : 'Service provider display name' , 'description' : 'Service provider description' , # mdpi attributes 'registration_policy' : 'http://example.com/registration-policy/' , 'registration_authority' : 'http://example.com/registration-authority/' , 'registration_instant' : datetime . datetime ( 2017 , 1 , 1 ) . isoformat (), 'ENABLE_SINGLE_LOGOUT' : False , 'ALLOW_TO_SELECT_IDENTITY_PROVIDER' : True , 'IDENTITY_PROVIDER_URL' : None , 'IDENTITY_PROVIDER_LABEL' : None , 'DEFAULT_BINDING' : saml2 . BINDING_HTTP_POST , 'DISCOVERY_SERVICE_URL' : None , 'DISCOVERY_SERVICE_LABEL' : None , }","title":"Add SAML configuration to Cloudrock Metal configuration"},{"location":"admin-guide/identities/eduGAIN/#example-of-generated-metadata","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 <?xml version=\"1.0\" encoding=\"UTF-8\"?> <ns0:EntityDescriptor xmlns:ns0= \"urn:oasis:names:tc:SAML:2.0:metadata\" xmlns:ns1= \"urn:oasis:names:tc:SAML:metadata:attribute\" xmlns:ns2= \"urn:oasis:names:tc:SAML:2.0:assertion\" xmlns:ns4= \"urn:oasis:names:tc:SAML:metadata:algsupport\" xmlns:ns5= \"urn:oasis:names:tc:SAML:metadata:rpi\" xmlns:ns6= \"urn:oasis:names:tc:SAML:metadata:ui\" xmlns:ns7= \"http://www.w3.org/2000/09/xmldsig#\" xmlns:xsi= \"http://www.w3.org/2001/XMLSchema-instance\" entityID= \"https://api.etais.ee/api-auth/saml2/metadata/\" > <ns0:Extensions> <ns1:EntityAttributes> <ns2:Attribute Name= \"http://macedir.org/entity-category\" NameFormat= \"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\" > <ns2:AttributeValue xmlns:xs= \"http://www.w3.org/2001/XMLSchema\" xsi:type= \"xs:string\" > http://www.geant.net/uri/dataprotection-code-of-conduct/v1 </ns2:AttributeValue> </ns2:Attribute> </ns1:EntityAttributes> <ns4:DigestMethod Algorithm= \"http://www.w3.org/2000/09/xmldsig#sha1\" /> <ns4:DigestMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#sha224\" /> <ns4:DigestMethod Algorithm= \"http://www.w3.org/2001/04/xmlenc#sha256\" /> <ns4:DigestMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#sha384\" /> <ns4:DigestMethod Algorithm= \"http://www.w3.org/2001/04/xmlenc#sha512\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2000/09/xmldsig#dsa-sha1\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2009/xmldsig11#dsa-sha256\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha1\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha224\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha256\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha384\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha512\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2000/09/xmldsig#rsa-sha1\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#rsa-sha224\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#rsa-sha256\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#rsa-sha384\" /> <ns4:SigningMethod Algorithm= \"http://www.w3.org/2001/04/xmldsig-more#rsa-sha512\" /> <ns5:RegistrationInfo registrationAuthority= \"http://taat.edu.ee\" registrationInstant= \"2017-01-01T00:00:00\" > <ns5:RegistrationPolicy xml:lang= \"en\" > http://taat.edu.ee/main/wp-content/uploads/Federation_Policy_1.3.pdf </ns5:RegistrationPolicy> </ns5:RegistrationInfo> </ns0:Extensions> <ns0:SPSSODescriptor protocolSupportEnumeration= \"urn:oasis:names:tc:SAML:2.0:protocol\" AuthnRequestsSigned= \"true\" WantAssertionsSigned= \"true\" > <ns0:Extensions> <ns6:UIInfo> <ns6:DisplayName xml:lang= \"en\" > ETAIS Self-Service </ns6:DisplayName> <ns6:Description xml:lang= \"en\" > Self-service for users of Canadian Scientific Computing Infrastructure (ETAIS) </ns6:Description> <ns6:Logo> https://minu.etais.ee/login-logo.png </ns6:Logo> <ns6:PrivacyStatementURL xml:lang= \"en\" > https://minu.etais.ee/views/policy/privacy-full.html </ns6:PrivacyStatementURL> </ns6:UIInfo> </ns0:Extensions> <ns0:KeyDescriptor use= \"signing\" > <ns7:KeyInfo> <ns7:X509Data> <ns7:X509Certificate> MIIDVzCCAj+gAwIBAgIJAN80zoFR2/UbMA0GCSqGSIb3DQEBCwUAMEIxCzAJBgNV BAYTAlhYMRUwEwYDVQQHDAxEZWZhdWx0IENpdHkxHDAaBgNVBAoME0RlZmF1bHQg Q29tcGFueSBMdGQwHhcNMTcwNDIxMDczMzA1WhcNMjcwNDIxMDczMzA1WjBCMQsw CQYDVQQGEwJYWDEVMBMGA1UEBwwMRGVmYXVsdCBDaXR5MRwwGgYDVQQKDBNEZWZh dWx0IENvbXBhbnkgTHRkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA o87tb/hEU/igqFPtCFKMvC6LozTbH9y3I4lUVH38FDavDzrHAg1sVr5FEqguApeT xr/cmzsFMIB+XkAf9oI8xi2lUdorgeZFPFnUH0um4yXIJwBjrmgofUcybt84ee44 tM7AZKCAhinFDQUbjYV1LQP44QvFdGiklHGoo2NaVEqJwH6ce/8ioG5aFf2ISS6p fh3qOGVuQgansHFn+v+CvX+JU6FHB7mP+h3Xv+AoVjPz7b7E58rxn9qspy/N4LbB iDk7iBidsXEWYwYsSVP2cTrgKFktn5tB4YYZe0pSZNoCeVq05RK7kBy8yYCWTVZN Emkz5avL9Z2SDaGLY/9CTwIDAQABo1AwTjAdBgNVHQ4EFgQUrdY8o4OeseOy7ReD ZEZCKUZTk2gwHwYDVR0jBBgwFoAUrdY8o4OeseOy7ReDZEZCKUZTk2gwDAYDVR0T BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAQEAoaygm+5U4j3/djWGQulXS2gdrPJV AS8zBuzQPVkhH76WcD8wxzuoceM80jPWLcP6Eq5Tma7rrqOE+QHrY8bm7LIYUEn2 fK/whozFyZ+TswEaDRjN6wL/FDuhu472Lnsg3rvE6s0eW1nlOHuqmqBQPb/kIMOj B3KOI6pqEfb+FqiZ2J/u/4KiOWaA8X9JQUo+HzWNEAPnNUoTl/yGr0Ad6z9YFbsu VnvJVTtGcu8pB5cjm7UtfN73ywEm/a/QXplus0U/Kv5XsSqaGa/Gw6pyX8LOc2yq I0XyOzj7DUcvMVZr5Vf/FVO2Od0Pb03+Wv4JRB5vXM1MsU+xAVgCm0pfew== </ns7:X509Certificate> </ns7:X509Data> </ns7:KeyInfo> </ns0:KeyDescriptor> <ns0:KeyDescriptor use= \"encryption\" > <ns7:KeyInfo> <ns7:X509Data> <ns7:X509Certificate> MIIDVzCCAj+gAwIBAgIJAN80zoFR2/UbMA0GCSqGSIb3DQEBCwUAMEIxCzAJBgNV BAYTAlhYMRUwEwYDVQQHDAxEZWZhdWx0IENpdHkxHDAaBgNVBAoME0RlZmF1bHQg Q29tcGFueSBMdGQwHhcNMTcwNDIxMDczMzA1WhcNMjcwNDIxMDczMzA1WjBCMQsw CQYDVQQGEwJYWDEVMBMGA1UEBwwMRGVmYXVsdCBDaXR5MRwwGgYDVQQKDBNEZWZh dWx0IENvbXBhbnkgTHRkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA o87tb/hEU/igqFPtCFKMvC6LozTbH9y3I4lUVH38FDavDzrHAg1sVr5FEqguApeT xr/cmzsFMIB+XkAf9oI8xi2lUdorgeZFPFnUH0um4yXIJwBjrmgofUcybt84ee44 tM7AZKCAhinFDQUbjYV1LQP44QvFdGiklHGoo2NaVEqJwH6ce/8ioG5aFf2ISS6p fh3qOGVuQgansHFn+v+CvX+JU6FHB7mP+h3Xv+AoVjPz7b7E58rxn9qspy/N4LbB iDk7iBidsXEWYwYsSVP2cTrgKFktn5tB4YYZe0pSZNoCeVq05RK7kBy8yYCWTVZN Emkz5avL9Z2SDaGLY/9CTwIDAQABo1AwTjAdBgNVHQ4EFgQUrdY8o4OeseOy7ReD ZEZCKUZTk2gwHwYDVR0jBBgwFoAUrdY8o4OeseOy7ReDZEZCKUZTk2gwDAYDVR0T BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAQEAoaygm+5U4j3/djWGQulXS2gdrPJV AS8zBuzQPVkhH76WcD8wxzuoceM80jPWLcP6Eq5Tma7rrqOE+QHrY8bm7LIYUEn2 fK/whozFyZ+TswEaDRjN6wL/FDuhu472Lnsg3rvE6s0eW1nlOHuqmqBQPb/kIMOj B3KOI6pqEfb+FqiZ2J/u/4KiOWaA8X9JQUo+HzWNEAPnNUoTl/yGr0Ad6z9YFbsu VnvJVTtGcu8pB5cjm7UtfN73ywEm/a/QXplus0U/Kv5XsSqaGa/Gw6pyX8LOc2yq I0XyOzj7DUcvMVZr5Vf/FVO2Od0Pb03+Wv4JRB5vXM1MsU+xAVgCm0pfew== </ns7:X509Certificate> </ns7:X509Data> </ns7:KeyInfo> </ns0:KeyDescriptor> <ns0:SingleLogoutService Binding= \"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect\" Location= \"https://api.etais.ee/api-auth/saml2/logout/complete/\" /> <ns0:SingleLogoutService Binding= \"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST\" Location= \"https://api.etais.ee/api-auth/saml2/logout/complete/\" /> <ns0:AssertionConsumerService Binding= \"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST\" Location= \"https://api.etais.ee/api-auth/saml2/login/complete/\" index= \"1\" /> <ns0:AttributeConsumingService index= \"1\" > <ns0:ServiceName xml:lang= \"en\" > ETAIS Self-Service </ns0:ServiceName> <ns0:RequestedAttribute Name= \"urn:mace:dir:attribute-def:cn\" NameFormat= \"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\" FriendlyName= \"cn\" isRequired= \"true\" /> <ns0:RequestedAttribute Name= \"urn:oid:0.9.2342.19200300.100.1.3\" NameFormat= \"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\" FriendlyName= \"mail\" isRequired= \"true\" /> <ns0:RequestedAttribute Name= \"schacPersonalUniqueID\" NameFormat= \"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\" isRequired= \"true\" /> <ns0:RequestedAttribute Name= \"urn:oid:1.3.6.1.4.1.5923.1.1.1.6\" NameFormat= \"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\" FriendlyName= \"eduPersonPrincipalName\" isRequired= \"true\" /> <ns0:RequestedAttribute Name= \"schacHomeOrganization\" NameFormat= \"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\" isRequired= \"false\" /> <ns0:RequestedAttribute Name= \"urn:oid:2.16.840.1.113730.3.1.39\" NameFormat= \"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\" FriendlyName= \"preferredLanguage\" isRequired= \"false\" /> <ns0:RequestedAttribute Name= \"urn:oid:1.3.6.1.4.1.5923.1.1.1.9\" NameFormat= \"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\" FriendlyName= \"eduPersonScopedAffiliation\" isRequired= \"false\" /> </ns0:AttributeConsumingService> </ns0:SPSSODescriptor> <ns0:Organization> <ns0:OrganizationName xml:lang= \"et\" > ETAIS </ns0:OrganizationName> <ns0:OrganizationName xml:lang= \"en\" > ETAIS </ns0:OrganizationName> <ns0:OrganizationDisplayName xml:lang= \"et\" > ETAIS </ns0:OrganizationDisplayName> <ns0:OrganizationDisplayName xml:lang= \"en\" > ETAIS </ns0:OrganizationDisplayName> <ns0:OrganizationURL xml:lang= \"et\" > http://etais.ee/ </ns0:OrganizationURL> <ns0:OrganizationURL xml:lang= \"en\" > http://etais.ee/ </ns0:OrganizationURL> </ns0:Organization> <ns0:ContactPerson contactType= \"technical\" > <ns0:GivenName> Administrator </ns0:GivenName> <ns0:EmailAddress> etais@etais.ee </ns0:EmailAddress> </ns0:ContactPerson> </ns0:EntityDescriptor>","title":"Example of generated metadata"},{"location":"admin-guide/identities/eduGAIN/#adding-trusted-identity-providers","text":"In order to configure Cloudrock to use SAML2 authentication you should specify identity provider metadata. If metadata XML is stored locally, it is cached in the local SQL database. Usually metadata XML file is big, so it is necessary to use local cache in this case. But you should ensure that metadata XML file is refreshed via cron on a regular basis. A management command cloudrock sync_saml2_providers performs refreshing of the data. If metadata XML is accessed remotely, it is not cached in SQL database. Therefore you should ensure that metadata XML is small enough. In this case you should download metadata signing certificate locally and specify its path in Cloudrock configuration. The certificate is used to retrieve the metadata securely. Please note that security certificates are updated regularly, therefore you should update configuration whenever certificate is updated. By convention, both metadata signing certificate and metadata itself are downloaded to /etc/cloudrock/saml2 in Cloudrock Metal instances.","title":"Adding trusted identity providers"},{"location":"admin-guide/identities/eduGAIN/#references","text":"","title":"References"},{"location":"admin-guide/identities/eduGAIN/#taat-configuration","text":"TaaT certificates can be downloaded from: http://taat.edu.ee/main/dokumendid/sertifikaadid/ . Metadata URL for test hub is https://reos.taat.edu.ee/saml2/idp/metadata.php and for production hub is https://sarvik.taat.edu.ee/saml2/idp/metadata.php . Note, the certificate must correspond to the hub you want connect to.","title":"TAAT configuration"},{"location":"admin-guide/identities/eduGAIN/#using-janus","text":"Janus is a self-service for managing Service Provider records. Create a new connection: New connection ID must be equal to the base_url in saml.conf.py + /apu-auth/saml2/metadata/ Choose SAML 2.0 SP for connection type. Click Create button In connection tab select or create ARP. Fields that ARP include must be in the saml_attribute_mapping. Navigate to the Import metadata tab and paste same URL as in the first step. Click on the Get metadata. Navigate to the Validate tab and check whether all the tests pass. You can fix metadata in Metadata tab.","title":"Using Janus"},{"location":"admin-guide/identities/eduGAIN/#haka-configuration","text":"Production hub metadata is described at https://wiki.eduuni.fi/display/CSCHAKA/Haka+metadata . Test hub metadata is described at https://wiki.eduuni.fi/display/CSCHAKA/Verifying+Haka+compatibility .","title":"HAKA configuration"},{"location":"admin-guide/identities/eduGAIN/#fedi-configuration","text":"Production hub metadata is described at https://fedi.litnet.lt/en/metadata . Discovery is supported: https://discovery.litnet.lt/simplesaml/module.php/discopower/disco.php .","title":"FEDI configuration"},{"location":"admin-guide/identities/eduTEAMS/","text":"eduTEAMS Cloudrock supports integration with eduTEAMS identity service. To enable it, please register a new client for Cloudrock deployment and set configuration settings for eduTEAMS. Check configuration guide for available settings. Fetch user data using CUID of a user You can use CUID of user in order to fetch user permissions. This file describes how to perform it, you only need to provide CUID as a username.","title":"eduTEAMS"},{"location":"admin-guide/identities/eduTEAMS/#eduteams","text":"Cloudrock supports integration with eduTEAMS identity service. To enable it, please register a new client for Cloudrock deployment and set configuration settings for eduTEAMS. Check configuration guide for available settings.","title":"eduTEAMS"},{"location":"admin-guide/identities/eduTEAMS/#fetch-user-data-using-cuid-of-a-user","text":"You can use CUID of user in order to fetch user permissions. This file describes how to perform it, you only need to provide CUID as a username.","title":"Fetch user data using CUID of a user"},{"location":"admin-guide/identities/freeipa/","text":"FreeIPA Tip For integrating FreeIPA as source of identities, please see LDAP . This module is about synchronising users from Cloudrock to FreeIPA For situations when you would like to provide access to services based on the Linux usernames, e.g. for SLURM deployments, you might want to map users from Cloudrock (e.g. created through eduGAIN) to an external FreeIPA service. To do that, you need to enable module and define settings for accessing FreeIPA REST APIs. See Cloudrock configuration guide for the list of supported FreeIPA settings. At the moment at most one deployment of FreeIPA per Cloudrock is supported.","title":"FreeIPA"},{"location":"admin-guide/identities/freeipa/#freeipa","text":"Tip For integrating FreeIPA as source of identities, please see LDAP . This module is about synchronising users from Cloudrock to FreeIPA For situations when you would like to provide access to services based on the Linux usernames, e.g. for SLURM deployments, you might want to map users from Cloudrock (e.g. created through eduGAIN) to an external FreeIPA service. To do that, you need to enable module and define settings for accessing FreeIPA REST APIs. See Cloudrock configuration guide for the list of supported FreeIPA settings. At the moment at most one deployment of FreeIPA per Cloudrock is supported.","title":"FreeIPA"},{"location":"admin-guide/identities/keycloak/","text":"Keycloak Cloudrock supports integration with Keycloak identity manager. Below is a guide to configure Keycloak OpenID Connect client and Cloudrock intergration. Configuring Keycloak Instructions below are aimed to provide a basic configuration of Keycloak, please refer to Keycloak documentation for full details. Login to admin interface of Keycloak. Create a new realm (or use existing) Open a menu with a list of clients. Add a new client for Cloudrock. Change client's access type to \"confidential\". Change client's Valid redirect URIs to \"*\". You can get secret code for the client configuration You can find the settings required for configuration of Cloudrock under the following path on your Keycloak deployment (change test-cloudrock to the realm that you are using): /auth/realms/test-cloudrock/.well-known/openid-configuration Configuring Cloudrock Add Keycloak related configuration to Metal's override.py : 1 2 3 4 5 6 CLOUDROCK_AUTH_SOCIAL . update ({ 'KEYCLOAK_AUTH_URL' : 'https://KEYCLOAK_ADDRESS:8080/auth/realms/test-cloudrock/.well-known/openid-configuration' , 'KEYCLOAK_CLIENT_ID' : 'CLIENT_ID' , 'KEYCLOAK_SECRET' : 'SECRET' 'KEYCLOAK_TOKEN_URL' : 'https://KEYCLOAK_ADDRESS:8080/auth/realms/test-cloudrock/protocol/openid-connect/token' , 'KEYCLOAK_USERINFO_URL' : 'https://KEYCLOAK_ADDRESS:8080/auth/realms/test-cloudrock/protocol/openid-connect/userinfo' }) Make sure SOCIAL_SIGNUP is added to the list of available authentication methods: 1 CLOUDROCK_CORE [ 'AUTHENTICATION_METHODS' ] = [ \"LOCAL_SIGNIN\" , \"SOCIAL_SIGNUP\" ] Full Keycloak related configuration settings are available at Metal configuration file reference","title":"Keycloak"},{"location":"admin-guide/identities/keycloak/#keycloak","text":"Cloudrock supports integration with Keycloak identity manager. Below is a guide to configure Keycloak OpenID Connect client and Cloudrock intergration.","title":"Keycloak"},{"location":"admin-guide/identities/keycloak/#configuring-keycloak","text":"Instructions below are aimed to provide a basic configuration of Keycloak, please refer to Keycloak documentation for full details. Login to admin interface of Keycloak. Create a new realm (or use existing) Open a menu with a list of clients. Add a new client for Cloudrock. Change client's access type to \"confidential\". Change client's Valid redirect URIs to \"*\". You can get secret code for the client configuration You can find the settings required for configuration of Cloudrock under the following path on your Keycloak deployment (change test-cloudrock to the realm that you are using): /auth/realms/test-cloudrock/.well-known/openid-configuration","title":"Configuring Keycloak"},{"location":"admin-guide/identities/keycloak/#configuring-cloudrock","text":"Add Keycloak related configuration to Metal's override.py : 1 2 3 4 5 6 CLOUDROCK_AUTH_SOCIAL . update ({ 'KEYCLOAK_AUTH_URL' : 'https://KEYCLOAK_ADDRESS:8080/auth/realms/test-cloudrock/.well-known/openid-configuration' , 'KEYCLOAK_CLIENT_ID' : 'CLIENT_ID' , 'KEYCLOAK_SECRET' : 'SECRET' 'KEYCLOAK_TOKEN_URL' : 'https://KEYCLOAK_ADDRESS:8080/auth/realms/test-cloudrock/protocol/openid-connect/token' , 'KEYCLOAK_USERINFO_URL' : 'https://KEYCLOAK_ADDRESS:8080/auth/realms/test-cloudrock/protocol/openid-connect/userinfo' }) Make sure SOCIAL_SIGNUP is added to the list of available authentication methods: 1 CLOUDROCK_CORE [ 'AUTHENTICATION_METHODS' ] = [ \"LOCAL_SIGNIN\" , \"SOCIAL_SIGNUP\" ] Full Keycloak related configuration settings are available at Metal configuration file reference","title":"Configuring Cloudrock"},{"location":"admin-guide/identities/summary/","text":"Summary Name Protocol Description eduGAIN SAML Federation of research and educational providers supported by Geant eduTEAMS OIDC Group management service integrated with research and educational providers provided by Geant FreeIPA REST API Support for synchronisation of Cloudrock identities with open-source Identity Management server Keycloak OIDC Open-source identity management server LDAP LDAP/S Support of identity servers over LDAP protocol TARA OIDC Canadian State Autentication service","title":"Summary"},{"location":"admin-guide/identities/summary/#summary","text":"Name Protocol Description eduGAIN SAML Federation of research and educational providers supported by Geant eduTEAMS OIDC Group management service integrated with research and educational providers provided by Geant FreeIPA REST API Support for synchronisation of Cloudrock identities with open-source Identity Management server Keycloak OIDC Open-source identity management server LDAP LDAP/S Support of identity servers over LDAP protocol TARA OIDC Canadian State Autentication service","title":"Summary"},{"location":"admin-guide/metal-configuration/cli-guide/","text":"CLI guide clean_settings_cache Clean API configuration settings cache. cleanup_stale_event_types Cleanup stale event types in all hooks. copy_category Copy structure of categories for the Marketplace 1 2 3 4 5 usage: cloudrock copy_category source_category_uuid target_category_uuid positional arguments: source_category_uuid UUID of a category to copy metadata from target_category_uuid UUID of a category to copy metadata to createstaffuser Create a user with a specified username and password. User will be created as staff. 1 2 3 4 5 6 usage: cloudrock createstaffuser -u USERNAME -p PASSWORD -e EMAIL optional arguments: -u USERNAME, --username USERNAME -p PASSWORD, --password PASSWORD -e EMAIL, --email EMAIL drfdocs Generate RST docs for DRF API 1 2 3 4 5 6 7 8 usage: cloudrock drfdocs [ --store PATH ] [ app_label [ app_label ... ]] positional arguments: app_label Application label. optional arguments: --store PATH, -s PATH Where to store docs. drop_leftover_openstack_projects Drop leftover projects from remote OpenStack deployment. Leftovers are resources marked as terminated in Cloudrock but still present in the remote OpenStack. Such inconsistency may be caused by split brain problem in the distributed database. 1 2 3 4 5 6 7 8 9 usage: cloudrock drop_leftover_openstack_projects [ --offering OFFERING ] [ --dry-run ] [ --fuzzy-matching ] optional arguments: --offering OFFERING Target marketplace offering name where leftover projects are located. --dry-run Don ' t make any changes, instead show what projects would be deleted. --fuzzy-matching Try to detect leftovers by name. dumpusers Dumps information about users, their organizations and projects. 1 2 3 4 5 6 usage: cloudrock dumpusers [ -o OUTPUT ] optional arguments: -o OUTPUT, --output OUTPUT Specifies file to which the output is written. The output will be printed to stdout by default. export_ami_catalog Export catalog of Amazon images. export_offering Export an offering from Cloudrock. Export data includes JSON file with an offering data and a thumbnail. Names of this files include offering ID. 1 2 3 4 5 6 7 usage: cloudrock export_offering -o OFFERING -p PATH optional arguments: -o OFFERING, --offering OFFERING An offering UUID. -p PATH, --path PATH Path to the folder where the export data will be saved. import_ami_catalog Import catalog of Amazon images. 1 2 3 4 5 6 7 usage: cloudrock import_ami_catalog [ -y ] FILE positional arguments: FILE AMI catalog file. optional arguments: -y, --yes The answer to any question which would be asked will be yes. import_azure_image Import Azure image 1 2 3 4 5 6 7 usage: cloudrock import_azure_image [ --sku SKU ] [ --publisher PUBLISHER ] [ --offer OFFER ] optional arguments: --sku SKU --publisher PUBLISHER --offer OFFER import_marketplace_orders Create marketplace order for each resource if it does not yet exist. import_offering Import or update an offering in Cloudrock. You must define offering for updating or category and customer for creating. 1 2 3 4 5 6 7 8 9 10 11 usage: cloudrock import_offering -p PATH [ -c CUSTOMER ] [ -ct CATEGORY ] [ -o OFFERING ] optional arguments: -p PATH, --path PATH File path to offering data. -c CUSTOMER, --customer CUSTOMER Customer UUID. -ct CATEGORY, --category CATEGORY Category UUID. -o OFFERING, --offering OFFERING Updated offering UUID. import_tenant_quotas Import OpenStack tenant quotas to marketplace. 1 2 3 4 5 usage: cloudrock import_tenant_quotas [ --dry-run ] optional arguments: --dry-run Don ' t make any changes, instead show what objects would be created. init_marketplace_support Import existing support offerings as marketplace resources. 1 2 3 4 5 6 7 8 usage: cloudrock init_marketplace_support --category CATEGORY_UUID --customer CUSTOMER_UUID optional arguments: --category CATEGORY_UUID Specify a category to create offerings. --customer CUSTOMER_UUID Specify a customer to create offerings. initglobalquotashistory Recalculate all quotas initsecuritygroups Add default security groups with given names to all tenants. 1 2 3 4 usage: cloudrock initsecuritygroups names [ names ... ] positional arguments: names load_categories Loads a categories for the Marketplace 1 2 3 4 usage: cloudrock load_categories category [ category ... ] positional arguments: category List of categories to load load_features Import features in JSON format 1 2 3 4 5 6 7 8 usage: cloudrock load_features [ --dry-run ] features_file positional arguments: features_file Specifies location of features file. optional arguments: --dry-run Don ' t make any changes, instead show what objects would be created. load_notifications Import notifications to DB 1 2 3 4 usage: cloudrock load_notifications notifications_file positional arguments: notifications_file Specifies location of notifications file. load_user_agreements Imports privacy policy and terms of service into DB 1 2 3 4 5 6 7 8 usage: cloudrock load_user_agreements [ -tos TOS ] [ -pp PP ] [ -f FORCE ] optional arguments: -tos TOS, --tos TOS Path to a Terms of service file -pp PP, --pp PP Path to a Privacy policy file -f FORCE, --force FORCE This flag means force loading agreements even if they are already defined in DB. move_project Move Cloudrock project to a different organization. 1 2 3 4 5 6 7 usage: cloudrock move_project -p PROJECT_UUID -c CUSTOMER_UUID optional arguments: -p PROJECT_UUID, --project PROJECT_UUID UUID of a project to move. -c CUSTOMER_UUID, --customer CUSTOMER_UUID Target organization UUID move_resource Move a marketplace resource to a different project. 1 2 3 4 5 6 7 usage: cloudrock move_resource -p PROJECT_UUID -r RESOURCE_UUID optional arguments: -p PROJECT_UUID, --project PROJECT_UUID Target project UUID -r RESOURCE_UUID, --resource RESOURCE_UUID UUID of a marketplace resource to move. override_templates Override templates 1 2 3 4 5 6 7 8 9 usage: cloudrock override_templates [ -c CLEAN ] templates_file positional arguments: templates_file Specifies location of templates file. optional arguments: -c CLEAN, --clean CLEAN This flag means total synchronization with the template file you pass. pgmigrate Load data with disabled signals. 1 2 3 4 usage: cloudrock pgmigrate [ --path PATH ] optional arguments: --path PATH, -p PATH Path to dumped database. print_notifications pull_openstack_volume_metadata Pull OpenStack volumes metadata to marketplace. 1 2 3 4 5 usage: cloudrock pull_openstack_volume_metadata [ --dry-run ] optional arguments: --dry-run Don ' t make any changes, instead show what objects would be created. pull_support_priorities Pull priorities from support backend. pull_support_users Pull users from support backend. push_tenant_quotas Push OpenStack tenant quotas from marketplace to backend. 1 2 3 4 5 usage: cloudrock push_tenant_quotas [ --dry-run ] optional arguments: --dry-run Don ' t make any changes, instead show what objects would be created. rebuild_billing Create or update price estimates based on invoices. recalculatequotas Recalculate all quotas removestalect Remove instances that have FK to stale content types. status Check status of Cloudrock Metal configured services 1 2 3 4 5 6 7 usage: cloudrock status [ --check-api-endpoints-at BASE_URL ] optional arguments: --check-api-endpoints-at BASE_URL Runs API endpoints check at specified base URL ( i.e. http://example.com ) . If this argument is not provided, check will be skipped. switching_backend_server Backend data update if a server was switched. sync_saml2_providers Synchronize SAML2 identity providers. sync_users Sync users from Cloudrock to Rancher.","title":"CLI guide"},{"location":"admin-guide/metal-configuration/cli-guide/#cli-guide","text":"","title":"CLI guide"},{"location":"admin-guide/metal-configuration/cli-guide/#clean_settings_cache","text":"Clean API configuration settings cache.","title":"clean_settings_cache"},{"location":"admin-guide/metal-configuration/cli-guide/#cleanup_stale_event_types","text":"Cleanup stale event types in all hooks.","title":"cleanup_stale_event_types"},{"location":"admin-guide/metal-configuration/cli-guide/#copy_category","text":"Copy structure of categories for the Marketplace 1 2 3 4 5 usage: cloudrock copy_category source_category_uuid target_category_uuid positional arguments: source_category_uuid UUID of a category to copy metadata from target_category_uuid UUID of a category to copy metadata to","title":"copy_category"},{"location":"admin-guide/metal-configuration/cli-guide/#createstaffuser","text":"Create a user with a specified username and password. User will be created as staff. 1 2 3 4 5 6 usage: cloudrock createstaffuser -u USERNAME -p PASSWORD -e EMAIL optional arguments: -u USERNAME, --username USERNAME -p PASSWORD, --password PASSWORD -e EMAIL, --email EMAIL","title":"createstaffuser"},{"location":"admin-guide/metal-configuration/cli-guide/#drfdocs","text":"Generate RST docs for DRF API 1 2 3 4 5 6 7 8 usage: cloudrock drfdocs [ --store PATH ] [ app_label [ app_label ... ]] positional arguments: app_label Application label. optional arguments: --store PATH, -s PATH Where to store docs.","title":"drfdocs"},{"location":"admin-guide/metal-configuration/cli-guide/#drop_leftover_openstack_projects","text":"Drop leftover projects from remote OpenStack deployment. Leftovers are resources marked as terminated in Cloudrock but still present in the remote OpenStack. Such inconsistency may be caused by split brain problem in the distributed database. 1 2 3 4 5 6 7 8 9 usage: cloudrock drop_leftover_openstack_projects [ --offering OFFERING ] [ --dry-run ] [ --fuzzy-matching ] optional arguments: --offering OFFERING Target marketplace offering name where leftover projects are located. --dry-run Don ' t make any changes, instead show what projects would be deleted. --fuzzy-matching Try to detect leftovers by name.","title":"drop_leftover_openstack_projects"},{"location":"admin-guide/metal-configuration/cli-guide/#dumpusers","text":"Dumps information about users, their organizations and projects. 1 2 3 4 5 6 usage: cloudrock dumpusers [ -o OUTPUT ] optional arguments: -o OUTPUT, --output OUTPUT Specifies file to which the output is written. The output will be printed to stdout by default.","title":"dumpusers"},{"location":"admin-guide/metal-configuration/cli-guide/#export_ami_catalog","text":"Export catalog of Amazon images.","title":"export_ami_catalog"},{"location":"admin-guide/metal-configuration/cli-guide/#export_offering","text":"Export an offering from Cloudrock. Export data includes JSON file with an offering data and a thumbnail. Names of this files include offering ID. 1 2 3 4 5 6 7 usage: cloudrock export_offering -o OFFERING -p PATH optional arguments: -o OFFERING, --offering OFFERING An offering UUID. -p PATH, --path PATH Path to the folder where the export data will be saved.","title":"export_offering"},{"location":"admin-guide/metal-configuration/cli-guide/#import_ami_catalog","text":"Import catalog of Amazon images. 1 2 3 4 5 6 7 usage: cloudrock import_ami_catalog [ -y ] FILE positional arguments: FILE AMI catalog file. optional arguments: -y, --yes The answer to any question which would be asked will be yes.","title":"import_ami_catalog"},{"location":"admin-guide/metal-configuration/cli-guide/#import_azure_image","text":"Import Azure image 1 2 3 4 5 6 7 usage: cloudrock import_azure_image [ --sku SKU ] [ --publisher PUBLISHER ] [ --offer OFFER ] optional arguments: --sku SKU --publisher PUBLISHER --offer OFFER","title":"import_azure_image"},{"location":"admin-guide/metal-configuration/cli-guide/#import_marketplace_orders","text":"Create marketplace order for each resource if it does not yet exist.","title":"import_marketplace_orders"},{"location":"admin-guide/metal-configuration/cli-guide/#import_offering","text":"Import or update an offering in Cloudrock. You must define offering for updating or category and customer for creating. 1 2 3 4 5 6 7 8 9 10 11 usage: cloudrock import_offering -p PATH [ -c CUSTOMER ] [ -ct CATEGORY ] [ -o OFFERING ] optional arguments: -p PATH, --path PATH File path to offering data. -c CUSTOMER, --customer CUSTOMER Customer UUID. -ct CATEGORY, --category CATEGORY Category UUID. -o OFFERING, --offering OFFERING Updated offering UUID.","title":"import_offering"},{"location":"admin-guide/metal-configuration/cli-guide/#import_tenant_quotas","text":"Import OpenStack tenant quotas to marketplace. 1 2 3 4 5 usage: cloudrock import_tenant_quotas [ --dry-run ] optional arguments: --dry-run Don ' t make any changes, instead show what objects would be created.","title":"import_tenant_quotas"},{"location":"admin-guide/metal-configuration/cli-guide/#init_marketplace_support","text":"Import existing support offerings as marketplace resources. 1 2 3 4 5 6 7 8 usage: cloudrock init_marketplace_support --category CATEGORY_UUID --customer CUSTOMER_UUID optional arguments: --category CATEGORY_UUID Specify a category to create offerings. --customer CUSTOMER_UUID Specify a customer to create offerings.","title":"init_marketplace_support"},{"location":"admin-guide/metal-configuration/cli-guide/#initglobalquotashistory","text":"Recalculate all quotas","title":"initglobalquotashistory"},{"location":"admin-guide/metal-configuration/cli-guide/#initsecuritygroups","text":"Add default security groups with given names to all tenants. 1 2 3 4 usage: cloudrock initsecuritygroups names [ names ... ] positional arguments: names","title":"initsecuritygroups"},{"location":"admin-guide/metal-configuration/cli-guide/#load_categories","text":"Loads a categories for the Marketplace 1 2 3 4 usage: cloudrock load_categories category [ category ... ] positional arguments: category List of categories to load","title":"load_categories"},{"location":"admin-guide/metal-configuration/cli-guide/#load_features","text":"Import features in JSON format 1 2 3 4 5 6 7 8 usage: cloudrock load_features [ --dry-run ] features_file positional arguments: features_file Specifies location of features file. optional arguments: --dry-run Don ' t make any changes, instead show what objects would be created.","title":"load_features"},{"location":"admin-guide/metal-configuration/cli-guide/#load_notifications","text":"Import notifications to DB 1 2 3 4 usage: cloudrock load_notifications notifications_file positional arguments: notifications_file Specifies location of notifications file.","title":"load_notifications"},{"location":"admin-guide/metal-configuration/cli-guide/#load_user_agreements","text":"Imports privacy policy and terms of service into DB 1 2 3 4 5 6 7 8 usage: cloudrock load_user_agreements [ -tos TOS ] [ -pp PP ] [ -f FORCE ] optional arguments: -tos TOS, --tos TOS Path to a Terms of service file -pp PP, --pp PP Path to a Privacy policy file -f FORCE, --force FORCE This flag means force loading agreements even if they are already defined in DB.","title":"load_user_agreements"},{"location":"admin-guide/metal-configuration/cli-guide/#move_project","text":"Move Cloudrock project to a different organization. 1 2 3 4 5 6 7 usage: cloudrock move_project -p PROJECT_UUID -c CUSTOMER_UUID optional arguments: -p PROJECT_UUID, --project PROJECT_UUID UUID of a project to move. -c CUSTOMER_UUID, --customer CUSTOMER_UUID Target organization UUID","title":"move_project"},{"location":"admin-guide/metal-configuration/cli-guide/#move_resource","text":"Move a marketplace resource to a different project. 1 2 3 4 5 6 7 usage: cloudrock move_resource -p PROJECT_UUID -r RESOURCE_UUID optional arguments: -p PROJECT_UUID, --project PROJECT_UUID Target project UUID -r RESOURCE_UUID, --resource RESOURCE_UUID UUID of a marketplace resource to move.","title":"move_resource"},{"location":"admin-guide/metal-configuration/cli-guide/#override_templates","text":"Override templates 1 2 3 4 5 6 7 8 9 usage: cloudrock override_templates [ -c CLEAN ] templates_file positional arguments: templates_file Specifies location of templates file. optional arguments: -c CLEAN, --clean CLEAN This flag means total synchronization with the template file you pass.","title":"override_templates"},{"location":"admin-guide/metal-configuration/cli-guide/#pgmigrate","text":"Load data with disabled signals. 1 2 3 4 usage: cloudrock pgmigrate [ --path PATH ] optional arguments: --path PATH, -p PATH Path to dumped database.","title":"pgmigrate"},{"location":"admin-guide/metal-configuration/cli-guide/#print_notifications","text":"","title":"print_notifications"},{"location":"admin-guide/metal-configuration/cli-guide/#pull_openstack_volume_metadata","text":"Pull OpenStack volumes metadata to marketplace. 1 2 3 4 5 usage: cloudrock pull_openstack_volume_metadata [ --dry-run ] optional arguments: --dry-run Don ' t make any changes, instead show what objects would be created.","title":"pull_openstack_volume_metadata"},{"location":"admin-guide/metal-configuration/cli-guide/#pull_support_priorities","text":"Pull priorities from support backend.","title":"pull_support_priorities"},{"location":"admin-guide/metal-configuration/cli-guide/#pull_support_users","text":"Pull users from support backend.","title":"pull_support_users"},{"location":"admin-guide/metal-configuration/cli-guide/#push_tenant_quotas","text":"Push OpenStack tenant quotas from marketplace to backend. 1 2 3 4 5 usage: cloudrock push_tenant_quotas [ --dry-run ] optional arguments: --dry-run Don ' t make any changes, instead show what objects would be created.","title":"push_tenant_quotas"},{"location":"admin-guide/metal-configuration/cli-guide/#rebuild_billing","text":"Create or update price estimates based on invoices.","title":"rebuild_billing"},{"location":"admin-guide/metal-configuration/cli-guide/#recalculatequotas","text":"Recalculate all quotas","title":"recalculatequotas"},{"location":"admin-guide/metal-configuration/cli-guide/#removestalect","text":"Remove instances that have FK to stale content types.","title":"removestalect"},{"location":"admin-guide/metal-configuration/cli-guide/#status","text":"Check status of Cloudrock Metal configured services 1 2 3 4 5 6 7 usage: cloudrock status [ --check-api-endpoints-at BASE_URL ] optional arguments: --check-api-endpoints-at BASE_URL Runs API endpoints check at specified base URL ( i.e. http://example.com ) . If this argument is not provided, check will be skipped.","title":"status"},{"location":"admin-guide/metal-configuration/cli-guide/#switching_backend_server","text":"Backend data update if a server was switched.","title":"switching_backend_server"},{"location":"admin-guide/metal-configuration/cli-guide/#sync_saml2_providers","text":"Synchronize SAML2 identity providers.","title":"sync_saml2_providers"},{"location":"admin-guide/metal-configuration/cli-guide/#sync_users","text":"Sync users from Cloudrock to Rancher.","title":"sync_users"},{"location":"admin-guide/metal-configuration/configuration-guide/","text":"Configuration guide CLOUDROCK_AUTH_SAML2 plugin Default value: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 CLOUDROCK_AUTH_SAML2 = { 'ALLOW_TO_SELECT_IDENTITY_PROVIDER' : True , 'ATTRIBUTE_MAP_DIR' : '/etc/cloudrock/saml2/attributemaps' , 'AUTHN_REQUESTS_SIGNED' : 'true' , 'CATEGORIES' : [ 'http://www.geant.net/uri/dataprotection-code-of-conduct/v1' ], 'CERT_FILE' : '' , 'DEBUG' : False , 'DEFAULT_BINDING' : 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST' , 'DESCRIPTION' : 'Service provider description' , 'DIGEST_ALGORITHM' : None , 'DISCOVERY_SERVICE_LABEL' : None , 'DISCOVERY_SERVICE_URL' : None , 'DISPLAY_NAME' : 'Service provider display name' , 'ENABLE_SINGLE_LOGOUT' : False , 'IDENTITY_PROVIDER_LABEL' : None , 'IDENTITY_PROVIDER_URL' : None , 'IDP_METADATA_LOCAL' : [], 'IDP_METADATA_REMOTE' : [], 'KEY_FILE' : '' , 'LOGOUT_REQUESTS_SIGNED' : 'true' , 'LOG_FILE' : '' , 'LOG_LEVEL' : 'INFO' , 'MANAGEMENT_URL' : '' , 'NAME' : 'saml2' , 'NAMEID_FORMAT' : None , 'OPTIONAL_ATTRIBUTES' : [], 'ORGANIZATION' : {}, 'PRIVACY_STATEMENT_URL' : 'http://example.com/privacy-policy/' , 'REGISTRATION_AUTHORITY' : 'http://example.com/registration-authority/' , 'REGISTRATION_INSTANT' : '2017-01-01T00:00:00' , 'REGISTRATION_POLICY' : 'http://example.com/registration-policy/' , 'REQUIRED_ATTRIBUTES' : [], 'SAML_ATTRIBUTE_MAPPING' : {}, 'SIGNATURE_ALGORITHM' : None , 'XMLSEC_BINARY' : '/usr/bin/xmlsec1' } ALLOW_TO_SELECT_IDENTITY_PROVIDER Type: bool ATTRIBUTE_MAP_DIR Type: str Directory with attribute mapping AUTHN_REQUESTS_SIGNED Type: str Indicates if the authentication requests sent should be signed by default CATEGORIES Type: list Links to the entity categories CERT_FILE Type: str PEM formatted certificate chain file DEBUG Type: bool Set to True to output debugging information DEFAULT_BINDING Type: str DESCRIPTION Type: str Service provider description (required by CoC) DIGEST_ALGORITHM Type: Optional[str] Identifies the Message Digest algorithm URL according to the XML Signature specification (SHA1 is used by default) DISCOVERY_SERVICE_LABEL Type: Optional[str] DISCOVERY_SERVICE_URL Type: Optional[str] DISPLAY_NAME Type: str Service provider display name (required by CoC) ENABLE_SINGLE_LOGOUT Type: bool IDENTITY_PROVIDER_LABEL Type: Optional[str] IDENTITY_PROVIDER_URL Type: Optional[str] IDP_METADATA_LOCAL Type: list IdPs metadata XML files stored locally IDP_METADATA_REMOTE Type: list IdPs metadata XML files stored remotely KEY_FILE Type: str PEM formatted certificate key file LOGOUT_REQUESTS_SIGNED Type: str Indicates if the entity will sign the logout requests LOG_FILE Type: str Empty to disable logging SAML2-related stuff to file LOG_LEVEL Type: str Log level for SAML2 MANAGEMENT_URL Type: str The endpoint for user details management. NAME Type: str Name used for assigning the registration method to the user NAMEID_FORMAT Type: Optional[str] Identified NameID format to use. None means default, empty string (\"\") disables addition of entity OPTIONAL_ATTRIBUTES Type: list SAML attributes that may be useful to have but not required ORGANIZATION Type: dict Organization responsible for the service (you can set multilanguage information here) PRIVACY_STATEMENT_URL Type: str URL with privacy statement (required by CoC) REGISTRATION_AUTHORITY Type: str Registration authority required by mdpi REGISTRATION_INSTANT Type: str Registration instant time required by mdpi REGISTRATION_POLICY Type: str Registration policy required by mdpi REQUIRED_ATTRIBUTES Type: list SAML attributes that are required to identify a user SAML_ATTRIBUTE_MAPPING Type: dict Mapping between SAML attributes and User fields SIGNATURE_ALGORITHM Type: Optional[str] Identifies the Signature algorithm URL according to the XML Signature specification (SHA1 is used by default) XMLSEC_BINARY Type: str Full path to the xmlsec1 binary program CLOUDROCK_AUTH_SOCIAL plugin Default value: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 CLOUDROCK_AUTH_SOCIAL = { 'EDUTEAMS_AUTH_URL' : 'https://proxy.acc.eduteams.org/saml2sp/OIDC/authorization' , 'EDUTEAMS_CLIENT_ID' : '' , 'EDUTEAMS_LABEL' : 'eduTEAMS' , 'EDUTEAMS_MANAGEMENT_URL' : '' , 'EDUTEAMS_SECRET' : '' , 'EDUTEAMS_TOKEN_URL' : 'https://proxy.acc.eduteams.org/OIDC/token' , 'EDUTEAMS_USERINFO_URL' : 'https://proxy.acc.eduteams.org/OIDC/userinfo' , 'EDUTEAMS_USER_PROTECTED_FIELDS' : [ 'full_name' , 'email' ], 'ENABLE_EDUTEAMS_SYNC' : False , 'KEYCLOAK_AUTH_URL' : '' , 'KEYCLOAK_CLIENT_ID' : '' , 'KEYCLOAK_LABEL' : 'Keycloak' , 'KEYCLOAK_MANAGEMENT_URL' : 'http://localhost:8080/auth/realms/cloudrock/account/#/personal-info' , 'KEYCLOAK_SECRET' : '' , 'KEYCLOAK_TOKEN_URL' : '' , 'KEYCLOAK_USERINFO_URL' : '' , 'KEYCLOAK_USER_PROTECTED_FIELDS' : [ 'full_name' , 'email' ], 'KEYCLOAK_VERIFY_SSL' : True , 'REMOTE_EDUTEAMS_CLIENT_ID' : '' , 'REMOTE_EDUTEAMS_ENABLED' : False , 'REMOTE_EDUTEAMS_REFRESH_TOKEN' : '' , 'REMOTE_EDUTEAMS_SECRET' : '' , 'REMOTE_EDUTEAMS_TOKEN_URL' : 'https://proxy.acc.researcher-access.org/OIDC/token' , 'REMOTE_EDUTEAMS_USERINFO_URL' : 'https://proxy.acc.researcher-access.org/api/userinfo' , 'SMARTIDEE_CLIENT_ID' : '' , 'SMARTIDEE_SECRET' : '' , 'TARA_CLIENT_ID' : '' , 'TARA_LABEL' : 'Riigi Autentimisteenus' , 'TARA_MANAGEMENT_URL' : '' , 'TARA_SANDBOX' : True , 'TARA_SECRET' : '' , 'TARA_USER_PROTECTED_FIELDS' : [ 'full_name' ]} EDUTEAMS_AUTH_URL Type: str The authorization endpoint performs authentication of the end-user. This is done by redirecting the user agent to this endpoint. EDUTEAMS_CLIENT_ID Type: str ID of application used for OAuth authentication. EDUTEAMS_LABEL Type: str Label is used by Cloudrock-UI for rendering login button. EDUTEAMS_MANAGEMENT_URL Type: str The endpoint for user details management. EDUTEAMS_SECRET Type: str Application secret key. EDUTEAMS_TOKEN_URL Type: str The token endpoint is used to obtain tokens. EDUTEAMS_USERINFO_URL Type: str The userinfo endpoint returns standard claims about the authenticated user, and is protected by a bearer token. EDUTEAMS_USER_PROTECTED_FIELDS Type: List[str] The list of protected fields for EDUTEAMS IdP. ENABLE_EDUTEAMS_SYNC Type: bool Enable eduTEAMS synchronization with remote Cloudrock. KEYCLOAK_AUTH_URL Type: str The authorization endpoint performs authentication of the end-user. This is done by redirecting the user agent to this endpoint. KEYCLOAK_CLIENT_ID Type: str ID of application used for OAuth authentication. KEYCLOAK_LABEL Type: str Label is used by Cloudrock-UI for rendering login button. KEYCLOAK_MANAGEMENT_URL Type: str The endpoint for user details management. KEYCLOAK_SECRET Type: str Application secret key. KEYCLOAK_TOKEN_URL Type: str The token endpoint is used to obtain tokens. KEYCLOAK_USERINFO_URL Type: str The userinfo endpoint returns standard claims about the authenticated user, and is protected by a bearer token. KEYCLOAK_USER_PROTECTED_FIELDS Type: List[str] The list of protected fields for Keycloak IdP. KEYCLOAK_VERIFY_SSL Type: bool Validate TLS certificate of Keycloak REST API REMOTE_EDUTEAMS_CLIENT_ID Type: str ID of application used for OAuth authentication. REMOTE_EDUTEAMS_ENABLED Type: bool Enable remote eduTEAMS extension. REMOTE_EDUTEAMS_REFRESH_TOKEN Type: str Token is used to authenticate against user info endpoint. REMOTE_EDUTEAMS_SECRET Type: str Application secret key. REMOTE_EDUTEAMS_TOKEN_URL Type: str The token endpoint is used to obtain tokens. REMOTE_EDUTEAMS_USERINFO_URL Type: str It allows to get user data based on userid aka CUID. SMARTIDEE_CLIENT_ID Type: str ID of application used for OAuth authentication. SMARTIDEE_SECRET Type: str Application secret key. TARA_CLIENT_ID Type: str ID of application used for OAuth authentication. TARA_LABEL Type: str You may set it to eIDAS, SmartID or MobileID make it more clear to the user which exact identity provider is configured or preferred for service provider. TARA_MANAGEMENT_URL Type: str The endpoint for user details management. TARA_SANDBOX Type: bool You should set it to False in order to switch to production mode. TARA_SECRET Type: str Application secret key. TARA_USER_PROTECTED_FIELDS Type: List[str] The list of protected fields for TARA IdP. CLOUDROCK_CORE plugin Default value: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 CLOUDROCK_CORE = { 'ATTACHMENT_LINK_MAX_AGE' : datetime . timedelta ( seconds = 3600 ), 'AUTHENTICATION_METHODS' : [ 'LOCAL_SIGNIN' ], 'BACKEND_FIELDS_EDITABLE' : True , 'BRAND_COLOR' : '#3a8500' , 'COUNTRIES' : [ 'AL' , 'AT' , 'BA' , 'BE' , 'BG' , 'CH' , 'CY' , 'DE' , 'DK' , 'EE' , 'ES' , 'EU' , 'FI' , 'FR' , 'GB' , 'GE' , 'GR' , 'HR' , 'HU' , 'IE' , 'IS' , 'IT' , 'LT' , 'LU' , 'LV' , 'MC' , 'MK' , 'MT' , 'NL' , 'NO' , 'PL' , 'PT' , 'RO' , 'RS' , 'SE' , 'SI' , 'UA' ], 'CREATE_DEFAULT_PROJECT_ON_ORGANIZATION_CREATION' : False , 'CURRENCY_NAME' : 'EUR' , 'DOCS_URL' : '' , 'EMAIL_CHANGE_MAX_AGE' : datetime . timedelta ( days = 1 ), 'ENABLE_ACCOUNTING_START_DATE' : False , 'ENABLE_GEOIP' : True , 'EXTENSIONS_AUTOREGISTER' : True , 'EXTERNAL_LINKS' : [], 'FULL_PAGE_TITLE' : 'Cloudrock | Cloud Service Management' , 'GOOGLE_ANALYTICS_ID' : '' , 'GROUP_INVITATION_LIFETIME' : datetime . timedelta ( days = 7 ), 'HERO_IMAGE' : None , 'HERO_LINK_LABEL' : None , 'HERO_LINK_URL' : None , 'CLOUDROCK_UI_SENTRY_DSN' : None , 'CLOUDROCK_UI_URL' : 'https://example.com/' , 'HTTP_CHUNK_SIZE' : 50 , 'INVITATIONS_ENABLED' : True , 'INVITATION_CIVIL_NUMBER_HELP_TEXT' : 'Must start with a country prefix ie ' 'EE34501234215' , 'INVITATION_CIVIL_NUMBER_LABEL' : '' , 'INVITATION_CREATE_MISSING_USER' : False , 'INVITATION_DISABLE_MULTIPLE_ROLES' : False , 'INVITATION_LIFETIME' : datetime . timedelta ( days = 7 ), 'INVITATION_MAX_AGE' : None , 'INVITATION_TAX_NUMBER_LABEL' : '' , 'LOCAL_IDP_LABEL' : 'Local DB' , 'LOCAL_IDP_MANAGEMENT_URL' : '' , 'LOCAL_IDP_NAME' : 'Local DB' , 'LOCAL_IDP_PROTECTED_FIELDS' : [], 'LOGGING_REPORT_DIRECTORY' : '/var/log/cloudrock' , 'LOGGING_REPORT_INTERVAL' : datetime . timedelta ( days = 7 ), 'METAL_URL' : '' , 'NATIVE_NAME_ENABLED' : False , 'NOTIFICATIONS_PROFILE_CHANGES' : { 'ENABLE_OPERATOR_OWNER_NOTIFICATIONS' : False , 'FIELDS' : ( 'email' , 'phone_number' , 'job_title' ), 'OPERATOR_NOTIFICATION_EMAILS' : []}, 'NOTIFICATION_SUBJECT' : 'Notifications from Cloudrock' , 'ONLY_STAFF_CAN_INVITE_USERS' : False , 'ONLY_STAFF_MANAGES_SERVICES' : False , 'OWNERS_CAN_MANAGE_OWNERS' : False , 'OWNER_CAN_MANAGE_CUSTOMER' : False , 'POWERED_BY_LOGO' : None , 'PROTECT_USER_DETAILS_FOR_REGISTRATION_METHODS' : [], 'SELLER_COUNTRY_CODE' : None , 'SHORT_PAGE_TITLE' : 'Cloudrock' , 'SHOW_ALL_USERS' : False , 'SIDEBAR_LOGO' : None , 'SIDEBAR_LOGO_MOBILE' : None , 'SITE_ADDRESS' : '' , 'SITE_DESCRIPTION' : 'Your single pane of control for managing projects, teams ' 'and resources in a self-service manner.' , 'SITE_EMAIL' : '' , 'SITE_LOGO' : None , 'SITE_NAME' : 'Cloudrock' , 'SITE_PHONE' : '' , 'SUPPORT_PORTAL_URL' : '' , 'TOKEN_KEY' : 'x-auth-token' , 'TOKEN_LIFETIME' : datetime . timedelta ( seconds = 3600 ), 'TRANSLATION_DOMAIN' : '' , 'USER_MANDATORY_FIELDS' : [ 'full_name' , 'email' ], 'USER_REGISTRATION_HIDDEN_FIELDS' : [ 'registration_method' , 'job_title' , 'phone_number' , 'organization' ], 'USE_ATOMIC_TRANSACTION' : True , 'VALIDATE_INVITATION_EMAIL' : False } ATTACHMENT_LINK_MAX_AGE Type: timedelta Max age of secure token for media download. AUTHENTICATION_METHODS Type: List[str] List of enabled authentication methods. BACKEND_FIELDS_EDITABLE Type: bool Allows to control /admin writable fields. If this flag is disabled it is impossible to edit any field that corresponds to backend value via /admin. Such restriction allows to save information from corruption. BRAND_COLOR Type: Optional[str] Hex color definition is used in Cloudrock-UI landing page for login button. COUNTRIES Type: List[str] It is used in organization creation dialog in order to limit country choices to predefined set. CREATE_DEFAULT_PROJECT_ON_ORGANIZATION_CREATION Type: bool Enables generation of the first project on organization creation. CURRENCY_NAME Type: str It is used in marketplace order details and invoices for currency formatting. DOCS_URL Type: str Renders link to docs in header EMAIL_CHANGE_MAX_AGE Type: timedelta Max age of change email request. ENABLE_ACCOUNTING_START_DATE Type: bool Allows to enable accounting for organizations using value of accounting_start_date field. ENABLE_GEOIP Type: bool Enable detection of coordinates of virtual machines. EXTENSIONS_AUTOREGISTER Type: bool Defines whether extensions should be automatically registered. EXTERNAL_LINKS Type: List[ExternalLink] Render external links in dropdown in header. Each item should be object with label and url fields. For example: {\"label\": \"Helpdesk\", \"url\": \" https://example.com/ \"} FULL_PAGE_TITLE Type: str It is used as default page title if it's not specified explicitly. GOOGLE_ANALYTICS_ID Type: str Identifier associated with your account and used by Google Analytics to collect the data. GROUP_INVITATION_LIFETIME Type: timedelta Defines for how long group invitation remains valid. HERO_IMAGE Type: Optional[str] Relative path to image rendered at hero section of Cloudrock-UI landing page. HERO_LINK_LABEL Type: Optional[str] Label for link in hero section of Cloudrock-UI landing page. It can be lead to support site or blog post. HERO_LINK_URL Type: Optional[str] Link URL in hero section of Cloudrock-UI landing page. CLOUDROCK_UI_SENTRY_DSN Type: Optional[str] Sentry Data Source Name for Cloudrock Cloudrock-UI project. CLOUDROCK_UI_URL Type: str It is used for rendering callback URL in Cloudrock-UI. HTTP_CHUNK_SIZE Type: int Chunk size for resource fetching from backend API. It is needed in order to avoid too long HTTP request error. INVITATIONS_ENABLED Type: bool Allows to disable invitations feature. INVITATION_CIVIL_NUMBER_HELP_TEXT Type: str Help text for civil number field in invitation creation dialog. INVITATION_CIVIL_NUMBER_LABEL Type: str Custom label for civil number field in invitation creation dialog. INVITATION_CREATE_MISSING_USER Type: bool Allow to create FreeIPA user using details specified in invitation if user does not exist yet. INVITATION_DISABLE_MULTIPLE_ROLES Type: bool Do not allow user to grant multiple roles in the same project or organization using invitation. INVITATION_LIFETIME Type: timedelta Defines for how long invitation remains valid. INVITATION_MAX_AGE Type: Optional[timedelta] Max age of invitation token. It is used in approve and reject actions. INVITATION_TAX_NUMBER_LABEL Type: str Custom label for tax number field in invitation creation dialog. LOCAL_IDP_LABEL Type: str The label of local auth. LOCAL_IDP_MANAGEMENT_URL Type: str The URL for management of local user details. LOCAL_IDP_NAME Type: str The name of local auth. LOCAL_IDP_PROTECTED_FIELDS Type: List[str] The list of protected fields for local IdP. LOGGING_REPORT_DIRECTORY Type: str Directory where log files are located. LOGGING_REPORT_INTERVAL Type: timedelta Files older that specified interval are filtered out. METAL_URL Type: str It is used for rendering callback URL in Metal. NATIVE_NAME_ENABLED Type: bool Allows to render native name field in customer and user forms. NOTIFICATIONS_PROFILE_CHANGES Type: dict Configure notifications about profile changes of organization owners. NOTIFICATION_SUBJECT Type: str It is used as a subject of email emitted by event logging hook. ONLY_STAFF_CAN_INVITE_USERS Type: bool Allow to limit invitation management to staff only. ONLY_STAFF_MANAGES_SERVICES Type: bool Allows to restrict provider management only to staff users. OWNERS_CAN_MANAGE_OWNERS Type: bool Enables organization owners to manage other organization owners. OWNER_CAN_MANAGE_CUSTOMER Type: bool Enables organization owners to create an organization. POWERED_BY_LOGO Type: Optional[str] Relative path to image rendered at the bottom of login menu in Cloudrock-UI. PROTECT_USER_DETAILS_FOR_REGISTRATION_METHODS Type: List[str] List of authentication methods which are not allowed to update user details. SELLER_COUNTRY_CODE Type: Optional[str] Specifies seller legal or effective country of registration or residence as an ISO 3166-1 alpha-2 country code. It is used for computing VAT charge rate. SHORT_PAGE_TITLE Type: str it is used as prefix for page title. SHOW_ALL_USERS Type: bool Indicates whether user can see all other users in api/users/ endpoint. SIDEBAR_LOGO Type: Optional[str] Relative path to image rendered at the top of sidebar menu in Cloudrock-UI. SIDEBAR_LOGO_MOBILE Type: Optional[str] Relative path to image rendered at the top of mobile sidebar menu in Cloudrock-UI. SITE_ADDRESS Type: str It is used in marketplace order header. SITE_DESCRIPTION Type: str Description of the Cloudrock deployment. SITE_EMAIL Type: str It is used in marketplace order header and UI footer. SITE_LOGO Type: Optional[str] It is used in marketplace order header. SITE_NAME Type: str Human-friendly name of the Cloudrock deployment. SITE_PHONE Type: str It is used in marketplace order header and UI footer. SUPPORT_PORTAL_URL Type: str Support portal URL is rendered as a shortcut on dashboard TOKEN_KEY Type: str Header for token authentication. TOKEN_LIFETIME Type: timedelta Defines for how long user token should remain valid if there was no action from user. TRANSLATION_DOMAIN Type: str Identifier of translation domain applied to current deployment. USER_MANDATORY_FIELDS Type: List[str] List of user profile attributes that would be required for filling in Cloudrock-UI. Note that backend will not be affected. If a mandatory field is missing in profile, a profile edit view will be forced upon user on any Cloudrock-UI logged in action. Possible values are: description, email, full_name, job_title, organization, phone_number USER_REGISTRATION_HIDDEN_FIELDS Type: List[str] List of user profile attributes that would be concealed on registration form in Cloudrock-UI. Possible values are: job_title, registration_method, phone_number USE_ATOMIC_TRANSACTION Type: bool Wrap action views in atomic transaction. VALIDATE_INVITATION_EMAIL Type: bool Ensure that invitation and user emails match. CLOUDROCK_FREEIPA plugin Default value: 1 2 3 4 5 6 7 8 9 CLOUDROCK_FREEIPA = { 'BLACKLISTED_USERNAMES' : [ 'root' ], 'ENABLED' : False , 'GROUPNAME_PREFIX' : 'cloudrock_' , 'GROUP_SYNCHRONIZATION_ENABLED' : True , 'HOSTNAME' : 'ipa.example.com' , 'PASSWORD' : 'secret' , 'USERNAME' : 'admin' , 'USERNAME_PREFIX' : 'cloudrock_' , 'VERIFY_SSL' : True } BLACKLISTED_USERNAMES Type: list List of username that users are not allowed to select ENABLED Type: bool Enable integration of identity provisioning in configured FreeIPA GROUPNAME_PREFIX Type: str Prefix to be appended to all group names created in FreeIPA by Cloudrock GROUP_SYNCHRONIZATION_ENABLED Type: bool Optionally disable creation of user groups in FreeIPA matching Cloudrock structure HOSTNAME Type: str Hostname of FreeIPA server PASSWORD Type: str Password of FreeIPA user with administrative privileges USERNAME Type: str Username of FreeIPA user with administrative privileges USERNAME_PREFIX Type: str Prefix to be appended to all usernames created in FreeIPA by Cloudrock VERIFY_SSL Type: bool Validate TLS certificate of FreeIPA web interface / REST API CLOUDROCK_HPC plugin Default value: 1 2 3 4 5 6 7 8 9 10 11 CLOUDROCK_HPC = { 'ENABLED' : False , 'EXTERNAL_AFFILIATIONS' : [], 'EXTERNAL_CUSTOMER_UUID' : '' , 'EXTERNAL_EMAIL_PATTERNS' : [], 'EXTERNAL_LIMITS' : {}, 'INTERNAL_AFFILIATIONS' : [], 'INTERNAL_CUSTOMER_UUID' : '' , 'INTERNAL_EMAIL_PATTERNS' : [], 'INTERNAL_LIMITS' : {}, 'OFFERING_UUID' : '' , 'PLAN_UUID' : '' } ENABLED Type: bool Enable HPC-specific hooks in Cloudrock deployment EXTERNAL_AFFILIATIONS Type: List[str] List of user affiliations (eduPersonScopedAffiliation fields) that define if the user belongs to external organization. EXTERNAL_CUSTOMER_UUID Type: str UUID of a Cloudrock organization (aka customer) where new external users would be added EXTERNAL_EMAIL_PATTERNS Type: List[str] List of user email patterns (as regex) that define if the user belongs to external organization. EXTERNAL_LIMITS Type: dict Overrided default values for SLURM offering to be created for users belonging to external organization. INTERNAL_AFFILIATIONS Type: List[str] List of user affiliations (eduPersonScopedAffiliation fields) that define if the user belongs to internal organization. INTERNAL_CUSTOMER_UUID Type: str UUID of a Cloudrock organization (aka customer) where new internal users would be added INTERNAL_EMAIL_PATTERNS Type: List[str] List of user email patterns (as regex) that define if the user belongs to internal organization. INTERNAL_LIMITS Type: dict Overrided default values for SLURM offering to be created for users belonging to internal organization. OFFERING_UUID Type: str UUID of a Cloudrock SLURM offering, which will be used for creating allocations for users PLAN_UUID Type: str UUID of a Cloudrock SLURM offering plan, which will be used for creating allocations for users CLOUDROCK_KEYCLOAK plugin Default value: 1 2 3 4 5 6 7 CLOUDROCK_KEYCLOAK = { 'BASE_URL' : 'http://localhost:8080/auth' , 'CLIENT_ID' : 'cloudrock' , 'CLIENT_SECRET' : 'UUID' , 'ENABLED' : False , 'PASSWORD' : 'secret' , 'REALM' : 'cloudrock' , 'USERNAME' : 'admin' } BASE_URL Type: str Base URL of Keycloak server CLIENT_ID Type: str Identification of Cloudrock client app CLIENT_SECRET Type: str Credentials are generated in Keycloak admin console ENABLED Type: bool Enable integration of group provisioning in configured Keycloak PASSWORD Type: str Password of Keycloak user with administrative privileges REALM Type: str Realm used by Cloudrock USERNAME Type: str Username of Keycloak user with administrative privileges CLOUDROCK_MARKETPLACE plugin Default value: 1 2 3 4 5 6 7 8 9 10 11 12 CLOUDROCK_MARKETPLACE = { 'ADMIN_CAN_APPROVE_ORDER' : False , 'ANONYMOUS_USER_CAN_VIEW_OFFERINGS' : True , 'ANONYMOUS_USER_CAN_VIEW_PLANS' : True , 'DISABLE_SENDING_NOTIFICATIONS_ABOUT_RESOURCE_UPDATE' : True , 'ENABLE_RESOURCE_END_DATE' : True , 'ENABLE_STALE_RESOURCE_NOTIFICATIONS' : False , 'MANAGER_CAN_APPROVE_ORDER' : False , 'NOTIFY_ABOUT_RESOURCE_CHANGE' : True , 'NOTIFY_STAFF_ABOUT_APPROVALS' : False , 'OWNER_CAN_APPROVE_ORDER' : True , 'OWNER_CAN_REGISTER_SERVICE_PROVIDER' : False , 'THUMBNAIL_SIZE' : ( 120 , 120 )} ADMIN_CAN_APPROVE_ORDER Type: bool If true, orders for resource can be approved by admin of the customer project ANONYMOUS_USER_CAN_VIEW_OFFERINGS Type: bool Allow anonymous users to see shared offerings in active, paused and archived states ANONYMOUS_USER_CAN_VIEW_PLANS Type: bool Allow anonymous users to see plans DISABLE_SENDING_NOTIFICATIONS_ABOUT_RESOURCE_UPDATE Type: bool Disable only resource update events. ENABLE_RESOURCE_END_DATE Type: bool Allow to view and update resource end date. ENABLE_STALE_RESOURCE_NOTIFICATIONS Type: bool Enable reminders to owners about resources of shared offerings that have not generated any cost for the last 3 months. MANAGER_CAN_APPROVE_ORDER Type: bool If true, orders for resource can be approved by manager of the customer project NOTIFY_ABOUT_RESOURCE_CHANGE Type: bool If true, notify users about resource changes from Marketplace perspective. Can generate duplicate events if plugins also log NOTIFY_STAFF_ABOUT_APPROVALS Type: bool If true, users with staff role are notified when request for order approval is generated OWNER_CAN_APPROVE_ORDER Type: bool If true, orders for resource can be approved by custom organization owner. OWNER_CAN_REGISTER_SERVICE_PROVIDER Type: bool Allow organization owner to request or mark its organization as service provider THUMBNAIL_SIZE Type: tuple Size of the thumbnail to generate when screenshot is uploaded for an offering. CLOUDROCK_MARKETPLACE_SCRIPT plugin Default value: 1 2 3 4 5 6 7 8 CLOUDROCK_MARKETPLACE_SCRIPT = { 'DOCKER_CLIENT' : { 'base_url' : 'unix://var/run/docker.sock' }, 'DOCKER_IMAGES' : { 'python' : 'python:3.8-alpine' , 'shell' : 'alpine:3' }, 'DOCKER_RUN_OPTIONS' : { 'mem_limit' : '64m' }, 'DOCKER_SCRIPT_DIR' : None , 'K8S_CONFIG_PATH' : '~/.kube/config' , 'K8S_JOB_TIMEOUT' : 1800 , 'K8S_NAMESPACE' : 'default' , 'SCRIPT_RUN_MODE' : 'docker' } DOCKER_CLIENT Type: dict Options for docker client. See also: https://docker-py.readthedocs.io/en/stable/client.html#docker.client.DockerClient DOCKER_IMAGES Type: dict Key is command to execute script, value is image name. DOCKER_RUN_OPTIONS Type: dict Options for docker runtime. See also: https://docker-py.readthedocs.io/en/stable/containers.html#docker.models.containers.ContainerCollection.run DOCKER_SCRIPT_DIR Type: Optional[str] Path to folder on executor machine where to create temporary submission scripts. If None uses OS-dependent location. OS X users, see https://github.com/docker/for-mac/issues/1532 K8S_CONFIG_PATH Type: str Path to Kubernetes configuration file K8S_JOB_TIMEOUT Type: int Timeout for execution of one Kubernetes job in seconds K8S_NAMESPACE Type: str Kubernetes namespace where jobs will be executed SCRIPT_RUN_MODE Type: str Type of jobs deployment. Valid values: \"docker\" for simple docker deployment, \"k8s\" for Kubernetes-based one CLOUDROCK_OPENSTACK plugin Default value: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 CLOUDROCK_OPENSTACK = { 'ADMIN_CAN_MANAGE_TENANTS' : False , 'DEFAULT_BLACKLISTED_USERNAMES' : [ 'admin' , 'service' ], 'DEFAULT_SECURITY_GROUPS' : ({ 'description' : 'Security group for any access' , 'name' : 'allow-all' , 'rules' : ({ 'cidr' : '0.0.0.0/0' , 'icmp_code' : - 1 , 'icmp_type' : - 1 , 'protocol' : 'icmp' }, { 'cidr' : '0.0.0.0/0' , 'from_port' : 1 , 'protocol' : 'tcp' , 'to_port' : 65535 })}, { 'description' : 'Security group for secure shell ' 'access' , 'name' : 'ssh' , 'rules' : ({ 'cidr' : '0.0.0.0/0' , 'from_port' : 22 , 'protocol' : 'tcp' , 'to_port' : 22 },)}, { 'description' : 'Security group for ping' , 'name' : 'ping' , 'rules' : ({ 'cidr' : '0.0.0.0/0' , 'icmp_code' : - 1 , 'icmp_type' : - 1 , 'protocol' : 'icmp' },)}, { 'description' : 'Security group for remove ' 'desktop access' , 'name' : 'rdp' , 'rules' : ({ 'cidr' : '0.0.0.0/0' , 'from_port' : 3389 , 'protocol' : 'tcp' , 'to_port' : 3389 },)}, { 'description' : 'Security group for http and ' 'https access' , 'name' : 'web' , 'rules' : ({ 'cidr' : '0.0.0.0/0' , 'from_port' : 80 , 'protocol' : 'tcp' , 'to_port' : 80 }, { 'cidr' : '0.0.0.0/0' , 'from_port' : 443 , 'protocol' : 'tcp' , 'to_port' : 443 })}), 'MANAGER_CAN_MANAGE_TENANTS' : False , 'SUBNET' : { 'ALLOCATION_POOL_END' : ' {first_octet} . {second_octet} . {third_octet} .200' , 'ALLOCATION_POOL_START' : ' {first_octet} . {second_octet} . {third_octet} .10' }, 'TENANT_CREDENTIALS_VISIBLE' : False } ADMIN_CAN_MANAGE_TENANTS Type: bool If true, admin can delete or change configuration of tenants. DEFAULT_BLACKLISTED_USERNAMES Type: list Usernames that cannot be created by Cloudrock in OpenStack DEFAULT_SECURITY_GROUPS Type: tuple Default security groups and rules created in each of the provisioned OpenStack tenants MANAGER_CAN_MANAGE_TENANTS Type: bool If true, manager can delete or change configuration of tenants. SUBNET Type: dict Default allocation pool for auto-created internal network TENANT_CREDENTIALS_VISIBLE Type: bool If true, generated credentials of a tenant are exposed to project users CLOUDROCK_OPENSTACK_TENANT plugin Default value: 1 2 3 4 5 6 CLOUDROCK_OPENSTACK_TENANT = { 'ALLOW_CUSTOMER_USERS_OPENSTACK_CONSOLE_ACCESS' : True , 'ALLOW_DIRECT_EXTERNAL_NETWORK_CONNECTION' : False , 'MAX_CONCURRENT_PROVISION' : { 'OpenStackTenant.Instance' : 4 , 'OpenStackTenant.Snapshot' : 4 , 'OpenStackTenant.Volume' : 4 }, 'REQUIRE_AVAILABILITY_ZONE' : False } ALLOW_CUSTOMER_USERS_OPENSTACK_CONSOLE_ACCESS Type: bool If true, customer users would be offered actions for accessing OpenStack Console ALLOW_DIRECT_EXTERNAL_NETWORK_CONNECTION Type: bool If true, allow connecting of Instances directly to external networks MAX_CONCURRENT_PROVISION Type: dict Maximum parallel executions of provisioning operations for OpenStackTenant resources REQUIRE_AVAILABILITY_ZONE Type: bool If true, specification of availability zone during provisioning will become mandatory CLOUDROCK_PID plugin Default value: 1 2 3 4 5 6 CLOUDROCK_PID = { 'DATACITE' : { 'API_URL' : 'https://example.com' , 'COLLECTION_DOI' : '' , 'PASSWORD' : '' , 'PREFIX' : '' , 'PUBLISHER' : 'Cloudrock' , 'REPOSITORY_ID' : '' }} DATACITE Type: dict Settings for integration of Cloudrock with Datacite PID service. Collection DOI is used to aggregate generated DOIs. CLOUDROCK_SLURM plugin Default value: 1 2 3 4 5 6 CLOUDROCK_SLURM = { 'ALLOCATION_PREFIX' : 'cloudrock_allocation_' , 'CUSTOMER_PREFIX' : 'cloudrock_customer_' , 'DEFAULT_LIMITS' : { 'CPU' : 16000 , 'GPU' : 400 , 'RAM' : 102400000 }, 'ENABLED' : False , 'PRIVATE_KEY_PATH' : '/etc/cloudrock/id_rsa' , 'PROJECT_PREFIX' : 'cloudrock_project_' } ALLOCATION_PREFIX Type: str Prefix for SLURM account name corresponding to Cloudrock allocation CUSTOMER_PREFIX Type: str Prefix for SLURM account name corresponding to Cloudrock organization. DEFAULT_LIMITS Type: dict Default limits of account that are set when SLURM account is provisioned. ENABLED Type: bool Enable support for SLURM plugin in a deployment PRIVATE_KEY_PATH Type: str Path to private key file used as SSH identity file for accessing SLURM master. PROJECT_PREFIX Type: str Prefix for SLURM account name corresponding to Cloudrock project. Other variables DEFAULT_FROM_EMAIL Type: str, default value: webmaster@localhost Default email address to use for automated correspondence from Cloudrock. DEFAULT_REPLY_TO_EMAIL Type: str Default email address to use for email replies. IMPORT_EXPORT_USE_TRANSACTIONS Type: bool, default value: True Controls if resource importing should use database transactions. Using transactions makes imports safer as a failure during import won\u2019t import only part of the data set. IPSTACK_ACCESS_KEY Type: Optional[str] Unique authentication key used to gain access to the ipstack API. LANGUAGES Type: List[Tuple[str, str]], default value: (('en', 'English'), ('et', 'Eesti')) The list is a list of two-tuples in the format (language code, language name) \u2013 for example, ('ja', 'Japanese'). This specifies which languages are available for language selection. LANGUAGE_CODE Type: str, default value: en Represents the name of a default language. USE_PROTECTED_URL Type: bool, default value: False Protect media URLs using signed token. VERIFY_WEBHOOK_REQUESTS Type: bool, default value: True When webook is processed, requests verifies SSL certificates for HTTPS requests, just like a web browser.","title":"Configuration guide"},{"location":"admin-guide/metal-configuration/configuration-guide/#configuration-guide","text":"","title":"Configuration guide"},{"location":"admin-guide/metal-configuration/configuration-guide/#cloudrock_auth_saml2-plugin","text":"Default value: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 CLOUDROCK_AUTH_SAML2 = { 'ALLOW_TO_SELECT_IDENTITY_PROVIDER' : True , 'ATTRIBUTE_MAP_DIR' : '/etc/cloudrock/saml2/attributemaps' , 'AUTHN_REQUESTS_SIGNED' : 'true' , 'CATEGORIES' : [ 'http://www.geant.net/uri/dataprotection-code-of-conduct/v1' ], 'CERT_FILE' : '' , 'DEBUG' : False , 'DEFAULT_BINDING' : 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST' , 'DESCRIPTION' : 'Service provider description' , 'DIGEST_ALGORITHM' : None , 'DISCOVERY_SERVICE_LABEL' : None , 'DISCOVERY_SERVICE_URL' : None , 'DISPLAY_NAME' : 'Service provider display name' , 'ENABLE_SINGLE_LOGOUT' : False , 'IDENTITY_PROVIDER_LABEL' : None , 'IDENTITY_PROVIDER_URL' : None , 'IDP_METADATA_LOCAL' : [], 'IDP_METADATA_REMOTE' : [], 'KEY_FILE' : '' , 'LOGOUT_REQUESTS_SIGNED' : 'true' , 'LOG_FILE' : '' , 'LOG_LEVEL' : 'INFO' , 'MANAGEMENT_URL' : '' , 'NAME' : 'saml2' , 'NAMEID_FORMAT' : None , 'OPTIONAL_ATTRIBUTES' : [], 'ORGANIZATION' : {}, 'PRIVACY_STATEMENT_URL' : 'http://example.com/privacy-policy/' , 'REGISTRATION_AUTHORITY' : 'http://example.com/registration-authority/' , 'REGISTRATION_INSTANT' : '2017-01-01T00:00:00' , 'REGISTRATION_POLICY' : 'http://example.com/registration-policy/' , 'REQUIRED_ATTRIBUTES' : [], 'SAML_ATTRIBUTE_MAPPING' : {}, 'SIGNATURE_ALGORITHM' : None , 'XMLSEC_BINARY' : '/usr/bin/xmlsec1' }","title":"CLOUDROCK_AUTH_SAML2 plugin"},{"location":"admin-guide/metal-configuration/configuration-guide/#allow_to_select_identity_provider","text":"Type: bool","title":"ALLOW_TO_SELECT_IDENTITY_PROVIDER"},{"location":"admin-guide/metal-configuration/configuration-guide/#attribute_map_dir","text":"Type: str Directory with attribute mapping","title":"ATTRIBUTE_MAP_DIR"},{"location":"admin-guide/metal-configuration/configuration-guide/#authn_requests_signed","text":"Type: str Indicates if the authentication requests sent should be signed by default","title":"AUTHN_REQUESTS_SIGNED"},{"location":"admin-guide/metal-configuration/configuration-guide/#categories","text":"Type: list Links to the entity categories","title":"CATEGORIES"},{"location":"admin-guide/metal-configuration/configuration-guide/#cert_file","text":"Type: str PEM formatted certificate chain file","title":"CERT_FILE"},{"location":"admin-guide/metal-configuration/configuration-guide/#debug","text":"Type: bool Set to True to output debugging information","title":"DEBUG"},{"location":"admin-guide/metal-configuration/configuration-guide/#default_binding","text":"Type: str","title":"DEFAULT_BINDING"},{"location":"admin-guide/metal-configuration/configuration-guide/#description","text":"Type: str Service provider description (required by CoC)","title":"DESCRIPTION"},{"location":"admin-guide/metal-configuration/configuration-guide/#digest_algorithm","text":"Type: Optional[str] Identifies the Message Digest algorithm URL according to the XML Signature specification (SHA1 is used by default)","title":"DIGEST_ALGORITHM"},{"location":"admin-guide/metal-configuration/configuration-guide/#discovery_service_label","text":"Type: Optional[str]","title":"DISCOVERY_SERVICE_LABEL"},{"location":"admin-guide/metal-configuration/configuration-guide/#discovery_service_url","text":"Type: Optional[str]","title":"DISCOVERY_SERVICE_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#display_name","text":"Type: str Service provider display name (required by CoC)","title":"DISPLAY_NAME"},{"location":"admin-guide/metal-configuration/configuration-guide/#enable_single_logout","text":"Type: bool","title":"ENABLE_SINGLE_LOGOUT"},{"location":"admin-guide/metal-configuration/configuration-guide/#identity_provider_label","text":"Type: Optional[str]","title":"IDENTITY_PROVIDER_LABEL"},{"location":"admin-guide/metal-configuration/configuration-guide/#identity_provider_url","text":"Type: Optional[str]","title":"IDENTITY_PROVIDER_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#idp_metadata_local","text":"Type: list IdPs metadata XML files stored locally","title":"IDP_METADATA_LOCAL"},{"location":"admin-guide/metal-configuration/configuration-guide/#idp_metadata_remote","text":"Type: list IdPs metadata XML files stored remotely","title":"IDP_METADATA_REMOTE"},{"location":"admin-guide/metal-configuration/configuration-guide/#key_file","text":"Type: str PEM formatted certificate key file","title":"KEY_FILE"},{"location":"admin-guide/metal-configuration/configuration-guide/#logout_requests_signed","text":"Type: str Indicates if the entity will sign the logout requests","title":"LOGOUT_REQUESTS_SIGNED"},{"location":"admin-guide/metal-configuration/configuration-guide/#log_file","text":"Type: str Empty to disable logging SAML2-related stuff to file","title":"LOG_FILE"},{"location":"admin-guide/metal-configuration/configuration-guide/#log_level","text":"Type: str Log level for SAML2","title":"LOG_LEVEL"},{"location":"admin-guide/metal-configuration/configuration-guide/#management_url","text":"Type: str The endpoint for user details management.","title":"MANAGEMENT_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#name","text":"Type: str Name used for assigning the registration method to the user","title":"NAME"},{"location":"admin-guide/metal-configuration/configuration-guide/#nameid_format","text":"Type: Optional[str] Identified NameID format to use. None means default, empty string (\"\") disables addition of entity","title":"NAMEID_FORMAT"},{"location":"admin-guide/metal-configuration/configuration-guide/#optional_attributes","text":"Type: list SAML attributes that may be useful to have but not required","title":"OPTIONAL_ATTRIBUTES"},{"location":"admin-guide/metal-configuration/configuration-guide/#organization","text":"Type: dict Organization responsible for the service (you can set multilanguage information here)","title":"ORGANIZATION"},{"location":"admin-guide/metal-configuration/configuration-guide/#privacy_statement_url","text":"Type: str URL with privacy statement (required by CoC)","title":"PRIVACY_STATEMENT_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#registration_authority","text":"Type: str Registration authority required by mdpi","title":"REGISTRATION_AUTHORITY"},{"location":"admin-guide/metal-configuration/configuration-guide/#registration_instant","text":"Type: str Registration instant time required by mdpi","title":"REGISTRATION_INSTANT"},{"location":"admin-guide/metal-configuration/configuration-guide/#registration_policy","text":"Type: str Registration policy required by mdpi","title":"REGISTRATION_POLICY"},{"location":"admin-guide/metal-configuration/configuration-guide/#required_attributes","text":"Type: list SAML attributes that are required to identify a user","title":"REQUIRED_ATTRIBUTES"},{"location":"admin-guide/metal-configuration/configuration-guide/#saml_attribute_mapping","text":"Type: dict Mapping between SAML attributes and User fields","title":"SAML_ATTRIBUTE_MAPPING"},{"location":"admin-guide/metal-configuration/configuration-guide/#signature_algorithm","text":"Type: Optional[str] Identifies the Signature algorithm URL according to the XML Signature specification (SHA1 is used by default)","title":"SIGNATURE_ALGORITHM"},{"location":"admin-guide/metal-configuration/configuration-guide/#xmlsec_binary","text":"Type: str Full path to the xmlsec1 binary program","title":"XMLSEC_BINARY"},{"location":"admin-guide/metal-configuration/configuration-guide/#cloudrock_auth_social-plugin","text":"Default value: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 CLOUDROCK_AUTH_SOCIAL = { 'EDUTEAMS_AUTH_URL' : 'https://proxy.acc.eduteams.org/saml2sp/OIDC/authorization' , 'EDUTEAMS_CLIENT_ID' : '' , 'EDUTEAMS_LABEL' : 'eduTEAMS' , 'EDUTEAMS_MANAGEMENT_URL' : '' , 'EDUTEAMS_SECRET' : '' , 'EDUTEAMS_TOKEN_URL' : 'https://proxy.acc.eduteams.org/OIDC/token' , 'EDUTEAMS_USERINFO_URL' : 'https://proxy.acc.eduteams.org/OIDC/userinfo' , 'EDUTEAMS_USER_PROTECTED_FIELDS' : [ 'full_name' , 'email' ], 'ENABLE_EDUTEAMS_SYNC' : False , 'KEYCLOAK_AUTH_URL' : '' , 'KEYCLOAK_CLIENT_ID' : '' , 'KEYCLOAK_LABEL' : 'Keycloak' , 'KEYCLOAK_MANAGEMENT_URL' : 'http://localhost:8080/auth/realms/cloudrock/account/#/personal-info' , 'KEYCLOAK_SECRET' : '' , 'KEYCLOAK_TOKEN_URL' : '' , 'KEYCLOAK_USERINFO_URL' : '' , 'KEYCLOAK_USER_PROTECTED_FIELDS' : [ 'full_name' , 'email' ], 'KEYCLOAK_VERIFY_SSL' : True , 'REMOTE_EDUTEAMS_CLIENT_ID' : '' , 'REMOTE_EDUTEAMS_ENABLED' : False , 'REMOTE_EDUTEAMS_REFRESH_TOKEN' : '' , 'REMOTE_EDUTEAMS_SECRET' : '' , 'REMOTE_EDUTEAMS_TOKEN_URL' : 'https://proxy.acc.researcher-access.org/OIDC/token' , 'REMOTE_EDUTEAMS_USERINFO_URL' : 'https://proxy.acc.researcher-access.org/api/userinfo' , 'SMARTIDEE_CLIENT_ID' : '' , 'SMARTIDEE_SECRET' : '' , 'TARA_CLIENT_ID' : '' , 'TARA_LABEL' : 'Riigi Autentimisteenus' , 'TARA_MANAGEMENT_URL' : '' , 'TARA_SANDBOX' : True , 'TARA_SECRET' : '' , 'TARA_USER_PROTECTED_FIELDS' : [ 'full_name' ]}","title":"CLOUDROCK_AUTH_SOCIAL plugin"},{"location":"admin-guide/metal-configuration/configuration-guide/#eduteams_auth_url","text":"Type: str The authorization endpoint performs authentication of the end-user. This is done by redirecting the user agent to this endpoint.","title":"EDUTEAMS_AUTH_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#eduteams_client_id","text":"Type: str ID of application used for OAuth authentication.","title":"EDUTEAMS_CLIENT_ID"},{"location":"admin-guide/metal-configuration/configuration-guide/#eduteams_label","text":"Type: str Label is used by Cloudrock-UI for rendering login button.","title":"EDUTEAMS_LABEL"},{"location":"admin-guide/metal-configuration/configuration-guide/#eduteams_management_url","text":"Type: str The endpoint for user details management.","title":"EDUTEAMS_MANAGEMENT_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#eduteams_secret","text":"Type: str Application secret key.","title":"EDUTEAMS_SECRET"},{"location":"admin-guide/metal-configuration/configuration-guide/#eduteams_token_url","text":"Type: str The token endpoint is used to obtain tokens.","title":"EDUTEAMS_TOKEN_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#eduteams_userinfo_url","text":"Type: str The userinfo endpoint returns standard claims about the authenticated user, and is protected by a bearer token.","title":"EDUTEAMS_USERINFO_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#eduteams_user_protected_fields","text":"Type: List[str] The list of protected fields for EDUTEAMS IdP.","title":"EDUTEAMS_USER_PROTECTED_FIELDS"},{"location":"admin-guide/metal-configuration/configuration-guide/#enable_eduteams_sync","text":"Type: bool Enable eduTEAMS synchronization with remote Cloudrock.","title":"ENABLE_EDUTEAMS_SYNC"},{"location":"admin-guide/metal-configuration/configuration-guide/#keycloak_auth_url","text":"Type: str The authorization endpoint performs authentication of the end-user. This is done by redirecting the user agent to this endpoint.","title":"KEYCLOAK_AUTH_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#keycloak_client_id","text":"Type: str ID of application used for OAuth authentication.","title":"KEYCLOAK_CLIENT_ID"},{"location":"admin-guide/metal-configuration/configuration-guide/#keycloak_label","text":"Type: str Label is used by Cloudrock-UI for rendering login button.","title":"KEYCLOAK_LABEL"},{"location":"admin-guide/metal-configuration/configuration-guide/#keycloak_management_url","text":"Type: str The endpoint for user details management.","title":"KEYCLOAK_MANAGEMENT_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#keycloak_secret","text":"Type: str Application secret key.","title":"KEYCLOAK_SECRET"},{"location":"admin-guide/metal-configuration/configuration-guide/#keycloak_token_url","text":"Type: str The token endpoint is used to obtain tokens.","title":"KEYCLOAK_TOKEN_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#keycloak_userinfo_url","text":"Type: str The userinfo endpoint returns standard claims about the authenticated user, and is protected by a bearer token.","title":"KEYCLOAK_USERINFO_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#keycloak_user_protected_fields","text":"Type: List[str] The list of protected fields for Keycloak IdP.","title":"KEYCLOAK_USER_PROTECTED_FIELDS"},{"location":"admin-guide/metal-configuration/configuration-guide/#keycloak_verify_ssl","text":"Type: bool Validate TLS certificate of Keycloak REST API","title":"KEYCLOAK_VERIFY_SSL"},{"location":"admin-guide/metal-configuration/configuration-guide/#remote_eduteams_client_id","text":"Type: str ID of application used for OAuth authentication.","title":"REMOTE_EDUTEAMS_CLIENT_ID"},{"location":"admin-guide/metal-configuration/configuration-guide/#remote_eduteams_enabled","text":"Type: bool Enable remote eduTEAMS extension.","title":"REMOTE_EDUTEAMS_ENABLED"},{"location":"admin-guide/metal-configuration/configuration-guide/#remote_eduteams_refresh_token","text":"Type: str Token is used to authenticate against user info endpoint.","title":"REMOTE_EDUTEAMS_REFRESH_TOKEN"},{"location":"admin-guide/metal-configuration/configuration-guide/#remote_eduteams_secret","text":"Type: str Application secret key.","title":"REMOTE_EDUTEAMS_SECRET"},{"location":"admin-guide/metal-configuration/configuration-guide/#remote_eduteams_token_url","text":"Type: str The token endpoint is used to obtain tokens.","title":"REMOTE_EDUTEAMS_TOKEN_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#remote_eduteams_userinfo_url","text":"Type: str It allows to get user data based on userid aka CUID.","title":"REMOTE_EDUTEAMS_USERINFO_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#smartidee_client_id","text":"Type: str ID of application used for OAuth authentication.","title":"SMARTIDEE_CLIENT_ID"},{"location":"admin-guide/metal-configuration/configuration-guide/#smartidee_secret","text":"Type: str Application secret key.","title":"SMARTIDEE_SECRET"},{"location":"admin-guide/metal-configuration/configuration-guide/#tara_client_id","text":"Type: str ID of application used for OAuth authentication.","title":"TARA_CLIENT_ID"},{"location":"admin-guide/metal-configuration/configuration-guide/#tara_label","text":"Type: str You may set it to eIDAS, SmartID or MobileID make it more clear to the user which exact identity provider is configured or preferred for service provider.","title":"TARA_LABEL"},{"location":"admin-guide/metal-configuration/configuration-guide/#tara_management_url","text":"Type: str The endpoint for user details management.","title":"TARA_MANAGEMENT_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#tara_sandbox","text":"Type: bool You should set it to False in order to switch to production mode.","title":"TARA_SANDBOX"},{"location":"admin-guide/metal-configuration/configuration-guide/#tara_secret","text":"Type: str Application secret key.","title":"TARA_SECRET"},{"location":"admin-guide/metal-configuration/configuration-guide/#tara_user_protected_fields","text":"Type: List[str] The list of protected fields for TARA IdP.","title":"TARA_USER_PROTECTED_FIELDS"},{"location":"admin-guide/metal-configuration/configuration-guide/#cloudrock_core-plugin","text":"Default value: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 CLOUDROCK_CORE = { 'ATTACHMENT_LINK_MAX_AGE' : datetime . timedelta ( seconds = 3600 ), 'AUTHENTICATION_METHODS' : [ 'LOCAL_SIGNIN' ], 'BACKEND_FIELDS_EDITABLE' : True , 'BRAND_COLOR' : '#3a8500' , 'COUNTRIES' : [ 'AL' , 'AT' , 'BA' , 'BE' , 'BG' , 'CH' , 'CY' , 'DE' , 'DK' , 'EE' , 'ES' , 'EU' , 'FI' , 'FR' , 'GB' , 'GE' , 'GR' , 'HR' , 'HU' , 'IE' , 'IS' , 'IT' , 'LT' , 'LU' , 'LV' , 'MC' , 'MK' , 'MT' , 'NL' , 'NO' , 'PL' , 'PT' , 'RO' , 'RS' , 'SE' , 'SI' , 'UA' ], 'CREATE_DEFAULT_PROJECT_ON_ORGANIZATION_CREATION' : False , 'CURRENCY_NAME' : 'EUR' , 'DOCS_URL' : '' , 'EMAIL_CHANGE_MAX_AGE' : datetime . timedelta ( days = 1 ), 'ENABLE_ACCOUNTING_START_DATE' : False , 'ENABLE_GEOIP' : True , 'EXTENSIONS_AUTOREGISTER' : True , 'EXTERNAL_LINKS' : [], 'FULL_PAGE_TITLE' : 'Cloudrock | Cloud Service Management' , 'GOOGLE_ANALYTICS_ID' : '' , 'GROUP_INVITATION_LIFETIME' : datetime . timedelta ( days = 7 ), 'HERO_IMAGE' : None , 'HERO_LINK_LABEL' : None , 'HERO_LINK_URL' : None , 'CLOUDROCK_UI_SENTRY_DSN' : None , 'CLOUDROCK_UI_URL' : 'https://example.com/' , 'HTTP_CHUNK_SIZE' : 50 , 'INVITATIONS_ENABLED' : True , 'INVITATION_CIVIL_NUMBER_HELP_TEXT' : 'Must start with a country prefix ie ' 'EE34501234215' , 'INVITATION_CIVIL_NUMBER_LABEL' : '' , 'INVITATION_CREATE_MISSING_USER' : False , 'INVITATION_DISABLE_MULTIPLE_ROLES' : False , 'INVITATION_LIFETIME' : datetime . timedelta ( days = 7 ), 'INVITATION_MAX_AGE' : None , 'INVITATION_TAX_NUMBER_LABEL' : '' , 'LOCAL_IDP_LABEL' : 'Local DB' , 'LOCAL_IDP_MANAGEMENT_URL' : '' , 'LOCAL_IDP_NAME' : 'Local DB' , 'LOCAL_IDP_PROTECTED_FIELDS' : [], 'LOGGING_REPORT_DIRECTORY' : '/var/log/cloudrock' , 'LOGGING_REPORT_INTERVAL' : datetime . timedelta ( days = 7 ), 'METAL_URL' : '' , 'NATIVE_NAME_ENABLED' : False , 'NOTIFICATIONS_PROFILE_CHANGES' : { 'ENABLE_OPERATOR_OWNER_NOTIFICATIONS' : False , 'FIELDS' : ( 'email' , 'phone_number' , 'job_title' ), 'OPERATOR_NOTIFICATION_EMAILS' : []}, 'NOTIFICATION_SUBJECT' : 'Notifications from Cloudrock' , 'ONLY_STAFF_CAN_INVITE_USERS' : False , 'ONLY_STAFF_MANAGES_SERVICES' : False , 'OWNERS_CAN_MANAGE_OWNERS' : False , 'OWNER_CAN_MANAGE_CUSTOMER' : False , 'POWERED_BY_LOGO' : None , 'PROTECT_USER_DETAILS_FOR_REGISTRATION_METHODS' : [], 'SELLER_COUNTRY_CODE' : None , 'SHORT_PAGE_TITLE' : 'Cloudrock' , 'SHOW_ALL_USERS' : False , 'SIDEBAR_LOGO' : None , 'SIDEBAR_LOGO_MOBILE' : None , 'SITE_ADDRESS' : '' , 'SITE_DESCRIPTION' : 'Your single pane of control for managing projects, teams ' 'and resources in a self-service manner.' , 'SITE_EMAIL' : '' , 'SITE_LOGO' : None , 'SITE_NAME' : 'Cloudrock' , 'SITE_PHONE' : '' , 'SUPPORT_PORTAL_URL' : '' , 'TOKEN_KEY' : 'x-auth-token' , 'TOKEN_LIFETIME' : datetime . timedelta ( seconds = 3600 ), 'TRANSLATION_DOMAIN' : '' , 'USER_MANDATORY_FIELDS' : [ 'full_name' , 'email' ], 'USER_REGISTRATION_HIDDEN_FIELDS' : [ 'registration_method' , 'job_title' , 'phone_number' , 'organization' ], 'USE_ATOMIC_TRANSACTION' : True , 'VALIDATE_INVITATION_EMAIL' : False }","title":"CLOUDROCK_CORE plugin"},{"location":"admin-guide/metal-configuration/configuration-guide/#attachment_link_max_age","text":"Type: timedelta Max age of secure token for media download.","title":"ATTACHMENT_LINK_MAX_AGE"},{"location":"admin-guide/metal-configuration/configuration-guide/#authentication_methods","text":"Type: List[str] List of enabled authentication methods.","title":"AUTHENTICATION_METHODS"},{"location":"admin-guide/metal-configuration/configuration-guide/#backend_fields_editable","text":"Type: bool Allows to control /admin writable fields. If this flag is disabled it is impossible to edit any field that corresponds to backend value via /admin. Such restriction allows to save information from corruption.","title":"BACKEND_FIELDS_EDITABLE"},{"location":"admin-guide/metal-configuration/configuration-guide/#brand_color","text":"Type: Optional[str] Hex color definition is used in Cloudrock-UI landing page for login button.","title":"BRAND_COLOR"},{"location":"admin-guide/metal-configuration/configuration-guide/#countries","text":"Type: List[str] It is used in organization creation dialog in order to limit country choices to predefined set.","title":"COUNTRIES"},{"location":"admin-guide/metal-configuration/configuration-guide/#create_default_project_on_organization_creation","text":"Type: bool Enables generation of the first project on organization creation.","title":"CREATE_DEFAULT_PROJECT_ON_ORGANIZATION_CREATION"},{"location":"admin-guide/metal-configuration/configuration-guide/#currency_name","text":"Type: str It is used in marketplace order details and invoices for currency formatting.","title":"CURRENCY_NAME"},{"location":"admin-guide/metal-configuration/configuration-guide/#docs_url","text":"Type: str Renders link to docs in header","title":"DOCS_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#email_change_max_age","text":"Type: timedelta Max age of change email request.","title":"EMAIL_CHANGE_MAX_AGE"},{"location":"admin-guide/metal-configuration/configuration-guide/#enable_accounting_start_date","text":"Type: bool Allows to enable accounting for organizations using value of accounting_start_date field.","title":"ENABLE_ACCOUNTING_START_DATE"},{"location":"admin-guide/metal-configuration/configuration-guide/#enable_geoip","text":"Type: bool Enable detection of coordinates of virtual machines.","title":"ENABLE_GEOIP"},{"location":"admin-guide/metal-configuration/configuration-guide/#extensions_autoregister","text":"Type: bool Defines whether extensions should be automatically registered.","title":"EXTENSIONS_AUTOREGISTER"},{"location":"admin-guide/metal-configuration/configuration-guide/#external_links","text":"Type: List[ExternalLink] Render external links in dropdown in header. Each item should be object with label and url fields. For example: {\"label\": \"Helpdesk\", \"url\": \" https://example.com/ \"}","title":"EXTERNAL_LINKS"},{"location":"admin-guide/metal-configuration/configuration-guide/#full_page_title","text":"Type: str It is used as default page title if it's not specified explicitly.","title":"FULL_PAGE_TITLE"},{"location":"admin-guide/metal-configuration/configuration-guide/#google_analytics_id","text":"Type: str Identifier associated with your account and used by Google Analytics to collect the data.","title":"GOOGLE_ANALYTICS_ID"},{"location":"admin-guide/metal-configuration/configuration-guide/#group_invitation_lifetime","text":"Type: timedelta Defines for how long group invitation remains valid.","title":"GROUP_INVITATION_LIFETIME"},{"location":"admin-guide/metal-configuration/configuration-guide/#hero_image","text":"Type: Optional[str] Relative path to image rendered at hero section of Cloudrock-UI landing page.","title":"HERO_IMAGE"},{"location":"admin-guide/metal-configuration/configuration-guide/#hero_link_label","text":"Type: Optional[str] Label for link in hero section of Cloudrock-UI landing page. It can be lead to support site or blog post.","title":"HERO_LINK_LABEL"},{"location":"admin-guide/metal-configuration/configuration-guide/#hero_link_url","text":"Type: Optional[str] Link URL in hero section of Cloudrock-UI landing page.","title":"HERO_LINK_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#cloudrock-ui_sentry_dsn","text":"Type: Optional[str] Sentry Data Source Name for Cloudrock Cloudrock-UI project.","title":"CLOUDROCK_UI_SENTRY_DSN"},{"location":"admin-guide/metal-configuration/configuration-guide/#cloudrock-ui_url","text":"Type: str It is used for rendering callback URL in Cloudrock-UI.","title":"CLOUDROCK_UI_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#http_chunk_size","text":"Type: int Chunk size for resource fetching from backend API. It is needed in order to avoid too long HTTP request error.","title":"HTTP_CHUNK_SIZE"},{"location":"admin-guide/metal-configuration/configuration-guide/#invitations_enabled","text":"Type: bool Allows to disable invitations feature.","title":"INVITATIONS_ENABLED"},{"location":"admin-guide/metal-configuration/configuration-guide/#invitation_civil_number_help_text","text":"Type: str Help text for civil number field in invitation creation dialog.","title":"INVITATION_CIVIL_NUMBER_HELP_TEXT"},{"location":"admin-guide/metal-configuration/configuration-guide/#invitation_civil_number_label","text":"Type: str Custom label for civil number field in invitation creation dialog.","title":"INVITATION_CIVIL_NUMBER_LABEL"},{"location":"admin-guide/metal-configuration/configuration-guide/#invitation_create_missing_user","text":"Type: bool Allow to create FreeIPA user using details specified in invitation if user does not exist yet.","title":"INVITATION_CREATE_MISSING_USER"},{"location":"admin-guide/metal-configuration/configuration-guide/#invitation_disable_multiple_roles","text":"Type: bool Do not allow user to grant multiple roles in the same project or organization using invitation.","title":"INVITATION_DISABLE_MULTIPLE_ROLES"},{"location":"admin-guide/metal-configuration/configuration-guide/#invitation_lifetime","text":"Type: timedelta Defines for how long invitation remains valid.","title":"INVITATION_LIFETIME"},{"location":"admin-guide/metal-configuration/configuration-guide/#invitation_max_age","text":"Type: Optional[timedelta] Max age of invitation token. It is used in approve and reject actions.","title":"INVITATION_MAX_AGE"},{"location":"admin-guide/metal-configuration/configuration-guide/#invitation_tax_number_label","text":"Type: str Custom label for tax number field in invitation creation dialog.","title":"INVITATION_TAX_NUMBER_LABEL"},{"location":"admin-guide/metal-configuration/configuration-guide/#local_idp_label","text":"Type: str The label of local auth.","title":"LOCAL_IDP_LABEL"},{"location":"admin-guide/metal-configuration/configuration-guide/#local_idp_management_url","text":"Type: str The URL for management of local user details.","title":"LOCAL_IDP_MANAGEMENT_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#local_idp_name","text":"Type: str The name of local auth.","title":"LOCAL_IDP_NAME"},{"location":"admin-guide/metal-configuration/configuration-guide/#local_idp_protected_fields","text":"Type: List[str] The list of protected fields for local IdP.","title":"LOCAL_IDP_PROTECTED_FIELDS"},{"location":"admin-guide/metal-configuration/configuration-guide/#logging_report_directory","text":"Type: str Directory where log files are located.","title":"LOGGING_REPORT_DIRECTORY"},{"location":"admin-guide/metal-configuration/configuration-guide/#logging_report_interval","text":"Type: timedelta Files older that specified interval are filtered out.","title":"LOGGING_REPORT_INTERVAL"},{"location":"admin-guide/metal-configuration/configuration-guide/#metal_url","text":"Type: str It is used for rendering callback URL in Metal.","title":"METAL_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#native_name_enabled","text":"Type: bool Allows to render native name field in customer and user forms.","title":"NATIVE_NAME_ENABLED"},{"location":"admin-guide/metal-configuration/configuration-guide/#notifications_profile_changes","text":"Type: dict Configure notifications about profile changes of organization owners.","title":"NOTIFICATIONS_PROFILE_CHANGES"},{"location":"admin-guide/metal-configuration/configuration-guide/#notification_subject","text":"Type: str It is used as a subject of email emitted by event logging hook.","title":"NOTIFICATION_SUBJECT"},{"location":"admin-guide/metal-configuration/configuration-guide/#only_staff_can_invite_users","text":"Type: bool Allow to limit invitation management to staff only.","title":"ONLY_STAFF_CAN_INVITE_USERS"},{"location":"admin-guide/metal-configuration/configuration-guide/#only_staff_manages_services","text":"Type: bool Allows to restrict provider management only to staff users.","title":"ONLY_STAFF_MANAGES_SERVICES"},{"location":"admin-guide/metal-configuration/configuration-guide/#owners_can_manage_owners","text":"Type: bool Enables organization owners to manage other organization owners.","title":"OWNERS_CAN_MANAGE_OWNERS"},{"location":"admin-guide/metal-configuration/configuration-guide/#owner_can_manage_customer","text":"Type: bool Enables organization owners to create an organization.","title":"OWNER_CAN_MANAGE_CUSTOMER"},{"location":"admin-guide/metal-configuration/configuration-guide/#powered_by_logo","text":"Type: Optional[str] Relative path to image rendered at the bottom of login menu in Cloudrock-UI.","title":"POWERED_BY_LOGO"},{"location":"admin-guide/metal-configuration/configuration-guide/#protect_user_details_for_registration_methods","text":"Type: List[str] List of authentication methods which are not allowed to update user details.","title":"PROTECT_USER_DETAILS_FOR_REGISTRATION_METHODS"},{"location":"admin-guide/metal-configuration/configuration-guide/#seller_country_code","text":"Type: Optional[str] Specifies seller legal or effective country of registration or residence as an ISO 3166-1 alpha-2 country code. It is used for computing VAT charge rate.","title":"SELLER_COUNTRY_CODE"},{"location":"admin-guide/metal-configuration/configuration-guide/#short_page_title","text":"Type: str it is used as prefix for page title.","title":"SHORT_PAGE_TITLE"},{"location":"admin-guide/metal-configuration/configuration-guide/#show_all_users","text":"Type: bool Indicates whether user can see all other users in api/users/ endpoint.","title":"SHOW_ALL_USERS"},{"location":"admin-guide/metal-configuration/configuration-guide/#sidebar_logo","text":"Type: Optional[str] Relative path to image rendered at the top of sidebar menu in Cloudrock-UI.","title":"SIDEBAR_LOGO"},{"location":"admin-guide/metal-configuration/configuration-guide/#sidebar_logo_mobile","text":"Type: Optional[str] Relative path to image rendered at the top of mobile sidebar menu in Cloudrock-UI.","title":"SIDEBAR_LOGO_MOBILE"},{"location":"admin-guide/metal-configuration/configuration-guide/#site_address","text":"Type: str It is used in marketplace order header.","title":"SITE_ADDRESS"},{"location":"admin-guide/metal-configuration/configuration-guide/#site_description","text":"Type: str Description of the Cloudrock deployment.","title":"SITE_DESCRIPTION"},{"location":"admin-guide/metal-configuration/configuration-guide/#site_email","text":"Type: str It is used in marketplace order header and UI footer.","title":"SITE_EMAIL"},{"location":"admin-guide/metal-configuration/configuration-guide/#site_logo","text":"Type: Optional[str] It is used in marketplace order header.","title":"SITE_LOGO"},{"location":"admin-guide/metal-configuration/configuration-guide/#site_name","text":"Type: str Human-friendly name of the Cloudrock deployment.","title":"SITE_NAME"},{"location":"admin-guide/metal-configuration/configuration-guide/#site_phone","text":"Type: str It is used in marketplace order header and UI footer.","title":"SITE_PHONE"},{"location":"admin-guide/metal-configuration/configuration-guide/#support_portal_url","text":"Type: str Support portal URL is rendered as a shortcut on dashboard","title":"SUPPORT_PORTAL_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#token_key","text":"Type: str Header for token authentication.","title":"TOKEN_KEY"},{"location":"admin-guide/metal-configuration/configuration-guide/#token_lifetime","text":"Type: timedelta Defines for how long user token should remain valid if there was no action from user.","title":"TOKEN_LIFETIME"},{"location":"admin-guide/metal-configuration/configuration-guide/#translation_domain","text":"Type: str Identifier of translation domain applied to current deployment.","title":"TRANSLATION_DOMAIN"},{"location":"admin-guide/metal-configuration/configuration-guide/#user_mandatory_fields","text":"Type: List[str] List of user profile attributes that would be required for filling in Cloudrock-UI. Note that backend will not be affected. If a mandatory field is missing in profile, a profile edit view will be forced upon user on any Cloudrock-UI logged in action. Possible values are: description, email, full_name, job_title, organization, phone_number","title":"USER_MANDATORY_FIELDS"},{"location":"admin-guide/metal-configuration/configuration-guide/#user_registration_hidden_fields","text":"Type: List[str] List of user profile attributes that would be concealed on registration form in Cloudrock-UI. Possible values are: job_title, registration_method, phone_number","title":"USER_REGISTRATION_HIDDEN_FIELDS"},{"location":"admin-guide/metal-configuration/configuration-guide/#use_atomic_transaction","text":"Type: bool Wrap action views in atomic transaction.","title":"USE_ATOMIC_TRANSACTION"},{"location":"admin-guide/metal-configuration/configuration-guide/#validate_invitation_email","text":"Type: bool Ensure that invitation and user emails match.","title":"VALIDATE_INVITATION_EMAIL"},{"location":"admin-guide/metal-configuration/configuration-guide/#cloudrock_freeipa-plugin","text":"Default value: 1 2 3 4 5 6 7 8 9 CLOUDROCK_FREEIPA = { 'BLACKLISTED_USERNAMES' : [ 'root' ], 'ENABLED' : False , 'GROUPNAME_PREFIX' : 'cloudrock_' , 'GROUP_SYNCHRONIZATION_ENABLED' : True , 'HOSTNAME' : 'ipa.example.com' , 'PASSWORD' : 'secret' , 'USERNAME' : 'admin' , 'USERNAME_PREFIX' : 'cloudrock_' , 'VERIFY_SSL' : True }","title":"CLOUDROCK_FREEIPA plugin"},{"location":"admin-guide/metal-configuration/configuration-guide/#blacklisted_usernames","text":"Type: list List of username that users are not allowed to select","title":"BLACKLISTED_USERNAMES"},{"location":"admin-guide/metal-configuration/configuration-guide/#enabled","text":"Type: bool Enable integration of identity provisioning in configured FreeIPA","title":"ENABLED"},{"location":"admin-guide/metal-configuration/configuration-guide/#groupname_prefix","text":"Type: str Prefix to be appended to all group names created in FreeIPA by Cloudrock","title":"GROUPNAME_PREFIX"},{"location":"admin-guide/metal-configuration/configuration-guide/#group_synchronization_enabled","text":"Type: bool Optionally disable creation of user groups in FreeIPA matching Cloudrock structure","title":"GROUP_SYNCHRONIZATION_ENABLED"},{"location":"admin-guide/metal-configuration/configuration-guide/#hostname","text":"Type: str Hostname of FreeIPA server","title":"HOSTNAME"},{"location":"admin-guide/metal-configuration/configuration-guide/#password","text":"Type: str Password of FreeIPA user with administrative privileges","title":"PASSWORD"},{"location":"admin-guide/metal-configuration/configuration-guide/#username","text":"Type: str Username of FreeIPA user with administrative privileges","title":"USERNAME"},{"location":"admin-guide/metal-configuration/configuration-guide/#username_prefix","text":"Type: str Prefix to be appended to all usernames created in FreeIPA by Cloudrock","title":"USERNAME_PREFIX"},{"location":"admin-guide/metal-configuration/configuration-guide/#verify_ssl","text":"Type: bool Validate TLS certificate of FreeIPA web interface / REST API","title":"VERIFY_SSL"},{"location":"admin-guide/metal-configuration/configuration-guide/#cloudrock_hpc-plugin","text":"Default value: 1 2 3 4 5 6 7 8 9 10 11 CLOUDROCK_HPC = { 'ENABLED' : False , 'EXTERNAL_AFFILIATIONS' : [], 'EXTERNAL_CUSTOMER_UUID' : '' , 'EXTERNAL_EMAIL_PATTERNS' : [], 'EXTERNAL_LIMITS' : {}, 'INTERNAL_AFFILIATIONS' : [], 'INTERNAL_CUSTOMER_UUID' : '' , 'INTERNAL_EMAIL_PATTERNS' : [], 'INTERNAL_LIMITS' : {}, 'OFFERING_UUID' : '' , 'PLAN_UUID' : '' }","title":"CLOUDROCK_HPC plugin"},{"location":"admin-guide/metal-configuration/configuration-guide/#enabled_1","text":"Type: bool Enable HPC-specific hooks in Cloudrock deployment","title":"ENABLED"},{"location":"admin-guide/metal-configuration/configuration-guide/#external_affiliations","text":"Type: List[str] List of user affiliations (eduPersonScopedAffiliation fields) that define if the user belongs to external organization.","title":"EXTERNAL_AFFILIATIONS"},{"location":"admin-guide/metal-configuration/configuration-guide/#external_customer_uuid","text":"Type: str UUID of a Cloudrock organization (aka customer) where new external users would be added","title":"EXTERNAL_CUSTOMER_UUID"},{"location":"admin-guide/metal-configuration/configuration-guide/#external_email_patterns","text":"Type: List[str] List of user email patterns (as regex) that define if the user belongs to external organization.","title":"EXTERNAL_EMAIL_PATTERNS"},{"location":"admin-guide/metal-configuration/configuration-guide/#external_limits","text":"Type: dict Overrided default values for SLURM offering to be created for users belonging to external organization.","title":"EXTERNAL_LIMITS"},{"location":"admin-guide/metal-configuration/configuration-guide/#internal_affiliations","text":"Type: List[str] List of user affiliations (eduPersonScopedAffiliation fields) that define if the user belongs to internal organization.","title":"INTERNAL_AFFILIATIONS"},{"location":"admin-guide/metal-configuration/configuration-guide/#internal_customer_uuid","text":"Type: str UUID of a Cloudrock organization (aka customer) where new internal users would be added","title":"INTERNAL_CUSTOMER_UUID"},{"location":"admin-guide/metal-configuration/configuration-guide/#internal_email_patterns","text":"Type: List[str] List of user email patterns (as regex) that define if the user belongs to internal organization.","title":"INTERNAL_EMAIL_PATTERNS"},{"location":"admin-guide/metal-configuration/configuration-guide/#internal_limits","text":"Type: dict Overrided default values for SLURM offering to be created for users belonging to internal organization.","title":"INTERNAL_LIMITS"},{"location":"admin-guide/metal-configuration/configuration-guide/#offering_uuid","text":"Type: str UUID of a Cloudrock SLURM offering, which will be used for creating allocations for users","title":"OFFERING_UUID"},{"location":"admin-guide/metal-configuration/configuration-guide/#plan_uuid","text":"Type: str UUID of a Cloudrock SLURM offering plan, which will be used for creating allocations for users","title":"PLAN_UUID"},{"location":"admin-guide/metal-configuration/configuration-guide/#cloudrock_keycloak-plugin","text":"Default value: 1 2 3 4 5 6 7 CLOUDROCK_KEYCLOAK = { 'BASE_URL' : 'http://localhost:8080/auth' , 'CLIENT_ID' : 'cloudrock' , 'CLIENT_SECRET' : 'UUID' , 'ENABLED' : False , 'PASSWORD' : 'secret' , 'REALM' : 'cloudrock' , 'USERNAME' : 'admin' }","title":"CLOUDROCK_KEYCLOAK plugin"},{"location":"admin-guide/metal-configuration/configuration-guide/#base_url","text":"Type: str Base URL of Keycloak server","title":"BASE_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#client_id","text":"Type: str Identification of Cloudrock client app","title":"CLIENT_ID"},{"location":"admin-guide/metal-configuration/configuration-guide/#client_secret","text":"Type: str Credentials are generated in Keycloak admin console","title":"CLIENT_SECRET"},{"location":"admin-guide/metal-configuration/configuration-guide/#enabled_2","text":"Type: bool Enable integration of group provisioning in configured Keycloak","title":"ENABLED"},{"location":"admin-guide/metal-configuration/configuration-guide/#password_1","text":"Type: str Password of Keycloak user with administrative privileges","title":"PASSWORD"},{"location":"admin-guide/metal-configuration/configuration-guide/#realm","text":"Type: str Realm used by Cloudrock","title":"REALM"},{"location":"admin-guide/metal-configuration/configuration-guide/#username_1","text":"Type: str Username of Keycloak user with administrative privileges","title":"USERNAME"},{"location":"admin-guide/metal-configuration/configuration-guide/#cloudrock_marketplace-plugin","text":"Default value: 1 2 3 4 5 6 7 8 9 10 11 12 CLOUDROCK_MARKETPLACE = { 'ADMIN_CAN_APPROVE_ORDER' : False , 'ANONYMOUS_USER_CAN_VIEW_OFFERINGS' : True , 'ANONYMOUS_USER_CAN_VIEW_PLANS' : True , 'DISABLE_SENDING_NOTIFICATIONS_ABOUT_RESOURCE_UPDATE' : True , 'ENABLE_RESOURCE_END_DATE' : True , 'ENABLE_STALE_RESOURCE_NOTIFICATIONS' : False , 'MANAGER_CAN_APPROVE_ORDER' : False , 'NOTIFY_ABOUT_RESOURCE_CHANGE' : True , 'NOTIFY_STAFF_ABOUT_APPROVALS' : False , 'OWNER_CAN_APPROVE_ORDER' : True , 'OWNER_CAN_REGISTER_SERVICE_PROVIDER' : False , 'THUMBNAIL_SIZE' : ( 120 , 120 )}","title":"CLOUDROCK_MARKETPLACE plugin"},{"location":"admin-guide/metal-configuration/configuration-guide/#admin_can_approve_order","text":"Type: bool If true, orders for resource can be approved by admin of the customer project","title":"ADMIN_CAN_APPROVE_ORDER"},{"location":"admin-guide/metal-configuration/configuration-guide/#anonymous_user_can_view_offerings","text":"Type: bool Allow anonymous users to see shared offerings in active, paused and archived states","title":"ANONYMOUS_USER_CAN_VIEW_OFFERINGS"},{"location":"admin-guide/metal-configuration/configuration-guide/#anonymous_user_can_view_plans","text":"Type: bool Allow anonymous users to see plans","title":"ANONYMOUS_USER_CAN_VIEW_PLANS"},{"location":"admin-guide/metal-configuration/configuration-guide/#disable_sending_notifications_about_resource_update","text":"Type: bool Disable only resource update events.","title":"DISABLE_SENDING_NOTIFICATIONS_ABOUT_RESOURCE_UPDATE"},{"location":"admin-guide/metal-configuration/configuration-guide/#enable_resource_end_date","text":"Type: bool Allow to view and update resource end date.","title":"ENABLE_RESOURCE_END_DATE"},{"location":"admin-guide/metal-configuration/configuration-guide/#enable_stale_resource_notifications","text":"Type: bool Enable reminders to owners about resources of shared offerings that have not generated any cost for the last 3 months.","title":"ENABLE_STALE_RESOURCE_NOTIFICATIONS"},{"location":"admin-guide/metal-configuration/configuration-guide/#manager_can_approve_order","text":"Type: bool If true, orders for resource can be approved by manager of the customer project","title":"MANAGER_CAN_APPROVE_ORDER"},{"location":"admin-guide/metal-configuration/configuration-guide/#notify_about_resource_change","text":"Type: bool If true, notify users about resource changes from Marketplace perspective. Can generate duplicate events if plugins also log","title":"NOTIFY_ABOUT_RESOURCE_CHANGE"},{"location":"admin-guide/metal-configuration/configuration-guide/#notify_staff_about_approvals","text":"Type: bool If true, users with staff role are notified when request for order approval is generated","title":"NOTIFY_STAFF_ABOUT_APPROVALS"},{"location":"admin-guide/metal-configuration/configuration-guide/#owner_can_approve_order","text":"Type: bool If true, orders for resource can be approved by custom organization owner.","title":"OWNER_CAN_APPROVE_ORDER"},{"location":"admin-guide/metal-configuration/configuration-guide/#owner_can_register_service_provider","text":"Type: bool Allow organization owner to request or mark its organization as service provider","title":"OWNER_CAN_REGISTER_SERVICE_PROVIDER"},{"location":"admin-guide/metal-configuration/configuration-guide/#thumbnail_size","text":"Type: tuple Size of the thumbnail to generate when screenshot is uploaded for an offering.","title":"THUMBNAIL_SIZE"},{"location":"admin-guide/metal-configuration/configuration-guide/#cloudrock_marketplace_script-plugin","text":"Default value: 1 2 3 4 5 6 7 8 CLOUDROCK_MARKETPLACE_SCRIPT = { 'DOCKER_CLIENT' : { 'base_url' : 'unix://var/run/docker.sock' }, 'DOCKER_IMAGES' : { 'python' : 'python:3.8-alpine' , 'shell' : 'alpine:3' }, 'DOCKER_RUN_OPTIONS' : { 'mem_limit' : '64m' }, 'DOCKER_SCRIPT_DIR' : None , 'K8S_CONFIG_PATH' : '~/.kube/config' , 'K8S_JOB_TIMEOUT' : 1800 , 'K8S_NAMESPACE' : 'default' , 'SCRIPT_RUN_MODE' : 'docker' }","title":"CLOUDROCK_MARKETPLACE_SCRIPT plugin"},{"location":"admin-guide/metal-configuration/configuration-guide/#docker_client","text":"Type: dict Options for docker client. See also: https://docker-py.readthedocs.io/en/stable/client.html#docker.client.DockerClient","title":"DOCKER_CLIENT"},{"location":"admin-guide/metal-configuration/configuration-guide/#docker_images","text":"Type: dict Key is command to execute script, value is image name.","title":"DOCKER_IMAGES"},{"location":"admin-guide/metal-configuration/configuration-guide/#docker_run_options","text":"Type: dict Options for docker runtime. See also: https://docker-py.readthedocs.io/en/stable/containers.html#docker.models.containers.ContainerCollection.run","title":"DOCKER_RUN_OPTIONS"},{"location":"admin-guide/metal-configuration/configuration-guide/#docker_script_dir","text":"Type: Optional[str] Path to folder on executor machine where to create temporary submission scripts. If None uses OS-dependent location. OS X users, see https://github.com/docker/for-mac/issues/1532","title":"DOCKER_SCRIPT_DIR"},{"location":"admin-guide/metal-configuration/configuration-guide/#k8s_config_path","text":"Type: str Path to Kubernetes configuration file","title":"K8S_CONFIG_PATH"},{"location":"admin-guide/metal-configuration/configuration-guide/#k8s_job_timeout","text":"Type: int Timeout for execution of one Kubernetes job in seconds","title":"K8S_JOB_TIMEOUT"},{"location":"admin-guide/metal-configuration/configuration-guide/#k8s_namespace","text":"Type: str Kubernetes namespace where jobs will be executed","title":"K8S_NAMESPACE"},{"location":"admin-guide/metal-configuration/configuration-guide/#script_run_mode","text":"Type: str Type of jobs deployment. Valid values: \"docker\" for simple docker deployment, \"k8s\" for Kubernetes-based one","title":"SCRIPT_RUN_MODE"},{"location":"admin-guide/metal-configuration/configuration-guide/#cloudrock_openstack-plugin","text":"Default value: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 CLOUDROCK_OPENSTACK = { 'ADMIN_CAN_MANAGE_TENANTS' : False , 'DEFAULT_BLACKLISTED_USERNAMES' : [ 'admin' , 'service' ], 'DEFAULT_SECURITY_GROUPS' : ({ 'description' : 'Security group for any access' , 'name' : 'allow-all' , 'rules' : ({ 'cidr' : '0.0.0.0/0' , 'icmp_code' : - 1 , 'icmp_type' : - 1 , 'protocol' : 'icmp' }, { 'cidr' : '0.0.0.0/0' , 'from_port' : 1 , 'protocol' : 'tcp' , 'to_port' : 65535 })}, { 'description' : 'Security group for secure shell ' 'access' , 'name' : 'ssh' , 'rules' : ({ 'cidr' : '0.0.0.0/0' , 'from_port' : 22 , 'protocol' : 'tcp' , 'to_port' : 22 },)}, { 'description' : 'Security group for ping' , 'name' : 'ping' , 'rules' : ({ 'cidr' : '0.0.0.0/0' , 'icmp_code' : - 1 , 'icmp_type' : - 1 , 'protocol' : 'icmp' },)}, { 'description' : 'Security group for remove ' 'desktop access' , 'name' : 'rdp' , 'rules' : ({ 'cidr' : '0.0.0.0/0' , 'from_port' : 3389 , 'protocol' : 'tcp' , 'to_port' : 3389 },)}, { 'description' : 'Security group for http and ' 'https access' , 'name' : 'web' , 'rules' : ({ 'cidr' : '0.0.0.0/0' , 'from_port' : 80 , 'protocol' : 'tcp' , 'to_port' : 80 }, { 'cidr' : '0.0.0.0/0' , 'from_port' : 443 , 'protocol' : 'tcp' , 'to_port' : 443 })}), 'MANAGER_CAN_MANAGE_TENANTS' : False , 'SUBNET' : { 'ALLOCATION_POOL_END' : ' {first_octet} . {second_octet} . {third_octet} .200' , 'ALLOCATION_POOL_START' : ' {first_octet} . {second_octet} . {third_octet} .10' }, 'TENANT_CREDENTIALS_VISIBLE' : False }","title":"CLOUDROCK_OPENSTACK plugin"},{"location":"admin-guide/metal-configuration/configuration-guide/#admin_can_manage_tenants","text":"Type: bool If true, admin can delete or change configuration of tenants.","title":"ADMIN_CAN_MANAGE_TENANTS"},{"location":"admin-guide/metal-configuration/configuration-guide/#default_blacklisted_usernames","text":"Type: list Usernames that cannot be created by Cloudrock in OpenStack","title":"DEFAULT_BLACKLISTED_USERNAMES"},{"location":"admin-guide/metal-configuration/configuration-guide/#default_security_groups","text":"Type: tuple Default security groups and rules created in each of the provisioned OpenStack tenants","title":"DEFAULT_SECURITY_GROUPS"},{"location":"admin-guide/metal-configuration/configuration-guide/#manager_can_manage_tenants","text":"Type: bool If true, manager can delete or change configuration of tenants.","title":"MANAGER_CAN_MANAGE_TENANTS"},{"location":"admin-guide/metal-configuration/configuration-guide/#subnet","text":"Type: dict Default allocation pool for auto-created internal network","title":"SUBNET"},{"location":"admin-guide/metal-configuration/configuration-guide/#tenant_credentials_visible","text":"Type: bool If true, generated credentials of a tenant are exposed to project users","title":"TENANT_CREDENTIALS_VISIBLE"},{"location":"admin-guide/metal-configuration/configuration-guide/#cloudrock_openstack_tenant-plugin","text":"Default value: 1 2 3 4 5 6 CLOUDROCK_OPENSTACK_TENANT = { 'ALLOW_CUSTOMER_USERS_OPENSTACK_CONSOLE_ACCESS' : True , 'ALLOW_DIRECT_EXTERNAL_NETWORK_CONNECTION' : False , 'MAX_CONCURRENT_PROVISION' : { 'OpenStackTenant.Instance' : 4 , 'OpenStackTenant.Snapshot' : 4 , 'OpenStackTenant.Volume' : 4 }, 'REQUIRE_AVAILABILITY_ZONE' : False }","title":"CLOUDROCK_OPENSTACK_TENANT plugin"},{"location":"admin-guide/metal-configuration/configuration-guide/#allow_customer_users_openstack_console_access","text":"Type: bool If true, customer users would be offered actions for accessing OpenStack Console","title":"ALLOW_CUSTOMER_USERS_OPENSTACK_CONSOLE_ACCESS"},{"location":"admin-guide/metal-configuration/configuration-guide/#allow_direct_external_network_connection","text":"Type: bool If true, allow connecting of Instances directly to external networks","title":"ALLOW_DIRECT_EXTERNAL_NETWORK_CONNECTION"},{"location":"admin-guide/metal-configuration/configuration-guide/#max_concurrent_provision","text":"Type: dict Maximum parallel executions of provisioning operations for OpenStackTenant resources","title":"MAX_CONCURRENT_PROVISION"},{"location":"admin-guide/metal-configuration/configuration-guide/#require_availability_zone","text":"Type: bool If true, specification of availability zone during provisioning will become mandatory","title":"REQUIRE_AVAILABILITY_ZONE"},{"location":"admin-guide/metal-configuration/configuration-guide/#cloudrock_pid-plugin","text":"Default value: 1 2 3 4 5 6 CLOUDROCK_PID = { 'DATACITE' : { 'API_URL' : 'https://example.com' , 'COLLECTION_DOI' : '' , 'PASSWORD' : '' , 'PREFIX' : '' , 'PUBLISHER' : 'Cloudrock' , 'REPOSITORY_ID' : '' }}","title":"CLOUDROCK_PID plugin"},{"location":"admin-guide/metal-configuration/configuration-guide/#datacite","text":"Type: dict Settings for integration of Cloudrock with Datacite PID service. Collection DOI is used to aggregate generated DOIs.","title":"DATACITE"},{"location":"admin-guide/metal-configuration/configuration-guide/#cloudrock_slurm-plugin","text":"Default value: 1 2 3 4 5 6 CLOUDROCK_SLURM = { 'ALLOCATION_PREFIX' : 'cloudrock_allocation_' , 'CUSTOMER_PREFIX' : 'cloudrock_customer_' , 'DEFAULT_LIMITS' : { 'CPU' : 16000 , 'GPU' : 400 , 'RAM' : 102400000 }, 'ENABLED' : False , 'PRIVATE_KEY_PATH' : '/etc/cloudrock/id_rsa' , 'PROJECT_PREFIX' : 'cloudrock_project_' }","title":"CLOUDROCK_SLURM plugin"},{"location":"admin-guide/metal-configuration/configuration-guide/#allocation_prefix","text":"Type: str Prefix for SLURM account name corresponding to Cloudrock allocation","title":"ALLOCATION_PREFIX"},{"location":"admin-guide/metal-configuration/configuration-guide/#customer_prefix","text":"Type: str Prefix for SLURM account name corresponding to Cloudrock organization.","title":"CUSTOMER_PREFIX"},{"location":"admin-guide/metal-configuration/configuration-guide/#default_limits","text":"Type: dict Default limits of account that are set when SLURM account is provisioned.","title":"DEFAULT_LIMITS"},{"location":"admin-guide/metal-configuration/configuration-guide/#enabled_3","text":"Type: bool Enable support for SLURM plugin in a deployment","title":"ENABLED"},{"location":"admin-guide/metal-configuration/configuration-guide/#private_key_path","text":"Type: str Path to private key file used as SSH identity file for accessing SLURM master.","title":"PRIVATE_KEY_PATH"},{"location":"admin-guide/metal-configuration/configuration-guide/#project_prefix","text":"Type: str Prefix for SLURM account name corresponding to Cloudrock project.","title":"PROJECT_PREFIX"},{"location":"admin-guide/metal-configuration/configuration-guide/#other-variables","text":"","title":"Other variables"},{"location":"admin-guide/metal-configuration/configuration-guide/#default_from_email","text":"Type: str, default value: webmaster@localhost Default email address to use for automated correspondence from Cloudrock.","title":"DEFAULT_FROM_EMAIL"},{"location":"admin-guide/metal-configuration/configuration-guide/#default_reply_to_email","text":"Type: str Default email address to use for email replies.","title":"DEFAULT_REPLY_TO_EMAIL"},{"location":"admin-guide/metal-configuration/configuration-guide/#import_export_use_transactions","text":"Type: bool, default value: True Controls if resource importing should use database transactions. Using transactions makes imports safer as a failure during import won\u2019t import only part of the data set.","title":"IMPORT_EXPORT_USE_TRANSACTIONS"},{"location":"admin-guide/metal-configuration/configuration-guide/#ipstack_access_key","text":"Type: Optional[str] Unique authentication key used to gain access to the ipstack API.","title":"IPSTACK_ACCESS_KEY"},{"location":"admin-guide/metal-configuration/configuration-guide/#languages","text":"Type: List[Tuple[str, str]], default value: (('en', 'English'), ('et', 'Eesti')) The list is a list of two-tuples in the format (language code, language name) \u2013 for example, ('ja', 'Japanese'). This specifies which languages are available for language selection.","title":"LANGUAGES"},{"location":"admin-guide/metal-configuration/configuration-guide/#language_code","text":"Type: str, default value: en Represents the name of a default language.","title":"LANGUAGE_CODE"},{"location":"admin-guide/metal-configuration/configuration-guide/#use_protected_url","text":"Type: bool, default value: False Protect media URLs using signed token.","title":"USE_PROTECTED_URL"},{"location":"admin-guide/metal-configuration/configuration-guide/#verify_webhook_requests","text":"Type: bool, default value: True When webook is processed, requests verifies SSL certificates for HTTPS requests, just like a web browser.","title":"VERIFY_WEBHOOK_REQUESTS"},{"location":"admin-guide/metal-configuration/features/","text":"Features customer.billing Render billing menu in organization sidebar. customer.category_resources_list Render component usage charts in organization dashboard. customer.events Enable audit log in organization workspace. customer.hide_organization_billing_step Hide billing step in organization creation wizard. customer.payments_for_staff_only Make payments menu visible for staff users only. customer.project_requests Render list of project creation requests in organization dashboard. customer.resource_requests Render list of resource creation requests in organization dashboard. customer.show_domain Allows to hide domain field in organization detail. customer.show_subnets Render list of subnets from where connection to self-service is allowed in organization details dialog. customer.team Enable team management in organization workspace. invitations.civil_number_required Make civil number field mandatory in invitation creation form. invitations.conceal_civil_number Conceal civil number in invitation creation dialog. invitations.create_missing_user Allow to create FreeIPA user using details specified in invitation if user does not exist yet. invitations.disable_multiple_roles Do not allow user to grant multiple roles in the same project or organization using invitation. invitations.require_user_details Render \"Show user details\" button in invitation creation form. invitations.show_tax_number Show tax number field in invitation creation form. invitations.tax_number_required Make tax number field mandatory in invitation creation form. invoice.events Render list of events related to invoice item in modal dialog. marketplace.conceal_prices Do not render prices in shopping cart and order details. marketplace.flows Allow to submit organization, project and resource creation requests simultaneously. marketplace.import_resources Allow to import resources from service provider to project. marketplace.offering_document Allow to attach document to marketplace offering. marketplace.private_offerings Render list of private marketplace service providers in organization workspace. marketplace.review Allow to write a review for marketplace offering. marketplace.show_experimental_ui_components Enabled display of experimental or mocked components in marketplace. marketplace.terms_of_service Render terms of service when offering is ordered. openstack.server_groups Render server groups in OpenStack tenant details openstack.volume_types Allow to select OpenStack volume type when instance or volume is provisioned. project.estimated_cost Render estimated cost column in projects list. project.events Enable audit log in project workspace. project.member_role Allow to grant user a project member role. project.oecd_fos_2007_code Enable OECD code. project.show_industry_flag Show industry flag. project.team Enable team management in project workspace. rancher.volume_mount_point Allow to select mount point for data volume when Rancher cluster is provisioned. slurm.jobs Render list of SLURM jobs as a separate tab in allocation details page. support.activity_stream Render list of recent comments in support dashboard. support.conceal_change_request Conceal \"Change request\" from a selection of issue types for non-staff/non-support users. support.customers_list Render list of organizations in support workspace. support.customers_requests Render list of organization creation requests in support workspace. support.flowmap Render service usage as a flowmap chart in support workspace. support.heatmap Render service usage as a heatmap chart in support workspace. support.next_branch Render \"Try out new version\" link in toolbar. support.offering_comments Render comments tab in request-based item details page. support.pricelist Render marketplace plan components pricelist in support workspace. support.resource_usage Enable resource usage overview charts in support workspace. support.resources_treemap Render resource usage as a treemap chart in support workspace. support.sankey_diagram Render service usage as a sankey chart in support workspace. support.shared_providers Render overview of shared marketplace service providers in support workspace. support.users Render list of users in support workspace. support.vm_type_overview Enable VM type overview in support workspace. user.competence Render competence column in users list. user.notifications Enable email and webhook notifications management in user workspace. user.preferred_language Render preferred language column in users list. user.ssh_keys Enable SSH keys management in user workspace.","title":"Features"},{"location":"admin-guide/metal-configuration/features/#features","text":"","title":"Features"},{"location":"admin-guide/metal-configuration/features/#customerbilling","text":"Render billing menu in organization sidebar.","title":"customer.billing"},{"location":"admin-guide/metal-configuration/features/#customercategory_resources_list","text":"Render component usage charts in organization dashboard.","title":"customer.category_resources_list"},{"location":"admin-guide/metal-configuration/features/#customerevents","text":"Enable audit log in organization workspace.","title":"customer.events"},{"location":"admin-guide/metal-configuration/features/#customerhide_organization_billing_step","text":"Hide billing step in organization creation wizard.","title":"customer.hide_organization_billing_step"},{"location":"admin-guide/metal-configuration/features/#customerpayments_for_staff_only","text":"Make payments menu visible for staff users only.","title":"customer.payments_for_staff_only"},{"location":"admin-guide/metal-configuration/features/#customerproject_requests","text":"Render list of project creation requests in organization dashboard.","title":"customer.project_requests"},{"location":"admin-guide/metal-configuration/features/#customerresource_requests","text":"Render list of resource creation requests in organization dashboard.","title":"customer.resource_requests"},{"location":"admin-guide/metal-configuration/features/#customershow_domain","text":"Allows to hide domain field in organization detail.","title":"customer.show_domain"},{"location":"admin-guide/metal-configuration/features/#customershow_subnets","text":"Render list of subnets from where connection to self-service is allowed in organization details dialog.","title":"customer.show_subnets"},{"location":"admin-guide/metal-configuration/features/#customerteam","text":"Enable team management in organization workspace.","title":"customer.team"},{"location":"admin-guide/metal-configuration/features/#invitationscivil_number_required","text":"Make civil number field mandatory in invitation creation form.","title":"invitations.civil_number_required"},{"location":"admin-guide/metal-configuration/features/#invitationsconceal_civil_number","text":"Conceal civil number in invitation creation dialog.","title":"invitations.conceal_civil_number"},{"location":"admin-guide/metal-configuration/features/#invitationscreate_missing_user","text":"Allow to create FreeIPA user using details specified in invitation if user does not exist yet.","title":"invitations.create_missing_user"},{"location":"admin-guide/metal-configuration/features/#invitationsdisable_multiple_roles","text":"Do not allow user to grant multiple roles in the same project or organization using invitation.","title":"invitations.disable_multiple_roles"},{"location":"admin-guide/metal-configuration/features/#invitationsrequire_user_details","text":"Render \"Show user details\" button in invitation creation form.","title":"invitations.require_user_details"},{"location":"admin-guide/metal-configuration/features/#invitationsshow_tax_number","text":"Show tax number field in invitation creation form.","title":"invitations.show_tax_number"},{"location":"admin-guide/metal-configuration/features/#invitationstax_number_required","text":"Make tax number field mandatory in invitation creation form.","title":"invitations.tax_number_required"},{"location":"admin-guide/metal-configuration/features/#invoiceevents","text":"Render list of events related to invoice item in modal dialog.","title":"invoice.events"},{"location":"admin-guide/metal-configuration/features/#marketplaceconceal_prices","text":"Do not render prices in shopping cart and order details.","title":"marketplace.conceal_prices"},{"location":"admin-guide/metal-configuration/features/#marketplaceflows","text":"Allow to submit organization, project and resource creation requests simultaneously.","title":"marketplace.flows"},{"location":"admin-guide/metal-configuration/features/#marketplaceimport_resources","text":"Allow to import resources from service provider to project.","title":"marketplace.import_resources"},{"location":"admin-guide/metal-configuration/features/#marketplaceoffering_document","text":"Allow to attach document to marketplace offering.","title":"marketplace.offering_document"},{"location":"admin-guide/metal-configuration/features/#marketplaceprivate_offerings","text":"Render list of private marketplace service providers in organization workspace.","title":"marketplace.private_offerings"},{"location":"admin-guide/metal-configuration/features/#marketplacereview","text":"Allow to write a review for marketplace offering.","title":"marketplace.review"},{"location":"admin-guide/metal-configuration/features/#marketplaceshow_experimental_ui_components","text":"Enabled display of experimental or mocked components in marketplace.","title":"marketplace.show_experimental_ui_components"},{"location":"admin-guide/metal-configuration/features/#marketplaceterms_of_service","text":"Render terms of service when offering is ordered.","title":"marketplace.terms_of_service"},{"location":"admin-guide/metal-configuration/features/#openstackserver_groups","text":"Render server groups in OpenStack tenant details","title":"openstack.server_groups"},{"location":"admin-guide/metal-configuration/features/#openstackvolume_types","text":"Allow to select OpenStack volume type when instance or volume is provisioned.","title":"openstack.volume_types"},{"location":"admin-guide/metal-configuration/features/#projectestimated_cost","text":"Render estimated cost column in projects list.","title":"project.estimated_cost"},{"location":"admin-guide/metal-configuration/features/#projectevents","text":"Enable audit log in project workspace.","title":"project.events"},{"location":"admin-guide/metal-configuration/features/#projectmember_role","text":"Allow to grant user a project member role.","title":"project.member_role"},{"location":"admin-guide/metal-configuration/features/#projectoecd_fos_2007_code","text":"Enable OECD code.","title":"project.oecd_fos_2007_code"},{"location":"admin-guide/metal-configuration/features/#projectshow_industry_flag","text":"Show industry flag.","title":"project.show_industry_flag"},{"location":"admin-guide/metal-configuration/features/#projectteam","text":"Enable team management in project workspace.","title":"project.team"},{"location":"admin-guide/metal-configuration/features/#ranchervolume_mount_point","text":"Allow to select mount point for data volume when Rancher cluster is provisioned.","title":"rancher.volume_mount_point"},{"location":"admin-guide/metal-configuration/features/#slurmjobs","text":"Render list of SLURM jobs as a separate tab in allocation details page.","title":"slurm.jobs"},{"location":"admin-guide/metal-configuration/features/#supportactivity_stream","text":"Render list of recent comments in support dashboard.","title":"support.activity_stream"},{"location":"admin-guide/metal-configuration/features/#supportconceal_change_request","text":"Conceal \"Change request\" from a selection of issue types for non-staff/non-support users.","title":"support.conceal_change_request"},{"location":"admin-guide/metal-configuration/features/#supportcustomers_list","text":"Render list of organizations in support workspace.","title":"support.customers_list"},{"location":"admin-guide/metal-configuration/features/#supportcustomers_requests","text":"Render list of organization creation requests in support workspace.","title":"support.customers_requests"},{"location":"admin-guide/metal-configuration/features/#supportflowmap","text":"Render service usage as a flowmap chart in support workspace.","title":"support.flowmap"},{"location":"admin-guide/metal-configuration/features/#supportheatmap","text":"Render service usage as a heatmap chart in support workspace.","title":"support.heatmap"},{"location":"admin-guide/metal-configuration/features/#supportnext_branch","text":"Render \"Try out new version\" link in toolbar.","title":"support.next_branch"},{"location":"admin-guide/metal-configuration/features/#supportoffering_comments","text":"Render comments tab in request-based item details page.","title":"support.offering_comments"},{"location":"admin-guide/metal-configuration/features/#supportpricelist","text":"Render marketplace plan components pricelist in support workspace.","title":"support.pricelist"},{"location":"admin-guide/metal-configuration/features/#supportresource_usage","text":"Enable resource usage overview charts in support workspace.","title":"support.resource_usage"},{"location":"admin-guide/metal-configuration/features/#supportresources_treemap","text":"Render resource usage as a treemap chart in support workspace.","title":"support.resources_treemap"},{"location":"admin-guide/metal-configuration/features/#supportsankey_diagram","text":"Render service usage as a sankey chart in support workspace.","title":"support.sankey_diagram"},{"location":"admin-guide/metal-configuration/features/#supportshared_providers","text":"Render overview of shared marketplace service providers in support workspace.","title":"support.shared_providers"},{"location":"admin-guide/metal-configuration/features/#supportusers","text":"Render list of users in support workspace.","title":"support.users"},{"location":"admin-guide/metal-configuration/features/#supportvm_type_overview","text":"Enable VM type overview in support workspace.","title":"support.vm_type_overview"},{"location":"admin-guide/metal-configuration/features/#usercompetence","text":"Render competence column in users list.","title":"user.competence"},{"location":"admin-guide/metal-configuration/features/#usernotifications","text":"Enable email and webhook notifications management in user workspace.","title":"user.notifications"},{"location":"admin-guide/metal-configuration/features/#userpreferred_language","text":"Render preferred language column in users list.","title":"user.preferred_language"},{"location":"admin-guide/metal-configuration/features/#userssh_keys","text":"Enable SSH keys management in user workspace.","title":"user.ssh_keys"},{"location":"admin-guide/metal-configuration/general/","text":"General Configuration Outline: General Configuration Introduction Admin dashboard configuration Custom templates configuration Local time zone configuration Introduction Cloudrock is a Django -based application, so configuration is done by modifying settings.py file. If you want to configure options related to Django, such as tune caches, database connection, configure custom logging, etc, please refer to Django documentation . Please consult configuration guide to learn more. Admin dashboard configuration An admin dashboard supports custom links on Quick access panel. For instance, a panel below was configured with one additional link to https://cloudrock.ca : Configuration of custom links is stored under FLUENT_DASHBOARD_QUICK_ACCESS_LINKS settings key and for current example has following structure: 1 2 3 4 5 6 7 8 9 FLUENT_DASHBOARD_QUICK_ACCESS_LINKS = [ { 'title' : '[Custom] Cloudrock - Cloud Service' , 'url' : 'https://cloudrock.ca' , 'external' : True , # adds an icon specifying that this link is external, 'description' : 'Open-source Cloud Brokerage Platform' , 'attrs' : { 'target' : '_blank' } # add an attribute to generated anchor element which will open link in a new tab. }, ] Here is a short description of link parameters: Name Type Required Description description string No Tool tip on the link external boolean No Specifies whether additional icon indicating an external URL has to be added url URL Yes A URL of the link title string Yes A title of the generated link attrs dict No A dictionary of anchor attributes to be added to generated element It is also possible to omit optional fields and add links by specifying only a title and a URL to the generated link. 1 2 3 4 FLUENT_DASHBOARD_QUICK_ACCESS_LINKS = [ [ '[Custom] Cloudrock - Cloud Service' , 'https://cloudrock.ca' ], [ 'Find us on GitHub' , 'https://github.com/kubeworkz/cloudrock-core' ], ] Custom templates configuration To overwrite default templates you should use django-dbtemplates . It allows creation of templates through /admin . Local time zone configuration Set TIME_ZONE setting in /etc/cloudrock/override.conf.py to use local time zone. By default it is set to UTC. See the list of time zones for possible options.","title":"General Configuration"},{"location":"admin-guide/metal-configuration/general/#general-configuration","text":"Outline: General Configuration Introduction Admin dashboard configuration Custom templates configuration Local time zone configuration","title":"General Configuration"},{"location":"admin-guide/metal-configuration/general/#introduction","text":"Cloudrock is a Django -based application, so configuration is done by modifying settings.py file. If you want to configure options related to Django, such as tune caches, database connection, configure custom logging, etc, please refer to Django documentation . Please consult configuration guide to learn more.","title":"Introduction"},{"location":"admin-guide/metal-configuration/general/#admin-dashboard-configuration","text":"An admin dashboard supports custom links on Quick access panel. For instance, a panel below was configured with one additional link to https://cloudrock.ca : Configuration of custom links is stored under FLUENT_DASHBOARD_QUICK_ACCESS_LINKS settings key and for current example has following structure: 1 2 3 4 5 6 7 8 9 FLUENT_DASHBOARD_QUICK_ACCESS_LINKS = [ { 'title' : '[Custom] Cloudrock - Cloud Service' , 'url' : 'https://cloudrock.ca' , 'external' : True , # adds an icon specifying that this link is external, 'description' : 'Open-source Cloud Brokerage Platform' , 'attrs' : { 'target' : '_blank' } # add an attribute to generated anchor element which will open link in a new tab. }, ] Here is a short description of link parameters: Name Type Required Description description string No Tool tip on the link external boolean No Specifies whether additional icon indicating an external URL has to be added url URL Yes A URL of the link title string Yes A title of the generated link attrs dict No A dictionary of anchor attributes to be added to generated element It is also possible to omit optional fields and add links by specifying only a title and a URL to the generated link. 1 2 3 4 FLUENT_DASHBOARD_QUICK_ACCESS_LINKS = [ [ '[Custom] Cloudrock - Cloud Service' , 'https://cloudrock.ca' ], [ 'Find us on GitHub' , 'https://github.com/kubeworkz/cloudrock-core' ], ]","title":"Admin dashboard configuration"},{"location":"admin-guide/metal-configuration/general/#custom-templates-configuration","text":"To overwrite default templates you should use django-dbtemplates . It allows creation of templates through /admin .","title":"Custom templates configuration"},{"location":"admin-guide/metal-configuration/general/#local-time-zone-configuration","text":"Set TIME_ZONE setting in /etc/cloudrock/override.conf.py to use local time zone. By default it is set to UTC. See the list of time zones for possible options.","title":"Local time zone configuration"},{"location":"admin-guide/metal-configuration/google-calendar/","text":"Configuration of the Google Calendar","title":"Configuration of the Google Calendar"},{"location":"admin-guide/metal-configuration/google-calendar/#configuration-of-the-google-calendar","text":"","title":"Configuration of the Google Calendar"},{"location":"admin-guide/metal-configuration/notification-templates/","text":"Overriding notification templates via admin panel An admin can override(edit the content) the templates of notifications with the following sequence of actions: Go to admin panel (e.g. http://localhost:8080/admin/ ) Open Templates: Utilities -> Database templates -> Templates Click on Add template on the right side. Enter the path to the template file into the Name input field as shown below. The name should have a <cloudrock_application_name>/<event_name>_<postfix>.<extension> format, where <postfix> can be either message or subject , and <extension> - either txt or html . You can find a list of all notification templates here Scroll down and click on Save and continue editing and you should have the content of the template loaded automatically Edit the Content field as you like and Save the changes.","title":"Overriding notification templates via admin panel"},{"location":"admin-guide/metal-configuration/notification-templates/#overriding-notification-templates-via-admin-panel","text":"An admin can override(edit the content) the templates of notifications with the following sequence of actions: Go to admin panel (e.g. http://localhost:8080/admin/ ) Open Templates: Utilities -> Database templates -> Templates Click on Add template on the right side. Enter the path to the template file into the Name input field as shown below. The name should have a <cloudrock_application_name>/<event_name>_<postfix>.<extension> format, where <postfix> can be either message or subject , and <extension> - either txt or html . You can find a list of all notification templates here Scroll down and click on Save and continue editing and you should have the content of the template loaded automatically Edit the Content field as you like and Save the changes.","title":"Overriding notification templates via admin panel"},{"location":"admin-guide/metal-configuration/notifications/","text":"Notifications CLOUDROCK_METAL.BOOKING booking.notification A notification about upcoming bookings Templates booking/notification_subject.txt booking/notification_message.txt booking/notification_message.html 1 Reminder about upcoming booking. 1 2 3 4 5 6 Hello! Please do not forget about upcoming booking: {% for resource in resources %} {{ resource.name }}{% if not forloop.last %}, {% endif %} {% endfor %}. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Reminder about upcoming booking.</title> </head> <body> <p> Hello! </p> <p> Please do not forget about upcoming booking: <br /> {% for resource in resources %} {{ resource.name }} {% if not forloop.last %} <br /> {% endif %} {% endfor %} </p> </body> </html> CLOUDROCK_METAL.INVOICES invoices.notification A notification of invoice Templates invoices/notification_subject.txt invoices/notification_message.txt invoices/notification_message.html 1 {{ customer }}'s invoice for {{ month }}/{{ year }} 1 2 3 4 Hello, Please follow the link below to see {{ customer }}'s accounting information for {{ month }}/{{ year }}: {{ link }} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <html xmlns=\"http://www.w3.org/1999/html\"> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>{{ customer }}'s invoice for {{ month }}/{{ year }}</title> </head> <body> <p> Dear Sir or Madam, </p> <p> Attached is invoice for services consumed by {{ customer }}'s during {{ month }}/{{ year }}. </p> </body> </html> invoices.upcoming_ends_notification A notification about upcoming ends Templates invoices/upcoming_ends_notification_subject.txt invoices/upcoming_ends_notification_message.txt invoices/upcoming_ends_notification_message.html 1 {{ organization_name }}'s fixed price contract {{ contract_number }} is coming to an end 1 2 3 Hello, this is a reminder that {{ organization_name }}'s fixed price contract {{ contract_number }} is ending on {{ end }}. 1 2 3 4 5 6 7 8 9 10 11 12 13 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>{{ organization_name }}'s fixed price contract {{ contract_number }} is coming to an end.</title> </head> <body> <p> Hello, <br/> this is a reminder that {{ organization_name }}'s fixed price contract {{ contract_number }} is ending on {{ end }}. </p> </body> </html> CLOUDROCK_METAL.MARKETPLACE marketplace.marketplace_resource_create_failed A notification of a failed resource creation Templates marketplace/marketplace_resource_create_failed_subject.txt marketplace/marketplace_resource_create_failed_message.txt marketplace/marketplace_resource_create_failed_message.html 1 Resource {{ resource_name }} creation has failed. 1 2 3 Hello! Resource {{ resource_name }} creation has failed. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource_name }} creation has failed.</title> </head> <body> <p> Hello! </p> <p> Resource {{ resource_name }} creation has failed. </p> </body> </html> marketplace.marketplace_resource_create_succeeded A notification of a successful resource creation Templates marketplace/marketplace_resource_create_succeeded_subject.txt marketplace/marketplace_resource_create_succeeded_message.txt marketplace/marketplace_resource_create_succeeded_message.html 1 Resource {{ resource_name }} has been created. 1 2 3 Hello! Resource {{ resource_name }} has been created. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource_name }} has been created.</title> </head> <body> <p> Hello! </p> <p> Resource {{ resource_name }} has been created. </p> </body> </html> marketplace.marketplace_resource_terminate_failed A notification of a failed resource termination Templates marketplace/marketplace_resource_terminate_failed_subject.txt marketplace/marketplace_resource_terminate_failed_message.txt marketplace/marketplace_resource_terminate_failed_message.html 1 Resource {{ resource_name }} deletion has failed. 1 2 3 Hello! Resource {{ resource_name }} deletion has failed. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource_name }} deletion has failed.</title> </head> <body> <p> Hello! </p> <p> Resource {{ resource_name }} deletion has failed. </p> </body> </html> marketplace.marketplace_resource_terminate_succeeded A notification of a successful resource termination Templates marketplace/marketplace_resource_terminate_succeeded_subject.txt marketplace/marketplace_resource_terminate_succeeded_message.txt marketplace/marketplace_resource_terminate_succeeded_message.html 1 Resource {{ resource_name }} has been deleted. 1 2 3 Hello! Resource {{ resource_name }} has been deleted. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource_name }} has been deleted.</title> </head> <body> <p> Hello! </p> <p> Resource {{ resource_name }} has been deleted. </p> </body> </html> marketplace.marketplace_resource_termination_scheduled A notification of a scheduled resource termination Templates marketplace/marketplace_resource_termination_scheduled_subject.txt marketplace/marketplace_resource_termination_scheduled_message.txt marketplace/marketplace_resource_termination_scheduled_message.html 1 Resource {{ resource.name }} termination has been scheduled. 1 2 3 Hello! The resource you have - {{ resource.name }} has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:\"SHORT_DATE_FORMAT\" }}. If you feel that you still want to keep it, please remove the resource end date {{ resource_url }}. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource.name }} termination has been scheduled.</title> </head> <body> <p> Hello! </p> <p> The resource you have - <a href=\"{{ resource_url }}\">{{ resource.name }}</a> has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:\"SHORT_DATE_FORMAT\" }}. If you feel that you still want to keep it, please <a href=\"{{ resource_url }}\"></a>remove the resource end date</a>. </p> </body> </html> marketplace.marketplace_resource_termination_scheduled_staff A notification of a resource termination Templates marketplace/marketplace_resource_termination_scheduled_staff_subject.txt marketplace/marketplace_resource_termination_scheduled_staff_message.txt marketplace/marketplace_resource_termination_scheduled_staff_message.html 1 Resource {{ resource.name }} termination has been scheduled. 1 2 3 Hello! The resource you have - {{ resource.name }} has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:\"SHORT_DATE_FORMAT\" }}. If you feel that you still want to keep it, please remove the resource end date {{ resource_url }}. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource.name }} termination has been scheduled.</title> </head> <body> <p> Hello! </p> <p> The resource you have - <a href=\"{{ resource_url }}\">{{ resource.name }}</a> has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:\"SHORT_DATE_FORMAT\" }}. If you feel that you still want to keep it, please <a href=\"{{ resource_url }}\"></a>remove the resource end date</a>. </p> </body> </html> marketplace.marketplace_resource_update_failed A notification of failed resource update Templates marketplace/marketplace_resource_update_failed_subject.txt marketplace/marketplace_resource_update_failed_message.txt marketplace/marketplace_resource_update_failed_message.html 1 Resource {{ resource_name }} update has failed. 1 2 3 Hello! Resource {{ resource_name }} update has failed. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource_name }} update has failed.</title> </head> <body> <p> Hello! </p> <p> Resource {{ resource_name }} update has failed. </p> </body> </html> marketplace.marketplace_resource_update_limits_failed A notification of failed resource limits update Templates marketplace/marketplace_resource_update_limits_failed_subject.txt marketplace/marketplace_resource_update_limits_failed_message.txt marketplace/marketplace_resource_update_limits_failed_message.html 1 Resource {{ resource_name }} limits update has failed. 1 2 3 Hello! Resource {{ resource_name }} limits update has failed. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource_name }} limits update has failed.</title> </head> <body> <p> Hello! </p> <p> Resource {{ resource_name }} limits update has failed. </p> </body> </html> marketplace.marketplace_resource_update_limits_succeeded A notification of a successful resource limit update Templates marketplace/marketplace_resource_update_limits_succeeded_subject.txt marketplace/marketplace_resource_update_limits_succeeded_message.txt marketplace/marketplace_resource_update_limits_succeeded_message.html 1 Resource {{ resource_name }} limits have been updated. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 Hello! Following request from {{ order_item_user }}, resource {{ resource_name }} limits have been updated from: {{ resource_old_limits }} to: {{ resource_limits }}. {% if support_email or support_phone %} If you have any additional questions, please contact support. {% if support_email %} Email: {{ support_email }} {% endif %} {% if support_phone %} Phone: {{ support_phone }} {% endif %} {% endif %} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource_name }} limits have been updated.</title> </head> <body> <p> Hello! </p> <p> Following request from {{ order_item_user }}, resource {{ resource_name }} limits have been updated from:<br> <blockquote> {{ resource_old_limits }} </blockquote> to: <blockquote> {{ resource_limits }} </blockquote> </p> {% if support_email or support_phone %} <p> If you have any additional questions, please contact support. </p> {% if support_email %} <p> Email: {{ support_email }} </p> {% endif %} {% if support_phone %} <p> Phone: {{ support_phone }} </p> {% endif %} {% endif %} </body> </html> marketplace.marketplace_resource_update_succeeded A notification of a successful resource update Templates marketplace/marketplace_resource_update_succeeded_subject.txt marketplace/marketplace_resource_update_succeeded_message.txt marketplace/marketplace_resource_update_succeeded_message.html 1 Resource {{ resource_name }} has been updated. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 Hello! Following request from {{ order_item_user }}, resource {{ resource_name }} has been updated. {% if resource_old_plan %} The plan has been changed from {{ resource_old_plan }} to {{ resource_plan }}. {% endif %} {% if support_email or support_phone %} If you have any additional questions, please contact support. {% if support_email %} Email: {{ support_email }} {% endif %} {% if support_phone %} Phone: {{ support_phone }} {% endif %} {% endif %} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource_name }} has been updated.</title> </head> <body> <p> Hello! </p> <p> Following request from {{ order_item_user }}, resource {{ resource_name }} has been updated. </p> {% if resource_old_plan %} <p> The plan has been changed from {{ resource_old_plan }} to {{ resource_plan }}. </p> {% endif %} {% if support_email or support_phone %} <p> If you have any additional questions, please contact support. </p> {% if support_email %} <p> Email: {{ support_email }} </p> {% endif %} {% if support_phone %} <p> Phone: {{ support_phone }} </p> {% endif %} {% endif %} </body> </html> marketplace.notification_about_project_ending A notification about project ending Templates marketplace/notification_about_project_ending_subject.txt marketplace/notification_about_project_ending_message.txt marketplace/notification_about_project_ending_message.html 1 Project {{ project.name }} will be deleted. 1 2 3 4 5 6 7 Dear {{ user.full_name }}, Your project {{ project.name }} is ending {% if delta == 1 %} tomorrow {% else %} in {{ delta }} days{% endif %}. End of the project will lead to termination of all resources in the project. If you are aware of that, then no actions are needed from your side. If you need to update project end date, please update it in project details {{ project_url }}. Thank you! 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Project {{ project.name }} will be deleted.</title> </head> <body> <p>Dear {{ user.full_name }},</p> <p>Your project {{ project.name }} is ending {% if delta == 1 %} tomorrow {% else %} in {{ delta }} days{% endif %}. End of the project will lead to termination of all resources in the project. <br /> If you are aware of that, then no actions are needed from your side. <br /> If you need to update project end date, please update it in project details {{ project_url }}. </p> <p>Thank you!</p> </body> </html> marketplace.notification_about_stale_resources A notification about stale resources Templates marketplace/notification_about_stale_resources_subject.txt marketplace/notification_about_stale_resources_message.txt marketplace/notification_about_stale_resources_message.html 1 Reminder about stale resources. 1 2 3 4 5 6 7 8 9 10 Hello! We noticed that you have stale resources that have not cost you anything for the last 3 months. Perhaps some of them are not needed any more? The resource names are: {% for resource in resources %} {{ resource.resource.name }} {{ resource.resource_url }} {% endfor %} Thank you! 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Reminder about stale resources.</title> </head> <body> <p> Hello! </p> <p> We noticed that you have stale resources that have not cost you anything for the last 3 months. <br /> Perhaps some of them are not needed any more?<br /> The resource names are: <ul> {% for resource in resources %} <li><a href='{{ resource.resource_url }}'>{{ resource.resource.name }}</a></li> {% endfor %} </ul> Thank you! </p> </body> </html> marketplace.notification_approval A notification of order approval Templates marketplace/notification_approval_subject.txt marketplace/notification_approval_message.txt marketplace/notification_approval_message.html 1 A new order by {{ order.created_by.get_full_name }} is waiting for approval. 1 2 3 Hello! A new order by {{ order.created_by.get_full_name }} is waiting for approval. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>A new order by {{ order.created_by.get_full_name }} is waiting for approval.</title> </head> <body> <p> Hello! </p> <p> Please visit <a href=\"{{ order_url }}\">{{ site_name }}</a> to find out more details. </p> </body> </html> marketplace.notification_service_provider_approval A notification to provider about pending order item approval Templates marketplace/notification_service_provider_approval_subject.txt marketplace/notification_service_provider_approval_message.txt marketplace/notification_service_provider_approval_message.html 1 A new order by {{ order.created_by.get_full_name }} is waiting for approval. 1 2 3 Hello! A new order by {{ order.created_by.get_full_name }} is waiting for approval. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>A new order by {{ order.created_by.get_full_name }} is waiting for approval.</title> </head> <body> <p> Hello! </p> <p> Please visit <a href=\"{{ order_item_url }}\">{{ site_name }}</a> to find out more details. </p> </body> </html> marketplace.notification_usages A notification about usages Templates marketplace/notification_usages_subject.txt marketplace/notification_usages_message.txt marketplace/notification_usages_message.html 1 Reminder about missing usage reports. 1 2 3 4 5 6 7 8 Hello! Please do not forget to add usage for the resources you provide: {% regroup resources by offering as offering_list %}{% for offering in offering_list %} {{forloop.counter}}. {{ offering.grouper.name }}:{% for resource in offering.list %} - {{ resource.name }} {% endfor %}{% endfor %} You can submit resource usage via API or do it manually at {{ public_resources_url }}. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Reminder about missing usage reports.</title> </head> <body> <p> Hello! </p> <p>Please do not forget to add usage for the resources you provide:</p> {% regroup resources by offering as offering_list %} <ol> {% for offering in offering_list %} <li> {{ offering.grouper.name }}: <ul> {% for resource in offering.list %} <li>{{ resource.name }}</li> {% endfor %} </ul> </li> {% endfor %} </ol> <p> You can submit resource usage via API or do it <a href='{{ public_resources_url }}'>manually</a>. </p> </body> </html> CLOUDROCK_METAL.MARKETPLACE_FLOWS marketplace_flows.flow_rejected A notification for a rejected marketplace flow Templates marketplace_flows/flow_rejected_subject.txt marketplace_flows/flow_rejected_message.txt marketplace_flows/flow_rejected_message.html 1 2 {% load i18n %} {% trans 'Your submission has been rejected' %} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 {% load i18n %} {% if flow.customer_create_request.is_rejected %} {% trans 'Customer creation request has been rejected.' %} {% if flow.customer_create_request.reviewed_by %} {% trans 'Reviewer name:' %} {{ flow.customer_create_request.reviewed_by.full_name }} {% endif %} {% if flow.customer_create_request.reviewed_at %} {% trans 'Reviewed at:' %} {{ flow.customer_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.customer_create_request.reviewed_at|time:\"H:i\" }} {% endif %} {% if flow.customer_create_request.review_comment %} {% trans 'Comment:' %} {{ flow.customer_create_request.review_comment }} {% endif %} {% endif %} {% if flow.project_create_request.is_rejected %} {% trans 'Project creation request has been rejected.' %} {% if flow.project_create_request.reviewed_by %} {% trans 'Reviewer name:' %} {{ flow.project_create_request.reviewed_by.full_name }} {% endif %} {% if flow.project_create_request.reviewed_at %} {% trans 'Reviewed at:' %} {{ flow.project_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.project_create_request.reviewed_at|time:\"H:i\" }} {% endif %} {% if flow.project_create_request.review_comment %} {% trans 'Comment:' %} {{ flow.project_create_request.review_comment }} {% endif %} {% endif %} {% if flow.resource_create_request.is_rejected %} {% trans 'Resource creation request has been rejected.' %} {% if flow.resource_create_request.reviewed_by %} {% trans 'Reviewer name:' %} {{ flow.resource_create_request.reviewed_by.full_name }} {% endif %} {% if flow.resource_create_request.reviewed_at %} {% trans 'Reviewed at:' %} {{ flow.resource_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.resource_create_request.reviewed_at|time:\"H:i\" }} {% endif %} {% if flow.resource_create_request.review_comment %} {% trans 'Comment:' %} {{ flow.resource_create_request.review_comment }} {% endif %} {% endif %} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 {% load i18n %} {% if flow.customer_create_request.is_rejected %} <p>{% trans 'Customer creation request has been rejected.' %}</p> {% if flow.customer_create_request.reviewed_by %} <p><b>{% trans 'Reviewer name:' %}</b> {{ flow.customer_create_request.reviewed_by.full_name }}</p> {% endif %} {% if flow.customer_create_request.reviewed_at %} <p><b>{% trans 'Reviewed at:' %}</b> {{ flow.customer_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.customer_create_request.reviewed_at|time:\"H:i\" }}</p> {% endif %} {% if flow.customer_create_request.review_comment %} <p><b>{% trans 'Comment:' %}</b> {{ flow.customer_create_request.review_comment }}</p> {% endif %} {% endif %} {% if flow.project_create_request.is_rejected %} <p>{% trans 'Project creation request has been rejected.' %}</p> {% if flow.project_create_request.reviewed_by %} <p><b>{% trans 'Reviewer name:' %}</b> {{ flow.project_create_request.reviewed_by.full_name }}</p> {% endif %} {% if flow.project_create_request.reviewed_at %} <p><b>{% trans 'Reviewed at:' %}</b> {{ flow.project_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.project_create_request.reviewed_at|time:\"H:i\" }}</p> {% endif %} {% if flow.project_create_request.review_comment %} <p><b>{% trans 'Comment:' %}</b> {{ flow.project_create_request.review_comment }}</p> {% endif %} {% endif %} {% if flow.resource_create_request.is_rejected %} <p>{% trans 'Resource creation request has been rejected.' %}</p> {% if flow.resource_create_request.reviewed_by %} <p><b>{% trans 'Reviewer name:' %}</b> {{ flow.resource_create_request.reviewed_by.full_name }}</p> {% endif %} {% if flow.resource_create_request.reviewed_at %} <p><b>{% trans 'Reviewed at:' %}</b> {{ flow.resource_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.resource_create_request.reviewed_at|time:\"H:i\" }}</p> {% endif %} {% if flow.resource_create_request.review_comment %} <p><b>{% trans 'Comment:' %}</b> {{ flow.resource_create_request.review_comment }}</p> {% endif %} {% endif %} marketplace_flows.flow_submitted A notification for a submitted marketplace flow Templates marketplace_flows/flow_submitted_subject.txt marketplace_flows/flow_submitted_message.txt marketplace_flows/flow_submitted_message.html 1 2 {% load i18n %} {% trans 'Resource creation request has been submitted' %} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 {% load i18n %} {% load cloudrock_core %} {% trans 'Resource creation request has been submitted.' %} It has been requested by user {{ flow.requested_by.full_name }} with email {{ flow.requested_by.email }}. {% if flow.customer_create_request %} {% trans 'Customer create request details are:' %} * {% trans 'Organization name' %}: {{ flow.customer_create_request.name }} {% if flow.customer_create_request.native_name %} * {% trans 'Organization native name' %}: {{ flow.customer_create_request.native_name }} {% endif %} {% if flow.customer_create_request.abbreviation %} * {% trans 'Organization abbreviation' %}: {{ flow.customer_create_request.abbreviation }} {% endif %} {% if flow.customer_create_request.contact_details %} * {% trans 'Contact details' %}: {{ flow.customer_create_request.contact_details }} {% endif %} {% if flow.customer_create_request.agreement_number %} * {% trans 'Contact details' %}: {{ flow.customer_create_request.agreement_number }} {% endif %} {% if flow.customer_create_request.sponsor_number %} * {% trans 'External ID of the sponsor covering the costs' %}: {{ flow.customer_create_request.sponsor_number }} {% endif %} {% if flow.customer_create_request.email %} * {% trans 'Email address' %}: {{ flow.customer_create_request.email }} {% endif %} {% if flow.customer_create_request.phone_number %} * {% trans 'Phone number' %}: {{ flow.customer_create_request.phone_number }} {% endif %} {% if flow.customer_create_request.access_subnets %} * {% trans 'List of IPv4 or IPv6 CIDR addresses from where connection to self-service is allowed' %}: {{ flow.customer_create_request.access_subnets }} {% endif %} {% if flow.customer_create_request.registration_code %} * {% trans 'Registration code' %}: {{ flow.customer_create_request.registration_code }} {% endif %} {% if flow.customer_create_request.homepage %} * {% trans 'Homepage URL' %}: {{ flow.customer_create_request.homepage }} {% endif %} {% if flow.customer_create_request.domain %} * {% trans 'Organization domain' %}: {{ flow.customer_create_request.domain }} {% endif %} {% if flow.customer_create_request.address %} * {% trans 'Legal address' %}: {{ flow.customer_create_request.address }} {% endif %} {% if flow.customer_create_request.postal %} * {% trans 'Postal code' %}: {{ flow.customer_create_request.postal }} {% endif %} {% if flow.customer_create_request.bank_name %} * {% trans 'Bank name (for accounting)' %}: {{ flow.customer_create_request.bank_name }} {% endif %} {% if flow.customer_create_request.bank_account %} * {% trans 'Bank account number' %}: {{ flow.customer_create_request.bank_account }} {% endif %} {% else %} {% trans 'Organization name' %}: {{ flow.customer.name }} {% endif %} {% trans 'Project create request details are:' %} * {% trans 'Name' %}: {{ flow.project_create_request.name }} {% if flow.project_create_request.description %} * {% trans 'Description' %}: {{ flow.project_create_request.description }} {% endif %} {% if flow.project_create_request.end_date %} * {% trans 'End date' %}: {{ flow.project_create_request.end_date }} {% endif %} {% trans 'Resource create request details are:' %} * {% trans 'Name' %}: {{ flow.resource_create_request.name }} {% if flow.resource_create_request.description %} * {% trans 'Description' %}: {{ flow.resource_create_request.description }} {% endif %} {% if flow.resource_create_request.end_date %} * {% trans 'End date' %}: {{ flow.resource_create_request.end_date }} {% endif %} * {% trans 'Offering name' %}: {{ flow.resource_create_request.offering.name }} * {% trans 'Offering category' %}: {{ flow.resource_create_request.offering.category.title }} {% if flow.resource_create_request.plan %} * {% trans 'Plan' %}: {{ flow.resource_create_request.plan.name }} {% endif %} {% if flow.resource_create_request.attributes %} * {% trans 'Attributes' %}: {% for key, value in flow.resource_create_request.attributes.items|dictsort:\"0.lower\" %} {{ key }}: {{ value | pretty_json }} {% endfor %} {% endif %} {% if flow.resource_create_request.limits %} * {% trans 'Limits' %}: {% for key, value in flow.resource_create_request.limits.items|dictsort:\"0.lower\" %} {{ key }}: {{ value }} {% endfor %} {% endif %} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 {% load i18n %} {% load cloudrock_core %} <!DOCTYPE html> <html> <head> <meta charset=\"utf-8\"> <title>{% trans \"Resource creation request details\" %}</title> </head> <body> <p>It has been requested by user {{ flow.requested_by.full_name }} with email {{ flow.requested_by.email }}.</p> {% if flow.customer_create_request %} <h1>{% trans 'Customer create request details' %}</h1> <ul> <li><b>{% trans 'Organization name' %}</b>: {{ flow.customer_create_request.name }}</li> {% if flow.customer_create_request.native_name %} <li><b>{% trans 'Organization native name' %}</b>: {{ flow.customer_create_request.native_name }}</li> {% endif %} {% if flow.customer_create_request.abbreviation %} <li><b>{% trans 'Organization abbreviation' %}</b>: {{ flow.customer_create_request.abbreviation }}</li> {% endif %} {% if flow.customer_create_request.contact_details %} <li><b>{% trans 'Contact details' %}: {{ flow.customer_create_request.contact_details }}</b></li> {% endif %} {% if flow.customer_create_request.agreement_number %} <li><b>{% trans 'Contact details' %}: {{ flow.customer_create_request.agreement_number }}</b></li> {% endif %} {% if flow.customer_create_request.sponsor_number %} <li><b>{% trans 'External ID of the sponsor covering the costs' %}: {{ flow.customer_create_request.sponsor_number }}</b></li> {% endif %} {% if flow.customer_create_request.email %} <li><b>{% trans 'Email address' %}: {{ flow.customer_create_request.email }}</b></li> {% endif %} {% if flow.customer_create_request.phone_number %} <li><b>{% trans 'Phone number' %}: {{ flow.customer_create_request.phone_number }}</b></li> {% endif %} {% if flow.customer_create_request.access_subnets %} <li><b>{% trans 'List of IPv4 or IPv6 CIDR addresses from where connection to self-service is allowed' %}: {{ flow.customer_create_request.access_subnets }}</b></li> {% endif %} {% if flow.customer_create_request.registration_code %} <li><b>{% trans 'Registration code' %}: {{ flow.customer_create_request.registration_code }}</b></li> {% endif %} {% if flow.customer_create_request.homepage %} <li><b>{% trans 'Homepage URL' %}: {{ flow.customer_create_request.homepage }}</b></li> {% endif %} {% if flow.customer_create_request.domain %} <li><b>{% trans 'Organization domain' %}: {{ flow.customer_create_request.domain }}</b></li> {% endif %} {% if flow.customer_create_request.address %} <li><b>{% trans 'Legal address' %}: {{ flow.customer_create_request.address }}</b></li> {% endif %} {% if flow.customer_create_request.postal %} <li><b>{% trans 'Postal code' %}: {{ flow.customer_create_request.postal }}</b></li> {% endif %} {% if flow.customer_create_request.bank_name %} <li><b>{% trans 'Bank name (for accounting)' %}: {{ flow.customer_create_request.bank_name }}</b></li> {% endif %} {% if flow.customer_create_request.bank_account %} <li><b>{% trans 'Bank account number' %}: {{ flow.customer_create_request.bank_account }}</b></li> {% endif %} </ul> {% else %} <b>{% trans 'Organization name' %}</b>: {{ flow.customer.name }} {% endif %} <h1>{% trans 'Project create request details' %}</h1> <ul> <li><b>{% trans 'Name' %}: {{ flow.project_create_request.name }}</b></li> {% if flow.project_create_request.description %} <li><b>{% trans 'Description' %}: {{ flow.project_create_request.description }}</b></li> {% endif %} {% if flow.project_create_request.end_date %} <li><b>{% trans 'End date' %}: {{ flow.project_create_request.end_date }}</b></li> {% endif %} </ul> <h1>{% trans 'Resource create request details' %}</h1> <ul> <li><b>{% trans 'Name' %}: {{ flow.resource_create_request.name }}</b></li> {% if flow.resource_create_request.description %} <li><b>{% trans 'Description' %}: {{ flow.resource_create_request.description }}</b></li> {% endif %} {% if flow.resource_create_request.end_date %} <li><b>{% trans 'End date' %}: {{ flow.resource_create_request.end_date }}</b></li> {% endif %} <li><b>{% trans 'Offering name' %}: {{ flow.resource_create_request.offering.name }}</b></li> <li><b>{% trans 'Offering category' %}: {{ flow.resource_create_request.offering.category.title }}</b></li> {% if flow.resource_create_request.plan %} <li><b>{% trans 'Plan' %}: {{ flow.resource_create_request.plan.name }}</b></li> {% endif %} {% if flow.resource_create_request.attributes %} <li><b>{% trans 'Attributes' %}</b>: <table border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tr> <th>#</th> <th>{% trans \"NAME\" %}</th> <th>{% trans \"VALUE\" %}</th> </tr> {% for key, value in flow.resource_create_request.attributes.items|dictsort:\"0.lower\" %} <tr> <td>{{ forloop.counter }}</td> <td>{{ key }}</td> <td>{{ value | pretty_json }}</td> </tr> {% endfor %} </table> </li> {% endif %} {% if flow.resource_create_request.limits %} <li><b>{% trans 'Limits' %}</b>: <table border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tr> <th>#</th> <th>{% trans \"NAME\" %}</th> <th>{% trans \"VALUE\" %}</th> </tr> {% for key, value in flow.resource_create_request.limits.items|dictsort:\"0.lower\" %} <tr> <td>{{ forloop.counter }}</td> <td>{{ key }}</td> <td>{{ value }}</td> </tr> {% endfor %} </table> </li> {% endif %} </ul> </body> </html> CLOUDROCK_RANCHER rancher.notification_create_user A notification for created rancher user Templates rancher/notification_create_user_subject.txt rancher/notification_create_user_message.txt rancher/notification_create_user_message.html 1 New account has been created. 1 2 3 4 Hello! User with login {{ user.username }} and temporary password {{ password }} has been created. Please go to management console {{ rancher_url }} to change the password. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>A new user account has been created for you.</title> </head> <body> <p> Hello! </p> <p> User with login {{ user.username }} and temporary password {{ password }} has been created.<br /> Please go to <a href=\"{{ rancher_url }}\">management console</a> to change the password. </p> </body> </html> CLOUDROCK_CORE.STRUCTURE structure.change_email_request A notification of an email change request Templates structure/change_email_request_subject.txt structure/change_email_request_message.txt structure/change_email_request_message.html 1 Verify new email address. 1 To confirm the change of email address from {{ request.user.email }} to {{ request.email }}, follow the {{ link }}. 1 <p>To confirm the change of email address from {{ request.user.email }} to {{ request.email }}, follow the <a href=\"{{ link }}\">link</a>.</p> structure.notifications_profile_changes_operator A notification of changing a profile Templates structure/notifications_profile_changes_operator_subject.txt structure/notifications_profile_changes_operator_message.txt structure/notifications_profile_changes_operator_message.html 1 Owner details have been updated 1 2 3 4 5 6 7 8 9 10 Owner of {% for o in organizations %} {{ o.name }} {% if o.abbreviation %} ({{ o.abbreviation }}){% endif %}{% if not forloop.last %}, {% endif %} {% endfor %} {{user.full_name}} (id={{ user.id }}) has changed {% for f in fields %} {{ f.name }} from {{ f.old_value }} to {{ f.new_value }}{% if not forloop.last %}, {% else %}.{% endif %} {% endfor %} 1 2 3 4 5 6 7 8 9 10 Owner of {% for o in organizations %} {{ o.name }} {% if o.abbreviation %} ({{ o.abbreviation }}){% endif %}{% if not forloop.last %}, {% endif %} {% endfor %} {{user.full_name}} (id={{ user.id }}) has changed {% for f in fields %} {{ f.name }} from {{ f.old_value }} to {{ f.new_value }}{% if not forloop.last %}, {% else %}.{% endif %} {% endfor %} structure.structure_role_granted A notification of a granted role Templates structure/structure_role_granted_subject.txt structure/structure_role_granted_message.txt structure/structure_role_granted_message.html 1 Role granted. 1 Role {{ permission.role }} for {{ structure }} has been granted. 1 <p>Role {{ permission.role }} for {{ structure }} has been granted.</p> CLOUDROCK_CORE.USERS users.invitation_approved A notification of invitation approval Templates users/invitation_approved_subject.txt users/invitation_approved_message.txt users/invitation_approved_message.html 1 Account has been created 1 2 3 4 5 6 7 8 9 10 11 Hello! {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role. Please visit the link below to sign up and accept your invitation: {{ link }} Your credentials are as following. Username is {{ username }} Your password is {{ password }} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Account has been created</title> </head> <body> <p> Hello! </p> <p> {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role.<br> Please visit <a href=\"{{ link }}\">this page</a> to sign up and accept your invitation. </p> <p> Your credentials are as following. </p> <p> Your username is {{ username }} </p> <p> Your password is {{ password }} </p> </body> </html> users.invitation_created A notification of invitation creation Templates users/invitation_created_subject.txt users/invitation_created_message.txt users/invitation_created_message.html 1 Invitation to {{ name }} {{ type }} 1 2 3 4 5 Hello! {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role. Please visit the link below to sign up and accept your invitation: {{ link }} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Invitation to {{ name }} {{ type }}</title> </head> <body> <p> Hello! </p> <p> {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role.<br> Please visit <a href=\"{{ link }}\">this page</a> to sign up and accept your invitation. Please note: this invitation expires at {{ invitation.get_expiration_time|date:'d.m.Y H:i' }}! </p> </body> </html> users.invitation_rejected A notification of invitation rejection Templates users/invitation_rejected_subject.txt users/invitation_rejected_message.txt users/invitation_rejected_message.html 1 Invitation has been rejected 1 2 3 4 5 6 7 8 9 Hello! The following invitation has been rejected. Full name: {{ invitation.full_name }} Target: {{ name }} {{ type }} Role: {{ role }} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Invitation to {{ name }} {{ type }}</title> </head> <body> <p> Hello! </p> <p> The following invitation has been rejected. </p> <p> Full name: {{ invitation.full_name }} </p> <p> Target: {{ name }} {{ type }} </p> <p> Role: {{ role }} </p> </body> </html> users.invitation_requested A notification of invitation request Templates users/invitation_requested_subject.txt users/invitation_requested_message.txt users/invitation_requested_message.html 1 Invitation request 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 Hello! {{ sender }} has created invitation request for the following user to join {{ name }} {{ type }} in {{ role }} role. {% if invitation.civil_number %} Civil number: {{ invitation.civil_number }} {% endif %} {% if invitation.tax_number %} Tax number: {{ invitation.tax_number }} {% endif %} {% if invitation.phone_number %} Phone number: {{ invitation.phone_number }} {% endif %} E-mail: {{ invitation.email }} {% if invitation.full_name %} Full name: {{ invitation.full_name }} {% endif %} {% if invitation.native_name %} Native name: {{ invitation.native_name }} {% endif %} {% if invitation.organization %} Organization: {{ invitation.organization }} {% endif %} {% if invitation.job_title %} Job title: {{ invitation.job_title }} {% endif %} Please visit the link below to approve invitation: {{ approve_link }} Alternatively, you may reject invitation: {{ reject_link }} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Invitation request</title> </head> <body> <p> Hello! </p> <p> {{ sender }} has created invitation request for the following user to join {{ name }} {{ type }} in {{ role }} role. </p> {% if invitation.civil_number %} <p> Civil number: {{ invitation.civil_number }} </p> {% endif %} {% if invitation.tax_number %} <p> Tax number: {{ invitation.tax_number }} </p> {% endif %} {% if invitation.phone_number %} <p> Phone number: {{ invitation.phone_number }} </p> {% endif %} <p> E-mail: {{ invitation.email }} </p> {% if invitation.full_name %} <p> Full name: {{ invitation.full_name }} </p> {% endif %} {% if invitation.native_name %} <p> Native name: {{ invitation.native_name }} </p> {% endif %} {% if invitation.organization %} <p> Organization: {{ invitation.organization }} </p> {% endif %} {% if invitation.job_title %} <p> Job title: {{ invitation.job_title }} </p> {% endif %} <p> Please <a href=\"{{ approve_link }}\">approve</a> or <a href=\"{{ reject_link }}\">reject</a> invitation. </p> </body> </html> users.permission_request_submitted A notification of a submitted invitation request Templates users/permission_request_submitted_subject.txt users/permission_request_submitted_message.txt users/permission_request_submitted_message.html 1 Permission request has been submitted. 1 2 3 4 5 Hello! User {{ permission_request.created_by }} with email {{ permission_request.created_by.email }} created permission request for {{ permission_request.invitation }}. Please visit the link below to approve or reject permission request: {{ requests_link }}. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Permission request has been submitted.</title> </head> <body> <p> Hello! </p> <p> User {{ permission_request.created_by }} with email {{ permission_request.created_by.email }} created permission request for {{ permission_request.invitation }}. </p> <p> Please visit the <a href=\"{{ requests_link }}\">link</a> to approve or reject permission request. </p> </body> </html>","title":"Notifications"},{"location":"admin-guide/metal-configuration/notifications/#notifications","text":"","title":"Notifications"},{"location":"admin-guide/metal-configuration/notifications/#cloudrock_metalbooking","text":"","title":"CLOUDROCK_METAL.BOOKING"},{"location":"admin-guide/metal-configuration/notifications/#bookingnotification","text":"A notification about upcoming bookings","title":"booking.notification"},{"location":"admin-guide/metal-configuration/notifications/#templates","text":"booking/notification_subject.txt booking/notification_message.txt booking/notification_message.html 1 Reminder about upcoming booking. 1 2 3 4 5 6 Hello! Please do not forget about upcoming booking: {% for resource in resources %} {{ resource.name }}{% if not forloop.last %}, {% endif %} {% endfor %}. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Reminder about upcoming booking.</title> </head> <body> <p> Hello! </p> <p> Please do not forget about upcoming booking: <br /> {% for resource in resources %} {{ resource.name }} {% if not forloop.last %} <br /> {% endif %} {% endfor %} </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#cloudrock_metalinvoices","text":"","title":"CLOUDROCK_METAL.INVOICES"},{"location":"admin-guide/metal-configuration/notifications/#invoicesnotification","text":"A notification of invoice","title":"invoices.notification"},{"location":"admin-guide/metal-configuration/notifications/#templates_1","text":"invoices/notification_subject.txt invoices/notification_message.txt invoices/notification_message.html 1 {{ customer }}'s invoice for {{ month }}/{{ year }} 1 2 3 4 Hello, Please follow the link below to see {{ customer }}'s accounting information for {{ month }}/{{ year }}: {{ link }} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <html xmlns=\"http://www.w3.org/1999/html\"> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>{{ customer }}'s invoice for {{ month }}/{{ year }}</title> </head> <body> <p> Dear Sir or Madam, </p> <p> Attached is invoice for services consumed by {{ customer }}'s during {{ month }}/{{ year }}. </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#invoicesupcoming_ends_notification","text":"A notification about upcoming ends","title":"invoices.upcoming_ends_notification"},{"location":"admin-guide/metal-configuration/notifications/#templates_2","text":"invoices/upcoming_ends_notification_subject.txt invoices/upcoming_ends_notification_message.txt invoices/upcoming_ends_notification_message.html 1 {{ organization_name }}'s fixed price contract {{ contract_number }} is coming to an end 1 2 3 Hello, this is a reminder that {{ organization_name }}'s fixed price contract {{ contract_number }} is ending on {{ end }}. 1 2 3 4 5 6 7 8 9 10 11 12 13 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>{{ organization_name }}'s fixed price contract {{ contract_number }} is coming to an end.</title> </head> <body> <p> Hello, <br/> this is a reminder that {{ organization_name }}'s fixed price contract {{ contract_number }} is ending on {{ end }}. </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#cloudrock_metalmarketplace","text":"","title":"CLOUDROCK_METAL.MARKETPLACE"},{"location":"admin-guide/metal-configuration/notifications/#marketplacemarketplace_resource_create_failed","text":"A notification of a failed resource creation","title":"marketplace.marketplace_resource_create_failed"},{"location":"admin-guide/metal-configuration/notifications/#templates_3","text":"marketplace/marketplace_resource_create_failed_subject.txt marketplace/marketplace_resource_create_failed_message.txt marketplace/marketplace_resource_create_failed_message.html 1 Resource {{ resource_name }} creation has failed. 1 2 3 Hello! Resource {{ resource_name }} creation has failed. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource_name }} creation has failed.</title> </head> <body> <p> Hello! </p> <p> Resource {{ resource_name }} creation has failed. </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#marketplacemarketplace_resource_create_succeeded","text":"A notification of a successful resource creation","title":"marketplace.marketplace_resource_create_succeeded"},{"location":"admin-guide/metal-configuration/notifications/#templates_4","text":"marketplace/marketplace_resource_create_succeeded_subject.txt marketplace/marketplace_resource_create_succeeded_message.txt marketplace/marketplace_resource_create_succeeded_message.html 1 Resource {{ resource_name }} has been created. 1 2 3 Hello! Resource {{ resource_name }} has been created. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource_name }} has been created.</title> </head> <body> <p> Hello! </p> <p> Resource {{ resource_name }} has been created. </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#marketplacemarketplace_resource_terminate_failed","text":"A notification of a failed resource termination","title":"marketplace.marketplace_resource_terminate_failed"},{"location":"admin-guide/metal-configuration/notifications/#templates_5","text":"marketplace/marketplace_resource_terminate_failed_subject.txt marketplace/marketplace_resource_terminate_failed_message.txt marketplace/marketplace_resource_terminate_failed_message.html 1 Resource {{ resource_name }} deletion has failed. 1 2 3 Hello! Resource {{ resource_name }} deletion has failed. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource_name }} deletion has failed.</title> </head> <body> <p> Hello! </p> <p> Resource {{ resource_name }} deletion has failed. </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#marketplacemarketplace_resource_terminate_succeeded","text":"A notification of a successful resource termination","title":"marketplace.marketplace_resource_terminate_succeeded"},{"location":"admin-guide/metal-configuration/notifications/#templates_6","text":"marketplace/marketplace_resource_terminate_succeeded_subject.txt marketplace/marketplace_resource_terminate_succeeded_message.txt marketplace/marketplace_resource_terminate_succeeded_message.html 1 Resource {{ resource_name }} has been deleted. 1 2 3 Hello! Resource {{ resource_name }} has been deleted. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource_name }} has been deleted.</title> </head> <body> <p> Hello! </p> <p> Resource {{ resource_name }} has been deleted. </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#marketplacemarketplace_resource_termination_scheduled","text":"A notification of a scheduled resource termination","title":"marketplace.marketplace_resource_termination_scheduled"},{"location":"admin-guide/metal-configuration/notifications/#templates_7","text":"marketplace/marketplace_resource_termination_scheduled_subject.txt marketplace/marketplace_resource_termination_scheduled_message.txt marketplace/marketplace_resource_termination_scheduled_message.html 1 Resource {{ resource.name }} termination has been scheduled. 1 2 3 Hello! The resource you have - {{ resource.name }} has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:\"SHORT_DATE_FORMAT\" }}. If you feel that you still want to keep it, please remove the resource end date {{ resource_url }}. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource.name }} termination has been scheduled.</title> </head> <body> <p> Hello! </p> <p> The resource you have - <a href=\"{{ resource_url }}\">{{ resource.name }}</a> has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:\"SHORT_DATE_FORMAT\" }}. If you feel that you still want to keep it, please <a href=\"{{ resource_url }}\"></a>remove the resource end date</a>. </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#marketplacemarketplace_resource_termination_scheduled_staff","text":"A notification of a resource termination","title":"marketplace.marketplace_resource_termination_scheduled_staff"},{"location":"admin-guide/metal-configuration/notifications/#templates_8","text":"marketplace/marketplace_resource_termination_scheduled_staff_subject.txt marketplace/marketplace_resource_termination_scheduled_staff_message.txt marketplace/marketplace_resource_termination_scheduled_staff_message.html 1 Resource {{ resource.name }} termination has been scheduled. 1 2 3 Hello! The resource you have - {{ resource.name }} has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:\"SHORT_DATE_FORMAT\" }}. If you feel that you still want to keep it, please remove the resource end date {{ resource_url }}. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource.name }} termination has been scheduled.</title> </head> <body> <p> Hello! </p> <p> The resource you have - <a href=\"{{ resource_url }}\">{{ resource.name }}</a> has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:\"SHORT_DATE_FORMAT\" }}. If you feel that you still want to keep it, please <a href=\"{{ resource_url }}\"></a>remove the resource end date</a>. </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#marketplacemarketplace_resource_update_failed","text":"A notification of failed resource update","title":"marketplace.marketplace_resource_update_failed"},{"location":"admin-guide/metal-configuration/notifications/#templates_9","text":"marketplace/marketplace_resource_update_failed_subject.txt marketplace/marketplace_resource_update_failed_message.txt marketplace/marketplace_resource_update_failed_message.html 1 Resource {{ resource_name }} update has failed. 1 2 3 Hello! Resource {{ resource_name }} update has failed. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource_name }} update has failed.</title> </head> <body> <p> Hello! </p> <p> Resource {{ resource_name }} update has failed. </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#marketplacemarketplace_resource_update_limits_failed","text":"A notification of failed resource limits update","title":"marketplace.marketplace_resource_update_limits_failed"},{"location":"admin-guide/metal-configuration/notifications/#templates_10","text":"marketplace/marketplace_resource_update_limits_failed_subject.txt marketplace/marketplace_resource_update_limits_failed_message.txt marketplace/marketplace_resource_update_limits_failed_message.html 1 Resource {{ resource_name }} limits update has failed. 1 2 3 Hello! Resource {{ resource_name }} limits update has failed. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource_name }} limits update has failed.</title> </head> <body> <p> Hello! </p> <p> Resource {{ resource_name }} limits update has failed. </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#marketplacemarketplace_resource_update_limits_succeeded","text":"A notification of a successful resource limit update","title":"marketplace.marketplace_resource_update_limits_succeeded"},{"location":"admin-guide/metal-configuration/notifications/#templates_11","text":"marketplace/marketplace_resource_update_limits_succeeded_subject.txt marketplace/marketplace_resource_update_limits_succeeded_message.txt marketplace/marketplace_resource_update_limits_succeeded_message.html 1 Resource {{ resource_name }} limits have been updated. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 Hello! Following request from {{ order_item_user }}, resource {{ resource_name }} limits have been updated from: {{ resource_old_limits }} to: {{ resource_limits }}. {% if support_email or support_phone %} If you have any additional questions, please contact support. {% if support_email %} Email: {{ support_email }} {% endif %} {% if support_phone %} Phone: {{ support_phone }} {% endif %} {% endif %} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource_name }} limits have been updated.</title> </head> <body> <p> Hello! </p> <p> Following request from {{ order_item_user }}, resource {{ resource_name }} limits have been updated from:<br> <blockquote> {{ resource_old_limits }} </blockquote> to: <blockquote> {{ resource_limits }} </blockquote> </p> {% if support_email or support_phone %} <p> If you have any additional questions, please contact support. </p> {% if support_email %} <p> Email: {{ support_email }} </p> {% endif %} {% if support_phone %} <p> Phone: {{ support_phone }} </p> {% endif %} {% endif %} </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#marketplacemarketplace_resource_update_succeeded","text":"A notification of a successful resource update","title":"marketplace.marketplace_resource_update_succeeded"},{"location":"admin-guide/metal-configuration/notifications/#templates_12","text":"marketplace/marketplace_resource_update_succeeded_subject.txt marketplace/marketplace_resource_update_succeeded_message.txt marketplace/marketplace_resource_update_succeeded_message.html 1 Resource {{ resource_name }} has been updated. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 Hello! Following request from {{ order_item_user }}, resource {{ resource_name }} has been updated. {% if resource_old_plan %} The plan has been changed from {{ resource_old_plan }} to {{ resource_plan }}. {% endif %} {% if support_email or support_phone %} If you have any additional questions, please contact support. {% if support_email %} Email: {{ support_email }} {% endif %} {% if support_phone %} Phone: {{ support_phone }} {% endif %} {% endif %} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Resource {{ resource_name }} has been updated.</title> </head> <body> <p> Hello! </p> <p> Following request from {{ order_item_user }}, resource {{ resource_name }} has been updated. </p> {% if resource_old_plan %} <p> The plan has been changed from {{ resource_old_plan }} to {{ resource_plan }}. </p> {% endif %} {% if support_email or support_phone %} <p> If you have any additional questions, please contact support. </p> {% if support_email %} <p> Email: {{ support_email }} </p> {% endif %} {% if support_phone %} <p> Phone: {{ support_phone }} </p> {% endif %} {% endif %} </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#marketplacenotification_about_project_ending","text":"A notification about project ending","title":"marketplace.notification_about_project_ending"},{"location":"admin-guide/metal-configuration/notifications/#templates_13","text":"marketplace/notification_about_project_ending_subject.txt marketplace/notification_about_project_ending_message.txt marketplace/notification_about_project_ending_message.html 1 Project {{ project.name }} will be deleted. 1 2 3 4 5 6 7 Dear {{ user.full_name }}, Your project {{ project.name }} is ending {% if delta == 1 %} tomorrow {% else %} in {{ delta }} days{% endif %}. End of the project will lead to termination of all resources in the project. If you are aware of that, then no actions are needed from your side. If you need to update project end date, please update it in project details {{ project_url }}. Thank you! 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Project {{ project.name }} will be deleted.</title> </head> <body> <p>Dear {{ user.full_name }},</p> <p>Your project {{ project.name }} is ending {% if delta == 1 %} tomorrow {% else %} in {{ delta }} days{% endif %}. End of the project will lead to termination of all resources in the project. <br /> If you are aware of that, then no actions are needed from your side. <br /> If you need to update project end date, please update it in project details {{ project_url }}. </p> <p>Thank you!</p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#marketplacenotification_about_stale_resources","text":"A notification about stale resources","title":"marketplace.notification_about_stale_resources"},{"location":"admin-guide/metal-configuration/notifications/#templates_14","text":"marketplace/notification_about_stale_resources_subject.txt marketplace/notification_about_stale_resources_message.txt marketplace/notification_about_stale_resources_message.html 1 Reminder about stale resources. 1 2 3 4 5 6 7 8 9 10 Hello! We noticed that you have stale resources that have not cost you anything for the last 3 months. Perhaps some of them are not needed any more? The resource names are: {% for resource in resources %} {{ resource.resource.name }} {{ resource.resource_url }} {% endfor %} Thank you! 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Reminder about stale resources.</title> </head> <body> <p> Hello! </p> <p> We noticed that you have stale resources that have not cost you anything for the last 3 months. <br /> Perhaps some of them are not needed any more?<br /> The resource names are: <ul> {% for resource in resources %} <li><a href='{{ resource.resource_url }}'>{{ resource.resource.name }}</a></li> {% endfor %} </ul> Thank you! </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#marketplacenotification_approval","text":"A notification of order approval","title":"marketplace.notification_approval"},{"location":"admin-guide/metal-configuration/notifications/#templates_15","text":"marketplace/notification_approval_subject.txt marketplace/notification_approval_message.txt marketplace/notification_approval_message.html 1 A new order by {{ order.created_by.get_full_name }} is waiting for approval. 1 2 3 Hello! A new order by {{ order.created_by.get_full_name }} is waiting for approval. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>A new order by {{ order.created_by.get_full_name }} is waiting for approval.</title> </head> <body> <p> Hello! </p> <p> Please visit <a href=\"{{ order_url }}\">{{ site_name }}</a> to find out more details. </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#marketplacenotification_service_provider_approval","text":"A notification to provider about pending order item approval","title":"marketplace.notification_service_provider_approval"},{"location":"admin-guide/metal-configuration/notifications/#templates_16","text":"marketplace/notification_service_provider_approval_subject.txt marketplace/notification_service_provider_approval_message.txt marketplace/notification_service_provider_approval_message.html 1 A new order by {{ order.created_by.get_full_name }} is waiting for approval. 1 2 3 Hello! A new order by {{ order.created_by.get_full_name }} is waiting for approval. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>A new order by {{ order.created_by.get_full_name }} is waiting for approval.</title> </head> <body> <p> Hello! </p> <p> Please visit <a href=\"{{ order_item_url }}\">{{ site_name }}</a> to find out more details. </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#marketplacenotification_usages","text":"A notification about usages","title":"marketplace.notification_usages"},{"location":"admin-guide/metal-configuration/notifications/#templates_17","text":"marketplace/notification_usages_subject.txt marketplace/notification_usages_message.txt marketplace/notification_usages_message.html 1 Reminder about missing usage reports. 1 2 3 4 5 6 7 8 Hello! Please do not forget to add usage for the resources you provide: {% regroup resources by offering as offering_list %}{% for offering in offering_list %} {{forloop.counter}}. {{ offering.grouper.name }}:{% for resource in offering.list %} - {{ resource.name }} {% endfor %}{% endfor %} You can submit resource usage via API or do it manually at {{ public_resources_url }}. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Reminder about missing usage reports.</title> </head> <body> <p> Hello! </p> <p>Please do not forget to add usage for the resources you provide:</p> {% regroup resources by offering as offering_list %} <ol> {% for offering in offering_list %} <li> {{ offering.grouper.name }}: <ul> {% for resource in offering.list %} <li>{{ resource.name }}</li> {% endfor %} </ul> </li> {% endfor %} </ol> <p> You can submit resource usage via API or do it <a href='{{ public_resources_url }}'>manually</a>. </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#cloudrock_metalmarketplace_flows","text":"","title":"CLOUDROCK_METAL.MARKETPLACE_FLOWS"},{"location":"admin-guide/metal-configuration/notifications/#marketplace_flowsflow_rejected","text":"A notification for a rejected marketplace flow","title":"marketplace_flows.flow_rejected"},{"location":"admin-guide/metal-configuration/notifications/#templates_18","text":"marketplace_flows/flow_rejected_subject.txt marketplace_flows/flow_rejected_message.txt marketplace_flows/flow_rejected_message.html 1 2 {% load i18n %} {% trans 'Your submission has been rejected' %} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 {% load i18n %} {% if flow.customer_create_request.is_rejected %} {% trans 'Customer creation request has been rejected.' %} {% if flow.customer_create_request.reviewed_by %} {% trans 'Reviewer name:' %} {{ flow.customer_create_request.reviewed_by.full_name }} {% endif %} {% if flow.customer_create_request.reviewed_at %} {% trans 'Reviewed at:' %} {{ flow.customer_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.customer_create_request.reviewed_at|time:\"H:i\" }} {% endif %} {% if flow.customer_create_request.review_comment %} {% trans 'Comment:' %} {{ flow.customer_create_request.review_comment }} {% endif %} {% endif %} {% if flow.project_create_request.is_rejected %} {% trans 'Project creation request has been rejected.' %} {% if flow.project_create_request.reviewed_by %} {% trans 'Reviewer name:' %} {{ flow.project_create_request.reviewed_by.full_name }} {% endif %} {% if flow.project_create_request.reviewed_at %} {% trans 'Reviewed at:' %} {{ flow.project_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.project_create_request.reviewed_at|time:\"H:i\" }} {% endif %} {% if flow.project_create_request.review_comment %} {% trans 'Comment:' %} {{ flow.project_create_request.review_comment }} {% endif %} {% endif %} {% if flow.resource_create_request.is_rejected %} {% trans 'Resource creation request has been rejected.' %} {% if flow.resource_create_request.reviewed_by %} {% trans 'Reviewer name:' %} {{ flow.resource_create_request.reviewed_by.full_name }} {% endif %} {% if flow.resource_create_request.reviewed_at %} {% trans 'Reviewed at:' %} {{ flow.resource_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.resource_create_request.reviewed_at|time:\"H:i\" }} {% endif %} {% if flow.resource_create_request.review_comment %} {% trans 'Comment:' %} {{ flow.resource_create_request.review_comment }} {% endif %} {% endif %} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 {% load i18n %} {% if flow.customer_create_request.is_rejected %} <p>{% trans 'Customer creation request has been rejected.' %}</p> {% if flow.customer_create_request.reviewed_by %} <p><b>{% trans 'Reviewer name:' %}</b> {{ flow.customer_create_request.reviewed_by.full_name }}</p> {% endif %} {% if flow.customer_create_request.reviewed_at %} <p><b>{% trans 'Reviewed at:' %}</b> {{ flow.customer_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.customer_create_request.reviewed_at|time:\"H:i\" }}</p> {% endif %} {% if flow.customer_create_request.review_comment %} <p><b>{% trans 'Comment:' %}</b> {{ flow.customer_create_request.review_comment }}</p> {% endif %} {% endif %} {% if flow.project_create_request.is_rejected %} <p>{% trans 'Project creation request has been rejected.' %}</p> {% if flow.project_create_request.reviewed_by %} <p><b>{% trans 'Reviewer name:' %}</b> {{ flow.project_create_request.reviewed_by.full_name }}</p> {% endif %} {% if flow.project_create_request.reviewed_at %} <p><b>{% trans 'Reviewed at:' %}</b> {{ flow.project_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.project_create_request.reviewed_at|time:\"H:i\" }}</p> {% endif %} {% if flow.project_create_request.review_comment %} <p><b>{% trans 'Comment:' %}</b> {{ flow.project_create_request.review_comment }}</p> {% endif %} {% endif %} {% if flow.resource_create_request.is_rejected %} <p>{% trans 'Resource creation request has been rejected.' %}</p> {% if flow.resource_create_request.reviewed_by %} <p><b>{% trans 'Reviewer name:' %}</b> {{ flow.resource_create_request.reviewed_by.full_name }}</p> {% endif %} {% if flow.resource_create_request.reviewed_at %} <p><b>{% trans 'Reviewed at:' %}</b> {{ flow.resource_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.resource_create_request.reviewed_at|time:\"H:i\" }}</p> {% endif %} {% if flow.resource_create_request.review_comment %} <p><b>{% trans 'Comment:' %}</b> {{ flow.resource_create_request.review_comment }}</p> {% endif %} {% endif %}","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#marketplace_flowsflow_submitted","text":"A notification for a submitted marketplace flow","title":"marketplace_flows.flow_submitted"},{"location":"admin-guide/metal-configuration/notifications/#templates_19","text":"marketplace_flows/flow_submitted_subject.txt marketplace_flows/flow_submitted_message.txt marketplace_flows/flow_submitted_message.html 1 2 {% load i18n %} {% trans 'Resource creation request has been submitted' %} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 {% load i18n %} {% load cloudrock_core %} {% trans 'Resource creation request has been submitted.' %} It has been requested by user {{ flow.requested_by.full_name }} with email {{ flow.requested_by.email }}. {% if flow.customer_create_request %} {% trans 'Customer create request details are:' %} * {% trans 'Organization name' %}: {{ flow.customer_create_request.name }} {% if flow.customer_create_request.native_name %} * {% trans 'Organization native name' %}: {{ flow.customer_create_request.native_name }} {% endif %} {% if flow.customer_create_request.abbreviation %} * {% trans 'Organization abbreviation' %}: {{ flow.customer_create_request.abbreviation }} {% endif %} {% if flow.customer_create_request.contact_details %} * {% trans 'Contact details' %}: {{ flow.customer_create_request.contact_details }} {% endif %} {% if flow.customer_create_request.agreement_number %} * {% trans 'Contact details' %}: {{ flow.customer_create_request.agreement_number }} {% endif %} {% if flow.customer_create_request.sponsor_number %} * {% trans 'External ID of the sponsor covering the costs' %}: {{ flow.customer_create_request.sponsor_number }} {% endif %} {% if flow.customer_create_request.email %} * {% trans 'Email address' %}: {{ flow.customer_create_request.email }} {% endif %} {% if flow.customer_create_request.phone_number %} * {% trans 'Phone number' %}: {{ flow.customer_create_request.phone_number }} {% endif %} {% if flow.customer_create_request.access_subnets %} * {% trans 'List of IPv4 or IPv6 CIDR addresses from where connection to self-service is allowed' %}: {{ flow.customer_create_request.access_subnets }} {% endif %} {% if flow.customer_create_request.registration_code %} * {% trans 'Registration code' %}: {{ flow.customer_create_request.registration_code }} {% endif %} {% if flow.customer_create_request.homepage %} * {% trans 'Homepage URL' %}: {{ flow.customer_create_request.homepage }} {% endif %} {% if flow.customer_create_request.domain %} * {% trans 'Organization domain' %}: {{ flow.customer_create_request.domain }} {% endif %} {% if flow.customer_create_request.address %} * {% trans 'Legal address' %}: {{ flow.customer_create_request.address }} {% endif %} {% if flow.customer_create_request.postal %} * {% trans 'Postal code' %}: {{ flow.customer_create_request.postal }} {% endif %} {% if flow.customer_create_request.bank_name %} * {% trans 'Bank name (for accounting)' %}: {{ flow.customer_create_request.bank_name }} {% endif %} {% if flow.customer_create_request.bank_account %} * {% trans 'Bank account number' %}: {{ flow.customer_create_request.bank_account }} {% endif %} {% else %} {% trans 'Organization name' %}: {{ flow.customer.name }} {% endif %} {% trans 'Project create request details are:' %} * {% trans 'Name' %}: {{ flow.project_create_request.name }} {% if flow.project_create_request.description %} * {% trans 'Description' %}: {{ flow.project_create_request.description }} {% endif %} {% if flow.project_create_request.end_date %} * {% trans 'End date' %}: {{ flow.project_create_request.end_date }} {% endif %} {% trans 'Resource create request details are:' %} * {% trans 'Name' %}: {{ flow.resource_create_request.name }} {% if flow.resource_create_request.description %} * {% trans 'Description' %}: {{ flow.resource_create_request.description }} {% endif %} {% if flow.resource_create_request.end_date %} * {% trans 'End date' %}: {{ flow.resource_create_request.end_date }} {% endif %} * {% trans 'Offering name' %}: {{ flow.resource_create_request.offering.name }} * {% trans 'Offering category' %}: {{ flow.resource_create_request.offering.category.title }} {% if flow.resource_create_request.plan %} * {% trans 'Plan' %}: {{ flow.resource_create_request.plan.name }} {% endif %} {% if flow.resource_create_request.attributes %} * {% trans 'Attributes' %}: {% for key, value in flow.resource_create_request.attributes.items|dictsort:\"0.lower\" %} {{ key }}: {{ value | pretty_json }} {% endfor %} {% endif %} {% if flow.resource_create_request.limits %} * {% trans 'Limits' %}: {% for key, value in flow.resource_create_request.limits.items|dictsort:\"0.lower\" %} {{ key }}: {{ value }} {% endfor %} {% endif %} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 {% load i18n %} {% load cloudrock_core %} <!DOCTYPE html> <html> <head> <meta charset=\"utf-8\"> <title>{% trans \"Resource creation request details\" %}</title> </head> <body> <p>It has been requested by user {{ flow.requested_by.full_name }} with email {{ flow.requested_by.email }}.</p> {% if flow.customer_create_request %} <h1>{% trans 'Customer create request details' %}</h1> <ul> <li><b>{% trans 'Organization name' %}</b>: {{ flow.customer_create_request.name }}</li> {% if flow.customer_create_request.native_name %} <li><b>{% trans 'Organization native name' %}</b>: {{ flow.customer_create_request.native_name }}</li> {% endif %} {% if flow.customer_create_request.abbreviation %} <li><b>{% trans 'Organization abbreviation' %}</b>: {{ flow.customer_create_request.abbreviation }}</li> {% endif %} {% if flow.customer_create_request.contact_details %} <li><b>{% trans 'Contact details' %}: {{ flow.customer_create_request.contact_details }}</b></li> {% endif %} {% if flow.customer_create_request.agreement_number %} <li><b>{% trans 'Contact details' %}: {{ flow.customer_create_request.agreement_number }}</b></li> {% endif %} {% if flow.customer_create_request.sponsor_number %} <li><b>{% trans 'External ID of the sponsor covering the costs' %}: {{ flow.customer_create_request.sponsor_number }}</b></li> {% endif %} {% if flow.customer_create_request.email %} <li><b>{% trans 'Email address' %}: {{ flow.customer_create_request.email }}</b></li> {% endif %} {% if flow.customer_create_request.phone_number %} <li><b>{% trans 'Phone number' %}: {{ flow.customer_create_request.phone_number }}</b></li> {% endif %} {% if flow.customer_create_request.access_subnets %} <li><b>{% trans 'List of IPv4 or IPv6 CIDR addresses from where connection to self-service is allowed' %}: {{ flow.customer_create_request.access_subnets }}</b></li> {% endif %} {% if flow.customer_create_request.registration_code %} <li><b>{% trans 'Registration code' %}: {{ flow.customer_create_request.registration_code }}</b></li> {% endif %} {% if flow.customer_create_request.homepage %} <li><b>{% trans 'Homepage URL' %}: {{ flow.customer_create_request.homepage }}</b></li> {% endif %} {% if flow.customer_create_request.domain %} <li><b>{% trans 'Organization domain' %}: {{ flow.customer_create_request.domain }}</b></li> {% endif %} {% if flow.customer_create_request.address %} <li><b>{% trans 'Legal address' %}: {{ flow.customer_create_request.address }}</b></li> {% endif %} {% if flow.customer_create_request.postal %} <li><b>{% trans 'Postal code' %}: {{ flow.customer_create_request.postal }}</b></li> {% endif %} {% if flow.customer_create_request.bank_name %} <li><b>{% trans 'Bank name (for accounting)' %}: {{ flow.customer_create_request.bank_name }}</b></li> {% endif %} {% if flow.customer_create_request.bank_account %} <li><b>{% trans 'Bank account number' %}: {{ flow.customer_create_request.bank_account }}</b></li> {% endif %} </ul> {% else %} <b>{% trans 'Organization name' %}</b>: {{ flow.customer.name }} {% endif %} <h1>{% trans 'Project create request details' %}</h1> <ul> <li><b>{% trans 'Name' %}: {{ flow.project_create_request.name }}</b></li> {% if flow.project_create_request.description %} <li><b>{% trans 'Description' %}: {{ flow.project_create_request.description }}</b></li> {% endif %} {% if flow.project_create_request.end_date %} <li><b>{% trans 'End date' %}: {{ flow.project_create_request.end_date }}</b></li> {% endif %} </ul> <h1>{% trans 'Resource create request details' %}</h1> <ul> <li><b>{% trans 'Name' %}: {{ flow.resource_create_request.name }}</b></li> {% if flow.resource_create_request.description %} <li><b>{% trans 'Description' %}: {{ flow.resource_create_request.description }}</b></li> {% endif %} {% if flow.resource_create_request.end_date %} <li><b>{% trans 'End date' %}: {{ flow.resource_create_request.end_date }}</b></li> {% endif %} <li><b>{% trans 'Offering name' %}: {{ flow.resource_create_request.offering.name }}</b></li> <li><b>{% trans 'Offering category' %}: {{ flow.resource_create_request.offering.category.title }}</b></li> {% if flow.resource_create_request.plan %} <li><b>{% trans 'Plan' %}: {{ flow.resource_create_request.plan.name }}</b></li> {% endif %} {% if flow.resource_create_request.attributes %} <li><b>{% trans 'Attributes' %}</b>: <table border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tr> <th>#</th> <th>{% trans \"NAME\" %}</th> <th>{% trans \"VALUE\" %}</th> </tr> {% for key, value in flow.resource_create_request.attributes.items|dictsort:\"0.lower\" %} <tr> <td>{{ forloop.counter }}</td> <td>{{ key }}</td> <td>{{ value | pretty_json }}</td> </tr> {% endfor %} </table> </li> {% endif %} {% if flow.resource_create_request.limits %} <li><b>{% trans 'Limits' %}</b>: <table border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tr> <th>#</th> <th>{% trans \"NAME\" %}</th> <th>{% trans \"VALUE\" %}</th> </tr> {% for key, value in flow.resource_create_request.limits.items|dictsort:\"0.lower\" %} <tr> <td>{{ forloop.counter }}</td> <td>{{ key }}</td> <td>{{ value }}</td> </tr> {% endfor %} </table> </li> {% endif %} </ul> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#cloudrock_rancher","text":"","title":"CLOUDROCK_RANCHER"},{"location":"admin-guide/metal-configuration/notifications/#ranchernotification_create_user","text":"A notification for created rancher user","title":"rancher.notification_create_user"},{"location":"admin-guide/metal-configuration/notifications/#templates_20","text":"rancher/notification_create_user_subject.txt rancher/notification_create_user_message.txt rancher/notification_create_user_message.html 1 New account has been created. 1 2 3 4 Hello! User with login {{ user.username }} and temporary password {{ password }} has been created. Please go to management console {{ rancher_url }} to change the password. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>A new user account has been created for you.</title> </head> <body> <p> Hello! </p> <p> User with login {{ user.username }} and temporary password {{ password }} has been created.<br /> Please go to <a href=\"{{ rancher_url }}\">management console</a> to change the password. </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#cloudrock_corestructure","text":"","title":"CLOUDROCK_CORE.STRUCTURE"},{"location":"admin-guide/metal-configuration/notifications/#structurechange_email_request","text":"A notification of an email change request","title":"structure.change_email_request"},{"location":"admin-guide/metal-configuration/notifications/#templates_21","text":"structure/change_email_request_subject.txt structure/change_email_request_message.txt structure/change_email_request_message.html 1 Verify new email address. 1 To confirm the change of email address from {{ request.user.email }} to {{ request.email }}, follow the {{ link }}. 1 <p>To confirm the change of email address from {{ request.user.email }} to {{ request.email }}, follow the <a href=\"{{ link }}\">link</a>.</p>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#structurenotifications_profile_changes_operator","text":"A notification of changing a profile","title":"structure.notifications_profile_changes_operator"},{"location":"admin-guide/metal-configuration/notifications/#templates_22","text":"structure/notifications_profile_changes_operator_subject.txt structure/notifications_profile_changes_operator_message.txt structure/notifications_profile_changes_operator_message.html 1 Owner details have been updated 1 2 3 4 5 6 7 8 9 10 Owner of {% for o in organizations %} {{ o.name }} {% if o.abbreviation %} ({{ o.abbreviation }}){% endif %}{% if not forloop.last %}, {% endif %} {% endfor %} {{user.full_name}} (id={{ user.id }}) has changed {% for f in fields %} {{ f.name }} from {{ f.old_value }} to {{ f.new_value }}{% if not forloop.last %}, {% else %}.{% endif %} {% endfor %} 1 2 3 4 5 6 7 8 9 10 Owner of {% for o in organizations %} {{ o.name }} {% if o.abbreviation %} ({{ o.abbreviation }}){% endif %}{% if not forloop.last %}, {% endif %} {% endfor %} {{user.full_name}} (id={{ user.id }}) has changed {% for f in fields %} {{ f.name }} from {{ f.old_value }} to {{ f.new_value }}{% if not forloop.last %}, {% else %}.{% endif %} {% endfor %}","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#structurestructure_role_granted","text":"A notification of a granted role","title":"structure.structure_role_granted"},{"location":"admin-guide/metal-configuration/notifications/#templates_23","text":"structure/structure_role_granted_subject.txt structure/structure_role_granted_message.txt structure/structure_role_granted_message.html 1 Role granted. 1 Role {{ permission.role }} for {{ structure }} has been granted. 1 <p>Role {{ permission.role }} for {{ structure }} has been granted.</p>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#cloudrock_coreusers","text":"","title":"CLOUDROCK_CORE.USERS"},{"location":"admin-guide/metal-configuration/notifications/#usersinvitation_approved","text":"A notification of invitation approval","title":"users.invitation_approved"},{"location":"admin-guide/metal-configuration/notifications/#templates_24","text":"users/invitation_approved_subject.txt users/invitation_approved_message.txt users/invitation_approved_message.html 1 Account has been created 1 2 3 4 5 6 7 8 9 10 11 Hello! {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role. Please visit the link below to sign up and accept your invitation: {{ link }} Your credentials are as following. Username is {{ username }} Your password is {{ password }} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Account has been created</title> </head> <body> <p> Hello! </p> <p> {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role.<br> Please visit <a href=\"{{ link }}\">this page</a> to sign up and accept your invitation. </p> <p> Your credentials are as following. </p> <p> Your username is {{ username }} </p> <p> Your password is {{ password }} </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#usersinvitation_created","text":"A notification of invitation creation","title":"users.invitation_created"},{"location":"admin-guide/metal-configuration/notifications/#templates_25","text":"users/invitation_created_subject.txt users/invitation_created_message.txt users/invitation_created_message.html 1 Invitation to {{ name }} {{ type }} 1 2 3 4 5 Hello! {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role. Please visit the link below to sign up and accept your invitation: {{ link }} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Invitation to {{ name }} {{ type }}</title> </head> <body> <p> Hello! </p> <p> {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role.<br> Please visit <a href=\"{{ link }}\">this page</a> to sign up and accept your invitation. Please note: this invitation expires at {{ invitation.get_expiration_time|date:'d.m.Y H:i' }}! </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#usersinvitation_rejected","text":"A notification of invitation rejection","title":"users.invitation_rejected"},{"location":"admin-guide/metal-configuration/notifications/#templates_26","text":"users/invitation_rejected_subject.txt users/invitation_rejected_message.txt users/invitation_rejected_message.html 1 Invitation has been rejected 1 2 3 4 5 6 7 8 9 Hello! The following invitation has been rejected. Full name: {{ invitation.full_name }} Target: {{ name }} {{ type }} Role: {{ role }} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Invitation to {{ name }} {{ type }}</title> </head> <body> <p> Hello! </p> <p> The following invitation has been rejected. </p> <p> Full name: {{ invitation.full_name }} </p> <p> Target: {{ name }} {{ type }} </p> <p> Role: {{ role }} </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#usersinvitation_requested","text":"A notification of invitation request","title":"users.invitation_requested"},{"location":"admin-guide/metal-configuration/notifications/#templates_27","text":"users/invitation_requested_subject.txt users/invitation_requested_message.txt users/invitation_requested_message.html 1 Invitation request 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 Hello! {{ sender }} has created invitation request for the following user to join {{ name }} {{ type }} in {{ role }} role. {% if invitation.civil_number %} Civil number: {{ invitation.civil_number }} {% endif %} {% if invitation.tax_number %} Tax number: {{ invitation.tax_number }} {% endif %} {% if invitation.phone_number %} Phone number: {{ invitation.phone_number }} {% endif %} E-mail: {{ invitation.email }} {% if invitation.full_name %} Full name: {{ invitation.full_name }} {% endif %} {% if invitation.native_name %} Native name: {{ invitation.native_name }} {% endif %} {% if invitation.organization %} Organization: {{ invitation.organization }} {% endif %} {% if invitation.job_title %} Job title: {{ invitation.job_title }} {% endif %} Please visit the link below to approve invitation: {{ approve_link }} Alternatively, you may reject invitation: {{ reject_link }} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Invitation request</title> </head> <body> <p> Hello! </p> <p> {{ sender }} has created invitation request for the following user to join {{ name }} {{ type }} in {{ role }} role. </p> {% if invitation.civil_number %} <p> Civil number: {{ invitation.civil_number }} </p> {% endif %} {% if invitation.tax_number %} <p> Tax number: {{ invitation.tax_number }} </p> {% endif %} {% if invitation.phone_number %} <p> Phone number: {{ invitation.phone_number }} </p> {% endif %} <p> E-mail: {{ invitation.email }} </p> {% if invitation.full_name %} <p> Full name: {{ invitation.full_name }} </p> {% endif %} {% if invitation.native_name %} <p> Native name: {{ invitation.native_name }} </p> {% endif %} {% if invitation.organization %} <p> Organization: {{ invitation.organization }} </p> {% endif %} {% if invitation.job_title %} <p> Job title: {{ invitation.job_title }} </p> {% endif %} <p> Please <a href=\"{{ approve_link }}\">approve</a> or <a href=\"{{ reject_link }}\">reject</a> invitation. </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/notifications/#userspermission_request_submitted","text":"A notification of a submitted invitation request","title":"users.permission_request_submitted"},{"location":"admin-guide/metal-configuration/notifications/#templates_28","text":"users/permission_request_submitted_subject.txt users/permission_request_submitted_message.txt users/permission_request_submitted_message.html 1 Permission request has been submitted. 1 2 3 4 5 Hello! User {{ permission_request.created_by }} with email {{ permission_request.created_by.email }} created permission request for {{ permission_request.invitation }}. Please visit the link below to approve or reject permission request: {{ requests_link }}. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 <html> <head lang=\"en\"> <meta charset=\"UTF-8\"> <title>Permission request has been submitted.</title> </head> <body> <p> Hello! </p> <p> User {{ permission_request.created_by }} with email {{ permission_request.created_by.email }} created permission request for {{ permission_request.invitation }}. </p> <p> Please visit the <a href=\"{{ requests_link }}\">link</a> to approve or reject permission request. </p> </body> </html>","title":"Templates"},{"location":"admin-guide/metal-configuration/templates/","text":"Message templates cloudrock_core.logging email.html (cloudrock_core.logging) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Notifications from cloudrock_core </ title > </ head > < body > < ul > {% for event in events %} < li > {{ event.message }} < div > {{ event.created|date:\"M d H:m e\"}} </ div > </ li > {% endfor %} </ ul > </ body > </ html > cloudrock_core.structure change_email_request_message.txt (cloudrock_core.structure) 1 To confirm the change of email address from {{ request.user.email }} to {{ request.email }}, follow the {{ link }}. structure_role_granted_message.txt (cloudrock_core.structure) 1 Role {{ permission.role }} for {{ structure }} has been granted. notifications_profile_changes_operator_message.txt (cloudrock_core.structure) 1 2 3 4 5 6 7 8 9 10 Owner of {% for o in organizations %} {{ o.name }} {% if o.abbreviation %} ({{ o.abbreviation }}){% endif %}{% if not forloop.last %}, {% endif %} {% endfor %} {{user.full_name}} (id={{ user.id }}) has changed {% for f in fields %} {{ f.name }} from {{ f.old_value }} to {{ f.new_value }}{% if not forloop.last %}, {% else %}.{% endif %} {% endfor %} service_settings_description.html (cloudrock_core.structure) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 {% for name, service in services %} < div id = \"id_{{ name }}\" class = \"service-fields\" > < h4 > {{ name }} </ h4 > {% if service.fields.items %} < p > Fields: </ p > < ul > {% for name, field in service.fields.items %} < li > < code > {{ name }} </ code > {% if field.label or field.help_text %} \u2014 {% endif %} {% if field.label %} {{ field.label }} {% endif %} {% if field.help_text %} {{ field.help_text }} {% endif %} </ li > {% endfor %} </ ul > {% endif %} {% if service.extra_fields.items %} < p > Options: </ p > < ul > {% for name, field in service.extra_fields.items %} < li > < code > {{ name }} </ code > {% if field.label or field.help_text %} \u2014 {% endif %} {% if not field.required %} (optional) {% endif %} {% if field.label %} {{ field.label }} {% endif %} {% if field.help_text %} {{ field.help_text }} {% endif %} </ li > {% endfor %} </ ul > {% endif %} </ div > {% endfor %} notifications_profile_changes_operator_subject.txt (cloudrock_core.structure) 1 Owner details have been updated structure_role_granted_subject.txt (cloudrock_core.structure) 1 Role granted. change_email_request_subject.txt (cloudrock_core.structure) 1 Verify new email address. change_email_request_message.html (cloudrock_core.structure) 1 < p > To confirm the change of email address from {{ request.user.email }} to {{ request.email }}, follow the < a href = \"{{ link }}\" > link </ a > . </ p > notifications_profile_changes.html (cloudrock_core.structure) 1 2 3 4 5 User {{user.full_name}} (id={{ user.id }}) profile has been updated: {% for f in fields %} {{ f.name }} from {{ f.old_value }} to {{ f.new_value }}{% if not forloop.last %}, {% else %}.{% endif %} {% endfor %} notifications_profile_changes_operator_message.html (cloudrock_core.structure) 1 2 3 4 5 6 7 8 9 10 Owner of {% for o in organizations %} {{ o.name }} {% if o.abbreviation %} ({{ o.abbreviation }}){% endif %}{% if not forloop.last %}, {% endif %} {% endfor %} {{user.full_name}} (id={{ user.id }}) has changed {% for f in fields %} {{ f.name }} from {{ f.old_value }} to {{ f.new_value }}{% if not forloop.last %}, {% else %}.{% endif %} {% endfor %} structure_role_granted_message.html (cloudrock_core.structure) 1 < p > Role {{ permission.role }} for {{ structure }} has been granted. </ p > cloudrock_core.users invitation_created_message.html (cloudrock_core.users) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Invitation to {{ name }} {{ type }} </ title > </ head > < body > < p > Hello! </ p > < p > {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role. < br > Please visit < a href = \"{{ link }}\" > this page </ a > to sign up and accept your invitation. Please note: this invitation expires at {{ invitation.get_expiration_time|date:'d.m.Y H:i' }}! </ p > </ body > </ html > invitation_requested_message.txt (cloudrock_core.users) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 Hello! {{ sender }} has created invitation request for the following user to join {{ name }} {{ type }} in {{ role }} role. {% if invitation.civil_number %} Civil number: {{ invitation.civil_number }} {% endif %} {% if invitation.tax_number %} Tax number: {{ invitation.tax_number }} {% endif %} {% if invitation.phone_number %} Phone number: {{ invitation.phone_number }} {% endif %} E-mail: {{ invitation.email }} {% if invitation.full_name %} Full name: {{ invitation.full_name }} {% endif %} {% if invitation.native_name %} Native name: {{ invitation.native_name }} {% endif %} {% if invitation.organization %} Organization: {{ invitation.organization }} {% endif %} {% if invitation.job_title %} Job title: {{ invitation.job_title }} {% endif %} Please visit the link below to approve invitation: {{ approve_link }} Alternatively, you may reject invitation: {{ reject_link }} invitation_requested_subject.txt (cloudrock_core.users) 1 Invitation request invitation_rejected_message.html (cloudrock_core.users) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Invitation to {{ name }} {{ type }} </ title > </ head > < body > < p > Hello! </ p > < p > The following invitation has been rejected. </ p > < p > Full name: {{ invitation.full_name }} </ p > < p > Target: {{ name }} {{ type }} </ p > < p > Role: {{ role }} </ p > </ body > </ html > invitation_created_subject.txt (cloudrock_core.users) 1 Invitation to {{ name }} {{ type }} invitation_rejected_subject.txt (cloudrock_core.users) 1 Invitation has been rejected invitation_rejected_message.txt (cloudrock_core.users) 1 2 3 4 5 6 7 8 9 Hello! The following invitation has been rejected. Full name: {{ invitation.full_name }} Target: {{ name }} {{ type }} Role: {{ role }} permission_request_submitted_message.txt (cloudrock_core.users) 1 2 3 4 5 Hello! User {{ permission_request.created_by }} with email {{ permission_request.created_by.email }} created permission request for {{ permission_request.invitation }}. Please visit the link below to approve or reject permission request: {{ requests_link }}. permission_request_submitted_message.html (cloudrock_core.users) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Permission request has been submitted. </ title > </ head > < body > < p > Hello! </ p > < p > User {{ permission_request.created_by }} with email {{ permission_request.created_by.email }} created permission request for {{ permission_request.invitation }}. </ p > < p > Please visit the < a href = \"{{ requests_link }}\" > link </ a > to approve or reject permission request. </ p > </ body > </ html > invitation_created_message.txt (cloudrock_core.users) 1 2 3 4 5 Hello! {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role. Please visit the link below to sign up and accept your invitation: {{ link }} invitation_approved_message.html (cloudrock_core.users) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Account has been created </ title > </ head > < body > < p > Hello! </ p > < p > {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role. < br > Please visit < a href = \"{{ link }}\" > this page </ a > to sign up and accept your invitation. </ p > < p > Your credentials are as following. </ p > < p > Your username is {{ username }} </ p > < p > Your password is {{ password }} </ p > </ body > </ html > invitation_requested_message.html (cloudrock_core.users) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Invitation request </ title > </ head > < body > < p > Hello! </ p > < p > {{ sender }} has created invitation request for the following user to join {{ name }} {{ type }} in {{ role }} role. </ p > {% if invitation.civil_number %} < p > Civil number: {{ invitation.civil_number }} </ p > {% endif %} {% if invitation.tax_number %} < p > Tax number: {{ invitation.tax_number }} </ p > {% endif %} {% if invitation.phone_number %} < p > Phone number: {{ invitation.phone_number }} </ p > {% endif %} < p > E-mail: {{ invitation.email }} </ p > {% if invitation.full_name %} < p > Full name: {{ invitation.full_name }} </ p > {% endif %} {% if invitation.native_name %} < p > Native name: {{ invitation.native_name }} </ p > {% endif %} {% if invitation.organization %} < p > Organization: {{ invitation.organization }} </ p > {% endif %} {% if invitation.job_title %} < p > Job title: {{ invitation.job_title }} </ p > {% endif %} < p > Please < a href = \"{{ approve_link }}\" > approve </ a > or < a href = \"{{ reject_link }}\" > reject </ a > invitation. </ p > </ body > </ html > invitation_approved_subject.txt (cloudrock_core.users) 1 Account has been created invitation_approved_message.txt (cloudrock_core.users) 1 2 3 4 5 6 7 8 9 10 11 Hello! {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role. Please visit the link below to sign up and accept your invitation: {{ link }} Your credentials are as following. Username is {{ username }} Your password is {{ password }} permission_request_submitted_subject.txt (cloudrock_core.users) 1 Permission request has been submitted. cloudrock_metal.booking notification_subject.txt (cloudrock_metal.booking) 1 Reminder about upcoming booking. notification_message.html (cloudrock_metal.booking) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Reminder about upcoming booking. </ title > </ head > < body > < p > Hello! </ p > < p > Please do not forget about upcoming booking: < br /> {% for resource in resources %} {{ resource.name }} {% if not forloop.last %} < br /> {% endif %} {% endfor %} </ p > </ body > </ html > notification_message.txt (cloudrock_metal.booking) 1 2 3 4 5 6 Hello! Please do not forget about upcoming booking: {% for resource in resources %} {{ resource.name }}{% if not forloop.last %}, {% endif %} {% endfor %}. cloudrock_metal.invoices upcoming_ends_notification_message.txt (cloudrock_metal.invoices) 1 2 3 Hello, this is a reminder that {{ organization_name }}'s fixed price contract {{ contract_number }} is ending on {{ end }}. report_subject.txt (cloudrock_metal.invoices) 1 Cloudrock accounting report for {{ month }}/{{ year }} upcoming_ends_notification_subject.txt (cloudrock_metal.invoices) 1 {{ organization_name }}'s fixed price contract {{ contract_number }} is coming to an end upcoming_ends_notification_message.html (cloudrock_metal.invoices) 1 2 3 4 5 6 7 8 9 10 11 12 13 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > {{ organization_name }}'s fixed price contract {{ contract_number }} is coming to an end. </ title > </ head > < body > < p > Hello, < br /> this is a reminder that {{ organization_name }}'s fixed price contract {{ contract_number }} is ending on {{ end }}. </ p > </ body > </ html > monthly_invoicing_reports.html (cloudrock_metal.invoices) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 {% load i18n %} {% load static %} {% load humanize %} <!DOCTYPE html> < html lang = \"en\" > < head > < meta charset = \"UTF-8\" > < style type = \"text/css\" > { % include \"./style.css\" % } </ style > </ head > < body > < h2 > {% trans 'Fixed price contracts:' %} </ h2 > {% if contracts %} < table class = \"invoice-table\" > < thead > < tr > < th ></ th > < th > {% trans 'Organization' %} </ th > < th > {% trans 'Contract end date' %} </ th > < th > {% trans 'Till the end of contract. [days]' %} </ th > < th > {% trans 'Contract sum' %} </ th > < th > {% trans 'Payment sum' %} </ th > </ tr > </ thead > < tbody > {% for contract in contracts %} < tr > < th > {{ forloop.counter }} </ th > < td > {{ contract.name }} </ td > < td > {{ contract.end|date:\"Y-m-d\"|default_if_none:\"\" }} </ td > < td {% if contract . end_date_alarm %} class = \"text-danger\" {% endif %} > {{ contract.till_end|default_if_none:\"\" }} </ td > < td {% if contract . payments_alarm %} class = \"text-danger\" {% endif %} > {{ contract.contract_sum|default_if_none:0|floatformat:\"2\"|intcomma }} </ td > < td {% if contract . payments_alarm %} class = \"text-danger\" {% endif %} > {{ contract.payments_sum|default_if_none:0|floatformat:\"2\"|intcomma }} </ td > </ tr > {% endfor %} </ tbody > </ table > {% else %} < p > {% trans 'Contracts do not exist.' %} </ p > {% endif %} < h2 > {% blocktrans %}Invoices for month {{ month }}-{{ year }}:{% endblocktrans %} </ h2 > < table class = \"invoice-table\" > < thead > < tr > < th ></ th > < th > {% trans 'Organization' %} </ th > < th > {% trans 'Invoice date' %} </ th > < th > {% trans 'Invoice sum' %} </ th > </ tr > </ thead > < tbody > {% for invoice in invoices %} < tr > < th > {{ forloop.counter }} </ th > < td > {% if invoice.customer.abbreviation %} {{ invoice.customer.abbreviation }} {% else %} {{ invoice.customer.name }} {% endif %} </ td > < td > {{ invoice.invoice_date|date:\"Y-m-d\" }} </ td > < td > {{ invoice.total|floatformat:\"2\"|intcomma }} </ td > </ tr > {% endfor %} </ tbody > </ table > </ body > </ html > invoice.html (cloudrock_metal.invoices) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 {% load i18n %} {% load humanize %} <!DOCTYPE html> < html lang = \"en\" > < head > < meta charset = \"UTF-8\" > < title > Invoice </ title > < style type = \"text/css\" > { % include \"cloudrock_core/font.css\" % } { % include \"./style.css\" % } </ style > </ head > < body > {% if deployment_logo %} < div id = \"logo\" > < img src = \"data:image/png;base64,{{ deployment_logo }}\" > </ div > {% endif %} < h1 > {% trans \"Invoice No.\" %} {{ invoice.number|upper }} </ h1 > < br > < div class = \"text-right\" > < strong > {% trans \"Invoice date\" %}: </ strong > {% if invoice.invoice_date %} {{ invoice.invoice_date|date:\"Y-m-d\" }} {% else %} {% trans \"Pending\" %} {% endif %} < br /> {% if invoice.due_date %} < strong > {% trans \"Due date\" %}: </ strong > {{ invoice.due_date|date:\"Y-m-d\" }} < br /> {% endif %} < strong > {% trans \"Invoice period\" %}: </ strong > {{ invoice.year }}-{{ invoice.month }} < br /> </ div > < div > < h3 class = \"name\" > From </ h3 > < div >< strong > {{ issuer_details.company }} </ strong ></ div > < div > {{ issuer_details.address }} </ div > < div > {{ issuer_details.country }}, {{ issuer_details.postal }} </ div > < div >< abbr > P: </ abbr > ({{ issuer_details.phone.country_code }}) {{ issuer_details.phone.national_number }} </ div > < div > {{ issuer_details.bank }}, {{ issuer_details.account }} </ div > < div >< abbr > {% trans \"VAT\" %}: </ abbr > {{ issuer_details.vat_code }} </ div > < div > {{ issuer_details.email }} </ div > </ div > < div > < h3 class = \"name\" > To </ h3 > < div >< strong > {{ invoice.customer.name }} </ strong ></ div > {% if invoice.customer.address %} < div > {{ invoice.customer.address }} </ div > {% endif %} {% if invoice.customer.country and invoice.customer.postal %} < div > {{ invoice.customer.country }}, {{ invoice.customer.postal }} </ div > {% endif %} {% if invoice.customer.phone_number %} < div >< abbr > P: </ abbr > {{ invoice.customer.phone_number }} </ div > {% endif %} {% if invoice.customer.bank_name and invoice.customer.bank_account %} < div > {{ invoice.customer.bank_name }}, {{ invoice.customer.bank_account }} </ div > {% endif %} {% if customer.vat_code %} < div >< abbr > {% trans \"VAT\" %}: </ abbr > {{ customer.vat_code }} </ div > {% endif %} < div > {{ invoice.customer.email }} </ div > </ div > < div class = \"m-t\" > < table class = \"invoice-table\" > < tr > < th > Item </ th > < th > Quantity </ th > < th > Unit price </ th > < th > Total price </ th > </ tr > {% regroup items|dictsort:\"project_name\" by project_name as project_list %} {% for project in project_list %} < tr > < td colspan = \"4\" >< h3 > {{ project.grouper }} </ h3 ></ td > </ tr > {% for item in project.list %} < tr > < td > < strong > {{ item.name }} </ strong > < div > < small > {% trans \"Start time\" %}: {{ item.start | date:\"Y-m-d H:i\" }}. {% trans \"End time\" %}: {{ item.end | date:\"Y-m-d H:i\" }}. </ small > </ div > </ td > < td > {{ item.quantity }} </ td > < td > {{ currency }} {{ item.unit_price | floatformat:2 | intcomma }} </ td > < td > {{ currency }} {{ item.total | floatformat:2 | intcomma }} </ td > </ tr > {% endfor %} {% endfor %} </ table > </ div > < table class = \"m-t invoice-total\" > < tr > < td >< strong > {% trans \"Subtotal\" %} </ strong ></ td > < td > {{ currency }} {{ invoice.price | floatformat:2 | intcomma}} </ td > </ tr > {% if invoice.tax %} < tr > < td >< strong > {% trans \"VAT\" %} </ strong ></ td > < td > {{ currency }} {{ invoice.tax | floatformat:2 | intcomma}} </ td > </ tr > {% endif %} < tr > < td >< strong > {% trans \"TOTAL\" %} </ strong ></ td > < td > {{ currency }} {{ invoice.total | floatformat:2 | intcomma}} </ td > </ tr > </ table > </ body > </ html > notification_subject.txt (cloudrock_metal.invoices) 1 {{ customer }}'s invoice for {{ month }}/{{ year }} notification_message.html (cloudrock_metal.invoices) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 < html xmlns = \"http://www.w3.org/1999/html\" > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > {{ customer }}'s invoice for {{ month }}/{{ year }} </ title > </ head > < body > < p > Dear Sir or Madam, </ p > < p > Attached is invoice for services consumed by {{ customer }}'s during {{ month }}/{{ year }}. </ p > </ body > </ html > report_body.txt (cloudrock_metal.invoices) 1 Attached is an accounting report for {{ month }}/{{ year }}. notification_message.txt (cloudrock_metal.invoices) 1 2 3 4 Hello, Please follow the link below to see {{ customer }}'s accounting information for {{ month }}/{{ year }}: {{ link }} cloudrock_metal.marketplace marketplace_resource_create_succeeded_subject.txt (cloudrock_metal.marketplace) 1 Resource {{ resource_name }} has been created. marketplace_resource_update_limits_succeeded_subject.txt (cloudrock_metal.marketplace) 1 Resource {{ resource_name }} limits have been updated. marketplace_resource_update_limits_failed_message.txt (cloudrock_metal.marketplace) 1 2 3 Hello! Resource {{ resource_name }} limits update has failed. notification_service_provider_approval_subject.txt (cloudrock_metal.marketplace) 1 A new order by {{ order.created_by.get_full_name }} is waiting for approval. notification_about_stale_resources_message.html (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Reminder about stale resources. </ title > </ head > < body > < p > Hello! </ p > < p > We noticed that you have stale resources that have not cost you anything for the last 3 months. < br /> Perhaps some of them are not needed any more? < br /> The resource names are: < ul > {% for resource in resources %} < li >< a href = '{{ resource.resource_url }}' > {{ resource.resource.name }} </ a ></ li > {% endfor %} </ ul > Thank you! </ p > </ body > </ html > notification_approval_message.html (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > A new order by {{ order.created_by.get_full_name }} is waiting for approval. </ title > </ head > < body > < p > Hello! </ p > < p > Please visit < a href = \"{{ order_url }}\" > {{ site_name }} </ a > to find out more details. </ p > </ body > </ html > marketplace_resource_termination_scheduled_staff_subject.txt (cloudrock_metal.marketplace) 1 Resource {{ resource.name }} termination has been scheduled. notification_service_provider_approval_message.txt (cloudrock_metal.marketplace) 1 2 3 Hello! A new order by {{ order.created_by.get_full_name }} is waiting for approval. marketplace_resource_create_failed_message.txt (cloudrock_metal.marketplace) 1 2 3 Hello! Resource {{ resource_name }} creation has failed. marketplace_resource_update_failed_message.txt (cloudrock_metal.marketplace) 1 2 3 Hello! Resource {{ resource_name }} update has failed. marketplace_resource_create_failed_message.html (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource_name }} creation has failed. </ title > </ head > < body > < p > Hello! </ p > < p > Resource {{ resource_name }} creation has failed. </ p > </ body > </ html > marketplace_resource_termination_scheduled_message.html (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource.name }} termination has been scheduled. </ title > </ head > < body > < p > Hello! </ p > < p > The resource you have - < a href = \"{{ resource_url }}\" > {{ resource.name }} </ a > has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:\"SHORT_DATE_FORMAT\" }}. If you feel that you still want to keep it, please < a href = \"{{ resource_url }}\" ></ a > remove the resource end date </ a > . </ p > </ body > </ html > marketplace_resource_terminate_succeeded_message.txt (cloudrock_metal.marketplace) 1 2 3 Hello! Resource {{ resource_name }} has been deleted. notification_usages_message.html (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Reminder about missing usage reports. </ title > </ head > < body > < p > Hello! </ p > < p > Please do not forget to add usage for the resources you provide: </ p > {% regroup resources by offering as offering_list %} < ol > {% for offering in offering_list %} < li > {{ offering.grouper.name }}: < ul > {% for resource in offering.list %} < li > {{ resource.name }} </ li > {% endfor %} </ ul > </ li > {% endfor %} </ ol > < p > You can submit resource usage via API or do it < a href = '{{ public_resources_url }}' > manually </ a > . </ p > </ body > </ html > marketplace_resource_update_succeeded_message.html (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource_name }} has been updated. </ title > </ head > < body > < p > Hello! </ p > < p > Following request from {{ order_item_user }}, resource {{ resource_name }} has been updated. </ p > {% if resource_old_plan %} < p > The plan has been changed from {{ resource_old_plan }} to {{ resource_plan }}. </ p > {% endif %} {% if support_email or support_phone %} < p > If you have any additional questions, please contact support. </ p > {% if support_email %} < p > Email: {{ support_email }} </ p > {% endif %} {% if support_phone %} < p > Phone: {{ support_phone }} </ p > {% endif %} {% endif %} </ body > </ html > marketplace_resource_update_failed_subject.txt (cloudrock_metal.marketplace) 1 Resource {{ resource_name }} update has failed. marketplace_resource_update_limits_failed_subject.txt (cloudrock_metal.marketplace) 1 Resource {{ resource_name }} limits update has failed. marketplace_resource_update_failed_message.html (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource_name }} update has failed. </ title > </ head > < body > < p > Hello! </ p > < p > Resource {{ resource_name }} update has failed. </ p > </ body > </ html > marketplace_resource_terminate_failed_message.html (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource_name }} deletion has failed. </ title > </ head > < body > < p > Hello! </ p > < p > Resource {{ resource_name }} deletion has failed. </ p > </ body > </ html > marketplace_resource_update_limits_succeeded_message.txt (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 Hello! Following request from {{ order_item_user }}, resource {{ resource_name }} limits have been updated from: {{ resource_old_limits }} to: {{ resource_limits }}. {% if support_email or support_phone %} If you have any additional questions, please contact support. {% if support_email %} Email: {{ support_email }} {% endif %} {% if support_phone %} Phone: {{ support_phone }} {% endif %} {% endif %} marketplace_resource_terminate_succeeded_message.html (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource_name }} has been deleted. </ title > </ head > < body > < p > Hello! </ p > < p > Resource {{ resource_name }} has been deleted. </ p > </ body > </ html > marketplace_resource_terminate_failed_subject.txt (cloudrock_metal.marketplace) 1 Resource {{ resource_name }} deletion has failed. marketplace_resource_termination_scheduled_staff_message.html (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource.name }} termination has been scheduled. </ title > </ head > < body > < p > Hello! </ p > < p > The resource you have - < a href = \"{{ resource_url }}\" > {{ resource.name }} </ a > has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:\"SHORT_DATE_FORMAT\" }}. If you feel that you still want to keep it, please < a href = \"{{ resource_url }}\" ></ a > remove the resource end date </ a > . </ p > </ body > </ html > marketplace_plan_template.txt (cloudrock_metal.marketplace) 1 2 3 Plan: {{ plan.name }}{% for component in components %} {{component.name}}; amount: {{component.amount}}; price: {{component.price|floatformat }}; {% endfor %} marketplace_resource_create_succeeded_message.html (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource_name }} has been created. </ title > </ head > < body > < p > Hello! </ p > < p > Resource {{ resource_name }} has been created. </ p > </ body > </ html > notification_about_project_ending_subject.txt (cloudrock_metal.marketplace) 1 Project {{ project.name }} will be deleted. notification_approval_message.txt (cloudrock_metal.marketplace) 1 2 3 Hello! A new order by {{ order.created_by.get_full_name }} is waiting for approval. order.html (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 {% load i18n %} {% load humanize %} {% load cloudrock_core %} {% load cloudrock_marketplace %} <!DOCTYPE html> < html lang = \"en\" > < head > < meta charset = \"utf-8\" > < title > {% trans \"Marketplace Order Details\" %} </ title > < style > { % include \"cloudrock_core/font.css\" % } { % include \"./style.css\" % } </ style > </ head > < body > < header class = \"clearfix\" > < div id = \"logo\" > {% if deployment_logo %} < img src = \"data:image/png;base64,{{ deployment_logo }}\" > {% endif %} </ div > < div id = \"company\" > < h2 class = \"name\" > {{ deployment_name }} </ h2 > {% if deployment_address %} < div > {{ deployment_address }} </ div > {% endif %} {% if deployment_phone %} < div > {{ deployment_phone }} </ div > {% endif %} {% if deployment_email %} < div > {{ deployment_email }} </ div > {% endif %} </ div > </ header > < main > < div id = \"details\" class = \"clearfix\" > < div id = \"client\" > < div > < span > {% trans \"Requested by\" %}: </ span > {{ order.created_by.full_name }} ({{ order.created_by.email }}) </ div > < div > < span > {% trans \"Requested at\" %}: </ span > {{ order.created|date:\"SHORT_DATE_FORMAT\" }} {{ order.created|time:\"H:i\" }} </ div > {% if order.approved_by %} < div > < span > {% trans \"Approved by\" %}: </ span > {{ order.approved_by.full_name }} ({{ order.approved_by.email }}) </ div > {% endif %} {% if order.approved_at %} < div > < span > {% trans \"Approved at\" %}: </ span > {{ order.approved_at|date:\"SHORT_DATE_FORMAT\" }} {{ order.approved_at|time:\"H:i\" }} </ div > {% endif %} </ div > < div id = \"invoice\" > < h1 > {% trans \"Marketplace order\" %} </ h1 > < div class = \"date\" > UUID: {{ order.uuid|upper }} </ div > </ div > </ div > < table border = \"0\" cellspacing = \"0\" cellpadding = \"0\" > < tr > < th class = \"no\" > # </ th > < th class = \"desc\" > {% trans \"DESCRIPTION\" %} </ th > < th class = \"unit\" > {% trans \"PLAN\" %} </ th > < th class = \"total\" > {% trans \"PRICE\" %} </ th > </ tr > {% for item in order.items.all %} < tr > < td class = \"no\" > {{ forloop.counter }} </ td > < td class = \"desc\" > < h3 > {% if item.attributes.name %} {{ item.attributes.name }} {% elif item.offering.name %} {{ item.offering.name }} {% endif %} </ h3 > {% if item.attributes.description %} {{ item.attributes.description }} {% elif item.offering.description %} {{ item.offering.description | safe }} {% endif %} </ td > < td class = \"unit\" > {{ item.plan.name }} </ td > < td class = \"total\" > {{ currency }} {{ item.cost | floatformat:2 | intcomma }} </ td > </ tr > {% endfor %} < tr class = \"foot\" > < td colspan = \"3\" > {% trans \"TOTAL\" %} </ td > < td > {{ currency }} {{ order.total_cost | floatformat:2 | intcomma}} </ td > </ tr > </ table > < h3 > {% trans \"Details of order items\" %} </ h3 > {% for item in order.items.all %} < header class = \"clearfix\" > {{ forloop.counter }}. {% if item.attributes.name %} {{ item.attributes.name }} {% elif item.offering.name %} {{ item.offering.name }} {% endif %} </ header > {% if item.attributes %} < p > {% trans \"Offering request details\" %} </ p > < table border = \"0\" cellspacing = \"0\" cellpadding = \"0\" > < tr > < th class = \"no\" > # </ th > < th class = \"desc\" > {% trans \"NAME\" %} </ th > < th class = \"desc\" > {% trans \"VALUE\" %} </ th > </ tr > {% for key, value in item.safe_attributes.items|dictsort:\"0.lower\" %} < tr > < td class = \"no\" > {{ forloop.counter }} </ td > < td class = \"desc\" > {{ key }} </ td > < td class = \"desc\" > {{ value | pretty_json }} </ td > </ tr > {% endfor %} </ table > {% endif %} {% if item.plan %} < p > {% trans \"Billing plan components\" %} </ p > < table border = \"0\" cellspacing = \"0\" cellpadding = \"0\" > < tr > < th class = \"no\" > # </ th > < th class = \"desc\" > {% trans \"NAME\" %} </ th > < th class = \"desc\" > {% trans \"TYPE\" %} </ th > < th class = \"unit\" > {% trans \"AMOUNT\" %} </ th > < th class = \"total\" > {% trans \"PRICE PER UNIT\" %} </ th > </ tr > {% for component in item.plan.components.all %} < tr > < td class = \"no\" > {{ forloop.counter }} </ td > < td class = \"desc\" > {{ component.component.name }} </ td > < td class = \"desc\" > {{ component.component.get_billing_type_display }} </ td > < td class = \"unit\" > {% get_invoice_item_component_amount item component %} {{ component.component.measured_unit }} </ td > < td class = \"total\" > {{ currency }} {{ component.price | floatformat:4 | intcomma }} </ td > </ tr > {% endfor %} < tr class = \"foot\" > < td colspan = \"4\" > {% trans \"TOTAL\" %} </ td > < td > {{ currency }} {{ item.cost | floatformat:2 | intcomma}} </ td > </ tr > </ table > {% endif %} {% endfor %} </ main > </ body > </ html > notification_about_stale_resources_subject.txt (cloudrock_metal.marketplace) 1 Reminder about stale resources. marketplace_resource_terminate_succeeded_subject.txt (cloudrock_metal.marketplace) 1 Resource {{ resource_name }} has been deleted. notification_about_project_ending_message.txt (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 Dear {{ user.full_name }}, Your project {{ project.name }} is ending {% if delta == 1 %} tomorrow {% else %} in {{ delta }} days{% endif %}. End of the project will lead to termination of all resources in the project. If you are aware of that, then no actions are needed from your side. If you need to update project end date, please update it in project details {{ project_url }}. Thank you! notification_service_provider_approval_message.html (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > A new order by {{ order.created_by.get_full_name }} is waiting for approval. </ title > </ head > < body > < p > Hello! </ p > < p > Please visit < a href = \"{{ order_item_url }}\" > {{ site_name }} </ a > to find out more details. </ p > </ body > </ html > marketplace_resource_update_succeeded_message.txt (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 Hello! Following request from {{ order_item_user }}, resource {{ resource_name }} has been updated. {% if resource_old_plan %} The plan has been changed from {{ resource_old_plan }} to {{ resource_plan }}. {% endif %} {% if support_email or support_phone %} If you have any additional questions, please contact support. {% if support_email %} Email: {{ support_email }} {% endif %} {% if support_phone %} Phone: {{ support_phone }} {% endif %} {% endif %} notification_usages_subject.txt (cloudrock_metal.marketplace) 1 Reminder about missing usage reports. notification_approval_subject.txt (cloudrock_metal.marketplace) 1 A new order by {{ order.created_by.get_full_name }} is waiting for approval. marketplace_resource_terminate_failed_message.txt (cloudrock_metal.marketplace) 1 2 3 Hello! Resource {{ resource_name }} deletion has failed. marketplace_resource_termination_scheduled_subject.txt (cloudrock_metal.marketplace) 1 Resource {{ resource.name }} termination has been scheduled. notification_usages_message.txt (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 Hello! Please do not forget to add usage for the resources you provide: {% regroup resources by offering as offering_list %}{% for offering in offering_list %} {{forloop.counter}}. {{ offering.grouper.name }}:{% for resource in offering.list %} - {{ resource.name }} {% endfor %}{% endfor %} You can submit resource usage via API or do it manually at {{ public_resources_url }}. notification_about_stale_resources_message.txt (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 Hello! We noticed that you have stale resources that have not cost you anything for the last 3 months. Perhaps some of them are not needed any more? The resource names are: {% for resource in resources %} {{ resource.resource.name }} {{ resource.resource_url }} {% endfor %} Thank you! marketplace_resource_termination_scheduled_staff_message.txt (cloudrock_metal.marketplace) 1 2 3 Hello! The resource you have - {{ resource.name }} has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:\"SHORT_DATE_FORMAT\" }}. If you feel that you still want to keep it, please remove the resource end date {{ resource_url }}. marketplace_resource_update_limits_succeeded_message.html (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource_name }} limits have been updated. </ title > </ head > < body > < p > Hello! </ p > < p > Following request from {{ order_item_user }}, resource {{ resource_name }} limits have been updated from: < br > < blockquote > {{ resource_old_limits }} </ blockquote > to: < blockquote > {{ resource_limits }} </ blockquote > </ p > {% if support_email or support_phone %} < p > If you have any additional questions, please contact support. </ p > {% if support_email %} < p > Email: {{ support_email }} </ p > {% endif %} {% if support_phone %} < p > Phone: {{ support_phone }} </ p > {% endif %} {% endif %} </ body > </ html > marketplace_resource_update_succeeded_subject.txt (cloudrock_metal.marketplace) 1 Resource {{ resource_name }} has been updated. marketplace_resource_update_limits_failed_message.html (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource_name }} limits update has failed. </ title > </ head > < body > < p > Hello! </ p > < p > Resource {{ resource_name }} limits update has failed. </ p > </ body > </ html > marketplace_resource_create_failed_subject.txt (cloudrock_metal.marketplace) 1 Resource {{ resource_name }} creation has failed. marketplace_resource_create_succeeded_message.txt (cloudrock_metal.marketplace) 1 2 3 Hello! Resource {{ resource_name }} has been created. marketplace_resource_termination_scheduled_message.txt (cloudrock_metal.marketplace) 1 2 3 Hello! The resource you have - {{ resource.name }} has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:\"SHORT_DATE_FORMAT\" }}. If you feel that you still want to keep it, please remove the resource end date {{ resource_url }}. notification_about_project_ending_message.html (cloudrock_metal.marketplace) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Project {{ project.name }} will be deleted. </ title > </ head > < body > < p > Dear {{ user.full_name }}, </ p > < p > Your project {{ project.name }} is ending {% if delta == 1 %} tomorrow {% else %} in {{ delta }} days{% endif %}. End of the project will lead to termination of all resources in the project. < br /> If you are aware of that, then no actions are needed from your side. < br /> If you need to update project end date, please update it in project details {{ project_url }}. </ p > < p > Thank you! </ p > </ body > </ html > cloudrock_metal.marketplace_flows flow_rejected_message.html (cloudrock_metal.marketplace_flows) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 {% load i18n %} {% if flow.customer_create_request.is_rejected %} < p > {% trans 'Customer creation request has been rejected.' %} </ p > {% if flow.customer_create_request.reviewed_by %} < p >< b > {% trans 'Reviewer name:' %} </ b > {{ flow.customer_create_request.reviewed_by.full_name }} </ p > {% endif %} {% if flow.customer_create_request.reviewed_at %} < p >< b > {% trans 'Reviewed at:' %} </ b > {{ flow.customer_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.customer_create_request.reviewed_at|time:\"H:i\" }} </ p > {% endif %} {% if flow.customer_create_request.review_comment %} < p >< b > {% trans 'Comment:' %} </ b > {{ flow.customer_create_request.review_comment }} </ p > {% endif %} {% endif %} {% if flow.project_create_request.is_rejected %} < p > {% trans 'Project creation request has been rejected.' %} </ p > {% if flow.project_create_request.reviewed_by %} < p >< b > {% trans 'Reviewer name:' %} </ b > {{ flow.project_create_request.reviewed_by.full_name }} </ p > {% endif %} {% if flow.project_create_request.reviewed_at %} < p >< b > {% trans 'Reviewed at:' %} </ b > {{ flow.project_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.project_create_request.reviewed_at|time:\"H:i\" }} </ p > {% endif %} {% if flow.project_create_request.review_comment %} < p >< b > {% trans 'Comment:' %} </ b > {{ flow.project_create_request.review_comment }} </ p > {% endif %} {% endif %} {% if flow.resource_create_request.is_rejected %} < p > {% trans 'Resource creation request has been rejected.' %} </ p > {% if flow.resource_create_request.reviewed_by %} < p >< b > {% trans 'Reviewer name:' %} </ b > {{ flow.resource_create_request.reviewed_by.full_name }} </ p > {% endif %} {% if flow.resource_create_request.reviewed_at %} < p >< b > {% trans 'Reviewed at:' %} </ b > {{ flow.resource_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.resource_create_request.reviewed_at|time:\"H:i\" }} </ p > {% endif %} {% if flow.resource_create_request.review_comment %} < p >< b > {% trans 'Comment:' %} </ b > {{ flow.resource_create_request.review_comment }} </ p > {% endif %} {% endif %} flow_submitted_message.txt (cloudrock_metal.marketplace_flows) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 {% load i18n %} {% load cloudrock_core %} {% trans 'Resource creation request has been submitted.' %} It has been requested by user {{ flow.requested_by.full_name }} with email {{ flow.requested_by.email }}. {% if flow.customer_create_request %} {% trans 'Customer create request details are:' %} * {% trans 'Organization name' %}: {{ flow.customer_create_request.name }} {% if flow.customer_create_request.native_name %} * {% trans 'Organization native name' %}: {{ flow.customer_create_request.native_name }} {% endif %} {% if flow.customer_create_request.abbreviation %} * {% trans 'Organization abbreviation' %}: {{ flow.customer_create_request.abbreviation }} {% endif %} {% if flow.customer_create_request.contact_details %} * {% trans 'Contact details' %}: {{ flow.customer_create_request.contact_details }} {% endif %} {% if flow.customer_create_request.agreement_number %} * {% trans 'Contact details' %}: {{ flow.customer_create_request.agreement_number }} {% endif %} {% if flow.customer_create_request.sponsor_number %} * {% trans 'External ID of the sponsor covering the costs' %}: {{ flow.customer_create_request.sponsor_number }} {% endif %} {% if flow.customer_create_request.email %} * {% trans 'Email address' %}: {{ flow.customer_create_request.email }} {% endif %} {% if flow.customer_create_request.phone_number %} * {% trans 'Phone number' %}: {{ flow.customer_create_request.phone_number }} {% endif %} {% if flow.customer_create_request.access_subnets %} * {% trans 'List of IPv4 or IPv6 CIDR addresses from where connection to self-service is allowed' %}: {{ flow.customer_create_request.access_subnets }} {% endif %} {% if flow.customer_create_request.registration_code %} * {% trans 'Registration code' %}: {{ flow.customer_create_request.registration_code }} {% endif %} {% if flow.customer_create_request.homepage %} * {% trans 'Homepage URL' %}: {{ flow.customer_create_request.homepage }} {% endif %} {% if flow.customer_create_request.domain %} * {% trans 'Organization domain' %}: {{ flow.customer_create_request.domain }} {% endif %} {% if flow.customer_create_request.address %} * {% trans 'Legal address' %}: {{ flow.customer_create_request.address }} {% endif %} {% if flow.customer_create_request.postal %} * {% trans 'Postal code' %}: {{ flow.customer_create_request.postal }} {% endif %} {% if flow.customer_create_request.bank_name %} * {% trans 'Bank name (for accounting)' %}: {{ flow.customer_create_request.bank_name }} {% endif %} {% if flow.customer_create_request.bank_account %} * {% trans 'Bank account number' %}: {{ flow.customer_create_request.bank_account }} {% endif %} {% else %} {% trans 'Organization name' %}: {{ flow.customer.name }} {% endif %} {% trans 'Project create request details are:' %} * {% trans 'Name' %}: {{ flow.project_create_request.name }} {% if flow.project_create_request.description %} * {% trans 'Description' %}: {{ flow.project_create_request.description }} {% endif %} {% if flow.project_create_request.end_date %} * {% trans 'End date' %}: {{ flow.project_create_request.end_date }} {% endif %} {% trans 'Resource create request details are:' %} * {% trans 'Name' %}: {{ flow.resource_create_request.name }} {% if flow.resource_create_request.description %} * {% trans 'Description' %}: {{ flow.resource_create_request.description }} {% endif %} {% if flow.resource_create_request.end_date %} * {% trans 'End date' %}: {{ flow.resource_create_request.end_date }} {% endif %} * {% trans 'Offering name' %}: {{ flow.resource_create_request.offering.name }} * {% trans 'Offering category' %}: {{ flow.resource_create_request.offering.category.title }} {% if flow.resource_create_request.plan %} * {% trans 'Plan' %}: {{ flow.resource_create_request.plan.name }} {% endif %} {% if flow.resource_create_request.attributes %} * {% trans 'Attributes' %}: {% for key, value in flow.resource_create_request.attributes.items|dictsort:\"0.lower\" %} {{ key }}: {{ value | pretty_json }} {% endfor %} {% endif %} {% if flow.resource_create_request.limits %} * {% trans 'Limits' %}: {% for key, value in flow.resource_create_request.limits.items|dictsort:\"0.lower\" %} {{ key }}: {{ value }} {% endfor %} {% endif %} flow_rejected_message.txt (cloudrock_metal.marketplace_flows) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 {% load i18n %} {% if flow.customer_create_request.is_rejected %} {% trans 'Customer creation request has been rejected.' %} {% if flow.customer_create_request.reviewed_by %} {% trans 'Reviewer name:' %} {{ flow.customer_create_request.reviewed_by.full_name }} {% endif %} {% if flow.customer_create_request.reviewed_at %} {% trans 'Reviewed at:' %} {{ flow.customer_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.customer_create_request.reviewed_at|time:\"H:i\" }} {% endif %} {% if flow.customer_create_request.review_comment %} {% trans 'Comment:' %} {{ flow.customer_create_request.review_comment }} {% endif %} {% endif %} {% if flow.project_create_request.is_rejected %} {% trans 'Project creation request has been rejected.' %} {% if flow.project_create_request.reviewed_by %} {% trans 'Reviewer name:' %} {{ flow.project_create_request.reviewed_by.full_name }} {% endif %} {% if flow.project_create_request.reviewed_at %} {% trans 'Reviewed at:' %} {{ flow.project_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.project_create_request.reviewed_at|time:\"H:i\" }} {% endif %} {% if flow.project_create_request.review_comment %} {% trans 'Comment:' %} {{ flow.project_create_request.review_comment }} {% endif %} {% endif %} {% if flow.resource_create_request.is_rejected %} {% trans 'Resource creation request has been rejected.' %} {% if flow.resource_create_request.reviewed_by %} {% trans 'Reviewer name:' %} {{ flow.resource_create_request.reviewed_by.full_name }} {% endif %} {% if flow.resource_create_request.reviewed_at %} {% trans 'Reviewed at:' %} {{ flow.resource_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.resource_create_request.reviewed_at|time:\"H:i\" }} {% endif %} {% if flow.resource_create_request.review_comment %} {% trans 'Comment:' %} {{ flow.resource_create_request.review_comment }} {% endif %} {% endif %} flow_submitted_message.html (cloudrock_metal.marketplace_flows) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 {% load i18n %} {% load cloudrock_core %} <!DOCTYPE html> < html > < head > < meta charset = \"utf-8\" > < title > {% trans \"Resource creation request details\" %} </ title > </ head > < body > < p > It has been requested by user {{ flow.requested_by.full_name }} with email {{ flow.requested_by.email }}. </ p > {% if flow.customer_create_request %} < h1 > {% trans 'Customer create request details' %} </ h1 > < ul > < li >< b > {% trans 'Organization name' %} </ b > : {{ flow.customer_create_request.name }} </ li > {% if flow.customer_create_request.native_name %} < li >< b > {% trans 'Organization native name' %} </ b > : {{ flow.customer_create_request.native_name }} </ li > {% endif %} {% if flow.customer_create_request.abbreviation %} < li >< b > {% trans 'Organization abbreviation' %} </ b > : {{ flow.customer_create_request.abbreviation }} </ li > {% endif %} {% if flow.customer_create_request.contact_details %} < li >< b > {% trans 'Contact details' %}: {{ flow.customer_create_request.contact_details }} </ b ></ li > {% endif %} {% if flow.customer_create_request.agreement_number %} < li >< b > {% trans 'Contact details' %}: {{ flow.customer_create_request.agreement_number }} </ b ></ li > {% endif %} {% if flow.customer_create_request.sponsor_number %} < li >< b > {% trans 'External ID of the sponsor covering the costs' %}: {{ flow.customer_create_request.sponsor_number }} </ b ></ li > {% endif %} {% if flow.customer_create_request.email %} < li >< b > {% trans 'Email address' %}: {{ flow.customer_create_request.email }} </ b ></ li > {% endif %} {% if flow.customer_create_request.phone_number %} < li >< b > {% trans 'Phone number' %}: {{ flow.customer_create_request.phone_number }} </ b ></ li > {% endif %} {% if flow.customer_create_request.access_subnets %} < li >< b > {% trans 'List of IPv4 or IPv6 CIDR addresses from where connection to self-service is allowed' %}: {{ flow.customer_create_request.access_subnets }} </ b ></ li > {% endif %} {% if flow.customer_create_request.registration_code %} < li >< b > {% trans 'Registration code' %}: {{ flow.customer_create_request.registration_code }} </ b ></ li > {% endif %} {% if flow.customer_create_request.homepage %} < li >< b > {% trans 'Homepage URL' %}: {{ flow.customer_create_request.homepage }} </ b ></ li > {% endif %} {% if flow.customer_create_request.domain %} < li >< b > {% trans 'Organization domain' %}: {{ flow.customer_create_request.domain }} </ b ></ li > {% endif %} {% if flow.customer_create_request.address %} < li >< b > {% trans 'Legal address' %}: {{ flow.customer_create_request.address }} </ b ></ li > {% endif %} {% if flow.customer_create_request.postal %} < li >< b > {% trans 'Postal code' %}: {{ flow.customer_create_request.postal }} </ b ></ li > {% endif %} {% if flow.customer_create_request.bank_name %} < li >< b > {% trans 'Bank name (for accounting)' %}: {{ flow.customer_create_request.bank_name }} </ b ></ li > {% endif %} {% if flow.customer_create_request.bank_account %} < li >< b > {% trans 'Bank account number' %}: {{ flow.customer_create_request.bank_account }} </ b ></ li > {% endif %} </ ul > {% else %} < b > {% trans 'Organization name' %} </ b > : {{ flow.customer.name }} {% endif %} < h1 > {% trans 'Project create request details' %} </ h1 > < ul > < li >< b > {% trans 'Name' %}: {{ flow.project_create_request.name }} </ b ></ li > {% if flow.project_create_request.description %} < li >< b > {% trans 'Description' %}: {{ flow.project_create_request.description }} </ b ></ li > {% endif %} {% if flow.project_create_request.end_date %} < li >< b > {% trans 'End date' %}: {{ flow.project_create_request.end_date }} </ b ></ li > {% endif %} </ ul > < h1 > {% trans 'Resource create request details' %} </ h1 > < ul > < li >< b > {% trans 'Name' %}: {{ flow.resource_create_request.name }} </ b ></ li > {% if flow.resource_create_request.description %} < li >< b > {% trans 'Description' %}: {{ flow.resource_create_request.description }} </ b ></ li > {% endif %} {% if flow.resource_create_request.end_date %} < li >< b > {% trans 'End date' %}: {{ flow.resource_create_request.end_date }} </ b ></ li > {% endif %} < li >< b > {% trans 'Offering name' %}: {{ flow.resource_create_request.offering.name }} </ b ></ li > < li >< b > {% trans 'Offering category' %}: {{ flow.resource_create_request.offering.category.title }} </ b ></ li > {% if flow.resource_create_request.plan %} < li >< b > {% trans 'Plan' %}: {{ flow.resource_create_request.plan.name }} </ b ></ li > {% endif %} {% if flow.resource_create_request.attributes %} < li >< b > {% trans 'Attributes' %} </ b > : < table border = \"0\" cellspacing = \"0\" cellpadding = \"0\" > < tr > < th > # </ th > < th > {% trans \"NAME\" %} </ th > < th > {% trans \"VALUE\" %} </ th > </ tr > {% for key, value in flow.resource_create_request.attributes.items|dictsort:\"0.lower\" %} < tr > < td > {{ forloop.counter }} </ td > < td > {{ key }} </ td > < td > {{ value | pretty_json }} </ td > </ tr > {% endfor %} </ table > </ li > {% endif %} {% if flow.resource_create_request.limits %} < li >< b > {% trans 'Limits' %} </ b > : < table border = \"0\" cellspacing = \"0\" cellpadding = \"0\" > < tr > < th > # </ th > < th > {% trans \"NAME\" %} </ th > < th > {% trans \"VALUE\" %} </ th > </ tr > {% for key, value in flow.resource_create_request.limits.items|dictsort:\"0.lower\" %} < tr > < td > {{ forloop.counter }} </ td > < td > {{ key }} </ td > < td > {{ value }} </ td > </ tr > {% endfor %} </ table > </ li > {% endif %} </ ul > </ body > </ html > flow_rejected_subject.txt (cloudrock_metal.marketplace_flows) 1 2 {% load i18n %} {% trans 'Your submission has been rejected' %} flow_submitted_subject.txt (cloudrock_metal.marketplace_flows) 1 2 {% load i18n %} {% trans 'Resource creation request has been submitted' %} cloudrock_metal.marketplace_support create_resource_template.txt (cloudrock_metal.marketplace_support) 1 2 3 4 5 6 7 8 {% load cloudrock_marketplace %}[Order item|{{order_item_url}}]. Provider: {{order_item.offering.customer.name}} Resource UUID: {{resource.uuid}} Plan details: {% plan_details order_item.plan %} Full name: {{order_item.order.created_by.full_name|default:\"none\"}} Civil code:{{order_item.order.created_by.civil_number|default:\"none\"}} Email: {{order_item.order.created_by.email}} update_resource_template.txt (cloudrock_metal.marketplace_support) 1 2 3 [Switch plan for resource {{order_item.resource.scope.name}}|{{request_url}}]. Switch from {{order_item.resource.plan.name}} plan to {{order_item.plan.name}}. Marketplace resource UUID: {{order_item.resource.uuid.hex}} update_limits_template.txt (cloudrock_metal.marketplace_support) 1 2 3 4 [Update limits for resource {{order_item.resource.scope.name}}|{{request_url}}]. Marketplace resource UUID: {{order_item.resource.uuid.hex}} Old limits: {{ old_limits }}. New limits: {{ new_limits }}. terminate_resource_template.txt (cloudrock_metal.marketplace_support) 1 2 3 {% load cloudrock_marketplace %}[Terminate resource {{order_item.resource.scope.name}}|{{request_url}}]. {% plan_details order_item.resource.plan %} Marketplace resource UUID: {{order_item.resource.uuid.hex}} cloudrock_metal.support notification_issue_updated.txt (cloudrock_metal.support) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 Hello! The issue you have has been updated. {% if changed.status %} Status has been changed from {{ changed.status }} to {{ issue.status }}. {% endif %} {% if changed.description %} Description has been changed from {{ changed.description }} to {{ issue.description }}. {% endif %} {% if changed.summary %} Summary has been changed from {{ changed.summary }} to {{ issue.summary }}. {% endif %} {% if changed.priority %} Priority has been changed from {{ changed.priority }} to {{ issue.priority }}. {% endif %} Please go to {{issue_url}} to see it. description.txt (cloudrock_metal.support) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 {{issue.description}} --- Additional Info: {% if issue.customer %}- Organization: {{issue.customer.name}}{% endif %} {% if issue.project %}- Project: {{issue.project.name}}{% endif %} {% if issue.resource %} {% if issue.resource.service_settings %} {% if issue.resource.service_settings.type %}- Service type: {{issue.resource.service_settings.type}}{% endif %} - Offering name: {{ issue.resource.service_settings.name }} - Offering provided by: {{ issue.resource.service_settings.customer.name }} {% endif %} - Affected resource: {{issue.resource}} {% endif %} - Site name: {{ settings.CLOUDROCK_CORE.SITE_NAME }} - Site URL: {{ settings.CLOUDROCK_CORE.CLOUDROCK_UI_URL }} notification_issue_feedback_subject.txt (cloudrock_metal.support) 1 Please share your feedback: {{issue.key}} {{issue.summary}} notification_issue_updated.html (cloudrock_metal.support) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > The issue you have ({{ issue.key }}) has been updated </ title > </ head > < body > < p > Hello! </ p > {% if changed.status %} < p > Status has been changed from < strong > {{ changed.status }} </ strong > to < strong > {{ issue.status }} </ strong > . </ p > {% endif %} {% if changed.description %} < p > Description has been changed from < strong > {{ changed.description }} </ strong > to < strong > {{ issue.description }} </ strong > . </ p > {% endif %} {% if changed.summary %} < p > Summary has been changed from < strong > {{ changed.summary }} </ strong > to < strong > {{ issue.summary }} </ strong > . </ p > {% endif %} {% if changed.priority %} < p > Priority has been changed from < strong > {{ changed.priority }} </ strong > to < strong > {{ issue.priority }} </ strong > . </ p > {% endif %} < p > Please visit < a href = \"{{ issue_url }}\" > {{ site_name }} </ a > to find out more details. </ p > </ body > </ html > notification_issue_feedback.html (cloudrock_metal.support) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > The issue you have ({{ issue.key }}) has been updated </ title > < style > * { font-family : sans-serif ; } . rating { unicode-bidi : bidi-override ; direction : rtl ; width : 500 px ; } . rating > a { display : inline-block ; position : relative ; width : 1.1 em ; text-decoration : none ; font-size : xx-large ; color : rgba ( 180 , 179 , 178 , 1 ); } . rating > a : hover : before , . rating > a : hover ~ a : before { content : \"\\2605\" ; position : absolute ; color : rgba ( 224 , 194 , 75 , 1 ); } </ style > </ head > < body > < p > Hello, {{issue.caller.full_name}}! </ p > < p > We would like to hear your feedback regarding your recent experience with support for < a href = '{{issue_url}}' > {{ issue.summary }} </ a > . </ p > < p > Click the stars below to provide your feedback: </ p > < div class = \"rating\" > {% for link in feedback_links reversed %} < a href = '{{link.link}}' > \u2606 </ a > {% endfor %} </ div > </ body > </ html > notification_issue_updated_subject.txt (cloudrock_metal.support) 1 Updated issue: {{issue.key}} {{issue.summary}} notification_comment_updated.txt (cloudrock_metal.support) 1 2 3 Hello! The comment has been updated. Please go to {{issue_url}} to see it. notification_comment_updated_subject.txt (cloudrock_metal.support) 1 The comment has been updated notification_comment_added.txt (cloudrock_metal.support) 1 2 3 Hello! The issue you have created has a new comment. Please go to {{issue_url}} to see it. notification_comment_updated.html (cloudrock_metal.support) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > The comment has been updated ({{ issue.key }}) </ title > </ head > < body > < p > {{ comment.author.name }} updated comment. </ p > < p > < a href = \"{{ issue_url }}\" > [{{ issue.key }}] {{ issue.summary }} </ a > </ p > < p > Old comment: </ p > < p > {{ old_description }} </ p > < p > New comment: </ p > < p > {{ comment.description }} </ p > </ body > </ html > notification_comment_added_subject.txt (cloudrock_metal.support) 1 The issue you have created has a new comment notification_comment_added.html (cloudrock_metal.support) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > The issue you have created ({{ issue.key }}) has a new comment </ title > </ head > < body > < p > {{ comment.author.name }} added a new comment. </ p > < p > < a href = \"{{ issue_url }}\" > [{{ issue.key }}] {{ issue.summary }} </ a > </ p > < pre > {{ comment.description }} </ pre > </ body > </ html > summary.txt (cloudrock_metal.support) 1 {% if issue.customer.abbreviation %}{{issue.customer.abbreviation}}: {% endif %}{{issue.summary}} notification_issue_feedback.txt (cloudrock_metal.support) 1 2 3 4 5 6 7 8 9 Hello, {{issue.caller.full_name}}! We would like to hear your feedback regarding your recent experience with support for {{issue_url}}. Click on the evaluations below to provide the feedback. {% for link in feedback_links%} {{link.label}}: {{link.link}} {% endfor %}","title":"Message templates"},{"location":"admin-guide/metal-configuration/templates/#message-templates","text":"","title":"Message templates"},{"location":"admin-guide/metal-configuration/templates/#cloudrock_corelogging","text":"","title":"cloudrock_core.logging"},{"location":"admin-guide/metal-configuration/templates/#emailhtml-cloudrock_corelogging","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Notifications from cloudrock_core </ title > </ head > < body > < ul > {% for event in events %} < li > {{ event.message }} < div > {{ event.created|date:\"M d H:m e\"}} </ div > </ li > {% endfor %} </ ul > </ body > </ html >","title":"email.html (cloudrock_core.logging)"},{"location":"admin-guide/metal-configuration/templates/#cloudrock_corestructure","text":"","title":"cloudrock_core.structure"},{"location":"admin-guide/metal-configuration/templates/#change_email_request_messagetxt-cloudrock_corestructure","text":"1 To confirm the change of email address from {{ request.user.email }} to {{ request.email }}, follow the {{ link }}.","title":"change_email_request_message.txt (cloudrock_core.structure)"},{"location":"admin-guide/metal-configuration/templates/#structure_role_granted_messagetxt-cloudrock_corestructure","text":"1 Role {{ permission.role }} for {{ structure }} has been granted.","title":"structure_role_granted_message.txt (cloudrock_core.structure)"},{"location":"admin-guide/metal-configuration/templates/#notifications_profile_changes_operator_messagetxt-cloudrock_corestructure","text":"1 2 3 4 5 6 7 8 9 10 Owner of {% for o in organizations %} {{ o.name }} {% if o.abbreviation %} ({{ o.abbreviation }}){% endif %}{% if not forloop.last %}, {% endif %} {% endfor %} {{user.full_name}} (id={{ user.id }}) has changed {% for f in fields %} {{ f.name }} from {{ f.old_value }} to {{ f.new_value }}{% if not forloop.last %}, {% else %}.{% endif %} {% endfor %}","title":"notifications_profile_changes_operator_message.txt (cloudrock_core.structure)"},{"location":"admin-guide/metal-configuration/templates/#service_settings_descriptionhtml-cloudrock_corestructure","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 {% for name, service in services %} < div id = \"id_{{ name }}\" class = \"service-fields\" > < h4 > {{ name }} </ h4 > {% if service.fields.items %} < p > Fields: </ p > < ul > {% for name, field in service.fields.items %} < li > < code > {{ name }} </ code > {% if field.label or field.help_text %} \u2014 {% endif %} {% if field.label %} {{ field.label }} {% endif %} {% if field.help_text %} {{ field.help_text }} {% endif %} </ li > {% endfor %} </ ul > {% endif %} {% if service.extra_fields.items %} < p > Options: </ p > < ul > {% for name, field in service.extra_fields.items %} < li > < code > {{ name }} </ code > {% if field.label or field.help_text %} \u2014 {% endif %} {% if not field.required %} (optional) {% endif %} {% if field.label %} {{ field.label }} {% endif %} {% if field.help_text %} {{ field.help_text }} {% endif %} </ li > {% endfor %} </ ul > {% endif %} </ div > {% endfor %}","title":"service_settings_description.html (cloudrock_core.structure)"},{"location":"admin-guide/metal-configuration/templates/#notifications_profile_changes_operator_subjecttxt-cloudrock_corestructure","text":"1 Owner details have been updated","title":"notifications_profile_changes_operator_subject.txt (cloudrock_core.structure)"},{"location":"admin-guide/metal-configuration/templates/#structure_role_granted_subjecttxt-cloudrock_corestructure","text":"1 Role granted.","title":"structure_role_granted_subject.txt (cloudrock_core.structure)"},{"location":"admin-guide/metal-configuration/templates/#change_email_request_subjecttxt-cloudrock_corestructure","text":"1 Verify new email address.","title":"change_email_request_subject.txt (cloudrock_core.structure)"},{"location":"admin-guide/metal-configuration/templates/#change_email_request_messagehtml-cloudrock_corestructure","text":"1 < p > To confirm the change of email address from {{ request.user.email }} to {{ request.email }}, follow the < a href = \"{{ link }}\" > link </ a > . </ p >","title":"change_email_request_message.html (cloudrock_core.structure)"},{"location":"admin-guide/metal-configuration/templates/#notifications_profile_changeshtml-cloudrock_corestructure","text":"1 2 3 4 5 User {{user.full_name}} (id={{ user.id }}) profile has been updated: {% for f in fields %} {{ f.name }} from {{ f.old_value }} to {{ f.new_value }}{% if not forloop.last %}, {% else %}.{% endif %} {% endfor %}","title":"notifications_profile_changes.html (cloudrock_core.structure)"},{"location":"admin-guide/metal-configuration/templates/#notifications_profile_changes_operator_messagehtml-cloudrock_corestructure","text":"1 2 3 4 5 6 7 8 9 10 Owner of {% for o in organizations %} {{ o.name }} {% if o.abbreviation %} ({{ o.abbreviation }}){% endif %}{% if not forloop.last %}, {% endif %} {% endfor %} {{user.full_name}} (id={{ user.id }}) has changed {% for f in fields %} {{ f.name }} from {{ f.old_value }} to {{ f.new_value }}{% if not forloop.last %}, {% else %}.{% endif %} {% endfor %}","title":"notifications_profile_changes_operator_message.html (cloudrock_core.structure)"},{"location":"admin-guide/metal-configuration/templates/#structure_role_granted_messagehtml-cloudrock_corestructure","text":"1 < p > Role {{ permission.role }} for {{ structure }} has been granted. </ p >","title":"structure_role_granted_message.html (cloudrock_core.structure)"},{"location":"admin-guide/metal-configuration/templates/#cloudrock_coreusers","text":"","title":"cloudrock_core.users"},{"location":"admin-guide/metal-configuration/templates/#invitation_created_messagehtml-cloudrock_coreusers","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Invitation to {{ name }} {{ type }} </ title > </ head > < body > < p > Hello! </ p > < p > {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role. < br > Please visit < a href = \"{{ link }}\" > this page </ a > to sign up and accept your invitation. Please note: this invitation expires at {{ invitation.get_expiration_time|date:'d.m.Y H:i' }}! </ p > </ body > </ html >","title":"invitation_created_message.html (cloudrock_core.users)"},{"location":"admin-guide/metal-configuration/templates/#invitation_requested_messagetxt-cloudrock_coreusers","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 Hello! {{ sender }} has created invitation request for the following user to join {{ name }} {{ type }} in {{ role }} role. {% if invitation.civil_number %} Civil number: {{ invitation.civil_number }} {% endif %} {% if invitation.tax_number %} Tax number: {{ invitation.tax_number }} {% endif %} {% if invitation.phone_number %} Phone number: {{ invitation.phone_number }} {% endif %} E-mail: {{ invitation.email }} {% if invitation.full_name %} Full name: {{ invitation.full_name }} {% endif %} {% if invitation.native_name %} Native name: {{ invitation.native_name }} {% endif %} {% if invitation.organization %} Organization: {{ invitation.organization }} {% endif %} {% if invitation.job_title %} Job title: {{ invitation.job_title }} {% endif %} Please visit the link below to approve invitation: {{ approve_link }} Alternatively, you may reject invitation: {{ reject_link }}","title":"invitation_requested_message.txt (cloudrock_core.users)"},{"location":"admin-guide/metal-configuration/templates/#invitation_requested_subjecttxt-cloudrock_coreusers","text":"1 Invitation request","title":"invitation_requested_subject.txt (cloudrock_core.users)"},{"location":"admin-guide/metal-configuration/templates/#invitation_rejected_messagehtml-cloudrock_coreusers","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Invitation to {{ name }} {{ type }} </ title > </ head > < body > < p > Hello! </ p > < p > The following invitation has been rejected. </ p > < p > Full name: {{ invitation.full_name }} </ p > < p > Target: {{ name }} {{ type }} </ p > < p > Role: {{ role }} </ p > </ body > </ html >","title":"invitation_rejected_message.html (cloudrock_core.users)"},{"location":"admin-guide/metal-configuration/templates/#invitation_created_subjecttxt-cloudrock_coreusers","text":"1 Invitation to {{ name }} {{ type }}","title":"invitation_created_subject.txt (cloudrock_core.users)"},{"location":"admin-guide/metal-configuration/templates/#invitation_rejected_subjecttxt-cloudrock_coreusers","text":"1 Invitation has been rejected","title":"invitation_rejected_subject.txt (cloudrock_core.users)"},{"location":"admin-guide/metal-configuration/templates/#invitation_rejected_messagetxt-cloudrock_coreusers","text":"1 2 3 4 5 6 7 8 9 Hello! The following invitation has been rejected. Full name: {{ invitation.full_name }} Target: {{ name }} {{ type }} Role: {{ role }}","title":"invitation_rejected_message.txt (cloudrock_core.users)"},{"location":"admin-guide/metal-configuration/templates/#permission_request_submitted_messagetxt-cloudrock_coreusers","text":"1 2 3 4 5 Hello! User {{ permission_request.created_by }} with email {{ permission_request.created_by.email }} created permission request for {{ permission_request.invitation }}. Please visit the link below to approve or reject permission request: {{ requests_link }}.","title":"permission_request_submitted_message.txt (cloudrock_core.users)"},{"location":"admin-guide/metal-configuration/templates/#permission_request_submitted_messagehtml-cloudrock_coreusers","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Permission request has been submitted. </ title > </ head > < body > < p > Hello! </ p > < p > User {{ permission_request.created_by }} with email {{ permission_request.created_by.email }} created permission request for {{ permission_request.invitation }}. </ p > < p > Please visit the < a href = \"{{ requests_link }}\" > link </ a > to approve or reject permission request. </ p > </ body > </ html >","title":"permission_request_submitted_message.html (cloudrock_core.users)"},{"location":"admin-guide/metal-configuration/templates/#invitation_created_messagetxt-cloudrock_coreusers","text":"1 2 3 4 5 Hello! {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role. Please visit the link below to sign up and accept your invitation: {{ link }}","title":"invitation_created_message.txt (cloudrock_core.users)"},{"location":"admin-guide/metal-configuration/templates/#invitation_approved_messagehtml-cloudrock_coreusers","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Account has been created </ title > </ head > < body > < p > Hello! </ p > < p > {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role. < br > Please visit < a href = \"{{ link }}\" > this page </ a > to sign up and accept your invitation. </ p > < p > Your credentials are as following. </ p > < p > Your username is {{ username }} </ p > < p > Your password is {{ password }} </ p > </ body > </ html >","title":"invitation_approved_message.html (cloudrock_core.users)"},{"location":"admin-guide/metal-configuration/templates/#invitation_requested_messagehtml-cloudrock_coreusers","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Invitation request </ title > </ head > < body > < p > Hello! </ p > < p > {{ sender }} has created invitation request for the following user to join {{ name }} {{ type }} in {{ role }} role. </ p > {% if invitation.civil_number %} < p > Civil number: {{ invitation.civil_number }} </ p > {% endif %} {% if invitation.tax_number %} < p > Tax number: {{ invitation.tax_number }} </ p > {% endif %} {% if invitation.phone_number %} < p > Phone number: {{ invitation.phone_number }} </ p > {% endif %} < p > E-mail: {{ invitation.email }} </ p > {% if invitation.full_name %} < p > Full name: {{ invitation.full_name }} </ p > {% endif %} {% if invitation.native_name %} < p > Native name: {{ invitation.native_name }} </ p > {% endif %} {% if invitation.organization %} < p > Organization: {{ invitation.organization }} </ p > {% endif %} {% if invitation.job_title %} < p > Job title: {{ invitation.job_title }} </ p > {% endif %} < p > Please < a href = \"{{ approve_link }}\" > approve </ a > or < a href = \"{{ reject_link }}\" > reject </ a > invitation. </ p > </ body > </ html >","title":"invitation_requested_message.html (cloudrock_core.users)"},{"location":"admin-guide/metal-configuration/templates/#invitation_approved_subjecttxt-cloudrock_coreusers","text":"1 Account has been created","title":"invitation_approved_subject.txt (cloudrock_core.users)"},{"location":"admin-guide/metal-configuration/templates/#invitation_approved_messagetxt-cloudrock_coreusers","text":"1 2 3 4 5 6 7 8 9 10 11 Hello! {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role. Please visit the link below to sign up and accept your invitation: {{ link }} Your credentials are as following. Username is {{ username }} Your password is {{ password }}","title":"invitation_approved_message.txt (cloudrock_core.users)"},{"location":"admin-guide/metal-configuration/templates/#permission_request_submitted_subjecttxt-cloudrock_coreusers","text":"1 Permission request has been submitted.","title":"permission_request_submitted_subject.txt (cloudrock_core.users)"},{"location":"admin-guide/metal-configuration/templates/#cloudrock_metalbooking","text":"","title":"cloudrock_metal.booking"},{"location":"admin-guide/metal-configuration/templates/#notification_subjecttxt-cloudrock_metalbooking","text":"1 Reminder about upcoming booking.","title":"notification_subject.txt (cloudrock_metal.booking)"},{"location":"admin-guide/metal-configuration/templates/#notification_messagehtml-cloudrock_metalbooking","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Reminder about upcoming booking. </ title > </ head > < body > < p > Hello! </ p > < p > Please do not forget about upcoming booking: < br /> {% for resource in resources %} {{ resource.name }} {% if not forloop.last %} < br /> {% endif %} {% endfor %} </ p > </ body > </ html >","title":"notification_message.html (cloudrock_metal.booking)"},{"location":"admin-guide/metal-configuration/templates/#notification_messagetxt-cloudrock_metalbooking","text":"1 2 3 4 5 6 Hello! Please do not forget about upcoming booking: {% for resource in resources %} {{ resource.name }}{% if not forloop.last %}, {% endif %} {% endfor %}.","title":"notification_message.txt (cloudrock_metal.booking)"},{"location":"admin-guide/metal-configuration/templates/#cloudrock_metalinvoices","text":"","title":"cloudrock_metal.invoices"},{"location":"admin-guide/metal-configuration/templates/#upcoming_ends_notification_messagetxt-cloudrock_metalinvoices","text":"1 2 3 Hello, this is a reminder that {{ organization_name }}'s fixed price contract {{ contract_number }} is ending on {{ end }}.","title":"upcoming_ends_notification_message.txt (cloudrock_metal.invoices)"},{"location":"admin-guide/metal-configuration/templates/#report_subjecttxt-cloudrock_metalinvoices","text":"1 Cloudrock accounting report for {{ month }}/{{ year }}","title":"report_subject.txt (cloudrock_metal.invoices)"},{"location":"admin-guide/metal-configuration/templates/#upcoming_ends_notification_subjecttxt-cloudrock_metalinvoices","text":"1 {{ organization_name }}'s fixed price contract {{ contract_number }} is coming to an end","title":"upcoming_ends_notification_subject.txt (cloudrock_metal.invoices)"},{"location":"admin-guide/metal-configuration/templates/#upcoming_ends_notification_messagehtml-cloudrock_metalinvoices","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > {{ organization_name }}'s fixed price contract {{ contract_number }} is coming to an end. </ title > </ head > < body > < p > Hello, < br /> this is a reminder that {{ organization_name }}'s fixed price contract {{ contract_number }} is ending on {{ end }}. </ p > </ body > </ html >","title":"upcoming_ends_notification_message.html (cloudrock_metal.invoices)"},{"location":"admin-guide/metal-configuration/templates/#monthly_invoicing_reportshtml-cloudrock_metalinvoices","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 {% load i18n %} {% load static %} {% load humanize %} <!DOCTYPE html> < html lang = \"en\" > < head > < meta charset = \"UTF-8\" > < style type = \"text/css\" > { % include \"./style.css\" % } </ style > </ head > < body > < h2 > {% trans 'Fixed price contracts:' %} </ h2 > {% if contracts %} < table class = \"invoice-table\" > < thead > < tr > < th ></ th > < th > {% trans 'Organization' %} </ th > < th > {% trans 'Contract end date' %} </ th > < th > {% trans 'Till the end of contract. [days]' %} </ th > < th > {% trans 'Contract sum' %} </ th > < th > {% trans 'Payment sum' %} </ th > </ tr > </ thead > < tbody > {% for contract in contracts %} < tr > < th > {{ forloop.counter }} </ th > < td > {{ contract.name }} </ td > < td > {{ contract.end|date:\"Y-m-d\"|default_if_none:\"\" }} </ td > < td {% if contract . end_date_alarm %} class = \"text-danger\" {% endif %} > {{ contract.till_end|default_if_none:\"\" }} </ td > < td {% if contract . payments_alarm %} class = \"text-danger\" {% endif %} > {{ contract.contract_sum|default_if_none:0|floatformat:\"2\"|intcomma }} </ td > < td {% if contract . payments_alarm %} class = \"text-danger\" {% endif %} > {{ contract.payments_sum|default_if_none:0|floatformat:\"2\"|intcomma }} </ td > </ tr > {% endfor %} </ tbody > </ table > {% else %} < p > {% trans 'Contracts do not exist.' %} </ p > {% endif %} < h2 > {% blocktrans %}Invoices for month {{ month }}-{{ year }}:{% endblocktrans %} </ h2 > < table class = \"invoice-table\" > < thead > < tr > < th ></ th > < th > {% trans 'Organization' %} </ th > < th > {% trans 'Invoice date' %} </ th > < th > {% trans 'Invoice sum' %} </ th > </ tr > </ thead > < tbody > {% for invoice in invoices %} < tr > < th > {{ forloop.counter }} </ th > < td > {% if invoice.customer.abbreviation %} {{ invoice.customer.abbreviation }} {% else %} {{ invoice.customer.name }} {% endif %} </ td > < td > {{ invoice.invoice_date|date:\"Y-m-d\" }} </ td > < td > {{ invoice.total|floatformat:\"2\"|intcomma }} </ td > </ tr > {% endfor %} </ tbody > </ table > </ body > </ html >","title":"monthly_invoicing_reports.html (cloudrock_metal.invoices)"},{"location":"admin-guide/metal-configuration/templates/#invoicehtml-cloudrock_metalinvoices","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 {% load i18n %} {% load humanize %} <!DOCTYPE html> < html lang = \"en\" > < head > < meta charset = \"UTF-8\" > < title > Invoice </ title > < style type = \"text/css\" > { % include \"cloudrock_core/font.css\" % } { % include \"./style.css\" % } </ style > </ head > < body > {% if deployment_logo %} < div id = \"logo\" > < img src = \"data:image/png;base64,{{ deployment_logo }}\" > </ div > {% endif %} < h1 > {% trans \"Invoice No.\" %} {{ invoice.number|upper }} </ h1 > < br > < div class = \"text-right\" > < strong > {% trans \"Invoice date\" %}: </ strong > {% if invoice.invoice_date %} {{ invoice.invoice_date|date:\"Y-m-d\" }} {% else %} {% trans \"Pending\" %} {% endif %} < br /> {% if invoice.due_date %} < strong > {% trans \"Due date\" %}: </ strong > {{ invoice.due_date|date:\"Y-m-d\" }} < br /> {% endif %} < strong > {% trans \"Invoice period\" %}: </ strong > {{ invoice.year }}-{{ invoice.month }} < br /> </ div > < div > < h3 class = \"name\" > From </ h3 > < div >< strong > {{ issuer_details.company }} </ strong ></ div > < div > {{ issuer_details.address }} </ div > < div > {{ issuer_details.country }}, {{ issuer_details.postal }} </ div > < div >< abbr > P: </ abbr > ({{ issuer_details.phone.country_code }}) {{ issuer_details.phone.national_number }} </ div > < div > {{ issuer_details.bank }}, {{ issuer_details.account }} </ div > < div >< abbr > {% trans \"VAT\" %}: </ abbr > {{ issuer_details.vat_code }} </ div > < div > {{ issuer_details.email }} </ div > </ div > < div > < h3 class = \"name\" > To </ h3 > < div >< strong > {{ invoice.customer.name }} </ strong ></ div > {% if invoice.customer.address %} < div > {{ invoice.customer.address }} </ div > {% endif %} {% if invoice.customer.country and invoice.customer.postal %} < div > {{ invoice.customer.country }}, {{ invoice.customer.postal }} </ div > {% endif %} {% if invoice.customer.phone_number %} < div >< abbr > P: </ abbr > {{ invoice.customer.phone_number }} </ div > {% endif %} {% if invoice.customer.bank_name and invoice.customer.bank_account %} < div > {{ invoice.customer.bank_name }}, {{ invoice.customer.bank_account }} </ div > {% endif %} {% if customer.vat_code %} < div >< abbr > {% trans \"VAT\" %}: </ abbr > {{ customer.vat_code }} </ div > {% endif %} < div > {{ invoice.customer.email }} </ div > </ div > < div class = \"m-t\" > < table class = \"invoice-table\" > < tr > < th > Item </ th > < th > Quantity </ th > < th > Unit price </ th > < th > Total price </ th > </ tr > {% regroup items|dictsort:\"project_name\" by project_name as project_list %} {% for project in project_list %} < tr > < td colspan = \"4\" >< h3 > {{ project.grouper }} </ h3 ></ td > </ tr > {% for item in project.list %} < tr > < td > < strong > {{ item.name }} </ strong > < div > < small > {% trans \"Start time\" %}: {{ item.start | date:\"Y-m-d H:i\" }}. {% trans \"End time\" %}: {{ item.end | date:\"Y-m-d H:i\" }}. </ small > </ div > </ td > < td > {{ item.quantity }} </ td > < td > {{ currency }} {{ item.unit_price | floatformat:2 | intcomma }} </ td > < td > {{ currency }} {{ item.total | floatformat:2 | intcomma }} </ td > </ tr > {% endfor %} {% endfor %} </ table > </ div > < table class = \"m-t invoice-total\" > < tr > < td >< strong > {% trans \"Subtotal\" %} </ strong ></ td > < td > {{ currency }} {{ invoice.price | floatformat:2 | intcomma}} </ td > </ tr > {% if invoice.tax %} < tr > < td >< strong > {% trans \"VAT\" %} </ strong ></ td > < td > {{ currency }} {{ invoice.tax | floatformat:2 | intcomma}} </ td > </ tr > {% endif %} < tr > < td >< strong > {% trans \"TOTAL\" %} </ strong ></ td > < td > {{ currency }} {{ invoice.total | floatformat:2 | intcomma}} </ td > </ tr > </ table > </ body > </ html >","title":"invoice.html (cloudrock_metal.invoices)"},{"location":"admin-guide/metal-configuration/templates/#notification_subjecttxt-cloudrock_metalinvoices","text":"1 {{ customer }}'s invoice for {{ month }}/{{ year }}","title":"notification_subject.txt (cloudrock_metal.invoices)"},{"location":"admin-guide/metal-configuration/templates/#notification_messagehtml-cloudrock_metalinvoices","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 < html xmlns = \"http://www.w3.org/1999/html\" > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > {{ customer }}'s invoice for {{ month }}/{{ year }} </ title > </ head > < body > < p > Dear Sir or Madam, </ p > < p > Attached is invoice for services consumed by {{ customer }}'s during {{ month }}/{{ year }}. </ p > </ body > </ html >","title":"notification_message.html (cloudrock_metal.invoices)"},{"location":"admin-guide/metal-configuration/templates/#report_bodytxt-cloudrock_metalinvoices","text":"1 Attached is an accounting report for {{ month }}/{{ year }}.","title":"report_body.txt (cloudrock_metal.invoices)"},{"location":"admin-guide/metal-configuration/templates/#notification_messagetxt-cloudrock_metalinvoices","text":"1 2 3 4 Hello, Please follow the link below to see {{ customer }}'s accounting information for {{ month }}/{{ year }}: {{ link }}","title":"notification_message.txt (cloudrock_metal.invoices)"},{"location":"admin-guide/metal-configuration/templates/#cloudrock_metalmarketplace","text":"","title":"cloudrock_metal.marketplace"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_create_succeeded_subjecttxt-cloudrock_metalmarketplace","text":"1 Resource {{ resource_name }} has been created.","title":"marketplace_resource_create_succeeded_subject.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_update_limits_succeeded_subjecttxt-cloudrock_metalmarketplace","text":"1 Resource {{ resource_name }} limits have been updated.","title":"marketplace_resource_update_limits_succeeded_subject.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_update_limits_failed_messagetxt-cloudrock_metalmarketplace","text":"1 2 3 Hello! Resource {{ resource_name }} limits update has failed.","title":"marketplace_resource_update_limits_failed_message.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#notification_service_provider_approval_subjecttxt-cloudrock_metalmarketplace","text":"1 A new order by {{ order.created_by.get_full_name }} is waiting for approval.","title":"notification_service_provider_approval_subject.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#notification_about_stale_resources_messagehtml-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Reminder about stale resources. </ title > </ head > < body > < p > Hello! </ p > < p > We noticed that you have stale resources that have not cost you anything for the last 3 months. < br /> Perhaps some of them are not needed any more? < br /> The resource names are: < ul > {% for resource in resources %} < li >< a href = '{{ resource.resource_url }}' > {{ resource.resource.name }} </ a ></ li > {% endfor %} </ ul > Thank you! </ p > </ body > </ html >","title":"notification_about_stale_resources_message.html (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#notification_approval_messagehtml-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > A new order by {{ order.created_by.get_full_name }} is waiting for approval. </ title > </ head > < body > < p > Hello! </ p > < p > Please visit < a href = \"{{ order_url }}\" > {{ site_name }} </ a > to find out more details. </ p > </ body > </ html >","title":"notification_approval_message.html (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_termination_scheduled_staff_subjecttxt-cloudrock_metalmarketplace","text":"1 Resource {{ resource.name }} termination has been scheduled.","title":"marketplace_resource_termination_scheduled_staff_subject.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#notification_service_provider_approval_messagetxt-cloudrock_metalmarketplace","text":"1 2 3 Hello! A new order by {{ order.created_by.get_full_name }} is waiting for approval.","title":"notification_service_provider_approval_message.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_create_failed_messagetxt-cloudrock_metalmarketplace","text":"1 2 3 Hello! Resource {{ resource_name }} creation has failed.","title":"marketplace_resource_create_failed_message.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_update_failed_messagetxt-cloudrock_metalmarketplace","text":"1 2 3 Hello! Resource {{ resource_name }} update has failed.","title":"marketplace_resource_update_failed_message.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_create_failed_messagehtml-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource_name }} creation has failed. </ title > </ head > < body > < p > Hello! </ p > < p > Resource {{ resource_name }} creation has failed. </ p > </ body > </ html >","title":"marketplace_resource_create_failed_message.html (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_termination_scheduled_messagehtml-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource.name }} termination has been scheduled. </ title > </ head > < body > < p > Hello! </ p > < p > The resource you have - < a href = \"{{ resource_url }}\" > {{ resource.name }} </ a > has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:\"SHORT_DATE_FORMAT\" }}. If you feel that you still want to keep it, please < a href = \"{{ resource_url }}\" ></ a > remove the resource end date </ a > . </ p > </ body > </ html >","title":"marketplace_resource_termination_scheduled_message.html (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_terminate_succeeded_messagetxt-cloudrock_metalmarketplace","text":"1 2 3 Hello! Resource {{ resource_name }} has been deleted.","title":"marketplace_resource_terminate_succeeded_message.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#notification_usages_messagehtml-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Reminder about missing usage reports. </ title > </ head > < body > < p > Hello! </ p > < p > Please do not forget to add usage for the resources you provide: </ p > {% regroup resources by offering as offering_list %} < ol > {% for offering in offering_list %} < li > {{ offering.grouper.name }}: < ul > {% for resource in offering.list %} < li > {{ resource.name }} </ li > {% endfor %} </ ul > </ li > {% endfor %} </ ol > < p > You can submit resource usage via API or do it < a href = '{{ public_resources_url }}' > manually </ a > . </ p > </ body > </ html >","title":"notification_usages_message.html (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_update_succeeded_messagehtml-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource_name }} has been updated. </ title > </ head > < body > < p > Hello! </ p > < p > Following request from {{ order_item_user }}, resource {{ resource_name }} has been updated. </ p > {% if resource_old_plan %} < p > The plan has been changed from {{ resource_old_plan }} to {{ resource_plan }}. </ p > {% endif %} {% if support_email or support_phone %} < p > If you have any additional questions, please contact support. </ p > {% if support_email %} < p > Email: {{ support_email }} </ p > {% endif %} {% if support_phone %} < p > Phone: {{ support_phone }} </ p > {% endif %} {% endif %} </ body > </ html >","title":"marketplace_resource_update_succeeded_message.html (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_update_failed_subjecttxt-cloudrock_metalmarketplace","text":"1 Resource {{ resource_name }} update has failed.","title":"marketplace_resource_update_failed_subject.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_update_limits_failed_subjecttxt-cloudrock_metalmarketplace","text":"1 Resource {{ resource_name }} limits update has failed.","title":"marketplace_resource_update_limits_failed_subject.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_update_failed_messagehtml-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource_name }} update has failed. </ title > </ head > < body > < p > Hello! </ p > < p > Resource {{ resource_name }} update has failed. </ p > </ body > </ html >","title":"marketplace_resource_update_failed_message.html (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_terminate_failed_messagehtml-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource_name }} deletion has failed. </ title > </ head > < body > < p > Hello! </ p > < p > Resource {{ resource_name }} deletion has failed. </ p > </ body > </ html >","title":"marketplace_resource_terminate_failed_message.html (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_update_limits_succeeded_messagetxt-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 Hello! Following request from {{ order_item_user }}, resource {{ resource_name }} limits have been updated from: {{ resource_old_limits }} to: {{ resource_limits }}. {% if support_email or support_phone %} If you have any additional questions, please contact support. {% if support_email %} Email: {{ support_email }} {% endif %} {% if support_phone %} Phone: {{ support_phone }} {% endif %} {% endif %}","title":"marketplace_resource_update_limits_succeeded_message.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_terminate_succeeded_messagehtml-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource_name }} has been deleted. </ title > </ head > < body > < p > Hello! </ p > < p > Resource {{ resource_name }} has been deleted. </ p > </ body > </ html >","title":"marketplace_resource_terminate_succeeded_message.html (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_terminate_failed_subjecttxt-cloudrock_metalmarketplace","text":"1 Resource {{ resource_name }} deletion has failed.","title":"marketplace_resource_terminate_failed_subject.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_termination_scheduled_staff_messagehtml-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource.name }} termination has been scheduled. </ title > </ head > < body > < p > Hello! </ p > < p > The resource you have - < a href = \"{{ resource_url }}\" > {{ resource.name }} </ a > has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:\"SHORT_DATE_FORMAT\" }}. If you feel that you still want to keep it, please < a href = \"{{ resource_url }}\" ></ a > remove the resource end date </ a > . </ p > </ body > </ html >","title":"marketplace_resource_termination_scheduled_staff_message.html (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_plan_templatetxt-cloudrock_metalmarketplace","text":"1 2 3 Plan: {{ plan.name }}{% for component in components %} {{component.name}}; amount: {{component.amount}}; price: {{component.price|floatformat }}; {% endfor %}","title":"marketplace_plan_template.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_create_succeeded_messagehtml-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource_name }} has been created. </ title > </ head > < body > < p > Hello! </ p > < p > Resource {{ resource_name }} has been created. </ p > </ body > </ html >","title":"marketplace_resource_create_succeeded_message.html (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#notification_about_project_ending_subjecttxt-cloudrock_metalmarketplace","text":"1 Project {{ project.name }} will be deleted.","title":"notification_about_project_ending_subject.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#notification_approval_messagetxt-cloudrock_metalmarketplace","text":"1 2 3 Hello! A new order by {{ order.created_by.get_full_name }} is waiting for approval.","title":"notification_approval_message.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#orderhtml-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 {% load i18n %} {% load humanize %} {% load cloudrock_core %} {% load cloudrock_marketplace %} <!DOCTYPE html> < html lang = \"en\" > < head > < meta charset = \"utf-8\" > < title > {% trans \"Marketplace Order Details\" %} </ title > < style > { % include \"cloudrock_core/font.css\" % } { % include \"./style.css\" % } </ style > </ head > < body > < header class = \"clearfix\" > < div id = \"logo\" > {% if deployment_logo %} < img src = \"data:image/png;base64,{{ deployment_logo }}\" > {% endif %} </ div > < div id = \"company\" > < h2 class = \"name\" > {{ deployment_name }} </ h2 > {% if deployment_address %} < div > {{ deployment_address }} </ div > {% endif %} {% if deployment_phone %} < div > {{ deployment_phone }} </ div > {% endif %} {% if deployment_email %} < div > {{ deployment_email }} </ div > {% endif %} </ div > </ header > < main > < div id = \"details\" class = \"clearfix\" > < div id = \"client\" > < div > < span > {% trans \"Requested by\" %}: </ span > {{ order.created_by.full_name }} ({{ order.created_by.email }}) </ div > < div > < span > {% trans \"Requested at\" %}: </ span > {{ order.created|date:\"SHORT_DATE_FORMAT\" }} {{ order.created|time:\"H:i\" }} </ div > {% if order.approved_by %} < div > < span > {% trans \"Approved by\" %}: </ span > {{ order.approved_by.full_name }} ({{ order.approved_by.email }}) </ div > {% endif %} {% if order.approved_at %} < div > < span > {% trans \"Approved at\" %}: </ span > {{ order.approved_at|date:\"SHORT_DATE_FORMAT\" }} {{ order.approved_at|time:\"H:i\" }} </ div > {% endif %} </ div > < div id = \"invoice\" > < h1 > {% trans \"Marketplace order\" %} </ h1 > < div class = \"date\" > UUID: {{ order.uuid|upper }} </ div > </ div > </ div > < table border = \"0\" cellspacing = \"0\" cellpadding = \"0\" > < tr > < th class = \"no\" > # </ th > < th class = \"desc\" > {% trans \"DESCRIPTION\" %} </ th > < th class = \"unit\" > {% trans \"PLAN\" %} </ th > < th class = \"total\" > {% trans \"PRICE\" %} </ th > </ tr > {% for item in order.items.all %} < tr > < td class = \"no\" > {{ forloop.counter }} </ td > < td class = \"desc\" > < h3 > {% if item.attributes.name %} {{ item.attributes.name }} {% elif item.offering.name %} {{ item.offering.name }} {% endif %} </ h3 > {% if item.attributes.description %} {{ item.attributes.description }} {% elif item.offering.description %} {{ item.offering.description | safe }} {% endif %} </ td > < td class = \"unit\" > {{ item.plan.name }} </ td > < td class = \"total\" > {{ currency }} {{ item.cost | floatformat:2 | intcomma }} </ td > </ tr > {% endfor %} < tr class = \"foot\" > < td colspan = \"3\" > {% trans \"TOTAL\" %} </ td > < td > {{ currency }} {{ order.total_cost | floatformat:2 | intcomma}} </ td > </ tr > </ table > < h3 > {% trans \"Details of order items\" %} </ h3 > {% for item in order.items.all %} < header class = \"clearfix\" > {{ forloop.counter }}. {% if item.attributes.name %} {{ item.attributes.name }} {% elif item.offering.name %} {{ item.offering.name }} {% endif %} </ header > {% if item.attributes %} < p > {% trans \"Offering request details\" %} </ p > < table border = \"0\" cellspacing = \"0\" cellpadding = \"0\" > < tr > < th class = \"no\" > # </ th > < th class = \"desc\" > {% trans \"NAME\" %} </ th > < th class = \"desc\" > {% trans \"VALUE\" %} </ th > </ tr > {% for key, value in item.safe_attributes.items|dictsort:\"0.lower\" %} < tr > < td class = \"no\" > {{ forloop.counter }} </ td > < td class = \"desc\" > {{ key }} </ td > < td class = \"desc\" > {{ value | pretty_json }} </ td > </ tr > {% endfor %} </ table > {% endif %} {% if item.plan %} < p > {% trans \"Billing plan components\" %} </ p > < table border = \"0\" cellspacing = \"0\" cellpadding = \"0\" > < tr > < th class = \"no\" > # </ th > < th class = \"desc\" > {% trans \"NAME\" %} </ th > < th class = \"desc\" > {% trans \"TYPE\" %} </ th > < th class = \"unit\" > {% trans \"AMOUNT\" %} </ th > < th class = \"total\" > {% trans \"PRICE PER UNIT\" %} </ th > </ tr > {% for component in item.plan.components.all %} < tr > < td class = \"no\" > {{ forloop.counter }} </ td > < td class = \"desc\" > {{ component.component.name }} </ td > < td class = \"desc\" > {{ component.component.get_billing_type_display }} </ td > < td class = \"unit\" > {% get_invoice_item_component_amount item component %} {{ component.component.measured_unit }} </ td > < td class = \"total\" > {{ currency }} {{ component.price | floatformat:4 | intcomma }} </ td > </ tr > {% endfor %} < tr class = \"foot\" > < td colspan = \"4\" > {% trans \"TOTAL\" %} </ td > < td > {{ currency }} {{ item.cost | floatformat:2 | intcomma}} </ td > </ tr > </ table > {% endif %} {% endfor %} </ main > </ body > </ html >","title":"order.html (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#notification_about_stale_resources_subjecttxt-cloudrock_metalmarketplace","text":"1 Reminder about stale resources.","title":"notification_about_stale_resources_subject.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_terminate_succeeded_subjecttxt-cloudrock_metalmarketplace","text":"1 Resource {{ resource_name }} has been deleted.","title":"marketplace_resource_terminate_succeeded_subject.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#notification_about_project_ending_messagetxt-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 Dear {{ user.full_name }}, Your project {{ project.name }} is ending {% if delta == 1 %} tomorrow {% else %} in {{ delta }} days{% endif %}. End of the project will lead to termination of all resources in the project. If you are aware of that, then no actions are needed from your side. If you need to update project end date, please update it in project details {{ project_url }}. Thank you!","title":"notification_about_project_ending_message.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#notification_service_provider_approval_messagehtml-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > A new order by {{ order.created_by.get_full_name }} is waiting for approval. </ title > </ head > < body > < p > Hello! </ p > < p > Please visit < a href = \"{{ order_item_url }}\" > {{ site_name }} </ a > to find out more details. </ p > </ body > </ html >","title":"notification_service_provider_approval_message.html (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_update_succeeded_messagetxt-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 Hello! Following request from {{ order_item_user }}, resource {{ resource_name }} has been updated. {% if resource_old_plan %} The plan has been changed from {{ resource_old_plan }} to {{ resource_plan }}. {% endif %} {% if support_email or support_phone %} If you have any additional questions, please contact support. {% if support_email %} Email: {{ support_email }} {% endif %} {% if support_phone %} Phone: {{ support_phone }} {% endif %} {% endif %}","title":"marketplace_resource_update_succeeded_message.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#notification_usages_subjecttxt-cloudrock_metalmarketplace","text":"1 Reminder about missing usage reports.","title":"notification_usages_subject.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#notification_approval_subjecttxt-cloudrock_metalmarketplace","text":"1 A new order by {{ order.created_by.get_full_name }} is waiting for approval.","title":"notification_approval_subject.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_terminate_failed_messagetxt-cloudrock_metalmarketplace","text":"1 2 3 Hello! Resource {{ resource_name }} deletion has failed.","title":"marketplace_resource_terminate_failed_message.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_termination_scheduled_subjecttxt-cloudrock_metalmarketplace","text":"1 Resource {{ resource.name }} termination has been scheduled.","title":"marketplace_resource_termination_scheduled_subject.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#notification_usages_messagetxt-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 Hello! Please do not forget to add usage for the resources you provide: {% regroup resources by offering as offering_list %}{% for offering in offering_list %} {{forloop.counter}}. {{ offering.grouper.name }}:{% for resource in offering.list %} - {{ resource.name }} {% endfor %}{% endfor %} You can submit resource usage via API or do it manually at {{ public_resources_url }}.","title":"notification_usages_message.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#notification_about_stale_resources_messagetxt-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 Hello! We noticed that you have stale resources that have not cost you anything for the last 3 months. Perhaps some of them are not needed any more? The resource names are: {% for resource in resources %} {{ resource.resource.name }} {{ resource.resource_url }} {% endfor %} Thank you!","title":"notification_about_stale_resources_message.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_termination_scheduled_staff_messagetxt-cloudrock_metalmarketplace","text":"1 2 3 Hello! The resource you have - {{ resource.name }} has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:\"SHORT_DATE_FORMAT\" }}. If you feel that you still want to keep it, please remove the resource end date {{ resource_url }}.","title":"marketplace_resource_termination_scheduled_staff_message.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_update_limits_succeeded_messagehtml-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource_name }} limits have been updated. </ title > </ head > < body > < p > Hello! </ p > < p > Following request from {{ order_item_user }}, resource {{ resource_name }} limits have been updated from: < br > < blockquote > {{ resource_old_limits }} </ blockquote > to: < blockquote > {{ resource_limits }} </ blockquote > </ p > {% if support_email or support_phone %} < p > If you have any additional questions, please contact support. </ p > {% if support_email %} < p > Email: {{ support_email }} </ p > {% endif %} {% if support_phone %} < p > Phone: {{ support_phone }} </ p > {% endif %} {% endif %} </ body > </ html >","title":"marketplace_resource_update_limits_succeeded_message.html (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_update_succeeded_subjecttxt-cloudrock_metalmarketplace","text":"1 Resource {{ resource_name }} has been updated.","title":"marketplace_resource_update_succeeded_subject.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_update_limits_failed_messagehtml-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Resource {{ resource_name }} limits update has failed. </ title > </ head > < body > < p > Hello! </ p > < p > Resource {{ resource_name }} limits update has failed. </ p > </ body > </ html >","title":"marketplace_resource_update_limits_failed_message.html (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_create_failed_subjecttxt-cloudrock_metalmarketplace","text":"1 Resource {{ resource_name }} creation has failed.","title":"marketplace_resource_create_failed_subject.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_create_succeeded_messagetxt-cloudrock_metalmarketplace","text":"1 2 3 Hello! Resource {{ resource_name }} has been created.","title":"marketplace_resource_create_succeeded_message.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#marketplace_resource_termination_scheduled_messagetxt-cloudrock_metalmarketplace","text":"1 2 3 Hello! The resource you have - {{ resource.name }} has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:\"SHORT_DATE_FORMAT\" }}. If you feel that you still want to keep it, please remove the resource end date {{ resource_url }}.","title":"marketplace_resource_termination_scheduled_message.txt (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#notification_about_project_ending_messagehtml-cloudrock_metalmarketplace","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > Project {{ project.name }} will be deleted. </ title > </ head > < body > < p > Dear {{ user.full_name }}, </ p > < p > Your project {{ project.name }} is ending {% if delta == 1 %} tomorrow {% else %} in {{ delta }} days{% endif %}. End of the project will lead to termination of all resources in the project. < br /> If you are aware of that, then no actions are needed from your side. < br /> If you need to update project end date, please update it in project details {{ project_url }}. </ p > < p > Thank you! </ p > </ body > </ html >","title":"notification_about_project_ending_message.html (cloudrock_metal.marketplace)"},{"location":"admin-guide/metal-configuration/templates/#cloudrock_metalmarketplace_flows","text":"","title":"cloudrock_metal.marketplace_flows"},{"location":"admin-guide/metal-configuration/templates/#flow_rejected_messagehtml-cloudrock_metalmarketplace_flows","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 {% load i18n %} {% if flow.customer_create_request.is_rejected %} < p > {% trans 'Customer creation request has been rejected.' %} </ p > {% if flow.customer_create_request.reviewed_by %} < p >< b > {% trans 'Reviewer name:' %} </ b > {{ flow.customer_create_request.reviewed_by.full_name }} </ p > {% endif %} {% if flow.customer_create_request.reviewed_at %} < p >< b > {% trans 'Reviewed at:' %} </ b > {{ flow.customer_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.customer_create_request.reviewed_at|time:\"H:i\" }} </ p > {% endif %} {% if flow.customer_create_request.review_comment %} < p >< b > {% trans 'Comment:' %} </ b > {{ flow.customer_create_request.review_comment }} </ p > {% endif %} {% endif %} {% if flow.project_create_request.is_rejected %} < p > {% trans 'Project creation request has been rejected.' %} </ p > {% if flow.project_create_request.reviewed_by %} < p >< b > {% trans 'Reviewer name:' %} </ b > {{ flow.project_create_request.reviewed_by.full_name }} </ p > {% endif %} {% if flow.project_create_request.reviewed_at %} < p >< b > {% trans 'Reviewed at:' %} </ b > {{ flow.project_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.project_create_request.reviewed_at|time:\"H:i\" }} </ p > {% endif %} {% if flow.project_create_request.review_comment %} < p >< b > {% trans 'Comment:' %} </ b > {{ flow.project_create_request.review_comment }} </ p > {% endif %} {% endif %} {% if flow.resource_create_request.is_rejected %} < p > {% trans 'Resource creation request has been rejected.' %} </ p > {% if flow.resource_create_request.reviewed_by %} < p >< b > {% trans 'Reviewer name:' %} </ b > {{ flow.resource_create_request.reviewed_by.full_name }} </ p > {% endif %} {% if flow.resource_create_request.reviewed_at %} < p >< b > {% trans 'Reviewed at:' %} </ b > {{ flow.resource_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.resource_create_request.reviewed_at|time:\"H:i\" }} </ p > {% endif %} {% if flow.resource_create_request.review_comment %} < p >< b > {% trans 'Comment:' %} </ b > {{ flow.resource_create_request.review_comment }} </ p > {% endif %} {% endif %}","title":"flow_rejected_message.html (cloudrock_metal.marketplace_flows)"},{"location":"admin-guide/metal-configuration/templates/#flow_submitted_messagetxt-cloudrock_metalmarketplace_flows","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 {% load i18n %} {% load cloudrock_core %} {% trans 'Resource creation request has been submitted.' %} It has been requested by user {{ flow.requested_by.full_name }} with email {{ flow.requested_by.email }}. {% if flow.customer_create_request %} {% trans 'Customer create request details are:' %} * {% trans 'Organization name' %}: {{ flow.customer_create_request.name }} {% if flow.customer_create_request.native_name %} * {% trans 'Organization native name' %}: {{ flow.customer_create_request.native_name }} {% endif %} {% if flow.customer_create_request.abbreviation %} * {% trans 'Organization abbreviation' %}: {{ flow.customer_create_request.abbreviation }} {% endif %} {% if flow.customer_create_request.contact_details %} * {% trans 'Contact details' %}: {{ flow.customer_create_request.contact_details }} {% endif %} {% if flow.customer_create_request.agreement_number %} * {% trans 'Contact details' %}: {{ flow.customer_create_request.agreement_number }} {% endif %} {% if flow.customer_create_request.sponsor_number %} * {% trans 'External ID of the sponsor covering the costs' %}: {{ flow.customer_create_request.sponsor_number }} {% endif %} {% if flow.customer_create_request.email %} * {% trans 'Email address' %}: {{ flow.customer_create_request.email }} {% endif %} {% if flow.customer_create_request.phone_number %} * {% trans 'Phone number' %}: {{ flow.customer_create_request.phone_number }} {% endif %} {% if flow.customer_create_request.access_subnets %} * {% trans 'List of IPv4 or IPv6 CIDR addresses from where connection to self-service is allowed' %}: {{ flow.customer_create_request.access_subnets }} {% endif %} {% if flow.customer_create_request.registration_code %} * {% trans 'Registration code' %}: {{ flow.customer_create_request.registration_code }} {% endif %} {% if flow.customer_create_request.homepage %} * {% trans 'Homepage URL' %}: {{ flow.customer_create_request.homepage }} {% endif %} {% if flow.customer_create_request.domain %} * {% trans 'Organization domain' %}: {{ flow.customer_create_request.domain }} {% endif %} {% if flow.customer_create_request.address %} * {% trans 'Legal address' %}: {{ flow.customer_create_request.address }} {% endif %} {% if flow.customer_create_request.postal %} * {% trans 'Postal code' %}: {{ flow.customer_create_request.postal }} {% endif %} {% if flow.customer_create_request.bank_name %} * {% trans 'Bank name (for accounting)' %}: {{ flow.customer_create_request.bank_name }} {% endif %} {% if flow.customer_create_request.bank_account %} * {% trans 'Bank account number' %}: {{ flow.customer_create_request.bank_account }} {% endif %} {% else %} {% trans 'Organization name' %}: {{ flow.customer.name }} {% endif %} {% trans 'Project create request details are:' %} * {% trans 'Name' %}: {{ flow.project_create_request.name }} {% if flow.project_create_request.description %} * {% trans 'Description' %}: {{ flow.project_create_request.description }} {% endif %} {% if flow.project_create_request.end_date %} * {% trans 'End date' %}: {{ flow.project_create_request.end_date }} {% endif %} {% trans 'Resource create request details are:' %} * {% trans 'Name' %}: {{ flow.resource_create_request.name }} {% if flow.resource_create_request.description %} * {% trans 'Description' %}: {{ flow.resource_create_request.description }} {% endif %} {% if flow.resource_create_request.end_date %} * {% trans 'End date' %}: {{ flow.resource_create_request.end_date }} {% endif %} * {% trans 'Offering name' %}: {{ flow.resource_create_request.offering.name }} * {% trans 'Offering category' %}: {{ flow.resource_create_request.offering.category.title }} {% if flow.resource_create_request.plan %} * {% trans 'Plan' %}: {{ flow.resource_create_request.plan.name }} {% endif %} {% if flow.resource_create_request.attributes %} * {% trans 'Attributes' %}: {% for key, value in flow.resource_create_request.attributes.items|dictsort:\"0.lower\" %} {{ key }}: {{ value | pretty_json }} {% endfor %} {% endif %} {% if flow.resource_create_request.limits %} * {% trans 'Limits' %}: {% for key, value in flow.resource_create_request.limits.items|dictsort:\"0.lower\" %} {{ key }}: {{ value }} {% endfor %} {% endif %}","title":"flow_submitted_message.txt (cloudrock_metal.marketplace_flows)"},{"location":"admin-guide/metal-configuration/templates/#flow_rejected_messagetxt-cloudrock_metalmarketplace_flows","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 {% load i18n %} {% if flow.customer_create_request.is_rejected %} {% trans 'Customer creation request has been rejected.' %} {% if flow.customer_create_request.reviewed_by %} {% trans 'Reviewer name:' %} {{ flow.customer_create_request.reviewed_by.full_name }} {% endif %} {% if flow.customer_create_request.reviewed_at %} {% trans 'Reviewed at:' %} {{ flow.customer_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.customer_create_request.reviewed_at|time:\"H:i\" }} {% endif %} {% if flow.customer_create_request.review_comment %} {% trans 'Comment:' %} {{ flow.customer_create_request.review_comment }} {% endif %} {% endif %} {% if flow.project_create_request.is_rejected %} {% trans 'Project creation request has been rejected.' %} {% if flow.project_create_request.reviewed_by %} {% trans 'Reviewer name:' %} {{ flow.project_create_request.reviewed_by.full_name }} {% endif %} {% if flow.project_create_request.reviewed_at %} {% trans 'Reviewed at:' %} {{ flow.project_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.project_create_request.reviewed_at|time:\"H:i\" }} {% endif %} {% if flow.project_create_request.review_comment %} {% trans 'Comment:' %} {{ flow.project_create_request.review_comment }} {% endif %} {% endif %} {% if flow.resource_create_request.is_rejected %} {% trans 'Resource creation request has been rejected.' %} {% if flow.resource_create_request.reviewed_by %} {% trans 'Reviewer name:' %} {{ flow.resource_create_request.reviewed_by.full_name }} {% endif %} {% if flow.resource_create_request.reviewed_at %} {% trans 'Reviewed at:' %} {{ flow.resource_create_request.reviewed_at|date:\"SHORT_DATE_FORMAT\" }} {{ flow.resource_create_request.reviewed_at|time:\"H:i\" }} {% endif %} {% if flow.resource_create_request.review_comment %} {% trans 'Comment:' %} {{ flow.resource_create_request.review_comment }} {% endif %} {% endif %}","title":"flow_rejected_message.txt (cloudrock_metal.marketplace_flows)"},{"location":"admin-guide/metal-configuration/templates/#flow_submitted_messagehtml-cloudrock_metalmarketplace_flows","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 {% load i18n %} {% load cloudrock_core %} <!DOCTYPE html> < html > < head > < meta charset = \"utf-8\" > < title > {% trans \"Resource creation request details\" %} </ title > </ head > < body > < p > It has been requested by user {{ flow.requested_by.full_name }} with email {{ flow.requested_by.email }}. </ p > {% if flow.customer_create_request %} < h1 > {% trans 'Customer create request details' %} </ h1 > < ul > < li >< b > {% trans 'Organization name' %} </ b > : {{ flow.customer_create_request.name }} </ li > {% if flow.customer_create_request.native_name %} < li >< b > {% trans 'Organization native name' %} </ b > : {{ flow.customer_create_request.native_name }} </ li > {% endif %} {% if flow.customer_create_request.abbreviation %} < li >< b > {% trans 'Organization abbreviation' %} </ b > : {{ flow.customer_create_request.abbreviation }} </ li > {% endif %} {% if flow.customer_create_request.contact_details %} < li >< b > {% trans 'Contact details' %}: {{ flow.customer_create_request.contact_details }} </ b ></ li > {% endif %} {% if flow.customer_create_request.agreement_number %} < li >< b > {% trans 'Contact details' %}: {{ flow.customer_create_request.agreement_number }} </ b ></ li > {% endif %} {% if flow.customer_create_request.sponsor_number %} < li >< b > {% trans 'External ID of the sponsor covering the costs' %}: {{ flow.customer_create_request.sponsor_number }} </ b ></ li > {% endif %} {% if flow.customer_create_request.email %} < li >< b > {% trans 'Email address' %}: {{ flow.customer_create_request.email }} </ b ></ li > {% endif %} {% if flow.customer_create_request.phone_number %} < li >< b > {% trans 'Phone number' %}: {{ flow.customer_create_request.phone_number }} </ b ></ li > {% endif %} {% if flow.customer_create_request.access_subnets %} < li >< b > {% trans 'List of IPv4 or IPv6 CIDR addresses from where connection to self-service is allowed' %}: {{ flow.customer_create_request.access_subnets }} </ b ></ li > {% endif %} {% if flow.customer_create_request.registration_code %} < li >< b > {% trans 'Registration code' %}: {{ flow.customer_create_request.registration_code }} </ b ></ li > {% endif %} {% if flow.customer_create_request.homepage %} < li >< b > {% trans 'Homepage URL' %}: {{ flow.customer_create_request.homepage }} </ b ></ li > {% endif %} {% if flow.customer_create_request.domain %} < li >< b > {% trans 'Organization domain' %}: {{ flow.customer_create_request.domain }} </ b ></ li > {% endif %} {% if flow.customer_create_request.address %} < li >< b > {% trans 'Legal address' %}: {{ flow.customer_create_request.address }} </ b ></ li > {% endif %} {% if flow.customer_create_request.postal %} < li >< b > {% trans 'Postal code' %}: {{ flow.customer_create_request.postal }} </ b ></ li > {% endif %} {% if flow.customer_create_request.bank_name %} < li >< b > {% trans 'Bank name (for accounting)' %}: {{ flow.customer_create_request.bank_name }} </ b ></ li > {% endif %} {% if flow.customer_create_request.bank_account %} < li >< b > {% trans 'Bank account number' %}: {{ flow.customer_create_request.bank_account }} </ b ></ li > {% endif %} </ ul > {% else %} < b > {% trans 'Organization name' %} </ b > : {{ flow.customer.name }} {% endif %} < h1 > {% trans 'Project create request details' %} </ h1 > < ul > < li >< b > {% trans 'Name' %}: {{ flow.project_create_request.name }} </ b ></ li > {% if flow.project_create_request.description %} < li >< b > {% trans 'Description' %}: {{ flow.project_create_request.description }} </ b ></ li > {% endif %} {% if flow.project_create_request.end_date %} < li >< b > {% trans 'End date' %}: {{ flow.project_create_request.end_date }} </ b ></ li > {% endif %} </ ul > < h1 > {% trans 'Resource create request details' %} </ h1 > < ul > < li >< b > {% trans 'Name' %}: {{ flow.resource_create_request.name }} </ b ></ li > {% if flow.resource_create_request.description %} < li >< b > {% trans 'Description' %}: {{ flow.resource_create_request.description }} </ b ></ li > {% endif %} {% if flow.resource_create_request.end_date %} < li >< b > {% trans 'End date' %}: {{ flow.resource_create_request.end_date }} </ b ></ li > {% endif %} < li >< b > {% trans 'Offering name' %}: {{ flow.resource_create_request.offering.name }} </ b ></ li > < li >< b > {% trans 'Offering category' %}: {{ flow.resource_create_request.offering.category.title }} </ b ></ li > {% if flow.resource_create_request.plan %} < li >< b > {% trans 'Plan' %}: {{ flow.resource_create_request.plan.name }} </ b ></ li > {% endif %} {% if flow.resource_create_request.attributes %} < li >< b > {% trans 'Attributes' %} </ b > : < table border = \"0\" cellspacing = \"0\" cellpadding = \"0\" > < tr > < th > # </ th > < th > {% trans \"NAME\" %} </ th > < th > {% trans \"VALUE\" %} </ th > </ tr > {% for key, value in flow.resource_create_request.attributes.items|dictsort:\"0.lower\" %} < tr > < td > {{ forloop.counter }} </ td > < td > {{ key }} </ td > < td > {{ value | pretty_json }} </ td > </ tr > {% endfor %} </ table > </ li > {% endif %} {% if flow.resource_create_request.limits %} < li >< b > {% trans 'Limits' %} </ b > : < table border = \"0\" cellspacing = \"0\" cellpadding = \"0\" > < tr > < th > # </ th > < th > {% trans \"NAME\" %} </ th > < th > {% trans \"VALUE\" %} </ th > </ tr > {% for key, value in flow.resource_create_request.limits.items|dictsort:\"0.lower\" %} < tr > < td > {{ forloop.counter }} </ td > < td > {{ key }} </ td > < td > {{ value }} </ td > </ tr > {% endfor %} </ table > </ li > {% endif %} </ ul > </ body > </ html >","title":"flow_submitted_message.html (cloudrock_metal.marketplace_flows)"},{"location":"admin-guide/metal-configuration/templates/#flow_rejected_subjecttxt-cloudrock_metalmarketplace_flows","text":"1 2 {% load i18n %} {% trans 'Your submission has been rejected' %}","title":"flow_rejected_subject.txt (cloudrock_metal.marketplace_flows)"},{"location":"admin-guide/metal-configuration/templates/#flow_submitted_subjecttxt-cloudrock_metalmarketplace_flows","text":"1 2 {% load i18n %} {% trans 'Resource creation request has been submitted' %}","title":"flow_submitted_subject.txt (cloudrock_metal.marketplace_flows)"},{"location":"admin-guide/metal-configuration/templates/#cloudrock_metalmarketplace_support","text":"","title":"cloudrock_metal.marketplace_support"},{"location":"admin-guide/metal-configuration/templates/#create_resource_templatetxt-cloudrock_metalmarketplace_support","text":"1 2 3 4 5 6 7 8 {% load cloudrock_marketplace %}[Order item|{{order_item_url}}]. Provider: {{order_item.offering.customer.name}} Resource UUID: {{resource.uuid}} Plan details: {% plan_details order_item.plan %} Full name: {{order_item.order.created_by.full_name|default:\"none\"}} Civil code:{{order_item.order.created_by.civil_number|default:\"none\"}} Email: {{order_item.order.created_by.email}}","title":"create_resource_template.txt (cloudrock_metal.marketplace_support)"},{"location":"admin-guide/metal-configuration/templates/#update_resource_templatetxt-cloudrock_metalmarketplace_support","text":"1 2 3 [Switch plan for resource {{order_item.resource.scope.name}}|{{request_url}}]. Switch from {{order_item.resource.plan.name}} plan to {{order_item.plan.name}}. Marketplace resource UUID: {{order_item.resource.uuid.hex}}","title":"update_resource_template.txt (cloudrock_metal.marketplace_support)"},{"location":"admin-guide/metal-configuration/templates/#update_limits_templatetxt-cloudrock_metalmarketplace_support","text":"1 2 3 4 [Update limits for resource {{order_item.resource.scope.name}}|{{request_url}}]. Marketplace resource UUID: {{order_item.resource.uuid.hex}} Old limits: {{ old_limits }}. New limits: {{ new_limits }}.","title":"update_limits_template.txt (cloudrock_metal.marketplace_support)"},{"location":"admin-guide/metal-configuration/templates/#terminate_resource_templatetxt-cloudrock_metalmarketplace_support","text":"1 2 3 {% load cloudrock_marketplace %}[Terminate resource {{order_item.resource.scope.name}}|{{request_url}}]. {% plan_details order_item.resource.plan %} Marketplace resource UUID: {{order_item.resource.uuid.hex}}","title":"terminate_resource_template.txt (cloudrock_metal.marketplace_support)"},{"location":"admin-guide/metal-configuration/templates/#cloudrock_metalsupport","text":"","title":"cloudrock_metal.support"},{"location":"admin-guide/metal-configuration/templates/#notification_issue_updatedtxt-cloudrock_metalsupport","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 Hello! The issue you have has been updated. {% if changed.status %} Status has been changed from {{ changed.status }} to {{ issue.status }}. {% endif %} {% if changed.description %} Description has been changed from {{ changed.description }} to {{ issue.description }}. {% endif %} {% if changed.summary %} Summary has been changed from {{ changed.summary }} to {{ issue.summary }}. {% endif %} {% if changed.priority %} Priority has been changed from {{ changed.priority }} to {{ issue.priority }}. {% endif %} Please go to {{issue_url}} to see it.","title":"notification_issue_updated.txt (cloudrock_metal.support)"},{"location":"admin-guide/metal-configuration/templates/#descriptiontxt-cloudrock_metalsupport","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 {{issue.description}} --- Additional Info: {% if issue.customer %}- Organization: {{issue.customer.name}}{% endif %} {% if issue.project %}- Project: {{issue.project.name}}{% endif %} {% if issue.resource %} {% if issue.resource.service_settings %} {% if issue.resource.service_settings.type %}- Service type: {{issue.resource.service_settings.type}}{% endif %} - Offering name: {{ issue.resource.service_settings.name }} - Offering provided by: {{ issue.resource.service_settings.customer.name }} {% endif %} - Affected resource: {{issue.resource}} {% endif %} - Site name: {{ settings.CLOUDROCK_CORE.SITE_NAME }} - Site URL: {{ settings.CLOUDROCK_CORE.CLOUDROCK_UI_URL }}","title":"description.txt (cloudrock_metal.support)"},{"location":"admin-guide/metal-configuration/templates/#notification_issue_feedback_subjecttxt-cloudrock_metalsupport","text":"1 Please share your feedback: {{issue.key}} {{issue.summary}}","title":"notification_issue_feedback_subject.txt (cloudrock_metal.support)"},{"location":"admin-guide/metal-configuration/templates/#notification_issue_updatedhtml-cloudrock_metalsupport","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > The issue you have ({{ issue.key }}) has been updated </ title > </ head > < body > < p > Hello! </ p > {% if changed.status %} < p > Status has been changed from < strong > {{ changed.status }} </ strong > to < strong > {{ issue.status }} </ strong > . </ p > {% endif %} {% if changed.description %} < p > Description has been changed from < strong > {{ changed.description }} </ strong > to < strong > {{ issue.description }} </ strong > . </ p > {% endif %} {% if changed.summary %} < p > Summary has been changed from < strong > {{ changed.summary }} </ strong > to < strong > {{ issue.summary }} </ strong > . </ p > {% endif %} {% if changed.priority %} < p > Priority has been changed from < strong > {{ changed.priority }} </ strong > to < strong > {{ issue.priority }} </ strong > . </ p > {% endif %} < p > Please visit < a href = \"{{ issue_url }}\" > {{ site_name }} </ a > to find out more details. </ p > </ body > </ html >","title":"notification_issue_updated.html (cloudrock_metal.support)"},{"location":"admin-guide/metal-configuration/templates/#notification_issue_feedbackhtml-cloudrock_metalsupport","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > The issue you have ({{ issue.key }}) has been updated </ title > < style > * { font-family : sans-serif ; } . rating { unicode-bidi : bidi-override ; direction : rtl ; width : 500 px ; } . rating > a { display : inline-block ; position : relative ; width : 1.1 em ; text-decoration : none ; font-size : xx-large ; color : rgba ( 180 , 179 , 178 , 1 ); } . rating > a : hover : before , . rating > a : hover ~ a : before { content : \"\\2605\" ; position : absolute ; color : rgba ( 224 , 194 , 75 , 1 ); } </ style > </ head > < body > < p > Hello, {{issue.caller.full_name}}! </ p > < p > We would like to hear your feedback regarding your recent experience with support for < a href = '{{issue_url}}' > {{ issue.summary }} </ a > . </ p > < p > Click the stars below to provide your feedback: </ p > < div class = \"rating\" > {% for link in feedback_links reversed %} < a href = '{{link.link}}' > \u2606 </ a > {% endfor %} </ div > </ body > </ html >","title":"notification_issue_feedback.html (cloudrock_metal.support)"},{"location":"admin-guide/metal-configuration/templates/#notification_issue_updated_subjecttxt-cloudrock_metalsupport","text":"1 Updated issue: {{issue.key}} {{issue.summary}}","title":"notification_issue_updated_subject.txt (cloudrock_metal.support)"},{"location":"admin-guide/metal-configuration/templates/#notification_comment_updatedtxt-cloudrock_metalsupport","text":"1 2 3 Hello! The comment has been updated. Please go to {{issue_url}} to see it.","title":"notification_comment_updated.txt (cloudrock_metal.support)"},{"location":"admin-guide/metal-configuration/templates/#notification_comment_updated_subjecttxt-cloudrock_metalsupport","text":"1 The comment has been updated","title":"notification_comment_updated_subject.txt (cloudrock_metal.support)"},{"location":"admin-guide/metal-configuration/templates/#notification_comment_addedtxt-cloudrock_metalsupport","text":"1 2 3 Hello! The issue you have created has a new comment. Please go to {{issue_url}} to see it.","title":"notification_comment_added.txt (cloudrock_metal.support)"},{"location":"admin-guide/metal-configuration/templates/#notification_comment_updatedhtml-cloudrock_metalsupport","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > The comment has been updated ({{ issue.key }}) </ title > </ head > < body > < p > {{ comment.author.name }} updated comment. </ p > < p > < a href = \"{{ issue_url }}\" > [{{ issue.key }}] {{ issue.summary }} </ a > </ p > < p > Old comment: </ p > < p > {{ old_description }} </ p > < p > New comment: </ p > < p > {{ comment.description }} </ p > </ body > </ html >","title":"notification_comment_updated.html (cloudrock_metal.support)"},{"location":"admin-guide/metal-configuration/templates/#notification_comment_added_subjecttxt-cloudrock_metalsupport","text":"1 The issue you have created has a new comment","title":"notification_comment_added_subject.txt (cloudrock_metal.support)"},{"location":"admin-guide/metal-configuration/templates/#notification_comment_addedhtml-cloudrock_metalsupport","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 < html > < head lang = \"en\" > < meta charset = \"UTF-8\" > < title > The issue you have created ({{ issue.key }}) has a new comment </ title > </ head > < body > < p > {{ comment.author.name }} added a new comment. </ p > < p > < a href = \"{{ issue_url }}\" > [{{ issue.key }}] {{ issue.summary }} </ a > </ p > < pre > {{ comment.description }} </ pre > </ body > </ html >","title":"notification_comment_added.html (cloudrock_metal.support)"},{"location":"admin-guide/metal-configuration/templates/#summarytxt-cloudrock_metalsupport","text":"1 {% if issue.customer.abbreviation %}{{issue.customer.abbreviation}}: {% endif %}{{issue.summary}}","title":"summary.txt (cloudrock_metal.support)"},{"location":"admin-guide/metal-configuration/templates/#notification_issue_feedbacktxt-cloudrock_metalsupport","text":"1 2 3 4 5 6 7 8 9 Hello, {{issue.caller.full_name}}! We would like to hear your feedback regarding your recent experience with support for {{issue_url}}. Click on the evaluations below to provide the feedback. {% for link in feedback_links%} {{link.label}}: {{link.link}} {% endfor %}","title":"notification_issue_feedback.txt (cloudrock_metal.support)"},{"location":"admin-guide/providers/adding-an-offering/","text":"Adding an offering Cloudrock supports a number of different types of service providers when creating a shared offering. A common way of creating an offering is through a Cloudrock-UI. Select organization, which will provide the offering. Make sure that organization is a service provider. Make it one with a staff user if the flag is not set. Go to public offerings and click on adding a new one: Fill in public offering details: Activate offering to make it visible to everybody. Tip For more advanced cases of management of offerings, take a look at how a SLURM offering can be managed using Ansible module .","title":"Adding an offering"},{"location":"admin-guide/providers/adding-an-offering/#adding-an-offering","text":"Cloudrock supports a number of different types of service providers when creating a shared offering. A common way of creating an offering is through a Cloudrock-UI. Select organization, which will provide the offering. Make sure that organization is a service provider. Make it one with a staff user if the flag is not set. Go to public offerings and click on adding a new one: Fill in public offering details: Activate offering to make it visible to everybody. Tip For more advanced cases of management of offerings, take a look at how a SLURM offering can be managed using Ansible module .","title":"Adding an offering"},{"location":"admin-guide/providers/azure/","text":"Azure Warning Documentation is in progress. Plugin development is in progress. Setting up Tenant https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-create-new-tenant Setting up a Client https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app Add permissions Make sure that client is able to perform operations on the different resources. https://stackoverflow.com/questions/42134892/the-client-with-object-id-does-not-have-authorization-to-perform-action-microso Collecting Azure credentials for Cloudrock You need to provide following Azure credentials to Cloudrock: subscription ID, tenant ID, client ID and client secret. Get Subscription ID Login into your Azure account. Select Subscriptions in the left sidebar. Select whichever subscription is needed. Click on Overview . Copy the Subscription ID . Get Tenant ID Login into your Azure account. Select Azure Active Directory in the left sidebar. Click Properties . Copy the Directory ID . Get Client ID Login into your Azure account. Select Azure Active Directory in the left sidebar. Click Enterprise applications . Click All applications . Select the application which you have created. Click Properties . Copy the Application ID . Get Client secret Login into your Azure account. Select Azure Active Directory in the left sidebar. Click App registrations . Select the application which you have created. Click on All settings . Click on Keys . Type Key description and select the Duration . Click save. Copy and store the key value. You won\u2019t be able to retrieve it after you leave this page. See also: How to: Use the portal to create an Azure AD application and service principal that can access resources","title":"Azure"},{"location":"admin-guide/providers/azure/#azure","text":"Warning Documentation is in progress. Plugin development is in progress.","title":"Azure"},{"location":"admin-guide/providers/azure/#setting-up-tenant","text":"https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-create-new-tenant","title":"Setting up Tenant"},{"location":"admin-guide/providers/azure/#setting-up-a-client","text":"https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app","title":"Setting up a Client"},{"location":"admin-guide/providers/azure/#add-permissions","text":"Make sure that client is able to perform operations on the different resources. https://stackoverflow.com/questions/42134892/the-client-with-object-id-does-not-have-authorization-to-perform-action-microso","title":"Add permissions"},{"location":"admin-guide/providers/azure/#collecting-azure-credentials-for-cloudrock","text":"You need to provide following Azure credentials to Cloudrock: subscription ID, tenant ID, client ID and client secret.","title":"Collecting Azure credentials for Cloudrock"},{"location":"admin-guide/providers/azure/#get-subscription-id","text":"Login into your Azure account. Select Subscriptions in the left sidebar. Select whichever subscription is needed. Click on Overview . Copy the Subscription ID .","title":"Get Subscription ID"},{"location":"admin-guide/providers/azure/#get-tenant-id","text":"Login into your Azure account. Select Azure Active Directory in the left sidebar. Click Properties . Copy the Directory ID .","title":"Get Tenant ID"},{"location":"admin-guide/providers/azure/#get-client-id","text":"Login into your Azure account. Select Azure Active Directory in the left sidebar. Click Enterprise applications . Click All applications . Select the application which you have created. Click Properties . Copy the Application ID .","title":"Get Client ID"},{"location":"admin-guide/providers/azure/#get-client-secret","text":"Login into your Azure account. Select Azure Active Directory in the left sidebar. Click App registrations . Select the application which you have created. Click on All settings . Click on Keys . Type Key description and select the Duration . Click save. Copy and store the key value. You won\u2019t be able to retrieve it after you leave this page. See also: How to: Use the portal to create an Azure AD application and service principal that can access resources","title":"Get Client secret"},{"location":"admin-guide/providers/moab/","text":"MOAB MOAB is a scheduling engine for HPC centers. Warning As adoption of MOAB has significantly reduced over the last years and there are no active users of Cloudrock with MOAB requirements, we have deprecated and removed MOAB provider. Migration from MOAB to SLURM If you are still running MOAB and would like to move to a supported scheduler - SLURM, please find the suggested articles below. They are provided by external parties with no affiliation to Cloudrock team. Moab to SLURM migration guide Converting Moab/Torque scripts to Slurm Converting Moab/Torque script to Slurm #2 Slurm vs Moab/Torque","title":"MOAB"},{"location":"admin-guide/providers/moab/#moab","text":"MOAB is a scheduling engine for HPC centers. Warning As adoption of MOAB has significantly reduced over the last years and there are no active users of Cloudrock with MOAB requirements, we have deprecated and removed MOAB provider.","title":"MOAB"},{"location":"admin-guide/providers/moab/#migration-from-moab-to-slurm","text":"If you are still running MOAB and would like to move to a supported scheduler - SLURM, please find the suggested articles below. They are provided by external parties with no affiliation to Cloudrock team. Moab to SLURM migration guide Converting Moab/Torque scripts to Slurm Converting Moab/Torque script to Slurm #2 Slurm vs Moab/Torque","title":"Migration from MOAB to SLURM"},{"location":"admin-guide/providers/openstack/","text":"OpenStack (Tenant) Requirements for OpenStack (Tenant) OpenStack versions tested: Queens Rocky Stein Train Ussuri Victoria In order to integrate an OpenStack-based cloud as a shared provider, the following data is required: URL of Keystone's public endpoint (v3). Access to public interfaces of Keystone, Nova, Cinder, Neutron and Glance should be opened to Cloudrock Metal server. Admin credentials (username/password) as well as domain name (in case non-default domain is used). External network UUID - the network will be by default connected to all created OpenStack Projects (Tenants). Advanced settings It's possible to override some settings for OpenStack in Metal admin interface. To do that, please go to Cloudrock Metal Admin interface with a staff account. Go to Structure \u2192 Shared provider settings and select the one you want to update. Define specific customisation options. To add an option select append on item block under the object tree. Most typical are: external_network_id \u2013 external network to connect to when creating a VPC from this provider. access_url - a URL to access OpenStack Horizon dashboard from a public network. Typically a reverse proxy URL in production deployments. flavor_exclude_regex - flavors matching this regex expression will not be pulled from the backend. dns_nameservers - default value for new subnets DNS name servers. Should be defined as list. create_ha_routers - create highly available Neutron routers when creating Tenants. Support for Organization specific OpenStack networks You can provide specific external network for all OpenStack Tenants created by Organiztion by providing external network UUIDs in Organization configuration in Cloudrock Metal admin portal.","title":"OpenStack (Tenant)"},{"location":"admin-guide/providers/openstack/#openstack-tenant","text":"","title":"OpenStack (Tenant)"},{"location":"admin-guide/providers/openstack/#requirements-for-openstack-tenant","text":"OpenStack versions tested: Queens Rocky Stein Train Ussuri Victoria In order to integrate an OpenStack-based cloud as a shared provider, the following data is required: URL of Keystone's public endpoint (v3). Access to public interfaces of Keystone, Nova, Cinder, Neutron and Glance should be opened to Cloudrock Metal server. Admin credentials (username/password) as well as domain name (in case non-default domain is used). External network UUID - the network will be by default connected to all created OpenStack Projects (Tenants).","title":"Requirements for OpenStack (Tenant)"},{"location":"admin-guide/providers/openstack/#advanced-settings","text":"It's possible to override some settings for OpenStack in Metal admin interface. To do that, please go to Cloudrock Metal Admin interface with a staff account. Go to Structure \u2192 Shared provider settings and select the one you want to update. Define specific customisation options. To add an option select append on item block under the object tree. Most typical are: external_network_id \u2013 external network to connect to when creating a VPC from this provider. access_url - a URL to access OpenStack Horizon dashboard from a public network. Typically a reverse proxy URL in production deployments. flavor_exclude_regex - flavors matching this regex expression will not be pulled from the backend. dns_nameservers - default value for new subnets DNS name servers. Should be defined as list. create_ha_routers - create highly available Neutron routers when creating Tenants.","title":"Advanced settings"},{"location":"admin-guide/providers/openstack/#support-for-organization-specific-openstack-networks","text":"You can provide specific external network for all OpenStack Tenants created by Organiztion by providing external network UUIDs in Organization configuration in Cloudrock Metal admin portal.","title":"Support for Organization specific OpenStack networks"},{"location":"admin-guide/providers/remote-cloudrock/","text":"Remote Offering Warning Documentation is in progress. Plugin development is in progress. Introduction It is possible to import into a Cloudrock offerings from a remote Cloudrock. Pre-requisites An organization in the remote Cloudrock, which will contain requests and projects from the local Cloudrock. Account with owner role that will be used for integration. Access to APIs of remote Cloudrock. High level process In local Cloudrock, make sure that you have a service provider organization available. Click on \"Import offering\". Input remote Cloudrock API and authentication token. Select the remote organization and offering to be imported. Review and activate the offering. eduTEAMS account SYNC In case both local and remote Cloudrocks are relying on a common set of identities from eduTEAMS , it is possible to configure synchronisation of the identities as well, i.e. when a resource is provisioned in a remote Cloudrock, local accounts from organization and project are pushed and mapped to the remote project. Note For this to work, remote Cloudrock must be integrated with eduTEAMS registry and integration user must have identity_manager role.","title":"Remote Offering"},{"location":"admin-guide/providers/remote-cloudrock/#remote-offering","text":"Warning Documentation is in progress. Plugin development is in progress.","title":"Remote Offering"},{"location":"admin-guide/providers/remote-cloudrock/#introduction","text":"It is possible to import into a Cloudrock offerings from a remote Cloudrock.","title":"Introduction"},{"location":"admin-guide/providers/remote-cloudrock/#pre-requisites","text":"An organization in the remote Cloudrock, which will contain requests and projects from the local Cloudrock. Account with owner role that will be used for integration. Access to APIs of remote Cloudrock.","title":"Pre-requisites"},{"location":"admin-guide/providers/remote-cloudrock/#high-level-process","text":"In local Cloudrock, make sure that you have a service provider organization available. Click on \"Import offering\". Input remote Cloudrock API and authentication token. Select the remote organization and offering to be imported. Review and activate the offering.","title":"High level process"},{"location":"admin-guide/providers/remote-cloudrock/#eduteams-account-sync","text":"In case both local and remote Cloudrocks are relying on a common set of identities from eduTEAMS , it is possible to configure synchronisation of the identities as well, i.e. when a resource is provisioned in a remote Cloudrock, local accounts from organization and project are pushed and mapped to the remote project. Note For this to work, remote Cloudrock must be integrated with eduTEAMS registry and integration user must have identity_manager role.","title":"eduTEAMS account SYNC"},{"location":"admin-guide/providers/slurm/","text":"SLURM provider SLURM plugin enables sharing of access to a SLURM cluster. SLURM is a scheduling system used typically for managing High-performance clusters. Cloudrock allows to share access by creating Slurm accounts and managing permission rights of users. Configure Cloudrock SLURM plugin By default, Cloudrock creates a hierarchical account structure in SLURM, where: Organization gets an account under a default account, defined when configuring SLURM service offering; Each project is created as a an allocation, which is a child of organization's account. Each resource created in Cloudrock (aka SLURM Allocation) gets its own SLURM account with project account as a parent. These accounts get standard prefixes along with unique values and user provided input. It is possible to customize prefixes in Cloudrock configuration. Check CLOUDROCK_SLURM variables in Cloudrock configuration guide . Add SLURM provider To add SLURM as a provider to Cloudrock, you will need the following information: SSH host address to a node, from where SLURM commands could be executed. Username that has Slurm operator role . Operator is needed as Cloudrock dynamically creates accounts based on user's choice of FreeIPA account. Cloudrock public key must be added as authorized_key for the operator's username. Slurm login node must be configured to authenticate users coming from FreeIPA connected to Cloudrock. SLURM auto-provisioning hooks It is possible to streamline creation of SLURM allocations for new users based on affiliation of a user profile. Configuration settings are described in Cloudrock configuration guide under CLOUDROCK_HPC settings. The logic is as follows: Once a user is created (e.g. via eduGAIN login), user's affiliation and email are checked to see if user belongs to internal or external organization. If so, a project is created for the user in a corresponding organization. For users belonging to internal organization, SLURM request is pre-filled and created using account limits of internal organizations. For users belonging to external organization, SLURM request is pre-filled only - it would require a manual confirmation from the organization owner of the external organization to be provisioned. Default limits of SLURM apply. Configure SLURM cluster Cloudrock might work out of the box with most of the reasonably modern deployments of SLURM, which have accounting enabled and limits enforced. Please refer to SLURM documentation for details: SLURM Accounting SLURM Resource Limits SLURM Multifactor Priority Plugin We provide a snapshot of instructions for the convenience of the reader. Add SLURM cluster SLURM accounting plugin assumes that at least one cluster is configured. For example: 1 sacctmgr add cluster linux Enforce SLURM accounting limits In order to enforce limits set on associations and QoS, please modify slurm.conf: 1 AccountingStorageEnforce = limits Please note, that when AccountingStorageEnforce is changed, a restart of the slurmctld daemon is required (not just a scontrol reconfig ): 1 systemctl restart slurmctld Enable SLURM Multi Priority plugin In order to enable ordering for the queue of jobs waiting to be scheduled, please modify slurm.conf: 1 PriorityType = priority/multifactor When slurm.conf is changed, you should reload configuration: 1 scontrol reconfig","title":"SLURM provider"},{"location":"admin-guide/providers/slurm/#slurm-provider","text":"SLURM plugin enables sharing of access to a SLURM cluster. SLURM is a scheduling system used typically for managing High-performance clusters. Cloudrock allows to share access by creating Slurm accounts and managing permission rights of users.","title":"SLURM provider"},{"location":"admin-guide/providers/slurm/#configure-cloudrock-slurm-plugin","text":"By default, Cloudrock creates a hierarchical account structure in SLURM, where: Organization gets an account under a default account, defined when configuring SLURM service offering; Each project is created as a an allocation, which is a child of organization's account. Each resource created in Cloudrock (aka SLURM Allocation) gets its own SLURM account with project account as a parent. These accounts get standard prefixes along with unique values and user provided input. It is possible to customize prefixes in Cloudrock configuration. Check CLOUDROCK_SLURM variables in Cloudrock configuration guide .","title":"Configure Cloudrock SLURM plugin"},{"location":"admin-guide/providers/slurm/#add-slurm-provider","text":"To add SLURM as a provider to Cloudrock, you will need the following information: SSH host address to a node, from where SLURM commands could be executed. Username that has Slurm operator role . Operator is needed as Cloudrock dynamically creates accounts based on user's choice of FreeIPA account. Cloudrock public key must be added as authorized_key for the operator's username. Slurm login node must be configured to authenticate users coming from FreeIPA connected to Cloudrock.","title":"Add SLURM provider"},{"location":"admin-guide/providers/slurm/#slurm-auto-provisioning-hooks","text":"It is possible to streamline creation of SLURM allocations for new users based on affiliation of a user profile. Configuration settings are described in Cloudrock configuration guide under CLOUDROCK_HPC settings. The logic is as follows: Once a user is created (e.g. via eduGAIN login), user's affiliation and email are checked to see if user belongs to internal or external organization. If so, a project is created for the user in a corresponding organization. For users belonging to internal organization, SLURM request is pre-filled and created using account limits of internal organizations. For users belonging to external organization, SLURM request is pre-filled only - it would require a manual confirmation from the organization owner of the external organization to be provisioned. Default limits of SLURM apply.","title":"SLURM auto-provisioning hooks"},{"location":"admin-guide/providers/slurm/#configure-slurm-cluster","text":"Cloudrock might work out of the box with most of the reasonably modern deployments of SLURM, which have accounting enabled and limits enforced. Please refer to SLURM documentation for details: SLURM Accounting SLURM Resource Limits SLURM Multifactor Priority Plugin We provide a snapshot of instructions for the convenience of the reader.","title":"Configure SLURM cluster"},{"location":"admin-guide/providers/slurm/#add-slurm-cluster","text":"SLURM accounting plugin assumes that at least one cluster is configured. For example: 1 sacctmgr add cluster linux","title":"Add SLURM cluster"},{"location":"admin-guide/providers/slurm/#enforce-slurm-accounting-limits","text":"In order to enforce limits set on associations and QoS, please modify slurm.conf: 1 AccountingStorageEnforce = limits Please note, that when AccountingStorageEnforce is changed, a restart of the slurmctld daemon is required (not just a scontrol reconfig ): 1 systemctl restart slurmctld","title":"Enforce SLURM accounting limits"},{"location":"admin-guide/providers/slurm/#enable-slurm-multi-priority-plugin","text":"In order to enable ordering for the queue of jobs waiting to be scheduled, please modify slurm.conf: 1 PriorityType = priority/multifactor When slurm.conf is changed, you should reload configuration: 1 scontrol reconfig","title":"Enable SLURM Multi Priority plugin"},{"location":"admin-guide/rke2-setup/RKE2-setup/","text":"Cloudrock on RKE2 RKE2 installation and setup To install Cloudrock on top of RKE2 you need to: Install Ansible with version >= 2.10 and ensure python3 is installed. Download this repository Install kubernetes.core collection from ansible galaxy and download installation files. 1 2 3 4 5 6 7 8 9 10 11 ansible-galaxy collection install kubernetes.core # or curl -o ansible-galaxy/kubernetes-core-2.3.2.tar.gz --create-dirs https://galaxy.ansible.com/download/kubernetes-core-2.3.2.tar.gz ansible-galaxy collection install ansible-galaxy/kubernetes-core-2.3.2.tar.gz cd ansible-config/ curl -o rke2/rke2-install.sh --create-dirs https://get.rke2.io curl -fsSL -o helm/get-helm.sh --create-dirs https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 Download Helm chart archives if your target machines don't have internet access 1 2 3 4 5 6 cd ansible-config/ curl -o longhorn/longhorn-1.3.1.tgz --create-dirs https://github.com/longhorn/charts/releases/download/longhorn-1.3.1/longhorn-1.3.1.tgz curl -o kubernetes-dashboard/k8s-dashboard-5.10.0.tar.gz --create-dirs https://kubernetes.github.io/dashboard/kubernetes-dashboard-5.10.0.tgz curl -s -o bitnami/postgresql-11.9.1.tgz --create-dirs https://charts.bitnami.com/bitnami/postgresql-11.9.1.tgz curl -s -o bitnami/rabbitmq-10.3.5.tgz --create-dirs https://charts.bitnami.com/bitnami/rabbitmq-10.3.5.tgz curl -sL -o cloudrock/cloudrock-chart.zip --create-dirs https://github.com/kubeworkz/cloudrock-helm/archive/refs/heads/master.zip Adjust variables in ansible-config/rke2_vars file Run the playbook 1 2 cd ansible-config ansible-playbook -D -i rke2_inventory install.yaml You can check Cloudrock release installation with the following steps: ssh to a node from inventory with initial_server=true mark check all the pods from namespace: 1 2 export KUBECONFIG = /etc/rancher/rke2/rke2.yaml kubectl get pods -n default If you run Cloudrock in a different namespace, please adjust the value of the -n option in the last command above. Add admin ssh keys Setup admin_keys and revoked_admin_keys vars in the ansible-config/rke2_vars file Run the corresponding playbook 1 2 cd ansible-config ansible-playbook -D -i rke2_inventory add-ssh-keys.yml Add haproxy load balancer Setup haproxy_stats_password var in the ansible-config/rke2_vars file Run the corresponding playbook 1 2 cd ansible-config ansible-playbook -D -i rke2_inventory add-haproxy-host.yml Cloudrock Helm configuration A user can override default settings for Cloudrock Helm. The ansible-config/cloudrock/values.yaml is the main settings file. Additional configuration features files (e.g. for SAML2, whitelabeling, bootstrapping, etc.) can be included by placing into corresponding subdirectories of ansible-config/cloudrock/ folder. The paths to the subdirectories should be specified in ansible-config/cloudrock/values.yaml , e.g. cloudrock.saml2.dir value. Cloudrock Helm configuration is described in the public docs ; example values.yaml file: link , example additional files: link . Update of Cloudrock To update Cloudrock user needs to execute the corresponding playbook: 1 2 cd ansible-config ansible-playbook -D -i rke2_inventory update.yaml Update of Cloudrock dependencies To update Cloudrock dependencies, a user should: Setup the desired components for update in ansible-config/rke2_vars file, e.g. set setup_postgresql to yes in case of PostgreSQL Helm chart update. NB: please, don't change chart versions manually, it can cause failure of Cloudrock application Run the corresponding playbook: 1 2 cd ansible-config ansible-playbook -D -i rke2_inventory update-dependencies.yaml Example of changes in ansible-config/rke2_vars file: 1 2 3 4 5 6 7 8 9 # Cloudrock dependency setup setup_postgresql : yes # User can skip PostgreSQL setup postgresql_version : 11.9.1 # Version of PostgreSQL Helm chart setup_rabbitmq : no # User can skip RabbitMQ setup rabbitmq_version : 10.3.5 # Version of RabbitMQ Helm chart setup_minio : no # User can skip MinIO setup minio_version : 11.10.16 # Version of MinIO Helm chart With this setup, the playbook will update PostgreSQL release only. If the user wants to update RabbitMQ too, they should set setup_rabbitmq: yes Cloudrock log fetching To get logs from Cloudrock containers, a users needs to connect to one of the RKE2 nodes: 1 ssh <node-ip> A node IP should be chosen from the inventory file (e.g. rke2_inventory ). In the node's shell, the user should run the following to setup Kubernetes client: 1 export KUBECONFIG = /etc/rancher/rke2/rke2.yaml After this, the user can get Cloudrock API logs: 1 kubectl logs --tail 100 -l app = cloudrock-metal-api -n default Same works for Celery worker: 1 kubectl logs --tail 100 -l app = cloudrock-metal-worker -n default Note: if you use a non-default namespace for Cloudrock release, please change the value for -n option in the aforementioned command Update SSL certificates To update the SSL certificates, please do the following steps: Copy the certificates and keys to the ansible-config/cloudrock/tls directory. NB: key must be named tls.key and cert itself - tls.crt Update Cloudrock release Recover data from DB backup In order to apply an existing backup to database, a corresponding playbook exists. NB: This operation drops an existing database, creates an empty one and applies the pre-created backup During restoration process, the site will be unavailable During execution, you will be asked about backup name. You should input it in a correct way. Example of running playbook: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 TASK [List backups] **************************************************************************************************************************************** ok: [csl-stg-kubs01] => {} MSG: [+] LOCAL_PG_BACKUPS_DIR : [+] MINIO_PG_BACKUPS_DIR : pg/data/backups/postgres [+] Setting up the postgres alias for minio server (http://minio.default.svc.cluster.local:9000) [+] Last 5 backups [2022-12-01 05:00:02 UTC] 91KiB backup-2022-12-01-05-00.sql.gz [2022-11-30 05:00:02 UTC] 91KiB backup-2022-11-30-05-00.sql.gz [2022-11-29 05:00:02 UTC] 91KiB backup-2022-11-29-05-00.sql.gz [2022-11-28 16:30:37 UTC] 91KiB backup-2022-11-28-16-30.sql.gz [2022-11-28 16:28:27 UTC] 91KiB backup-2022-11-28-16-28.sql.gz [+] Finished [Choose backup] Please enter backup's name: After this, you should input one of the following lines: backup-2022-12-01-05-00.sql.gz backup-2022-11-30-05-00.sql.gz backup-2022-11-29-05-00.sql.gz backup-2022-11-28-16-30.sql.gz backup-2022-11-28-16-28.sql.gz Otherwise, the entire process will fail, but the site and database with old data will be still available. To start the process, please, execute the following line in the machine connected to RKE2 nodes: 1 ansible-playbook -D -i rke2_inventory restore-data.yaml","title":"Cloudrock on RKE2"},{"location":"admin-guide/rke2-setup/RKE2-setup/#cloudrock-on-rke2","text":"","title":"Cloudrock on RKE2"},{"location":"admin-guide/rke2-setup/RKE2-setup/#rke2-installation-and-setup","text":"To install Cloudrock on top of RKE2 you need to: Install Ansible with version >= 2.10 and ensure python3 is installed. Download this repository Install kubernetes.core collection from ansible galaxy and download installation files. 1 2 3 4 5 6 7 8 9 10 11 ansible-galaxy collection install kubernetes.core # or curl -o ansible-galaxy/kubernetes-core-2.3.2.tar.gz --create-dirs https://galaxy.ansible.com/download/kubernetes-core-2.3.2.tar.gz ansible-galaxy collection install ansible-galaxy/kubernetes-core-2.3.2.tar.gz cd ansible-config/ curl -o rke2/rke2-install.sh --create-dirs https://get.rke2.io curl -fsSL -o helm/get-helm.sh --create-dirs https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 Download Helm chart archives if your target machines don't have internet access 1 2 3 4 5 6 cd ansible-config/ curl -o longhorn/longhorn-1.3.1.tgz --create-dirs https://github.com/longhorn/charts/releases/download/longhorn-1.3.1/longhorn-1.3.1.tgz curl -o kubernetes-dashboard/k8s-dashboard-5.10.0.tar.gz --create-dirs https://kubernetes.github.io/dashboard/kubernetes-dashboard-5.10.0.tgz curl -s -o bitnami/postgresql-11.9.1.tgz --create-dirs https://charts.bitnami.com/bitnami/postgresql-11.9.1.tgz curl -s -o bitnami/rabbitmq-10.3.5.tgz --create-dirs https://charts.bitnami.com/bitnami/rabbitmq-10.3.5.tgz curl -sL -o cloudrock/cloudrock-chart.zip --create-dirs https://github.com/kubeworkz/cloudrock-helm/archive/refs/heads/master.zip Adjust variables in ansible-config/rke2_vars file Run the playbook 1 2 cd ansible-config ansible-playbook -D -i rke2_inventory install.yaml You can check Cloudrock release installation with the following steps: ssh to a node from inventory with initial_server=true mark check all the pods from namespace: 1 2 export KUBECONFIG = /etc/rancher/rke2/rke2.yaml kubectl get pods -n default If you run Cloudrock in a different namespace, please adjust the value of the -n option in the last command above.","title":"RKE2 installation and setup"},{"location":"admin-guide/rke2-setup/RKE2-setup/#add-admin-ssh-keys","text":"Setup admin_keys and revoked_admin_keys vars in the ansible-config/rke2_vars file Run the corresponding playbook 1 2 cd ansible-config ansible-playbook -D -i rke2_inventory add-ssh-keys.yml","title":"Add admin ssh keys"},{"location":"admin-guide/rke2-setup/RKE2-setup/#add-haproxy-load-balancer","text":"Setup haproxy_stats_password var in the ansible-config/rke2_vars file Run the corresponding playbook 1 2 cd ansible-config ansible-playbook -D -i rke2_inventory add-haproxy-host.yml","title":"Add haproxy load balancer"},{"location":"admin-guide/rke2-setup/RKE2-setup/#cloudrock-helm-configuration","text":"A user can override default settings for Cloudrock Helm. The ansible-config/cloudrock/values.yaml is the main settings file. Additional configuration features files (e.g. for SAML2, whitelabeling, bootstrapping, etc.) can be included by placing into corresponding subdirectories of ansible-config/cloudrock/ folder. The paths to the subdirectories should be specified in ansible-config/cloudrock/values.yaml , e.g. cloudrock.saml2.dir value. Cloudrock Helm configuration is described in the public docs ; example values.yaml file: link , example additional files: link .","title":"Cloudrock Helm configuration"},{"location":"admin-guide/rke2-setup/RKE2-setup/#update-of-cloudrock","text":"To update Cloudrock user needs to execute the corresponding playbook: 1 2 cd ansible-config ansible-playbook -D -i rke2_inventory update.yaml","title":"Update of Cloudrock"},{"location":"admin-guide/rke2-setup/RKE2-setup/#update-of-cloudrock-dependencies","text":"To update Cloudrock dependencies, a user should: Setup the desired components for update in ansible-config/rke2_vars file, e.g. set setup_postgresql to yes in case of PostgreSQL Helm chart update. NB: please, don't change chart versions manually, it can cause failure of Cloudrock application Run the corresponding playbook: 1 2 cd ansible-config ansible-playbook -D -i rke2_inventory update-dependencies.yaml Example of changes in ansible-config/rke2_vars file: 1 2 3 4 5 6 7 8 9 # Cloudrock dependency setup setup_postgresql : yes # User can skip PostgreSQL setup postgresql_version : 11.9.1 # Version of PostgreSQL Helm chart setup_rabbitmq : no # User can skip RabbitMQ setup rabbitmq_version : 10.3.5 # Version of RabbitMQ Helm chart setup_minio : no # User can skip MinIO setup minio_version : 11.10.16 # Version of MinIO Helm chart With this setup, the playbook will update PostgreSQL release only. If the user wants to update RabbitMQ too, they should set setup_rabbitmq: yes","title":"Update of Cloudrock dependencies"},{"location":"admin-guide/rke2-setup/RKE2-setup/#cloudrock-log-fetching","text":"To get logs from Cloudrock containers, a users needs to connect to one of the RKE2 nodes: 1 ssh <node-ip> A node IP should be chosen from the inventory file (e.g. rke2_inventory ). In the node's shell, the user should run the following to setup Kubernetes client: 1 export KUBECONFIG = /etc/rancher/rke2/rke2.yaml After this, the user can get Cloudrock API logs: 1 kubectl logs --tail 100 -l app = cloudrock-metal-api -n default Same works for Celery worker: 1 kubectl logs --tail 100 -l app = cloudrock-metal-worker -n default Note: if you use a non-default namespace for Cloudrock release, please change the value for -n option in the aforementioned command","title":"Cloudrock log fetching"},{"location":"admin-guide/rke2-setup/RKE2-setup/#update-ssl-certificates","text":"To update the SSL certificates, please do the following steps: Copy the certificates and keys to the ansible-config/cloudrock/tls directory. NB: key must be named tls.key and cert itself - tls.crt Update Cloudrock release","title":"Update SSL certificates"},{"location":"admin-guide/rke2-setup/RKE2-setup/#recover-data-from-db-backup","text":"In order to apply an existing backup to database, a corresponding playbook exists. NB: This operation drops an existing database, creates an empty one and applies the pre-created backup During restoration process, the site will be unavailable During execution, you will be asked about backup name. You should input it in a correct way. Example of running playbook: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 TASK [List backups] **************************************************************************************************************************************** ok: [csl-stg-kubs01] => {} MSG: [+] LOCAL_PG_BACKUPS_DIR : [+] MINIO_PG_BACKUPS_DIR : pg/data/backups/postgres [+] Setting up the postgres alias for minio server (http://minio.default.svc.cluster.local:9000) [+] Last 5 backups [2022-12-01 05:00:02 UTC] 91KiB backup-2022-12-01-05-00.sql.gz [2022-11-30 05:00:02 UTC] 91KiB backup-2022-11-30-05-00.sql.gz [2022-11-29 05:00:02 UTC] 91KiB backup-2022-11-29-05-00.sql.gz [2022-11-28 16:30:37 UTC] 91KiB backup-2022-11-28-16-30.sql.gz [2022-11-28 16:28:27 UTC] 91KiB backup-2022-11-28-16-28.sql.gz [+] Finished [Choose backup] Please enter backup's name: After this, you should input one of the following lines: backup-2022-12-01-05-00.sql.gz backup-2022-11-30-05-00.sql.gz backup-2022-11-29-05-00.sql.gz backup-2022-11-28-16-30.sql.gz backup-2022-11-28-16-28.sql.gz Otherwise, the entire process will fail, but the site and database with old data will be still available. To start the process, please, execute the following line in the machine connected to RKE2 nodes: 1 ansible-playbook -D -i rke2_inventory restore-data.yaml","title":"Recover data from DB backup"},{"location":"developer-guide/","text":"Developer documentation Installation from source code Workflow Settings policy Permissions Managed entities Resource actions Logging Background processing Quotas Tasks and executors How to write serializers How to write views How to write tests How to write docs How to add a new language Internationalization Plugins Events Templates","title":"Developer documentation"},{"location":"developer-guide/#developer-documentation","text":"Installation from source code Workflow Settings policy Permissions Managed entities Resource actions Logging Background processing Quotas Tasks and executors How to write serializers How to write views How to write tests How to write docs How to add a new language Internationalization Plugins Events Templates","title":"Developer documentation"},{"location":"developer-guide/ad-hoc-scripts/","text":"Ad-hoc scripts This section describes different ad-hoc scripts used by Cloudrock developers. Usage-related scripts Restore CPU/GPU/RAM usages for a month Sometimes, Cloudrock can have issues with data correctness. They can be caused by different circumstansies, e.g. problems with data syncronization between Cloudrock backend and service provider software. In order to resolve these issues, a user can restore usage data with restore_usages.py script. Generate openmetrics file with usages for several months If a user needs to create openmetrics file with usages, e.g. for historical data backfilling in Prometheus , the generate_openmetrics_usages.py can be used.","title":"Ad-hoc scripts"},{"location":"developer-guide/ad-hoc-scripts/#ad-hoc-scripts","text":"This section describes different ad-hoc scripts used by Cloudrock developers.","title":"Ad-hoc scripts"},{"location":"developer-guide/ad-hoc-scripts/#usage-related-scripts","text":"","title":"Usage-related scripts"},{"location":"developer-guide/ad-hoc-scripts/#restore-cpugpuram-usages-for-a-month","text":"Sometimes, Cloudrock can have issues with data correctness. They can be caused by different circumstansies, e.g. problems with data syncronization between Cloudrock backend and service provider software. In order to resolve these issues, a user can restore usage data with restore_usages.py script.","title":"Restore CPU/GPU/RAM usages for a month"},{"location":"developer-guide/ad-hoc-scripts/#generate-openmetrics-file-with-usages-for-several-months","text":"If a user needs to create openmetrics file with usages, e.g. for historical data backfilling in Prometheus , the generate_openmetrics_usages.py can be used.","title":"Generate openmetrics file with usages for several months"},{"location":"developer-guide/background/","text":"Background processing For executing heavier requests and performing background tasks Cloudrock is using Celery . Celery is a task queue that supports multiple backends for storing the tasks and results. Currently Cloudrock is relying on Redis backend - Redis server must be running for requests triggering background scheduling to succeed. If you are developing on OS X and have brew installed: 1 2 brew install redis-server redis-server Please see Redis docs for installation on other platforms. Finite state machines Some of the models in Cloudrock have a state field representing their current condition. The state field is implemented as a finite state machine. Both user requests and background tasks can trigger state transition. A REST client can observe changes to the model instance through polling the state field of the object. Let's take VM instance in 'offline' state. A user can request the instance to start by issuing a corresponding request over REST. This will schedule a task in Celery and transition instance status to 'starting_scheduled'. Further user requests for starting an instance will get state transition validation error. Once the background worker starts processing the queued task, it updates the Instance status to the 'starting'. On task successful completion, the state is transitioned to 'online' by the background task. Error state of background tasks If a background task has failed to achieve it's goal, it should transit into an error state. To propagate more information to the user each model with an FSM field should include a field for error message information - error_message . The field should be exposed via REST. Background task should update this field before transiting into an erred state. Cleaning of the error state of the model instance should clean up also error_message field.","title":"Background processing"},{"location":"developer-guide/background/#background-processing","text":"For executing heavier requests and performing background tasks Cloudrock is using Celery . Celery is a task queue that supports multiple backends for storing the tasks and results. Currently Cloudrock is relying on Redis backend - Redis server must be running for requests triggering background scheduling to succeed. If you are developing on OS X and have brew installed: 1 2 brew install redis-server redis-server Please see Redis docs for installation on other platforms.","title":"Background processing"},{"location":"developer-guide/background/#finite-state-machines","text":"Some of the models in Cloudrock have a state field representing their current condition. The state field is implemented as a finite state machine. Both user requests and background tasks can trigger state transition. A REST client can observe changes to the model instance through polling the state field of the object. Let's take VM instance in 'offline' state. A user can request the instance to start by issuing a corresponding request over REST. This will schedule a task in Celery and transition instance status to 'starting_scheduled'. Further user requests for starting an instance will get state transition validation error. Once the background worker starts processing the queued task, it updates the Instance status to the 'starting'. On task successful completion, the state is transitioned to 'online' by the background task.","title":"Finite state machines"},{"location":"developer-guide/background/#error-state-of-background-tasks","text":"If a background task has failed to achieve it's goal, it should transit into an error state. To propagate more information to the user each model with an FSM field should include a field for error message information - error_message . The field should be exposed via REST. Background task should update this field before transiting into an erred state. Cleaning of the error state of the model instance should clean up also error_message field.","title":"Error state of background tasks"},{"location":"developer-guide/events/","text":"Events Auth auth_logged_in_with_username auth_logged_out auth_login_failed_with_username token_created token_lifetime_updated Customers customer_creation_succeeded customer_deletion_succeeded customer_update_succeeded invoice_canceled invoice_created invoice_item_created invoice_item_deleted invoice_item_updated invoice_paid payment_added payment_created payment_removed role_granted role_revoked role_updated Invoices invoice_canceled invoice_created invoice_creation_succeeded invoice_deletion_succeeded invoice_item_created invoice_item_deleted invoice_item_updated invoice_paid invoice_update_succeeded payment_created payment_removed Jira comment_creation_succeeded comment_deletion_succeeded comment_update_succeeded issue_creation_succeeded issue_deletion_succeeded issue_update_succeeded Payments payment_approval_succeeded payment_cancel_succeeded payment_creation_succeeded Projects project_creation_succeeded project_deletion_succeeded project_deletion_triggered project_update_request_approved project_update_request_created project_update_request_rejected project_update_succeeded role_granted role_revoked role_updated Resources marketplace_component_usage_created marketplace_component_usage_updated marketplace_order_approved marketplace_order_completed marketplace_order_created marketplace_order_failed marketplace_order_rejected marketplace_order_terminated marketplace_resource_create_canceled marketplace_resource_create_failed marketplace_resource_create_requested marketplace_resource_create_succeeded marketplace_resource_renamed marketplace_resource_terminate_failed marketplace_resource_terminate_requested marketplace_resource_terminate_succeeded marketplace_resource_update_end_date_succeeded marketplace_resource_update_failed marketplace_resource_update_limits_failed marketplace_resource_update_limits_succeeded marketplace_resource_update_requested marketplace_resource_update_succeeded openstack_flavor_created openstack_flavor_deleted openstack_floating_ip_attached openstack_floating_ip_connected openstack_floating_ip_detached openstack_floating_ip_disconnected openstack_network_cleaned openstack_network_created openstack_network_deleted openstack_network_imported openstack_network_pulled openstack_network_updated openstack_port_cleaned openstack_port_created openstack_port_deleted openstack_port_imported openstack_port_pulled openstack_router_updated openstack_security_group_cleaned openstack_security_group_created openstack_security_group_deleted openstack_security_group_imported openstack_security_group_pulled openstack_security_group_rule_cleaned openstack_security_group_rule_created openstack_security_group_rule_deleted openstack_security_group_rule_imported openstack_security_group_rule_updated openstack_security_group_updated openstack_server_group_cleaned openstack_server_group_created openstack_server_group_deleted openstack_server_group_imported openstack_server_group_pulled openstack_subnet_cleaned openstack_subnet_created openstack_subnet_deleted openstack_subnet_imported openstack_subnet_pulled openstack_subnet_updated openstack_tenant_quota_limit_updated resource_assign_floating_ip_failed resource_assign_floating_ip_scheduled resource_assign_floating_ip_succeeded resource_attach_failed resource_attach_scheduled resource_attach_succeeded resource_backup_schedule_activated resource_backup_schedule_cleaned_up resource_backup_schedule_created resource_backup_schedule_deactivated resource_backup_schedule_deleted resource_change_flavor_failed resource_change_flavor_scheduled resource_change_flavor_succeeded resource_creation_failed resource_creation_scheduled resource_creation_succeeded resource_deletion_failed resource_deletion_scheduled resource_deletion_succeeded resource_detach_failed resource_detach_scheduled resource_detach_succeeded resource_extend_failed resource_extend_scheduled resource_extend_succeeded resource_extend_volume_failed resource_extend_volume_scheduled resource_extend_volume_succeeded resource_import_succeeded resource_pull_failed resource_pull_scheduled resource_pull_succeeded resource_restart_failed resource_restart_scheduled resource_restart_succeeded resource_retype_failed resource_retype_scheduled resource_retype_succeeded resource_snapshot_schedule_activated resource_snapshot_schedule_cleaned_up resource_snapshot_schedule_created resource_snapshot_schedule_deactivated resource_snapshot_schedule_deleted resource_start_failed resource_start_scheduled resource_start_succeeded resource_stop_failed resource_stop_scheduled resource_stop_succeeded resource_unassign_floating_ip_failed resource_unassign_floating_ip_scheduled resource_unassign_floating_ip_succeeded resource_update_allowed_address_pairs_failed resource_update_allowed_address_pairs_scheduled resource_update_allowed_address_pairs_succeeded resource_update_floating_ips_failed resource_update_floating_ips_scheduled resource_update_floating_ips_succeeded resource_update_internal_ips_failed resource_update_internal_ips_scheduled resource_update_internal_ips_succeeded resource_update_security_groups_failed resource_update_security_groups_scheduled resource_update_security_groups_succeeded resource_update_succeeded Ssh ssh_key_creation_succeeded ssh_key_deletion_succeeded Support attachment_created attachment_deleted attachment_updated issue_creation_succeeded issue_deletion_succeeded issue_update_succeeded Users auth_logged_in_with_eduteams auth_logged_in_with_keycloak auth_logged_in_with_saml2 auth_logged_in_with_smartid_ee auth_logged_in_with_tara auth_logged_out_with_saml2 freeipa_profile_created freeipa_profile_deleted freeipa_profile_disabled freeipa_profile_enabled marketplace_offering_user_created marketplace_offering_user_deleted role_granted role_revoked role_updated ssh_key_creation_succeeded ssh_key_deletion_succeeded user_activated user_creation_succeeded user_deactivated user_deletion_succeeded user_details_update_succeeded user_password_updated user_profile_changed user_update_succeeded","title":"Events"},{"location":"developer-guide/events/#events","text":"","title":"Events"},{"location":"developer-guide/events/#auth","text":"auth_logged_in_with_username auth_logged_out auth_login_failed_with_username token_created token_lifetime_updated","title":"Auth"},{"location":"developer-guide/events/#customers","text":"customer_creation_succeeded customer_deletion_succeeded customer_update_succeeded invoice_canceled invoice_created invoice_item_created invoice_item_deleted invoice_item_updated invoice_paid payment_added payment_created payment_removed role_granted role_revoked role_updated","title":"Customers"},{"location":"developer-guide/events/#invoices","text":"invoice_canceled invoice_created invoice_creation_succeeded invoice_deletion_succeeded invoice_item_created invoice_item_deleted invoice_item_updated invoice_paid invoice_update_succeeded payment_created payment_removed","title":"Invoices"},{"location":"developer-guide/events/#jira","text":"comment_creation_succeeded comment_deletion_succeeded comment_update_succeeded issue_creation_succeeded issue_deletion_succeeded issue_update_succeeded","title":"Jira"},{"location":"developer-guide/events/#payments","text":"payment_approval_succeeded payment_cancel_succeeded payment_creation_succeeded","title":"Payments"},{"location":"developer-guide/events/#projects","text":"project_creation_succeeded project_deletion_succeeded project_deletion_triggered project_update_request_approved project_update_request_created project_update_request_rejected project_update_succeeded role_granted role_revoked role_updated","title":"Projects"},{"location":"developer-guide/events/#resources","text":"marketplace_component_usage_created marketplace_component_usage_updated marketplace_order_approved marketplace_order_completed marketplace_order_created marketplace_order_failed marketplace_order_rejected marketplace_order_terminated marketplace_resource_create_canceled marketplace_resource_create_failed marketplace_resource_create_requested marketplace_resource_create_succeeded marketplace_resource_renamed marketplace_resource_terminate_failed marketplace_resource_terminate_requested marketplace_resource_terminate_succeeded marketplace_resource_update_end_date_succeeded marketplace_resource_update_failed marketplace_resource_update_limits_failed marketplace_resource_update_limits_succeeded marketplace_resource_update_requested marketplace_resource_update_succeeded openstack_flavor_created openstack_flavor_deleted openstack_floating_ip_attached openstack_floating_ip_connected openstack_floating_ip_detached openstack_floating_ip_disconnected openstack_network_cleaned openstack_network_created openstack_network_deleted openstack_network_imported openstack_network_pulled openstack_network_updated openstack_port_cleaned openstack_port_created openstack_port_deleted openstack_port_imported openstack_port_pulled openstack_router_updated openstack_security_group_cleaned openstack_security_group_created openstack_security_group_deleted openstack_security_group_imported openstack_security_group_pulled openstack_security_group_rule_cleaned openstack_security_group_rule_created openstack_security_group_rule_deleted openstack_security_group_rule_imported openstack_security_group_rule_updated openstack_security_group_updated openstack_server_group_cleaned openstack_server_group_created openstack_server_group_deleted openstack_server_group_imported openstack_server_group_pulled openstack_subnet_cleaned openstack_subnet_created openstack_subnet_deleted openstack_subnet_imported openstack_subnet_pulled openstack_subnet_updated openstack_tenant_quota_limit_updated resource_assign_floating_ip_failed resource_assign_floating_ip_scheduled resource_assign_floating_ip_succeeded resource_attach_failed resource_attach_scheduled resource_attach_succeeded resource_backup_schedule_activated resource_backup_schedule_cleaned_up resource_backup_schedule_created resource_backup_schedule_deactivated resource_backup_schedule_deleted resource_change_flavor_failed resource_change_flavor_scheduled resource_change_flavor_succeeded resource_creation_failed resource_creation_scheduled resource_creation_succeeded resource_deletion_failed resource_deletion_scheduled resource_deletion_succeeded resource_detach_failed resource_detach_scheduled resource_detach_succeeded resource_extend_failed resource_extend_scheduled resource_extend_succeeded resource_extend_volume_failed resource_extend_volume_scheduled resource_extend_volume_succeeded resource_import_succeeded resource_pull_failed resource_pull_scheduled resource_pull_succeeded resource_restart_failed resource_restart_scheduled resource_restart_succeeded resource_retype_failed resource_retype_scheduled resource_retype_succeeded resource_snapshot_schedule_activated resource_snapshot_schedule_cleaned_up resource_snapshot_schedule_created resource_snapshot_schedule_deactivated resource_snapshot_schedule_deleted resource_start_failed resource_start_scheduled resource_start_succeeded resource_stop_failed resource_stop_scheduled resource_stop_succeeded resource_unassign_floating_ip_failed resource_unassign_floating_ip_scheduled resource_unassign_floating_ip_succeeded resource_update_allowed_address_pairs_failed resource_update_allowed_address_pairs_scheduled resource_update_allowed_address_pairs_succeeded resource_update_floating_ips_failed resource_update_floating_ips_scheduled resource_update_floating_ips_succeeded resource_update_internal_ips_failed resource_update_internal_ips_scheduled resource_update_internal_ips_succeeded resource_update_security_groups_failed resource_update_security_groups_scheduled resource_update_security_groups_succeeded resource_update_succeeded","title":"Resources"},{"location":"developer-guide/events/#ssh","text":"ssh_key_creation_succeeded ssh_key_deletion_succeeded","title":"Ssh"},{"location":"developer-guide/events/#support","text":"attachment_created attachment_deleted attachment_updated issue_creation_succeeded issue_deletion_succeeded issue_update_succeeded","title":"Support"},{"location":"developer-guide/events/#users","text":"auth_logged_in_with_eduteams auth_logged_in_with_keycloak auth_logged_in_with_saml2 auth_logged_in_with_smartid_ee auth_logged_in_with_tara auth_logged_out_with_saml2 freeipa_profile_created freeipa_profile_deleted freeipa_profile_disabled freeipa_profile_enabled marketplace_offering_user_created marketplace_offering_user_deleted role_granted role_revoked role_updated ssh_key_creation_succeeded ssh_key_deletion_succeeded user_activated user_creation_succeeded user_deactivated user_deletion_succeeded user_details_update_succeeded user_password_updated user_profile_changed user_update_succeeded","title":"Users"},{"location":"developer-guide/how-to-add-new-language/","text":"Add a new language for translatable models For translating fields of some models we use django modeltranslation . First run To setup the database environment, after completing all migrations, execute in a console: 1 cloudrock update_translation_fields Add a new language To populate the generated language tables with initial content, run 1 cloudrock sync_translation_fields","title":"Add a new language for translatable models"},{"location":"developer-guide/how-to-add-new-language/#add-a-new-language-for-translatable-models","text":"For translating fields of some models we use django modeltranslation .","title":"Add a new language for translatable models"},{"location":"developer-guide/how-to-add-new-language/#first-run","text":"To setup the database environment, after completing all migrations, execute in a console: 1 cloudrock update_translation_fields","title":"First run"},{"location":"developer-guide/how-to-add-new-language/#add-a-new-language","text":"To populate the generated language tables with initial content, run 1 cloudrock sync_translation_fields","title":"Add a new language"},{"location":"developer-guide/how-to-write-docs/","text":"How to write docs Documentation for sysadmins Documentation for sysadmins should contain a description of settings that allows to setup and customize Cloudrock Metal. It should be located in wiki . Documentation for developers If documentation describes basic concepts that are not related to any particular part of code it should be located in /docs folder. All other documentation for developers should be located in code. Tips for writing docs: add description for custom modules that are unique for particular plugin; add description to base class methods that should be implemented by other developers; don't add obvious comments for standard objects or parameters.","title":"How to write docs"},{"location":"developer-guide/how-to-write-docs/#how-to-write-docs","text":"","title":"How to write docs"},{"location":"developer-guide/how-to-write-docs/#documentation-for-sysadmins","text":"Documentation for sysadmins should contain a description of settings that allows to setup and customize Cloudrock Metal. It should be located in wiki .","title":"Documentation for sysadmins"},{"location":"developer-guide/how-to-write-docs/#documentation-for-developers","text":"If documentation describes basic concepts that are not related to any particular part of code it should be located in /docs folder. All other documentation for developers should be located in code. Tips for writing docs: add description for custom modules that are unique for particular plugin; add description to base class methods that should be implemented by other developers; don't add obvious comments for standard objects or parameters.","title":"Documentation for developers"},{"location":"developer-guide/how-to-write-serializers/","text":"How to write serializers Object identity When you're writing serializer, you may want user to reliably specify particular object in API request and serialize object in API response. Basically there are six aspects to consider: 1) Consistency. We need to ensure consistent serialization format for API request and response not only within particular application, but also within whole system across different applications. 2) Reliability. We need to reliable identify object using some stable field so that value of this field would be the same even if all other fields are changed. 3) Security. We need to ensure that user has permission to get access to the object in question. Typically API renders 400 error if user specifies object he doesn't have access to in API request. On the backend side permission check should be done consistently. 4) Universality. There are generic API endpoints which accept objects from different application. 5) Performance. We need to consider how much data serializer fetches from database so that it wouldn't fetch data which is not used anyways and doesn't perform multiple queries when it's enough to issue single query. 6) Extensibility. Usually serializer does not have outside dependencies. But sometimes it makes sense to inject extra fields to the serializer defined in other application. Therefore you may ask what is the best way to reliably and consistently identify object in API. In terms of frontend rendering, user is usually concerned with object name. Typically we use name only as filtering parameter because names are not unique. That's why object identity is implemented via a UUID . Please note that usually we're not exposing ID in REST API in favor of UUID because it allows easy distribution of databases across multiple servers . In order to decouple client and server we're implementing HATEOAS component of REST API. That's why usually we're using HyperlinkedRelatedField serializer, for example: 1 2 3 4 5 project = serializers . HyperlinkedRelatedField ( queryset = models . Project . objects . all (), view_name = 'project-detail' , lookup_field = 'uuid' , write_only = True ) There are four notes here: 1) We need to specify lookup_field explicitly because it's default value is 'pk'. 2) We need to specify view_name explicitly in order to avoid clash of models names between different applications. You need to ensure that it matches view name specified in urls.py module. 3) When debug mode is enabled, you may navigate to related objects via hyperlinks using browsable API renderer and select related object from the list. 4) Serialized hyperlink contains not only UUID, but also application name and model. It allows to use serialized URL as request parameter for generic API endpoint. Generic API works with different models from arbitrary applications. Thus UUID alone is not enough for full unambiguous identification of the object in this case. Generic serializers Typically serializer allows you to specify object related to one particular database model. However it is not always the case. For example, issue serializer allows you to specify object related to any model with quota. In this case you would need to use GenericRelatedField serializer. It is expected that related_models parameter provides a list of all valid models. 1 2 3 4 5 6 class IssueSerializer ( JiraPropertySerializer ): scope = core_serializers . GenericRelatedField ( source = 'resource' , related_models = structure_models . ResourceMixin . get_all_models (), required = False ) Usually get_all_models method is implemented in base class and uses Django application registry which provides access to all registered models. Consider the following example: 1 2 3 4 @classmethod @lru_cache ( maxsize = 1 ) def get_all_models ( cls ): return [ model for model in apps . get_models () if issubclass ( model , cls )] In terms of database model reference to the resource is stored as generic foreign key, for example: 1 2 3 resource_content_type = models . ForeignKey ( ContentType , blank = True , null = True , related_name = 'jira_issues' ) resource_object_id = models . PositiveIntegerField ( blank = True , null = True ) resource = GenericForeignKey ( 'resource_content_type' , 'resource_object_id' ) Secure serializers In Cloudrock we're using role-based-access-control (RBAC) for restricting system access to authorized users. In terms of serializers there are two abstract base serializer classes, PermissionFieldFilteringMixin and PermissionListSerializer which allow to filter related fields. They are needed in order to constrain the list of entities that can be used as a value for the field. Consider the following example: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 class ResourceSerializer ( PermissionFieldFilteringMixin , core_serializers . AugmentedSerializerMixin , serializers . HyperlinkedModelSerializer ): project = serializers . HyperlinkedRelatedField ( queryset = models . Project . objects . all (), view_name = 'project-detail' , lookup_field = 'uuid' ) class Meta ( object ): model = NotImplemented fields = ( 'project' , 'project_name' , 'project_uuid' , ) related_paths = ( 'project' ,) def get_filtered_field_names ( self ): return 'project' , By using PermissionFieldFilteringMixin we ensure that value of project field is validated against current user so that only authorized user which has corresponding role in either project or customer is allowed to use this serializer. High-performance serializers Avoiding over-fetching By default serializer renders value for all fields specified in fields parameter. However, sometimes user does not really need to transfer all fields over the network. It is especially important when you're targeting at mobile users with slow network or even regular users when serializer renders a lot of data which is thrown away by application anyways. If you want to allow user to specify exactly and explicitly list of fields to render, you just need to use RestrictedSerializerMixin. Avoiding under-fetching By default Django doesn't optimize database queries to the related objects, so separate query is executed each time when related object is needed. Fortunately enough, Django provides you with powerful methods to join database queries together and cache resulting queryset in RAM using identity map, so that instead of performing multiple consequent queries to the database it's enough to issue single query. So in order to reduce number of requests to DB your view should use EagerLoadMixin. It is expected that corresponding serializer implements static method eager_load , which selects objects necessary for serialization. Consider the following example: 1 2 3 4 5 6 7 8 9 10 11 class BaseServiceViewSet ( core_mixins . EagerLoadMixin , core_views . ActionsViewSet ): pass class ServiceSettingsSerializer ( PermissionFieldFilteringMixin , core_serializers . AugmentedSerializerMixin , serializers . HyperlinkedModelSerializer ): @staticmethod def eager_load ( queryset ): return queryset . select_related ( 'customer' ) . prefetch_related ( 'quotas' , 'certifications' ) Extensible serializers Usually serializer does not have outside dependencies, but sometimes it makes sense to inject extra fields to the serializer defined in other application so that it would not introduce circular dependencies . Please note that this mechanism should be used with caution as it makes harder to track dependencies. The main idea is that instead of introducing circular dependency we're introducing extension point. This extension point is used in depending application in order to inject new fields to existing serializer. Example of host serializer implementation: 1 2 3 4 class ProjectSerializer ( core_serializers . RestrictedSerializerMixin , PermissionFieldFilteringMixin , core_serializers . AugmentedSerializerMixin ): pass Guest application should subscribe to pre_serializer_fields signal and inject additional fields. Example of signal handler implementation: 1 2 3 4 5 6 7 8 9 def add_price_estimate ( sender , fields , ** kwargs ): fields [ 'billing_price_estimate' ] = serializers . SerializerMethodField () setattr ( sender , 'get_billing_price_estimate' , get_price_estimate ) core_signals . pre_serializer_fields . connect ( sender = structure_serializers . ProjectSerializer , receiver = add_price_estimate , )","title":"How to write serializers"},{"location":"developer-guide/how-to-write-serializers/#how-to-write-serializers","text":"","title":"How to write serializers"},{"location":"developer-guide/how-to-write-serializers/#object-identity","text":"When you're writing serializer, you may want user to reliably specify particular object in API request and serialize object in API response. Basically there are six aspects to consider: 1) Consistency. We need to ensure consistent serialization format for API request and response not only within particular application, but also within whole system across different applications. 2) Reliability. We need to reliable identify object using some stable field so that value of this field would be the same even if all other fields are changed. 3) Security. We need to ensure that user has permission to get access to the object in question. Typically API renders 400 error if user specifies object he doesn't have access to in API request. On the backend side permission check should be done consistently. 4) Universality. There are generic API endpoints which accept objects from different application. 5) Performance. We need to consider how much data serializer fetches from database so that it wouldn't fetch data which is not used anyways and doesn't perform multiple queries when it's enough to issue single query. 6) Extensibility. Usually serializer does not have outside dependencies. But sometimes it makes sense to inject extra fields to the serializer defined in other application. Therefore you may ask what is the best way to reliably and consistently identify object in API. In terms of frontend rendering, user is usually concerned with object name. Typically we use name only as filtering parameter because names are not unique. That's why object identity is implemented via a UUID . Please note that usually we're not exposing ID in REST API in favor of UUID because it allows easy distribution of databases across multiple servers . In order to decouple client and server we're implementing HATEOAS component of REST API. That's why usually we're using HyperlinkedRelatedField serializer, for example: 1 2 3 4 5 project = serializers . HyperlinkedRelatedField ( queryset = models . Project . objects . all (), view_name = 'project-detail' , lookup_field = 'uuid' , write_only = True ) There are four notes here: 1) We need to specify lookup_field explicitly because it's default value is 'pk'. 2) We need to specify view_name explicitly in order to avoid clash of models names between different applications. You need to ensure that it matches view name specified in urls.py module. 3) When debug mode is enabled, you may navigate to related objects via hyperlinks using browsable API renderer and select related object from the list. 4) Serialized hyperlink contains not only UUID, but also application name and model. It allows to use serialized URL as request parameter for generic API endpoint. Generic API works with different models from arbitrary applications. Thus UUID alone is not enough for full unambiguous identification of the object in this case.","title":"Object identity"},{"location":"developer-guide/how-to-write-serializers/#generic-serializers","text":"Typically serializer allows you to specify object related to one particular database model. However it is not always the case. For example, issue serializer allows you to specify object related to any model with quota. In this case you would need to use GenericRelatedField serializer. It is expected that related_models parameter provides a list of all valid models. 1 2 3 4 5 6 class IssueSerializer ( JiraPropertySerializer ): scope = core_serializers . GenericRelatedField ( source = 'resource' , related_models = structure_models . ResourceMixin . get_all_models (), required = False ) Usually get_all_models method is implemented in base class and uses Django application registry which provides access to all registered models. Consider the following example: 1 2 3 4 @classmethod @lru_cache ( maxsize = 1 ) def get_all_models ( cls ): return [ model for model in apps . get_models () if issubclass ( model , cls )] In terms of database model reference to the resource is stored as generic foreign key, for example: 1 2 3 resource_content_type = models . ForeignKey ( ContentType , blank = True , null = True , related_name = 'jira_issues' ) resource_object_id = models . PositiveIntegerField ( blank = True , null = True ) resource = GenericForeignKey ( 'resource_content_type' , 'resource_object_id' )","title":"Generic serializers"},{"location":"developer-guide/how-to-write-serializers/#secure-serializers","text":"In Cloudrock we're using role-based-access-control (RBAC) for restricting system access to authorized users. In terms of serializers there are two abstract base serializer classes, PermissionFieldFilteringMixin and PermissionListSerializer which allow to filter related fields. They are needed in order to constrain the list of entities that can be used as a value for the field. Consider the following example: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 class ResourceSerializer ( PermissionFieldFilteringMixin , core_serializers . AugmentedSerializerMixin , serializers . HyperlinkedModelSerializer ): project = serializers . HyperlinkedRelatedField ( queryset = models . Project . objects . all (), view_name = 'project-detail' , lookup_field = 'uuid' ) class Meta ( object ): model = NotImplemented fields = ( 'project' , 'project_name' , 'project_uuid' , ) related_paths = ( 'project' ,) def get_filtered_field_names ( self ): return 'project' , By using PermissionFieldFilteringMixin we ensure that value of project field is validated against current user so that only authorized user which has corresponding role in either project or customer is allowed to use this serializer.","title":"Secure serializers"},{"location":"developer-guide/how-to-write-serializers/#high-performance-serializers","text":"","title":"High-performance serializers"},{"location":"developer-guide/how-to-write-serializers/#avoiding-over-fetching","text":"By default serializer renders value for all fields specified in fields parameter. However, sometimes user does not really need to transfer all fields over the network. It is especially important when you're targeting at mobile users with slow network or even regular users when serializer renders a lot of data which is thrown away by application anyways. If you want to allow user to specify exactly and explicitly list of fields to render, you just need to use RestrictedSerializerMixin.","title":"Avoiding over-fetching"},{"location":"developer-guide/how-to-write-serializers/#avoiding-under-fetching","text":"By default Django doesn't optimize database queries to the related objects, so separate query is executed each time when related object is needed. Fortunately enough, Django provides you with powerful methods to join database queries together and cache resulting queryset in RAM using identity map, so that instead of performing multiple consequent queries to the database it's enough to issue single query. So in order to reduce number of requests to DB your view should use EagerLoadMixin. It is expected that corresponding serializer implements static method eager_load , which selects objects necessary for serialization. Consider the following example: 1 2 3 4 5 6 7 8 9 10 11 class BaseServiceViewSet ( core_mixins . EagerLoadMixin , core_views . ActionsViewSet ): pass class ServiceSettingsSerializer ( PermissionFieldFilteringMixin , core_serializers . AugmentedSerializerMixin , serializers . HyperlinkedModelSerializer ): @staticmethod def eager_load ( queryset ): return queryset . select_related ( 'customer' ) . prefetch_related ( 'quotas' , 'certifications' )","title":"Avoiding under-fetching"},{"location":"developer-guide/how-to-write-serializers/#extensible-serializers","text":"Usually serializer does not have outside dependencies, but sometimes it makes sense to inject extra fields to the serializer defined in other application so that it would not introduce circular dependencies . Please note that this mechanism should be used with caution as it makes harder to track dependencies. The main idea is that instead of introducing circular dependency we're introducing extension point. This extension point is used in depending application in order to inject new fields to existing serializer. Example of host serializer implementation: 1 2 3 4 class ProjectSerializer ( core_serializers . RestrictedSerializerMixin , PermissionFieldFilteringMixin , core_serializers . AugmentedSerializerMixin ): pass Guest application should subscribe to pre_serializer_fields signal and inject additional fields. Example of signal handler implementation: 1 2 3 4 5 6 7 8 9 def add_price_estimate ( sender , fields , ** kwargs ): fields [ 'billing_price_estimate' ] = serializers . SerializerMethodField () setattr ( sender , 'get_billing_price_estimate' , get_price_estimate ) core_signals . pre_serializer_fields . connect ( sender = structure_serializers . ProjectSerializer , receiver = add_price_estimate , )","title":"Extensible serializers"},{"location":"developer-guide/how-to-write-tests/","text":"How to write tests Application tests structure Application tests should follow next structure: /tests/ - folder for all application tests. /tests/test_my_entity.py - file for API calls tests that are logically related to entity. Example: test calls for project CRUD + actions. /tests/test_my_entity.py:MyEntityActionTest - class for tests that are related to particular endpoint. Examples: ProjectCreateTest, InstanceResizeTest. /tests/unittests/ - folder for unittests of particular file. /tests/unittests/test_file_name.py - file for test of classes and methods from application file \"file_name\". Examples: test_models.py, test_handlers.py. /tests/unittests/test_file_name.py:MyClassOrFuncTest - class for test that is related to particular class or function from file. Examples: ProjectTest, ValidateServiceTypeTest. Tips for writing tests cover important or complex functions and methods with unittests; write at least one test for a positive flow for each endpoint; do not write tests for actions that does not exist. If you don't support \"create\" action for any user there is no need to write test for that; use fixtures (module fixtures.py) to generate default structure. How to override settings in unit tests Don't manipulate django.conf.settings directly as Django won't restore the original values after such manipulations. Instead you should use standard context managers and decorators . They change a setting temporarily and revert to the original value after running the testing code. If you modify settings directly, you break test isolation by modifying global variable. If configuration setting is not plain text or number but dictionary, and you need to update only one parameter, you should take whole dict, copy it, modify parameter, and override whole dict. Wrong: 1 2 with self . settings ( CLOUDROCK_CORE = { 'INVITATION_LIFETIME' : timedelta ( weeks = 1 )}): tasks . cancel_expired_invitations () Right: 1 2 3 4 5 cloudrock_settings = settings . CLOUDROCK_CORE . copy () cloudrock_settings [ 'INVITATION_LIFETIME' ] = timedelta ( weeks = 1 ) with self . settings ( CLOUDROCK_CORE = cloudrock_settings ): tasks . cancel_expired_invitations () Running tests In order to run unit tests for specific module please execute the following command. Note that you should substitute module name instead of example cloudrock_openstack. Also it is assumed that you've already activated virtual Python environment. 1 DJANGO_SETTINGS_MODULE = cloudrock_core.server.test_settings cloudrock test cloudrock_openstack","title":"How to write tests"},{"location":"developer-guide/how-to-write-tests/#how-to-write-tests","text":"","title":"How to write tests"},{"location":"developer-guide/how-to-write-tests/#application-tests-structure","text":"Application tests should follow next structure: /tests/ - folder for all application tests. /tests/test_my_entity.py - file for API calls tests that are logically related to entity. Example: test calls for project CRUD + actions. /tests/test_my_entity.py:MyEntityActionTest - class for tests that are related to particular endpoint. Examples: ProjectCreateTest, InstanceResizeTest. /tests/unittests/ - folder for unittests of particular file. /tests/unittests/test_file_name.py - file for test of classes and methods from application file \"file_name\". Examples: test_models.py, test_handlers.py. /tests/unittests/test_file_name.py:MyClassOrFuncTest - class for test that is related to particular class or function from file. Examples: ProjectTest, ValidateServiceTypeTest.","title":"Application tests structure"},{"location":"developer-guide/how-to-write-tests/#tips-for-writing-tests","text":"cover important or complex functions and methods with unittests; write at least one test for a positive flow for each endpoint; do not write tests for actions that does not exist. If you don't support \"create\" action for any user there is no need to write test for that; use fixtures (module fixtures.py) to generate default structure.","title":"Tips for writing tests"},{"location":"developer-guide/how-to-write-tests/#how-to-override-settings-in-unit-tests","text":"Don't manipulate django.conf.settings directly as Django won't restore the original values after such manipulations. Instead you should use standard context managers and decorators . They change a setting temporarily and revert to the original value after running the testing code. If you modify settings directly, you break test isolation by modifying global variable. If configuration setting is not plain text or number but dictionary, and you need to update only one parameter, you should take whole dict, copy it, modify parameter, and override whole dict. Wrong: 1 2 with self . settings ( CLOUDROCK_CORE = { 'INVITATION_LIFETIME' : timedelta ( weeks = 1 )}): tasks . cancel_expired_invitations () Right: 1 2 3 4 5 cloudrock_settings = settings . CLOUDROCK_CORE . copy () cloudrock_settings [ 'INVITATION_LIFETIME' ] = timedelta ( weeks = 1 ) with self . settings ( CLOUDROCK_CORE = cloudrock_settings ): tasks . cancel_expired_invitations ()","title":"How to override settings in unit tests"},{"location":"developer-guide/how-to-write-tests/#running-tests","text":"In order to run unit tests for specific module please execute the following command. Note that you should substitute module name instead of example cloudrock_openstack. Also it is assumed that you've already activated virtual Python environment. 1 DJANGO_SETTINGS_MODULE = cloudrock_core.server.test_settings cloudrock test cloudrock_openstack","title":"Running tests"},{"location":"developer-guide/how-to-write-views/","text":"How to write views View workflow Filtering - filter objects that are visible to a user based on his request. Raise 404 error if object is not visible. Permissions check - make sure that user has right to execute chosen action. Raise 403 error if user does not have enough permissions. View validation - check object state and make sure that selected action can be executed. Raise 409 error if action cannot be executed with current object state. Serializer validation - check that user's data is valid. Action logic execution - do anything that should be done to execute action. For example: schedule tasks with executors, run backend tasks, save data to DB. Serialization and response output - return serialized data as response.","title":"How to write views"},{"location":"developer-guide/how-to-write-views/#how-to-write-views","text":"","title":"How to write views"},{"location":"developer-guide/how-to-write-views/#view-workflow","text":"Filtering - filter objects that are visible to a user based on his request. Raise 404 error if object is not visible. Permissions check - make sure that user has right to execute chosen action. Raise 403 error if user does not have enough permissions. View validation - check object state and make sure that selected action can be executed. Raise 409 error if action cannot be executed with current object state. Serializer validation - check that user's data is valid. Action logic execution - do anything that should be done to execute action. For example: schedule tasks with executors, run backend tasks, save data to DB. Serialization and response output - return serialized data as response.","title":"View workflow"},{"location":"developer-guide/i18n/","text":"Internationalization Per-request internationalization is enabled by default for English and Canadian languages. Client requests will respect the Accept-Language . Here are the guidelines for specifying translation strings: Build a proper sentence: start with a capital letter, end with a period. Right: _('Deletion was scheduled.') Wrong: _('deletion was scheduled') Use named-string interpolation instead of positional interpolation if message has several parameters. Right: _('Operation was successfully scheduled for %(count)d instances: %(names)s.') Wrong: _('Operation was successfully scheduled for %s instances: %s.') help_text, verbose_name, exception message and response message should be marked, but don't mark message template for event or alert logger.","title":"Internationalization"},{"location":"developer-guide/i18n/#internationalization","text":"Per-request internationalization is enabled by default for English and Canadian languages. Client requests will respect the Accept-Language . Here are the guidelines for specifying translation strings: Build a proper sentence: start with a capital letter, end with a period. Right: _('Deletion was scheduled.') Wrong: _('deletion was scheduled') Use named-string interpolation instead of positional interpolation if message has several parameters. Right: _('Operation was successfully scheduled for %(count)d instances: %(names)s.') Wrong: _('Operation was successfully scheduled for %s instances: %s.') help_text, verbose_name, exception message and response message should be marked, but don't mark message template for event or alert logger.","title":"Internationalization"},{"location":"developer-guide/install-from-src/","text":"Installation from source Prerequisites Linux OS: Ubuntu or CentOS. If you use Windows, you should install Linux either via Virtualbox or Windows Subsystem for Linux . git redis and hiredis library virtualenv C compiler and development libraries needed to build dependencies CentOS: gcc libffi-devel openssl-devel postgresql-devel libjpeg-devel zlib-devel python-devel xmlsec1 xz-devel Ubuntu: sudo apt install git python3-pip python3-venv python3-dev gcc libffi-dev libsasl2-dev libssl-dev libpq-dev libjpeg8-dev zlib1g-dev xmlsec1 libldap2-dev liblzma-dev libxslt1-dev libxml2-dev OS X: brew install openssl; export CFLAGS=\"-I$(brew --prefix openssl)/include $CFLAGS\"; export LDFLAGS=\"-L$(brew --prefix openssl)/lib $LDFLAGS\" Cloudrock Metal installation Install poetry 1 pip3 install poetry Get the code 1 2 git clone https://github.com/kubeworkz/cloudrock-metal.git cd cloudrock-metal Install Cloudrock in development mode along with dependencies 1 2 poetry install poetry run pre-commit install NB : If you use a machine with Apple M1 CPU, run this before: 1 2 3 4 export optflags = \"-Wno-error=implicit-function-declaration\" export LDFLAGS = \"-L/opt/homebrew/opt/libffi/lib\" export CPPFLAGS = \"-I/opt/homebrew/opt/libffi/include\" export PKG_CONFIG_PATH = \"/opt/homebrew/opt/libffi/lib/pkgconfig\" Create and edit settings file (see 'Configuration' section for details) 1 2 cp src/cloudrock_core/server/settings.py.example src/cloudrock_core/server/settings.py vi src/cloudrock_core/server/settings.py Initialise PostgreSQL database 1 2 3 sudo -u postgres -i createdb cloudrock createuser cloudrock Add a password cloudrock for this user 1 2 psql ALTER USER cloudrock PASSWORD 'cloudrock' ; Then run poetry 1 poetry run cloudrock migrate --noinput Collect static data -- static files will be copied to ./static/ in the same directory 1 poetry run cloudrock collectstatic --noinput Start Cloudrock: 1 poetry run cloudrock runserver Configuration Instructions are here: https://docs.cloudrock.ca/admin-guide/metal-configuration/general/","title":"Installation from source"},{"location":"developer-guide/install-from-src/#installation-from-source","text":"","title":"Installation from source"},{"location":"developer-guide/install-from-src/#prerequisites","text":"Linux OS: Ubuntu or CentOS. If you use Windows, you should install Linux either via Virtualbox or Windows Subsystem for Linux . git redis and hiredis library virtualenv C compiler and development libraries needed to build dependencies CentOS: gcc libffi-devel openssl-devel postgresql-devel libjpeg-devel zlib-devel python-devel xmlsec1 xz-devel Ubuntu: sudo apt install git python3-pip python3-venv python3-dev gcc libffi-dev libsasl2-dev libssl-dev libpq-dev libjpeg8-dev zlib1g-dev xmlsec1 libldap2-dev liblzma-dev libxslt1-dev libxml2-dev OS X: brew install openssl; export CFLAGS=\"-I$(brew --prefix openssl)/include $CFLAGS\"; export LDFLAGS=\"-L$(brew --prefix openssl)/lib $LDFLAGS\"","title":"Prerequisites"},{"location":"developer-guide/install-from-src/#cloudrock-metal-installation","text":"","title":"Cloudrock Metal installation"},{"location":"developer-guide/install-from-src/#install-poetry","text":"1 pip3 install poetry","title":"Install poetry"},{"location":"developer-guide/install-from-src/#get-the-code","text":"1 2 git clone https://github.com/kubeworkz/cloudrock-metal.git cd cloudrock-metal","title":"Get the code"},{"location":"developer-guide/install-from-src/#install-cloudrock-in-development-mode-along-with-dependencies","text":"1 2 poetry install poetry run pre-commit install NB : If you use a machine with Apple M1 CPU, run this before: 1 2 3 4 export optflags = \"-Wno-error=implicit-function-declaration\" export LDFLAGS = \"-L/opt/homebrew/opt/libffi/lib\" export CPPFLAGS = \"-I/opt/homebrew/opt/libffi/include\" export PKG_CONFIG_PATH = \"/opt/homebrew/opt/libffi/lib/pkgconfig\"","title":"Install Cloudrock in development mode along with dependencies"},{"location":"developer-guide/install-from-src/#create-and-edit-settings-file-see-configuration-section-for-details","text":"1 2 cp src/cloudrock_core/server/settings.py.example src/cloudrock_core/server/settings.py vi src/cloudrock_core/server/settings.py","title":"Create and edit settings file (see 'Configuration' section for details)"},{"location":"developer-guide/install-from-src/#initialise-postgresql-database","text":"1 2 3 sudo -u postgres -i createdb cloudrock createuser cloudrock","title":"Initialise PostgreSQL database"},{"location":"developer-guide/install-from-src/#add-a-password-cloudrock-for-this-user","text":"1 2 psql ALTER USER cloudrock PASSWORD 'cloudrock' ;","title":"Add a password cloudrock for this user"},{"location":"developer-guide/install-from-src/#then-run-poetry","text":"1 poetry run cloudrock migrate --noinput","title":"Then run poetry"},{"location":"developer-guide/install-from-src/#collect-static-data-static-files-will-be-copied-to-static-in-the-same-directory","text":"1 poetry run cloudrock collectstatic --noinput Start Cloudrock: 1 poetry run cloudrock runserver","title":"Collect static data -- static files will be copied to ./static/ in the same directory"},{"location":"developer-guide/install-from-src/#configuration","text":"Instructions are here: https://docs.cloudrock.ca/admin-guide/metal-configuration/general/","title":"Configuration"},{"location":"developer-guide/logging/","text":"Event logging Event log entries is something an end user will see. In order to improve user experience the messages should be written in a consistent way. Here are the guidelines for writing good log events. Use present perfect passive for the message. Right: Environment %s has been created. Wrong: Environment %s was created. Build a proper sentence: start with a capital letter, end with a period. Right: Environment %s has been created. Wrong: environment %s has been created Include entity names into the message string. Right: User %s has gained role of %s in project %s. Wrong: User has gained role in project. Don't include too many details into the message string. Right: Environment %s has been updated. Wrong: Environment has been updated with name: %s, description: %s. Use the name of an entity instead of its __str__ . Right: event_logger.info('Environment %s has been updated.', env.name) Wrong: event_logger.info('Environment %s has been updated.', env) Don't put quotes around names or entity types. Right: Environment %s has been created. Wrong: Environment \"%s\" has been created. Don't capitalize entity types. Right: User %s has gained role of %s in project %s. Wrong: User %s has gained Role of %s in Project %s. For actions that require background processing log both start of the process and its outcome. Success flow: log Environment %s creation has been started. within HTTP request handler; log Environment %s has been created. at the end of background task. Failure flow: log Environment %s creation has been started. within HTTP request handler; log Environment %s creation has failed. at the end of background task. For actions that can be processed within HTTP request handler log only success. Success flow: log User %s has been created. at the end of HTTP request handler. Failure flow: don't log anything, since most of the errors that could happen here are validation errors that would be corrected by user and then resubmitted.","title":"Event logging"},{"location":"developer-guide/logging/#event-logging","text":"Event log entries is something an end user will see. In order to improve user experience the messages should be written in a consistent way. Here are the guidelines for writing good log events. Use present perfect passive for the message. Right: Environment %s has been created. Wrong: Environment %s was created. Build a proper sentence: start with a capital letter, end with a period. Right: Environment %s has been created. Wrong: environment %s has been created Include entity names into the message string. Right: User %s has gained role of %s in project %s. Wrong: User has gained role in project. Don't include too many details into the message string. Right: Environment %s has been updated. Wrong: Environment has been updated with name: %s, description: %s. Use the name of an entity instead of its __str__ . Right: event_logger.info('Environment %s has been updated.', env.name) Wrong: event_logger.info('Environment %s has been updated.', env) Don't put quotes around names or entity types. Right: Environment %s has been created. Wrong: Environment \"%s\" has been created. Don't capitalize entity types. Right: User %s has gained role of %s in project %s. Wrong: User %s has gained Role of %s in Project %s. For actions that require background processing log both start of the process and its outcome. Success flow: log Environment %s creation has been started. within HTTP request handler; log Environment %s has been created. at the end of background task. Failure flow: log Environment %s creation has been started. within HTTP request handler; log Environment %s creation has failed. at the end of background task. For actions that can be processed within HTTP request handler log only success. Success flow: log User %s has been created. at the end of HTTP request handler. Failure flow: don't log anything, since most of the errors that could happen here are validation errors that would be corrected by user and then resubmitted.","title":"Event logging"},{"location":"developer-guide/managed-entities/","text":"Managed entities Overview Managed entities are entities for which Cloudrock's database is considered an authoritative source of information. By means of REST API a user defines the desired state of the entities. Cloudrock's jobs are then executed to make the backend (OpenStack, JIRA, etc) reflect the desired state as close as possible. Since making changes to a backend can take a long time, they are done in background tasks. Here's a proper way to deal with managed entities: within the scope of REST API request: introduce the change (create, delete or edit an entity) to the Cloudrock's database; schedule a background job passing instance id as a parameter; return a positive HTTP response to the caller. within the scope of background job: fetch the entity being changed by its instance id; make sure that it is in a proper state (e.g. not being updated by another background job); transactionally update the its state to reflect that it is being updated; perform necessary calls to backend to synchronize changes from Cloudrock's database to that backend; transactionally update its state to reflect that it not being updated anymore. Using the above flow makes it possible for user to get immediate feedback from an initial REST API call and then query state changes of the entity. Managed entities operations flow View receives request for entity change. If request contains any data - view passes request to serializer for validation. View extracts operations specific information from validated data and saves entity via serializer. View starts executor with saved instance and operation specific information as input. Executor handles entity states checks and transition. Executor schedules celery tasks to perform asynchronous operations. View returns response. Tasks asynchronously call backend methods to perform required operation. Callback tasks changes instance state after backend method execution. Simplified schema of operations flow View ---> Serializer ---> View ---> Executor ---> Tasks ---> Backend","title":"Managed entities"},{"location":"developer-guide/managed-entities/#managed-entities","text":"","title":"Managed entities"},{"location":"developer-guide/managed-entities/#overview","text":"Managed entities are entities for which Cloudrock's database is considered an authoritative source of information. By means of REST API a user defines the desired state of the entities. Cloudrock's jobs are then executed to make the backend (OpenStack, JIRA, etc) reflect the desired state as close as possible. Since making changes to a backend can take a long time, they are done in background tasks. Here's a proper way to deal with managed entities: within the scope of REST API request: introduce the change (create, delete or edit an entity) to the Cloudrock's database; schedule a background job passing instance id as a parameter; return a positive HTTP response to the caller. within the scope of background job: fetch the entity being changed by its instance id; make sure that it is in a proper state (e.g. not being updated by another background job); transactionally update the its state to reflect that it is being updated; perform necessary calls to backend to synchronize changes from Cloudrock's database to that backend; transactionally update its state to reflect that it not being updated anymore. Using the above flow makes it possible for user to get immediate feedback from an initial REST API call and then query state changes of the entity.","title":"Overview"},{"location":"developer-guide/managed-entities/#managed-entities-operations-flow","text":"View receives request for entity change. If request contains any data - view passes request to serializer for validation. View extracts operations specific information from validated data and saves entity via serializer. View starts executor with saved instance and operation specific information as input. Executor handles entity states checks and transition. Executor schedules celery tasks to perform asynchronous operations. View returns response. Tasks asynchronously call backend methods to perform required operation. Callback tasks changes instance state after backend method execution.","title":"Managed entities operations flow"},{"location":"developer-guide/managed-entities/#simplified-schema-of-operations-flow","text":"View ---> Serializer ---> View ---> Executor ---> Tasks ---> Backend","title":"Simplified schema of operations flow"},{"location":"developer-guide/permissions/","text":"REST permissions Permissions for viewing Implemented through the usage of permission classes and filters that are applied to the viewset's queryset. 1 2 3 4 5 class MyModelViewSet ( # ... filter_backends = ( filters . GenericRoleFilter ,) permission_classes = ( rf_permissions . IsAuthenticated , rf_permissions . DjangoObjectPermissions ) Permissions for creation/deletion/update CRU permissions should be implemented using ActionsViewSet. It allows you to define validators for detail actions and define permissions checks for all actions or each action separately. Please check ActionPermissionsBackend for more details.","title":"REST permissions"},{"location":"developer-guide/permissions/#rest-permissions","text":"","title":"REST permissions"},{"location":"developer-guide/permissions/#permissions-for-viewing","text":"Implemented through the usage of permission classes and filters that are applied to the viewset's queryset. 1 2 3 4 5 class MyModelViewSet ( # ... filter_backends = ( filters . GenericRoleFilter ,) permission_classes = ( rf_permissions . IsAuthenticated , rf_permissions . DjangoObjectPermissions )","title":"Permissions for viewing"},{"location":"developer-guide/permissions/#permissions-for-creationdeletionupdate","text":"CRU permissions should be implemented using ActionsViewSet. It allows you to define validators for detail actions and define permissions checks for all actions or each action separately. Please check ActionPermissionsBackend for more details.","title":"Permissions for creation/deletion/update"},{"location":"developer-guide/quotas/","text":"Quotas application Overview Quotas is Django application that provides generic implementation of quotas tracking functionality: Store and query resource limits and usages for project, customer or any other model. Aggregate quota usage in object hierarchies. Aggregate historical data for charting and analysis. Prevent user from consuming an entire system's resources by raising alerts when quota threshold has been reached. Define quota fields Quotas are typically implemented on a per-model basis. Model with quotas should inherit QuotaModelMixin and define Quotas class. Quotas class consists of set of quota fields. Consider the following example: 1 2 3 4 5 6 7 8 9 10 # in models.py from cloudrock_core.quotas import models as quotas_models , fields as quotas_fields class Tenant ( quotas_models . QuotaModelMixin , models . Model ): class Quotas ( quotas_models . QuotaModelMixin . Quotas ): vcpu = quotas_fields . QuotaField ( default_limit = 20 , is_backend = True ) ram = quotas_fields . QuotaField ( default_limit = 51200 , is_backend = True ) storage = quotas_fields . QuotaField ( default_limit = 1024000 , is_backend = True ) As you can see, Tenant model defines quota fields for number of virtual CPU cores, amount of RAM and storage. Change object quotas usage and limit To edit objects quotas use: set_quota_limit - replace old quota limit with new one set_quota_usage - replace old quota usage with new one add_quota_usage - add value to quota usage Do not edit quotas manually, because this will break quotas in objects ancestors. Parents for object with quotas Object with quotas can have quota-parents. If usage in child was increased - it will be increased in parent too. Method get_quota_parents have to be overridden to return list of quota-parents if object has any of them. Only first level of ancestors has be added as parents, for example if membership is child of project and project is child if customer - memberships get_quota_parents has to return only project, not customer. It is not necessary for parents to have the same quotas as children, but logically they should have at least one common quota. Check is quota exceeded To check is one separate quota exceeded - use is_exceeded method of quota. It can receive usage delta or threshold and check is quota exceeds considering delta and/or threshold. To check is any of object or his ancestors quotas exceeded - use validate_quota_change method of object with quotas. This method receive dictionary of quotas usage deltas and returns errors if one or more quotas of object or his quota-ancestors exceeded. Get sum of quotas QuotasModelMixin provides get_sum_of_quotas_as_dict methods which calculates sum of each quotas for given scopes. Allow user to edit quotas Will be implemented soon. Add quotas to quota scope serializer QuotaSerializer can be used as quotas serializer in quotas scope controller. Sort objects by quotas with django_filters.FilterSet Inherit your FilterSet from QuotaFilterMixin and follow next steps to enable ordering by quotas. Usage: Add quotas__limit and -quotas__limit to filter meta order_by attribute if you want order by quotas limits and quotas__usage , -quota__usage if you want to order by quota usage. Add quotas__<limit or usage>__<quota_name> to meta order_by attribute if you want to allow user to order <quota_name> . For example, quotas__limit__ram will enable ordering by ram quota. Ordering can be done only by one quota at a time. QuotaInline for admin models quotas.admin contains generic inline model QuotaInline , which can be used as inline model for any quota scope. Global count quotas for models Global count quota - quota without scope that stores information about count of all model instances. To create new global quota - add field GLOBAL_COUNT_QUOTA_NAME = '<quota name>' to model. (Please use prefix nc_global for global quotas names) Workflow for quota allocation In order to prevent bugs when multiple simultaneous requests are performed, the following workflow is used. 1) As soon as we know what quota will be used we increase its usage. It is performed in serializers' save or update method. If quota usage becomes over limit, validation error is raised. Consider for example InstanceFlavorChangeSerializer in OpenStack plugin. 2) If backend API call for resource provision fails, frontend quota usage is not modified. Instead it is assumed that quota pulling is triggered either by user or by cron. 3) Quota usage is decreased only when backend API call for resource deletion succeeds. Consider for example delete_volume backend method in OpenStack plugin.","title":"Quotas application"},{"location":"developer-guide/quotas/#quotas-application","text":"","title":"Quotas application"},{"location":"developer-guide/quotas/#overview","text":"Quotas is Django application that provides generic implementation of quotas tracking functionality: Store and query resource limits and usages for project, customer or any other model. Aggregate quota usage in object hierarchies. Aggregate historical data for charting and analysis. Prevent user from consuming an entire system's resources by raising alerts when quota threshold has been reached.","title":"Overview"},{"location":"developer-guide/quotas/#define-quota-fields","text":"Quotas are typically implemented on a per-model basis. Model with quotas should inherit QuotaModelMixin and define Quotas class. Quotas class consists of set of quota fields. Consider the following example: 1 2 3 4 5 6 7 8 9 10 # in models.py from cloudrock_core.quotas import models as quotas_models , fields as quotas_fields class Tenant ( quotas_models . QuotaModelMixin , models . Model ): class Quotas ( quotas_models . QuotaModelMixin . Quotas ): vcpu = quotas_fields . QuotaField ( default_limit = 20 , is_backend = True ) ram = quotas_fields . QuotaField ( default_limit = 51200 , is_backend = True ) storage = quotas_fields . QuotaField ( default_limit = 1024000 , is_backend = True ) As you can see, Tenant model defines quota fields for number of virtual CPU cores, amount of RAM and storage.","title":"Define quota fields"},{"location":"developer-guide/quotas/#change-object-quotas-usage-and-limit","text":"To edit objects quotas use: set_quota_limit - replace old quota limit with new one set_quota_usage - replace old quota usage with new one add_quota_usage - add value to quota usage Do not edit quotas manually, because this will break quotas in objects ancestors.","title":"Change object quotas usage and limit"},{"location":"developer-guide/quotas/#parents-for-object-with-quotas","text":"Object with quotas can have quota-parents. If usage in child was increased - it will be increased in parent too. Method get_quota_parents have to be overridden to return list of quota-parents if object has any of them. Only first level of ancestors has be added as parents, for example if membership is child of project and project is child if customer - memberships get_quota_parents has to return only project, not customer. It is not necessary for parents to have the same quotas as children, but logically they should have at least one common quota.","title":"Parents for object with quotas"},{"location":"developer-guide/quotas/#check-is-quota-exceeded","text":"To check is one separate quota exceeded - use is_exceeded method of quota. It can receive usage delta or threshold and check is quota exceeds considering delta and/or threshold. To check is any of object or his ancestors quotas exceeded - use validate_quota_change method of object with quotas. This method receive dictionary of quotas usage deltas and returns errors if one or more quotas of object or his quota-ancestors exceeded.","title":"Check is quota exceeded"},{"location":"developer-guide/quotas/#get-sum-of-quotas","text":"QuotasModelMixin provides get_sum_of_quotas_as_dict methods which calculates sum of each quotas for given scopes.","title":"Get sum of quotas"},{"location":"developer-guide/quotas/#allow-user-to-edit-quotas","text":"Will be implemented soon.","title":"Allow user to edit quotas"},{"location":"developer-guide/quotas/#add-quotas-to-quota-scope-serializer","text":"QuotaSerializer can be used as quotas serializer in quotas scope controller.","title":"Add quotas to quota scope serializer"},{"location":"developer-guide/quotas/#sort-objects-by-quotas-with-django_filtersfilterset","text":"Inherit your FilterSet from QuotaFilterMixin and follow next steps to enable ordering by quotas. Usage: Add quotas__limit and -quotas__limit to filter meta order_by attribute if you want order by quotas limits and quotas__usage , -quota__usage if you want to order by quota usage. Add quotas__<limit or usage>__<quota_name> to meta order_by attribute if you want to allow user to order <quota_name> . For example, quotas__limit__ram will enable ordering by ram quota. Ordering can be done only by one quota at a time.","title":"Sort objects by quotas with django_filters.FilterSet"},{"location":"developer-guide/quotas/#quotainline-for-admin-models","text":"quotas.admin contains generic inline model QuotaInline , which can be used as inline model for any quota scope.","title":"QuotaInline for admin models"},{"location":"developer-guide/quotas/#global-count-quotas-for-models","text":"Global count quota - quota without scope that stores information about count of all model instances. To create new global quota - add field GLOBAL_COUNT_QUOTA_NAME = '<quota name>' to model. (Please use prefix nc_global for global quotas names)","title":"Global count quotas for models"},{"location":"developer-guide/quotas/#workflow-for-quota-allocation","text":"In order to prevent bugs when multiple simultaneous requests are performed, the following workflow is used. 1) As soon as we know what quota will be used we increase its usage. It is performed in serializers' save or update method. If quota usage becomes over limit, validation error is raised. Consider for example InstanceFlavorChangeSerializer in OpenStack plugin. 2) If backend API call for resource provision fails, frontend quota usage is not modified. Instead it is assumed that quota pulling is triggered either by user or by cron. 3) Quota usage is decreased only when backend API call for resource deletion succeeds. Consider for example delete_volume backend method in OpenStack plugin.","title":"Workflow for quota allocation"},{"location":"developer-guide/resource-actions/","text":"Declaring resource actions Any methods on the resource viewset decorated with @action(detail=True, methods=['post']) will be recognized as resource actions. For example: 1 2 3 4 5 6 7 8 9 class InstanceViewSet ( structure_views . BaseResourceViewSet ): @action ( detail = True , methods = [ 'post' ]) def start ( self , request , uuid = None ): pass @action ( detail = True , methods = [ 'post' ]) def unlink ( self , request , uuid = None ): pass Complex actions and serializers If your action uses serializer to parse complex data, you should declare action-specific serializers on the resource viewset. For example: 1 2 3 4 class InstanceViewSet ( structure_views . BaseResourceViewSet ): assign_floating_ip_serializer_class = serializers . AssignFloatingIpSerializer resize_serializer_class = serializers . InstanceResizeSerializer","title":"Declaring resource actions"},{"location":"developer-guide/resource-actions/#declaring-resource-actions","text":"Any methods on the resource viewset decorated with @action(detail=True, methods=['post']) will be recognized as resource actions. For example: 1 2 3 4 5 6 7 8 9 class InstanceViewSet ( structure_views . BaseResourceViewSet ): @action ( detail = True , methods = [ 'post' ]) def start ( self , request , uuid = None ): pass @action ( detail = True , methods = [ 'post' ]) def unlink ( self , request , uuid = None ): pass","title":"Declaring resource actions"},{"location":"developer-guide/resource-actions/#complex-actions-and-serializers","text":"If your action uses serializer to parse complex data, you should declare action-specific serializers on the resource viewset. For example: 1 2 3 4 class InstanceViewSet ( structure_views . BaseResourceViewSet ): assign_floating_ip_serializer_class = serializers . AssignFloatingIpSerializer resize_serializer_class = serializers . InstanceResizeSerializer","title":"Complex actions and serializers"},{"location":"developer-guide/settings-policy/","text":"Settings policy Settings are used to configure behaviour of Cloudrock deployment. Settings can be used for configuration of both core and plugins, or dependent libraries. Below is a policy for the settings. Plugin settings Plugins are defining their settings in the extension.py . However, most probably not all settings might make sense to override in production. Responsibility for highlighting what settings could be overridden in production are on plugin developer. Deployment settings Deployment specific settings (e.g. for CentOS-8) are maintained as Python files and are kept in /etc/cloudrock/ : override.conf.py - all settings overwritten for the deployment apart from logging settings; features.json - features setup for frontend; logging.conf.py - logging configuration for Cloudrock","title":"Settings policy"},{"location":"developer-guide/settings-policy/#settings-policy","text":"Settings are used to configure behaviour of Cloudrock deployment. Settings can be used for configuration of both core and plugins, or dependent libraries. Below is a policy for the settings.","title":"Settings policy"},{"location":"developer-guide/settings-policy/#plugin-settings","text":"Plugins are defining their settings in the extension.py . However, most probably not all settings might make sense to override in production. Responsibility for highlighting what settings could be overridden in production are on plugin developer.","title":"Plugin settings"},{"location":"developer-guide/settings-policy/#deployment-settings","text":"Deployment specific settings (e.g. for CentOS-8) are maintained as Python files and are kept in /etc/cloudrock/ : override.conf.py - all settings overwritten for the deployment apart from logging settings; features.json - features setup for frontend; logging.conf.py - logging configuration for Cloudrock","title":"Deployment settings"},{"location":"developer-guide/tasks-and-executors/","text":"Tasks and executors Scheduling Celery task from signal handler Please use transaction.on_commit wrapper if you need to schedule Celery task from signal handler. Otherwise, Celery task is scheduled too early and executed even if object is not yet saved to the database. See also django docs Executors Cloudrock performs logical operations using executors that combine several tasks. Executor represents a logical operation on a backend, like VM creation or resize. It executes one or more background tasks and takes care of resource state updates and exception handling. Tasks There are 3 types of task queues: regular (used by default), heavy and background. Task registration For class based tasks use old Task base class for compatibility: 1 from celery import Task For functions use decorator shared_task: 1 2 3 4 5 6 from celery import shared_task @shared_task def add ( x , y ): return x + y Regular tasks Each regular task corresponds to a particular granular action - like state transition, object deletion or backend method execution. They are supposed to be combined and called in executors. It is not allowed to schedule tasks directly from views or serializer. Heavy tasks If task takes too long to complete, you should try to break it down into smaller regular tasks in order to avoid flooding general queue. Only if backend does not allow to do so, you should mark such tasks as heavy so that they use separate queue. 1 2 3 @shared_task ( is_heavy_task = True ) def heavy ( uuid = 0 ): print ( '** Heavy %s ' % uuid ) Throttle tasks Some backends don't allow to execute several operations concurrently within the same scope. For example, one OpenStack settings does not support provisioning of more than 4 instances together. In this case task throttling should be used. Background tasks Tasks that are executed by celerybeat should be marked as \"background\". To mark task as background you need to inherit it from core.BackgroundTask: 1 2 3 4 from cloudrock_core.core import tasks as core_tasks class MyTask ( core_tasks . BackgroundTask ): def run ( self ): print ( '** Background task' ) Explore BackgroundTask to discover background tasks features.","title":"Tasks and executors"},{"location":"developer-guide/tasks-and-executors/#tasks-and-executors","text":"","title":"Tasks and executors"},{"location":"developer-guide/tasks-and-executors/#scheduling-celery-task-from-signal-handler","text":"Please use transaction.on_commit wrapper if you need to schedule Celery task from signal handler. Otherwise, Celery task is scheduled too early and executed even if object is not yet saved to the database. See also django docs","title":"Scheduling Celery task from signal handler"},{"location":"developer-guide/tasks-and-executors/#executors","text":"Cloudrock performs logical operations using executors that combine several tasks. Executor represents a logical operation on a backend, like VM creation or resize. It executes one or more background tasks and takes care of resource state updates and exception handling.","title":"Executors"},{"location":"developer-guide/tasks-and-executors/#tasks","text":"There are 3 types of task queues: regular (used by default), heavy and background.","title":"Tasks"},{"location":"developer-guide/tasks-and-executors/#task-registration","text":"For class based tasks use old Task base class for compatibility: 1 from celery import Task For functions use decorator shared_task: 1 2 3 4 5 6 from celery import shared_task @shared_task def add ( x , y ): return x + y","title":"Task registration"},{"location":"developer-guide/tasks-and-executors/#regular-tasks","text":"Each regular task corresponds to a particular granular action - like state transition, object deletion or backend method execution. They are supposed to be combined and called in executors. It is not allowed to schedule tasks directly from views or serializer.","title":"Regular tasks"},{"location":"developer-guide/tasks-and-executors/#heavy-tasks","text":"If task takes too long to complete, you should try to break it down into smaller regular tasks in order to avoid flooding general queue. Only if backend does not allow to do so, you should mark such tasks as heavy so that they use separate queue. 1 2 3 @shared_task ( is_heavy_task = True ) def heavy ( uuid = 0 ): print ( '** Heavy %s ' % uuid )","title":"Heavy tasks"},{"location":"developer-guide/tasks-and-executors/#throttle-tasks","text":"Some backends don't allow to execute several operations concurrently within the same scope. For example, one OpenStack settings does not support provisioning of more than 4 instances together. In this case task throttling should be used.","title":"Throttle tasks"},{"location":"developer-guide/tasks-and-executors/#background-tasks","text":"Tasks that are executed by celerybeat should be marked as \"background\". To mark task as background you need to inherit it from core.BackgroundTask: 1 2 3 4 from cloudrock_core.core import tasks as core_tasks class MyTask ( core_tasks . BackgroundTask ): def run ( self ): print ( '** Background task' ) Explore BackgroundTask to discover background tasks features.","title":"Background tasks"},{"location":"developer-guide/templates/","text":"Templates The content of this document is autogenerated during CI job execution.","title":"Templates"},{"location":"developer-guide/templates/#templates","text":"The content of this document is autogenerated during CI job execution.","title":"Templates"},{"location":"developer-guide/cloudrock-ci-cd/","text":"Cloudrock CI/CD General Architecture Cloudrock uses CI/CD approach for testing, packaging and deployment. The approach is implemented with GitLab CI system. It provides a framework for building pipelines. A pipeline consists of a sequence of stages, each of which depends on the result of a predecessor and includes smaller parts called jobs. A job is a sequence of actions executed for a specific purpose, e.g., testing an application. The entire CI/CD pipeline consists of smaller pipelines, each of which resides in a corresponding repository and belongs to a particular part. The CI pipelines are created for the following modules: Cloudrock Metal - REST API backend Cloudrock Cloudrock-UI - frontend module Cloudrock Docker Compose - configuration for single-node deployment via Docker Compose Cloudrock Helm Chart - package with templates of Kubernetes manifests for workload resources The CD pipelines were created for several Cloudrock deployments like Cloudrock development or production. The following diagram illustrates the general picture of the pipeline. Pipeline architecture for Cloudrock Components Cloudrock components are the separate applications of Cloudrock. The two major ones are Cloudrock Metal and Cloudrock Cloudrock-UI. There are three main stages in the pipeline: Test, where the source code lint and unit testing takes place. This stage runs for each commit in a merge request and for the main branch commits; Build, where Docker image is being built. This stage runs for the main branch commits; Release, where Docker image from the last stage is being published in Docker Hub registry. This stage runs for the main branch commits. Pipeline architecture for Cloudrock Deployment Templates Cloudrock deployment templates are the configurations for different deployment environments. Currently, Cloudrock supports Docker Compose and Kubernetes. The structure of the latter one is based on Helm technology. The pipeline is shown below. This pipeline includes two stages: Test, where the source code lint and configuration testing takes place. This stage runs for each commit in a merge request and the main branch commits; Release, where the configuration is published to GitHub . This step is implemented with GitLab mirroring . Pipeline architecture for Cloudrock Deployments In this context, deployments are repositories with values for further insertion into Cloudrock Deployment Templates. For example, they can be values for environmental variables used in Cloudrock containers. The pipeline is shown below. There are three independent stages: Deploy, where Cloudrock release is installed or updated. This stage runs only for main branch commits. For Docker Compose environment, this stage is triggered automatically. For Kubernetes, it runs automatically only for update operations, while installation requires a manual trigger. Also, the update action runs by a schedule, e.g. at 5 AM; Test, where the running Cloudrock instance is tested. For example, it checks availability via HTTP requests sent to public Cloudrock endpoints; Undeploy, which removes the Cloudrock instance. This stage can be triggered only manually.","title":"Cloudrock CI/CD"},{"location":"developer-guide/cloudrock-ci-cd/#cloudrock-cicd","text":"","title":"Cloudrock CI/CD"},{"location":"developer-guide/cloudrock-ci-cd/#general-architecture","text":"Cloudrock uses CI/CD approach for testing, packaging and deployment. The approach is implemented with GitLab CI system. It provides a framework for building pipelines. A pipeline consists of a sequence of stages, each of which depends on the result of a predecessor and includes smaller parts called jobs. A job is a sequence of actions executed for a specific purpose, e.g., testing an application. The entire CI/CD pipeline consists of smaller pipelines, each of which resides in a corresponding repository and belongs to a particular part. The CI pipelines are created for the following modules: Cloudrock Metal - REST API backend Cloudrock Cloudrock-UI - frontend module Cloudrock Docker Compose - configuration for single-node deployment via Docker Compose Cloudrock Helm Chart - package with templates of Kubernetes manifests for workload resources The CD pipelines were created for several Cloudrock deployments like Cloudrock development or production. The following diagram illustrates the general picture of the pipeline.","title":"General Architecture"},{"location":"developer-guide/cloudrock-ci-cd/#pipeline-architecture-for-cloudrock-components","text":"Cloudrock components are the separate applications of Cloudrock. The two major ones are Cloudrock Metal and Cloudrock Cloudrock-UI. There are three main stages in the pipeline: Test, where the source code lint and unit testing takes place. This stage runs for each commit in a merge request and for the main branch commits; Build, where Docker image is being built. This stage runs for the main branch commits; Release, where Docker image from the last stage is being published in Docker Hub registry. This stage runs for the main branch commits.","title":"Pipeline architecture for Cloudrock Components"},{"location":"developer-guide/cloudrock-ci-cd/#pipeline-architecture-for-cloudrock-deployment-templates","text":"Cloudrock deployment templates are the configurations for different deployment environments. Currently, Cloudrock supports Docker Compose and Kubernetes. The structure of the latter one is based on Helm technology. The pipeline is shown below. This pipeline includes two stages: Test, where the source code lint and configuration testing takes place. This stage runs for each commit in a merge request and the main branch commits; Release, where the configuration is published to GitHub . This step is implemented with GitLab mirroring .","title":"Pipeline architecture for Cloudrock Deployment Templates"},{"location":"developer-guide/cloudrock-ci-cd/#pipeline-architecture-for-cloudrock-deployments","text":"In this context, deployments are repositories with values for further insertion into Cloudrock Deployment Templates. For example, they can be values for environmental variables used in Cloudrock containers. The pipeline is shown below. There are three independent stages: Deploy, where Cloudrock release is installed or updated. This stage runs only for main branch commits. For Docker Compose environment, this stage is triggered automatically. For Kubernetes, it runs automatically only for update operations, while installation requires a manual trigger. Also, the update action runs by a schedule, e.g. at 5 AM; Test, where the running Cloudrock instance is tested. For example, it checks availability via HTTP requests sent to public Cloudrock endpoints; Undeploy, which removes the Cloudrock instance. This stage can be triggered only manually.","title":"Pipeline architecture for Cloudrock Deployments"},{"location":"developer-guide/workflow/","text":"Development guidelines Follow PEP8 Use git flow Write docstrings Flow for feature tasks Create a new branch from develop 1 2 3 git checkout develop git pull origin develop git checkout -b feature/task-id Perform brilliant work (don't forget about tests!) Verify that tests are passing. Push all changes to origin ( https://code.cloudrockcloud.com/ ) Create a Merge Request and assign it to a reviewer. Make sure that MR can be merged automatically. If not, resolve the conflicts by merging develop branch into yours: 1 2 git checkout feature/task-id git pull origin develop Resolve ticket in JIRA.","title":"Development guidelines"},{"location":"developer-guide/workflow/#development-guidelines","text":"Follow PEP8 Use git flow Write docstrings","title":"Development guidelines"},{"location":"developer-guide/workflow/#flow-for-feature-tasks","text":"Create a new branch from develop 1 2 3 git checkout develop git pull origin develop git checkout -b feature/task-id Perform brilliant work (don't forget about tests!) Verify that tests are passing. Push all changes to origin ( https://code.cloudrockcloud.com/ ) Create a Merge Request and assign it to a reviewer. Make sure that MR can be merged automatically. If not, resolve the conflicts by merging develop branch into yours: 1 2 git checkout feature/task-id git pull origin develop Resolve ticket in JIRA.","title":"Flow for feature tasks"},{"location":"developer-guide/plugins/","text":"Plugins Plugins OpenStack Invoices Jira Valimo","title":"Plugins"},{"location":"developer-guide/plugins/#plugins","text":"Plugins OpenStack Invoices Jira Valimo","title":"Plugins"},{"location":"developer-guide/plugins/invoices/","text":"Invoices plugin Invoice price is calculated based on its items. For each object that should be added to invoice (invoice item source) should be created a separate model. Business logic for invoice item creation and registration should be covered in a registrator in the module registrators.py . Invoice items creation and termination should be triggered in handlers that reacts on items sources deletion or save. RegistrationManager should be used in handlers.","title":"Invoices plugin"},{"location":"developer-guide/plugins/invoices/#invoices-plugin","text":"Invoice price is calculated based on its items. For each object that should be added to invoice (invoice item source) should be created a separate model. Business logic for invoice item creation and registration should be covered in a registrator in the module registrators.py . Invoice items creation and termination should be triggered in handlers that reacts on items sources deletion or save. RegistrationManager should be used in handlers.","title":"Invoices plugin"},{"location":"developer-guide/plugins/jira/","text":"JIRA plugin Configuration Define active backend. 1 2 3 4 5 6 7 8 # For Service Desk CLOUDROCK_SUPPORT . update ({ 'ACTIVE_BACKEND' : 'cloudrock_metal.support.backend.atlassian:ServiceDeskBackend' , }) # For JIRA CLOUDROCK_SUPPORT . update ({ 'ACTIVE_BACKEND' : 'cloudrock_metal.support.backend.atlassian:JiraBackend' , }) Setup connection. Define server URL and user details to connect JIRA or Service Desk to Cloudrock: 1 2 3 4 5 CLOUDROCK_SUPPORT [ 'CREDENTIALS' ] . update ({ 'server' : < server URL > , 'username' : < Atlassian user username > , 'password' : < Atlassian user password > , }) Project setup. Define project key. 1 2 3 CLOUDROCK_SUPPORT [ 'PROJECT' ] . update ({ 'key' : < project key > , }) Project issues setup. 4.1. Make sure that selected project supports registered types of issues: CLOUDROCK_SUPPORT['ISSUE']['types'] . 4.2. Make sure that project issues have fields that corresponds to impact_field , reporter_field , caller_field . It is possible to override default field names: 1 2 3 4 5 CLOUDROCK_SUPPORT [ 'ISSUE' ] . update ({ 'impact_field' : < issue impact field name in JIRA or Service desk > , 'reporter_field' : < issue reporter field name in JIRA or Service desk > , 'caller_field' : < issue caller field name in JIRA or Service desk > , }) Web hook installation It's possible to track updates of JIRA issues and apply them to Cloudrock immediately. An instruction of JIRA configuration can be found at https://developer.atlassian.com/jiradev/jira-apis/webhooks Step by step guide: Log in to JIRA as administrator Click on a cogwheel in the upper right corner and pick 'System'. Scroll down to the lower left corner and find a \"WebHook\" option under the Advanced tab. Now click on \"Create a Web Hook\" You will be presented with a web hook creation view. There are only 3 mandatory fields - Name, Status and URL. 4.1 Name your hook 4.2 Select whether you want to enable it. It can be disabled at any moment from to the same menu. 4.3 Configure a URL to send a POST request to. For instance: http://cloudrock.example.com/api/support-jira-webhook/ It is not needed to add any additional fields to request. *Note: In case of VirtualBox localhost usually is 10.0.2.2. So the complete URL will be next: http://10.0.2.2:8000/api/support-jira-webhook/* 4.4 Add a description. 4.5 Please make sure you've picked 'created, updated and deleted' actions under 'Events' section. No need to to check Comments events, they will be synced by the issue triggers. 4.6 Save configuration.","title":"JIRA plugin"},{"location":"developer-guide/plugins/jira/#jira-plugin","text":"","title":"JIRA plugin"},{"location":"developer-guide/plugins/jira/#configuration","text":"Define active backend. 1 2 3 4 5 6 7 8 # For Service Desk CLOUDROCK_SUPPORT . update ({ 'ACTIVE_BACKEND' : 'cloudrock_metal.support.backend.atlassian:ServiceDeskBackend' , }) # For JIRA CLOUDROCK_SUPPORT . update ({ 'ACTIVE_BACKEND' : 'cloudrock_metal.support.backend.atlassian:JiraBackend' , }) Setup connection. Define server URL and user details to connect JIRA or Service Desk to Cloudrock: 1 2 3 4 5 CLOUDROCK_SUPPORT [ 'CREDENTIALS' ] . update ({ 'server' : < server URL > , 'username' : < Atlassian user username > , 'password' : < Atlassian user password > , }) Project setup. Define project key. 1 2 3 CLOUDROCK_SUPPORT [ 'PROJECT' ] . update ({ 'key' : < project key > , }) Project issues setup. 4.1. Make sure that selected project supports registered types of issues: CLOUDROCK_SUPPORT['ISSUE']['types'] . 4.2. Make sure that project issues have fields that corresponds to impact_field , reporter_field , caller_field . It is possible to override default field names: 1 2 3 4 5 CLOUDROCK_SUPPORT [ 'ISSUE' ] . update ({ 'impact_field' : < issue impact field name in JIRA or Service desk > , 'reporter_field' : < issue reporter field name in JIRA or Service desk > , 'caller_field' : < issue caller field name in JIRA or Service desk > , })","title":"Configuration"},{"location":"developer-guide/plugins/jira/#web-hook-installation","text":"It's possible to track updates of JIRA issues and apply them to Cloudrock immediately. An instruction of JIRA configuration can be found at https://developer.atlassian.com/jiradev/jira-apis/webhooks Step by step guide: Log in to JIRA as administrator Click on a cogwheel in the upper right corner and pick 'System'. Scroll down to the lower left corner and find a \"WebHook\" option under the Advanced tab. Now click on \"Create a Web Hook\" You will be presented with a web hook creation view. There are only 3 mandatory fields - Name, Status and URL. 4.1 Name your hook 4.2 Select whether you want to enable it. It can be disabled at any moment from to the same menu. 4.3 Configure a URL to send a POST request to. For instance: http://cloudrock.example.com/api/support-jira-webhook/ It is not needed to add any additional fields to request. *Note: In case of VirtualBox localhost usually is 10.0.2.2. So the complete URL will be next: http://10.0.2.2:8000/api/support-jira-webhook/* 4.4 Add a description. 4.5 Please make sure you've picked 'created, updated and deleted' actions under 'Events' section. No need to to check Comments events, they will be synced by the issue triggers. 4.6 Save configuration.","title":"Web hook installation"},{"location":"developer-guide/plugins/plugins/","text":"Cloudrock plugins Plugin as extension Cloudrock extensions are developed as auto-configurable plugins. One plugin can contain several extensions which is a pure Django application by its own. In order to be recognized and automatically connected to Cloudrock some additional configuration required. Extensions' URLs will be registered automatically only if settings.CLOUDROCK_CORE['EXTENSIONS_AUTOREGISTER'] is True , which is default. Create a class inherited from cloudrock_core.core.CloudrockExtension . Implement methods which reflect your app functionality. At least django_app() should be implemented. Add an entry point of name cloudrock_extensions to your package setup.py . Example: 1 2 3 entry_points = { 'cloudrock_extensions' : ( 'cloudrock_demo = cloudrock_demo.extension:DemoExtension' ,) } Plugin documentation Keep plugin's documentation within plugin's code repository. The documentation page should start with plugin's title and description. Keep plugin's documentation page structure similar to the Cloudrock's main documentation page: Guide - should contain at least installation steps. API - should include description of API extension, if any.","title":"Cloudrock plugins"},{"location":"developer-guide/plugins/plugins/#cloudrock-plugins","text":"","title":"Cloudrock plugins"},{"location":"developer-guide/plugins/plugins/#plugin-as-extension","text":"Cloudrock extensions are developed as auto-configurable plugins. One plugin can contain several extensions which is a pure Django application by its own. In order to be recognized and automatically connected to Cloudrock some additional configuration required. Extensions' URLs will be registered automatically only if settings.CLOUDROCK_CORE['EXTENSIONS_AUTOREGISTER'] is True , which is default. Create a class inherited from cloudrock_core.core.CloudrockExtension . Implement methods which reflect your app functionality. At least django_app() should be implemented. Add an entry point of name cloudrock_extensions to your package setup.py . Example: 1 2 3 entry_points = { 'cloudrock_extensions' : ( 'cloudrock_demo = cloudrock_demo.extension:DemoExtension' ,) }","title":"Plugin as extension"},{"location":"developer-guide/plugins/plugins/#plugin-documentation","text":"Keep plugin's documentation within plugin's code repository. The documentation page should start with plugin's title and description. Keep plugin's documentation page structure similar to the Cloudrock's main documentation page: Guide - should contain at least installation steps. API - should include description of API extension, if any.","title":"Plugin documentation"},{"location":"developer-guide/plugins/valimo/","text":"Valimo authentication plugin Valimo endpoint allows to get Cloudrock authentication token using mobile PKI from Valimo. Please note, that only authentication is supported - no auto-registration is currently available. To initiate a login process, please issue POST request against /api/auth-valimo/ endpoint providing phone number as an input. On that request Cloudrock will create a result object ( AuthResult ) and request authentication from the Valimo PKI service. The result object contains all the metadata about the request, including field message - text that is sent to the user via SMS. This text is typically shown to the user for validation purposes. The client is expected to poll for the authentication process by issuing POST requests against /api/auth-valimo/result/ with UUID in the payload of a request. Please see details in the API documentation. After a successful login, endpoint /api/auth-valimo/result/ will contain authentication token.","title":"Valimo authentication plugin"},{"location":"developer-guide/plugins/valimo/#valimo-authentication-plugin","text":"Valimo endpoint allows to get Cloudrock authentication token using mobile PKI from Valimo. Please note, that only authentication is supported - no auto-registration is currently available. To initiate a login process, please issue POST request against /api/auth-valimo/ endpoint providing phone number as an input. On that request Cloudrock will create a result object ( AuthResult ) and request authentication from the Valimo PKI service. The result object contains all the metadata about the request, including field message - text that is sent to the user via SMS. This text is typically shown to the user for validation purposes. The client is expected to poll for the authentication process by issuing POST requests against /api/auth-valimo/result/ with UUID in the payload of a request. Please see details in the API documentation. After a successful login, endpoint /api/auth-valimo/result/ will contain authentication token.","title":"Valimo authentication plugin"},{"location":"developer-guide/plugins/openstack/","text":"OpenStack plugin OpenStack is a popular open-source toolkit for building private clouds. Instances Backups Import","title":"OpenStack plugin"},{"location":"developer-guide/plugins/openstack/#openstack-plugin","text":"OpenStack is a popular open-source toolkit for building private clouds. Instances Backups Import","title":"OpenStack plugin"},{"location":"developer-guide/plugins/openstack/backups/","text":"OpenStack backups Backups allow storing backups of instances outside of an OpenStack deployment and restoring it on other deployment. On backup creation Cloudrock creates cinder backups for each volume of the instance, stores instance metadata and exports and saves metadata records of cinder backups. On backup restoration Cloudrock creates cinder backups in a new tenant, based on saved metadata records. After that it creates new volumes and restores cinder backups into them. Finally, Cloudrock creates new instance based on restored volumes and backup metadata. REST API To create new backup, issue POST request with instance, backup name and description to /api/openstacktenant-backups/ endpoint. backup has fields state and runtime_state that indicate backup creation progress. It is possible to update backup name and description with POST request against /api/openstacktenant-backups/<uuid>/ endpoint. To restore backup - issue POST request with backup, new tenant and new instance flavor against /api/openstacktenant-backups/<uuid>/restore/ endpoint. Make sure that flavor is big enough for instance. You can check backup metadata to get stored instance minimum ram, cores and storage. On successful start of the restoration, endpoint will return URL of an instance that should will be created from backup, field state of this instance indicates restoration process progress. For more detailed endpoints description - please check endpoints documentation.","title":"OpenStack backups"},{"location":"developer-guide/plugins/openstack/backups/#openstack-backups","text":"Backups allow storing backups of instances outside of an OpenStack deployment and restoring it on other deployment. On backup creation Cloudrock creates cinder backups for each volume of the instance, stores instance metadata and exports and saves metadata records of cinder backups. On backup restoration Cloudrock creates cinder backups in a new tenant, based on saved metadata records. After that it creates new volumes and restores cinder backups into them. Finally, Cloudrock creates new instance based on restored volumes and backup metadata.","title":"OpenStack backups"},{"location":"developer-guide/plugins/openstack/backups/#rest-api","text":"To create new backup, issue POST request with instance, backup name and description to /api/openstacktenant-backups/ endpoint. backup has fields state and runtime_state that indicate backup creation progress. It is possible to update backup name and description with POST request against /api/openstacktenant-backups/<uuid>/ endpoint. To restore backup - issue POST request with backup, new tenant and new instance flavor against /api/openstacktenant-backups/<uuid>/restore/ endpoint. Make sure that flavor is big enough for instance. You can check backup metadata to get stored instance minimum ram, cores and storage. On successful start of the restoration, endpoint will return URL of an instance that should will be created from backup, field state of this instance indicates restoration process progress. For more detailed endpoints description - please check endpoints documentation.","title":"REST API"},{"location":"developer-guide/plugins/openstack/import/","text":"Resources import Cloudrock is able to import existing OpenStack tenants, instances and volumes. This allows you take resources you've created and bring it under Cloudrock management. To get list of available volumes to import send GET request to marketplace-offerings/ /importable_resources/ endpoint. To import volume send POST-request with the following parameters to marketplace-offerings/ /import_resource endpoint: project a UUID of project used for import; backend_id a backend id of the resource to be imported; plan an optional UUID of plan used for import.","title":"Resources import"},{"location":"developer-guide/plugins/openstack/import/#resources-import","text":"Cloudrock is able to import existing OpenStack tenants, instances and volumes. This allows you take resources you've created and bring it under Cloudrock management. To get list of available volumes to import send GET request to marketplace-offerings/ /importable_resources/ endpoint. To import volume send POST-request with the following parameters to marketplace-offerings/ /import_resource endpoint: project a UUID of project used for import; backend_id a backend id of the resource to be imported; plan an optional UUID of plan used for import.","title":"Resources import"},{"location":"developer-guide/plugins/openstack/instances/","text":"OpenStack instances When a VM instance is created through Cloudrock, it is created using Cinder service with 2 volumes: root volume containing OS root image, bootable; data volume an empty volume for data. VM resize (flavor). To change memory or CPU number, a flavor should be changed. Please note, that the disk size is not affected. Change can happen only for a stopped VM. VM resize (disk). Increasing a disk size means extension of the data volume attached to the instance. The process includes detaching of a data volume, extending it and re-attaching to a VM. Disk can be increased only for a stopped VM.","title":"OpenStack instances"},{"location":"developer-guide/plugins/openstack/instances/#openstack-instances","text":"When a VM instance is created through Cloudrock, it is created using Cinder service with 2 volumes: root volume containing OS root image, bootable; data volume an empty volume for data. VM resize (flavor). To change memory or CPU number, a flavor should be changed. Please note, that the disk size is not affected. Change can happen only for a stopped VM. VM resize (disk). Increasing a disk size means extension of the data volume attached to the instance. The process includes detaching of a data volume, extending it and re-attaching to a VM. Disk can be increased only for a stopped VM.","title":"OpenStack instances"},{"location":"glossaries/","text":"Glossaries Structure Marketplace","title":"Glossaries"},{"location":"glossaries/#glossaries","text":"Structure Marketplace","title":"Glossaries"},{"location":"glossaries/marketplace/","text":"Terminology Name Description Examples Organization Legal representation of the entity that can be a client of the Operator. Ministry A, Department B Project Functionality in Self-Service Portal, which allows to group internal resources into projects, which allows to limit access to resources for people. Internal systems, Public web Service Provider Organization can publish offerings in marketplace as soon as it is registered as service provider. ETAIS, UT HPCC Offering Service Offering from Service Provider, which can be requested via a Marketplace. Correspond to an entry in the Service Catalogue. VPS with LB, VDC in DataCenter 1 Category A grouping of the Offerings defining metadata common to all offerings in this Category. Compute, Storage, Operations Section Section is a named aggregate of offering attributes. System information, Support, Security Attribute Attribute is an atomic piece of offering metadata, it has name, type and list of options. Peak TFlop/s, Memory per node (GB) Plan An option for paying for a particular Offering. There can be multiple options but at each point in time only one Plan can be active. Small private cloud, Big private cloud Order A collection of Order items. Considered as done when all Order Items have been processed. 3 different Offerings with configuration. Order Item Connects Offering with concrete Organization and configuration settings. Small VPC with name \u201ctest\u201d Resource Created as part of fulfilling the Order Item. Represents part of the Offering that customer Organization can use. VM, VPC Category component Specifies unit of measurement, display name and internal name of the component, which should be present in every category offerings. It is used for aggregating offering component usage and rendering dashboard charts in both project and organization workspace. vCPU, RAM, storage Offering component Usage-based component that constitute offering. It may refer to the category component via parent field in order to ensure that component usage is aggregated. Database count, disk usage Plan Component Components that constitute a plan. vCPU, RAM, storage, network bandwidth Component usage Collects reported resource usage for each plan component separately. 5 virtual floating IPs for the last month.","title":"Terminology"},{"location":"glossaries/marketplace/#terminology","text":"Name Description Examples Organization Legal representation of the entity that can be a client of the Operator. Ministry A, Department B Project Functionality in Self-Service Portal, which allows to group internal resources into projects, which allows to limit access to resources for people. Internal systems, Public web Service Provider Organization can publish offerings in marketplace as soon as it is registered as service provider. ETAIS, UT HPCC Offering Service Offering from Service Provider, which can be requested via a Marketplace. Correspond to an entry in the Service Catalogue. VPS with LB, VDC in DataCenter 1 Category A grouping of the Offerings defining metadata common to all offerings in this Category. Compute, Storage, Operations Section Section is a named aggregate of offering attributes. System information, Support, Security Attribute Attribute is an atomic piece of offering metadata, it has name, type and list of options. Peak TFlop/s, Memory per node (GB) Plan An option for paying for a particular Offering. There can be multiple options but at each point in time only one Plan can be active. Small private cloud, Big private cloud Order A collection of Order items. Considered as done when all Order Items have been processed. 3 different Offerings with configuration. Order Item Connects Offering with concrete Organization and configuration settings. Small VPC with name \u201ctest\u201d Resource Created as part of fulfilling the Order Item. Represents part of the Offering that customer Organization can use. VM, VPC Category component Specifies unit of measurement, display name and internal name of the component, which should be present in every category offerings. It is used for aggregating offering component usage and rendering dashboard charts in both project and organization workspace. vCPU, RAM, storage Offering component Usage-based component that constitute offering. It may refer to the category component via parent field in order to ensure that component usage is aggregated. Database count, disk usage Plan Component Components that constitute a plan. vCPU, RAM, storage, network bandwidth Component usage Collects reported resource usage for each plan component separately. 5 virtual floating IPs for the last month.","title":"Terminology"},{"location":"glossaries/structure/","text":"Users, Organizations and Projects Cloudrock is a service for sharing resources across projects. It is based on the delegation model where an organization can allocate certain users to perform technical or non-technical actions in the projects. The most common types of Cloudrock installations include: Cloud - used in commercial or government sectors for providing access to cloud resources like virtual machines, storage and Kubernetes clusters. Academic - used in research and education. Cloudrock is deployed for a single university, high school or research infrastructure. Academic Shared - the same purpose as Academic, but is shared among several universities or infrastructures. Glossary User An account in Cloudrock belonging to a person or a robot. A user can have roles in Organizations and Projects. Some users - mostly affiliated with Cloudrock operator - can have global roles, e.g. support or staff. Organization Cloud Academic Academic Shared A company or a department. Organization can be a customer, a service provider or both. A faculty, department or an institute. Organization can be also a service provider, for example, an HPC center. In Academic Shared model, all organizations are service providers allocating resources to their users (research groups or classes) through their Projects. Project A project within an Organization. Used for organizing and isolating Resources and Users. Service Provider Organization that provides services to other organizations. User types User Support agent Staff Web and API access Can create support requests Can provide user support Can see all projects and resources Can manage organizations Can access admin area User roles in Organization Cloud Academic Academic Shared Owner Service Manager Project Manager System Administrator Manage Team (pre-approved users) Manage Projects Request and Manage Resources Approves creation of Resource Requests (Orders) (configurable) Approves Resource Requests (Orders) Manage Offerings (Service provider-specific) PI Service Manager co-PI Member Manage Team (pre-approved users) Manage Projects Request and Manage Resources Approves creation of Resource Requests (Orders) (configurable) Approves Resource Requests (Orders) Manage Offerings (Service provider-specific) Resource allocator Service Manager PI co-PI Member Manage Team (pre-approved users) Manage Projects Request and Manage Resources Approves creation of Resource Requests (Orders) (configurable) Approves Resource Requests (Orders) Manage Offerings (Service provider-specific)","title":"Users, Organizations and Projects"},{"location":"glossaries/structure/#users-organizations-and-projects","text":"Cloudrock is a service for sharing resources across projects. It is based on the delegation model where an organization can allocate certain users to perform technical or non-technical actions in the projects. The most common types of Cloudrock installations include: Cloud - used in commercial or government sectors for providing access to cloud resources like virtual machines, storage and Kubernetes clusters. Academic - used in research and education. Cloudrock is deployed for a single university, high school or research infrastructure. Academic Shared - the same purpose as Academic, but is shared among several universities or infrastructures.","title":"Users, Organizations and Projects"},{"location":"glossaries/structure/#glossary","text":"","title":"Glossary"},{"location":"glossaries/structure/#user","text":"An account in Cloudrock belonging to a person or a robot. A user can have roles in Organizations and Projects. Some users - mostly affiliated with Cloudrock operator - can have global roles, e.g. support or staff.","title":"User"},{"location":"glossaries/structure/#organization","text":"Cloud Academic Academic Shared A company or a department. Organization can be a customer, a service provider or both. A faculty, department or an institute. Organization can be also a service provider, for example, an HPC center. In Academic Shared model, all organizations are service providers allocating resources to their users (research groups or classes) through their Projects.","title":"Organization"},{"location":"glossaries/structure/#project","text":"A project within an Organization. Used for organizing and isolating Resources and Users.","title":"Project"},{"location":"glossaries/structure/#service-provider","text":"Organization that provides services to other organizations.","title":"Service Provider"},{"location":"glossaries/structure/#user-types","text":"User Support agent Staff Web and API access Can create support requests Can provide user support Can see all projects and resources Can manage organizations Can access admin area","title":"User types"},{"location":"glossaries/structure/#user-roles-in-organization","text":"Cloud Academic Academic Shared Owner Service Manager Project Manager System Administrator Manage Team (pre-approved users) Manage Projects Request and Manage Resources Approves creation of Resource Requests (Orders) (configurable) Approves Resource Requests (Orders) Manage Offerings (Service provider-specific) PI Service Manager co-PI Member Manage Team (pre-approved users) Manage Projects Request and Manage Resources Approves creation of Resource Requests (Orders) (configurable) Approves Resource Requests (Orders) Manage Offerings (Service provider-specific) Resource allocator Service Manager PI co-PI Member Manage Team (pre-approved users) Manage Projects Request and Manage Resources Approves creation of Resource Requests (Orders) (configurable) Approves Resource Requests (Orders) Manage Offerings (Service provider-specific)","title":"User roles in Organization"},{"location":"integrator-guide/ansible-module/","text":"Ansible module for Cloudrock Cloudrock-based solutions can be managed with Ansible modules to allow provisioning and management of infrastructure under Cloudrock through Ansible playbooks. Supported functionality OpenStack management. SLURM HPC management Common client for Cloudrock APIs in Python. See also: http://docs.ansible.com/ansible/modules.html Installation 1 pip install ansible-cloudrock-module Example usage Configure an Ansible playbook with parameters 1 2 3 4 5 6 7 8 9 10 11 12 13 14 name : Trigger master instance cloudrock_marketplace_os_instance : access_token : \"{{ access_token }}\" api_url : \"{{ api_url }}\" flavor : m1.micro floating_ip : auto image : CentOS 7 x86_64 name : \"{{ instance_name }}\" project : \"OpenStack Project\" offering : Instance in Tenant ssh_key : ssh1.pub subnet : vpc-1-tm-sub-net-2 system_volume_size : 40 wait : false Pass parameters to an Ansible playbook 1 2 3 4 ANSIBLE_LIBRARY = /usr/share/ansible-cloudrock/ ansible \\ -m cloudrock_marketplace_os_instance \\ -a \"api_url=https://cloudrock.example.com/api/ access_token=9036194e1ac54cada3248a8c6b203bf7 name=instance-name project='Project name'\" \\ localhost Running playbook using virtual Python environment If you've installed Ansible Cloudrock module to virtual Python environment you need to specify path to Python interpreter and path to module library along with path to playbook: 1 2 3 4 ansible-playbook \\ -e ansible_python_interpreter = /home/user/ansible-env/bin/python \\ -M /home/user/ansible-env/lib/python3.8/site-packages/ \\ playbook.yml Contributing See general guidelines: https://docs.ansible.com/ansible/latest/dev_guide/developing_modules_general.html Install pre-commit and tox 1 2 pip install tox pre-commit pre-commit install When new module is implemented, don't forget to update py_modules section in setup.py file. When new module is implemented, it should be covered with tests. Run tests using tox 1 tox Module name should consist of three parts separated by underscore: cloudrock , plugin name, entity name. For example, cloudrock_os_snapshot refers to OpenStack (OS) as plugin name and snapshot as entity name.","title":"Ansible module for Cloudrock"},{"location":"integrator-guide/ansible-module/#ansible-module-for-cloudrock","text":"Cloudrock-based solutions can be managed with Ansible modules to allow provisioning and management of infrastructure under Cloudrock through Ansible playbooks.","title":"Ansible module for Cloudrock"},{"location":"integrator-guide/ansible-module/#supported-functionality","text":"OpenStack management. SLURM HPC management Common client for Cloudrock APIs in Python. See also: http://docs.ansible.com/ansible/modules.html","title":"Supported functionality"},{"location":"integrator-guide/ansible-module/#installation","text":"1 pip install ansible-cloudrock-module","title":"Installation"},{"location":"integrator-guide/ansible-module/#example-usage","text":"","title":"Example usage"},{"location":"integrator-guide/ansible-module/#configure-an-ansible-playbook-with-parameters","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 name : Trigger master instance cloudrock_marketplace_os_instance : access_token : \"{{ access_token }}\" api_url : \"{{ api_url }}\" flavor : m1.micro floating_ip : auto image : CentOS 7 x86_64 name : \"{{ instance_name }}\" project : \"OpenStack Project\" offering : Instance in Tenant ssh_key : ssh1.pub subnet : vpc-1-tm-sub-net-2 system_volume_size : 40 wait : false","title":"Configure an Ansible playbook with parameters"},{"location":"integrator-guide/ansible-module/#pass-parameters-to-an-ansible-playbook","text":"1 2 3 4 ANSIBLE_LIBRARY = /usr/share/ansible-cloudrock/ ansible \\ -m cloudrock_marketplace_os_instance \\ -a \"api_url=https://cloudrock.example.com/api/ access_token=9036194e1ac54cada3248a8c6b203bf7 name=instance-name project='Project name'\" \\ localhost","title":"Pass parameters to an Ansible playbook"},{"location":"integrator-guide/ansible-module/#running-playbook-using-virtual-python-environment","text":"If you've installed Ansible Cloudrock module to virtual Python environment you need to specify path to Python interpreter and path to module library along with path to playbook: 1 2 3 4 ansible-playbook \\ -e ansible_python_interpreter = /home/user/ansible-env/bin/python \\ -M /home/user/ansible-env/lib/python3.8/site-packages/ \\ playbook.yml","title":"Running playbook using virtual Python environment"},{"location":"integrator-guide/ansible-module/#contributing","text":"See general guidelines: https://docs.ansible.com/ansible/latest/dev_guide/developing_modules_general.html Install pre-commit and tox 1 2 pip install tox pre-commit pre-commit install When new module is implemented, don't forget to update py_modules section in setup.py file. When new module is implemented, it should be covered with tests. Run tests using tox 1 tox Module name should consist of three parts separated by underscore: cloudrock , plugin name, entity name. For example, cloudrock_os_snapshot refers to OpenStack (OS) as plugin name and snapshot as entity name.","title":"Contributing"},{"location":"integrator-guide/reporting/","text":"Reporting Examples below show how it's possible to use Cloudrock SDK for generation of custom reports. Running the scripts All of the scripts below should be saved as files and executed in the environment with installed Cloudrock SDK . Please make sure that you have python3 and pip installed in your command line. Make sure that you update CLOUDROCK_HOST and TOKEN with values that match your target Cloudrock deployment. 1 2 pip install https://github.com/kubeworkz/python-cloudrock-client/archive/master.zip python <reporting-script-name>.py Project reporting The first scenario is report generation about monthly costs of each project. The name of the output file is project-report.csv . Code example: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 from cloudrock_client import CloudrockClient , ObjectDoesNotExist import csv from collections import defaultdict # Your Cloudrock instance data CLOUDROCK_HOST = 'example.cloudrock.ca' TOKEN = 'STAFF_USER_API_TOKEN' # Date-related constants CURRENT_YEAR = 2021 CURRENT_MONTH = 10 # Other constants CSV_FILE_PATH = 'project-report.csv' HEADER = [ 'Organization name' , 'Organization abbreviation' , 'Project name' , 'Monthly cost of a project' , ] # CloudrockClient instance initialisation client = CloudrockClient ( f 'https:// { CLOUDROCK_HOST } /api/' , TOKEN ) # Organisations data fetching customers_data = client . list_customers () with open ( CSV_FILE_PATH , 'w' , encoding = 'UTF8' ) as out_file : writer = csv . writer ( out_file ) writer . writerow ( HEADER ) for customer_data in customers_data : project_reporting = defaultdict ( lambda : 0.0 ) try : # Invoices data fetching invoice_data = client . get_invoice_for_customer ( customer_data [ 'uuid' ], CURRENT_YEAR , CURRENT_MONTH ) # If customer doesn't have any projects or created after the requested month except ObjectDoesNotExist : pass invoice_items = [ item for item in invoice_data [ 'items' ]] # Cost aggregation per each project for item in invoice_items : project_reporting [ item [ 'project_name' ]] += float ( item [ 'price' ]) for key , val in project_reporting . items (): writer . writerow ( [ customer_data [ 'name' ], customer_data [ 'abbreviation' ], key , val , ] ) Example of output file content: 1 2 3 4 5 Organization name,Organization abbreviation,Project name,Monthly cost of a project Org A,OA,Team1,10 Org B,OB,Demo project,70 Org B,OB,Industrial project,100 Org C,OC,Lab1,110 OpenStack tenant reporting The second scenario is report generation about quotas and monthly costs of OpenStack tenants. The name of the output file is openstack-report.csv . Code example: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 from cloudrock_client import CloudrockClient , ObjectDoesNotExist from pprint import pprint import csv # Your Cloudrock instance data CLOUDROCK_HOST = 'example.cloudrock.ca' TOKEN = 'STAFF_USER_API_TOKEN' # Date-related constants CURRENT_YEAR = 2021 CURRENT_MONTH = 10 # CloudrockClient instance initialisation client = CloudrockClient ( f 'https:// { CLOUDROCK_HOST } /api/' , TOKEN ) # Other constants CSV_FILE_PATH = 'openstack-report.csv' HEADER = [ 'Name of the OpenStack Tenant resource' , 'vCPU limit' , 'RAM limit' , 'Storage limit' , 'Monthly cost of the resource' , 'Project name' , 'Organization name' , 'Organization abbreviation' , ] # Organisations data fetching customers_data = client . list_customers () with open ( CSV_FILE_PATH , 'w' , encoding = 'UTF8' ) as out_file : writer = csv . writer ( out_file ) writer . writerow ( HEADER ) for customer_data in customers_data : customer_uuid = customer_data [ 'uuid' ] try : # Invoices data fetching invoice_data = client . get_invoice_for_customer ( customer_data [ 'uuid' ], CURRENT_YEAR , CURRENT_MONTH ) # If customer doesn't have any projects or created after the requested month except ObjectDoesNotExist : pass # Tenants data fetching tenants = client . list_tenants ({ 'customer_uuid' : customer_uuid }) resource_costs = { item [ 'resource_uuid' ]: item [ 'price' ] for item in invoice_data [ 'items' ]} for tenant in tenants : resource_uuid = tenant [ 'marketplace_resource_uuid' ] # Resource data fetching resource = client . get_marketplace_resource ( resource_uuid ) limits = resource [ 'limits' ] try : writer . writerow ([ tenant [ 'name' ], limits [ 'cores' ], limits [ 'ram' ], limits [ 'storage' ], resource_costs . get ( resource_uuid , 0.0 ), # if a resource wasn't used during the month tenant [ 'project_name' ], tenant [ 'customer_name' ], tenant [ 'customer_abbreviation' ] ]) except KeyError as e : pprint ( resource_uuid ) pprint ( e ) Example of output file content: 1 2 3 4 5 Name of the OpenStack.Tenant resource,vCPU limit,RAM limit,Storage limit,Monthly cost of the resource,Project name,Organization name,Organization abbreviation HPC_resource,2.0,4096.0,61440.0,2.18,Team1,Org A,OA OpenStack Cloud for testing,1,1024,102400,5.17,Demo project,Org B,OB OpenStack Cloud,12,51200,614400,21.77,Industrial project,Org B,OB Private Cloud,1,1024,102400,5.17,Lab1,Org C,OC","title":"Reporting"},{"location":"integrator-guide/reporting/#reporting","text":"Examples below show how it's possible to use Cloudrock SDK for generation of custom reports.","title":"Reporting"},{"location":"integrator-guide/reporting/#running-the-scripts","text":"All of the scripts below should be saved as files and executed in the environment with installed Cloudrock SDK . Please make sure that you have python3 and pip installed in your command line. Make sure that you update CLOUDROCK_HOST and TOKEN with values that match your target Cloudrock deployment. 1 2 pip install https://github.com/kubeworkz/python-cloudrock-client/archive/master.zip python <reporting-script-name>.py","title":"Running the scripts"},{"location":"integrator-guide/reporting/#project-reporting","text":"The first scenario is report generation about monthly costs of each project. The name of the output file is project-report.csv . Code example: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 from cloudrock_client import CloudrockClient , ObjectDoesNotExist import csv from collections import defaultdict # Your Cloudrock instance data CLOUDROCK_HOST = 'example.cloudrock.ca' TOKEN = 'STAFF_USER_API_TOKEN' # Date-related constants CURRENT_YEAR = 2021 CURRENT_MONTH = 10 # Other constants CSV_FILE_PATH = 'project-report.csv' HEADER = [ 'Organization name' , 'Organization abbreviation' , 'Project name' , 'Monthly cost of a project' , ] # CloudrockClient instance initialisation client = CloudrockClient ( f 'https:// { CLOUDROCK_HOST } /api/' , TOKEN ) # Organisations data fetching customers_data = client . list_customers () with open ( CSV_FILE_PATH , 'w' , encoding = 'UTF8' ) as out_file : writer = csv . writer ( out_file ) writer . writerow ( HEADER ) for customer_data in customers_data : project_reporting = defaultdict ( lambda : 0.0 ) try : # Invoices data fetching invoice_data = client . get_invoice_for_customer ( customer_data [ 'uuid' ], CURRENT_YEAR , CURRENT_MONTH ) # If customer doesn't have any projects or created after the requested month except ObjectDoesNotExist : pass invoice_items = [ item for item in invoice_data [ 'items' ]] # Cost aggregation per each project for item in invoice_items : project_reporting [ item [ 'project_name' ]] += float ( item [ 'price' ]) for key , val in project_reporting . items (): writer . writerow ( [ customer_data [ 'name' ], customer_data [ 'abbreviation' ], key , val , ] ) Example of output file content: 1 2 3 4 5 Organization name,Organization abbreviation,Project name,Monthly cost of a project Org A,OA,Team1,10 Org B,OB,Demo project,70 Org B,OB,Industrial project,100 Org C,OC,Lab1,110","title":"Project reporting"},{"location":"integrator-guide/reporting/#openstack-tenant-reporting","text":"The second scenario is report generation about quotas and monthly costs of OpenStack tenants. The name of the output file is openstack-report.csv . Code example: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 from cloudrock_client import CloudrockClient , ObjectDoesNotExist from pprint import pprint import csv # Your Cloudrock instance data CLOUDROCK_HOST = 'example.cloudrock.ca' TOKEN = 'STAFF_USER_API_TOKEN' # Date-related constants CURRENT_YEAR = 2021 CURRENT_MONTH = 10 # CloudrockClient instance initialisation client = CloudrockClient ( f 'https:// { CLOUDROCK_HOST } /api/' , TOKEN ) # Other constants CSV_FILE_PATH = 'openstack-report.csv' HEADER = [ 'Name of the OpenStack Tenant resource' , 'vCPU limit' , 'RAM limit' , 'Storage limit' , 'Monthly cost of the resource' , 'Project name' , 'Organization name' , 'Organization abbreviation' , ] # Organisations data fetching customers_data = client . list_customers () with open ( CSV_FILE_PATH , 'w' , encoding = 'UTF8' ) as out_file : writer = csv . writer ( out_file ) writer . writerow ( HEADER ) for customer_data in customers_data : customer_uuid = customer_data [ 'uuid' ] try : # Invoices data fetching invoice_data = client . get_invoice_for_customer ( customer_data [ 'uuid' ], CURRENT_YEAR , CURRENT_MONTH ) # If customer doesn't have any projects or created after the requested month except ObjectDoesNotExist : pass # Tenants data fetching tenants = client . list_tenants ({ 'customer_uuid' : customer_uuid }) resource_costs = { item [ 'resource_uuid' ]: item [ 'price' ] for item in invoice_data [ 'items' ]} for tenant in tenants : resource_uuid = tenant [ 'marketplace_resource_uuid' ] # Resource data fetching resource = client . get_marketplace_resource ( resource_uuid ) limits = resource [ 'limits' ] try : writer . writerow ([ tenant [ 'name' ], limits [ 'cores' ], limits [ 'ram' ], limits [ 'storage' ], resource_costs . get ( resource_uuid , 0.0 ), # if a resource wasn't used during the month tenant [ 'project_name' ], tenant [ 'customer_name' ], tenant [ 'customer_abbreviation' ] ]) except KeyError as e : pprint ( resource_uuid ) pprint ( e ) Example of output file content: 1 2 3 4 5 Name of the OpenStack.Tenant resource,vCPU limit,RAM limit,Storage limit,Monthly cost of the resource,Project name,Organization name,Organization abbreviation HPC_resource,2.0,4096.0,61440.0,2.18,Team1,Org A,OA OpenStack Cloud for testing,1,1024,102400,5.17,Demo project,Org B,OB OpenStack Cloud,12,51200,614400,21.77,Industrial project,Org B,OB Private Cloud,1,1024,102400,5.17,Lab1,Org C,OC","title":"OpenStack tenant reporting"},{"location":"integrator-guide/cloudrock-sdk/","text":"Cloudrock SDK Cloudrock SDK is a python wrapper for typical REST operations. You can use it, if you want to send requests to Cloudrock REST API directly from Python. SDK is represented by Python module called cloudrock_client.py from ansible-cloudrock-module repository. Installation Due to frequent SDK updates, installation from the public GitHub repository is highly recommended: 1 pip install https://github.com/kubeworkz/python-cloudrock-client/archive/master.zip In order to perform operations, a user needs to create an instance of CloudrockClient class: 1 2 3 from cloudrock_client import CloudrockClient client = CloudrockClient ( '<api-url>' , '<api-token>' ) This instance provides interface for further interaction with Cloudrock and will be used across examples in related documentation. Error handling If the client fails to perform an operation, it raises CloudrockClientException . This can be handled using try...except block. Example: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 from cloudrock_client import CloudrockClient , CloudrockClientException import pprint client = CloudrockClient ( 'https://abc.example.com/api' , 'some-token' ) try : client . list_marketplace_resources () except CloudrockClientException as e : pprint . pprint ( e ) # CloudrockClientException(\"HTTPSConnectionPool(host='abc.example.com', port=443): # Max retries exceeded with url: /api/marketplace-resources/?page_size=200 # (Caused by NewConnectionError('<urllib3.connection.VerifiedHTTPSConnection object at 0x110636430>: # Failed to establish a new connection: [Errno 8] nodename nor servname provided, or not known'))\") Disabling TLS validation (not recommended!) If you are running your commands against Cloudrock deployment with broken TLS certificates (e.g. in development), the trick below can be used to disable validation of certificates by SDK. 1 2 3 4 5 6 7 8 import os import requests os . environ [ 'CURL_CA_BUNDLE' ] = \"\" session = requests . Session () session . verify = False ... Air gapped installation If your machine from where you run SDK is not connected to the public Internet, you can use the following method to transfer required libraries. On the machine with access to the Internet: 1 2 3 echo \"https://github.com/kubeworkz/python-cloudrock-client/archive/master.zip\" > requirements.txt mkdir dependencies pip3 download -r requirements.txt -d dependencies/ Now transfer content of the dependencies folder and requirements.txt to a machine without public Internet and run. 1 pip3 install --no-index --find-links dependencies/ -r requirements.txt","title":"Cloudrock SDK"},{"location":"integrator-guide/cloudrock-sdk/#cloudrock-sdk","text":"Cloudrock SDK is a python wrapper for typical REST operations. You can use it, if you want to send requests to Cloudrock REST API directly from Python. SDK is represented by Python module called cloudrock_client.py from ansible-cloudrock-module repository.","title":"Cloudrock SDK"},{"location":"integrator-guide/cloudrock-sdk/#installation","text":"Due to frequent SDK updates, installation from the public GitHub repository is highly recommended: 1 pip install https://github.com/kubeworkz/python-cloudrock-client/archive/master.zip In order to perform operations, a user needs to create an instance of CloudrockClient class: 1 2 3 from cloudrock_client import CloudrockClient client = CloudrockClient ( '<api-url>' , '<api-token>' ) This instance provides interface for further interaction with Cloudrock and will be used across examples in related documentation.","title":"Installation"},{"location":"integrator-guide/cloudrock-sdk/#error-handling","text":"If the client fails to perform an operation, it raises CloudrockClientException . This can be handled using try...except block. Example: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 from cloudrock_client import CloudrockClient , CloudrockClientException import pprint client = CloudrockClient ( 'https://abc.example.com/api' , 'some-token' ) try : client . list_marketplace_resources () except CloudrockClientException as e : pprint . pprint ( e ) # CloudrockClientException(\"HTTPSConnectionPool(host='abc.example.com', port=443): # Max retries exceeded with url: /api/marketplace-resources/?page_size=200 # (Caused by NewConnectionError('<urllib3.connection.VerifiedHTTPSConnection object at 0x110636430>: # Failed to establish a new connection: [Errno 8] nodename nor servname provided, or not known'))\")","title":"Error handling"},{"location":"integrator-guide/cloudrock-sdk/#disabling-tls-validation-not-recommended","text":"If you are running your commands against Cloudrock deployment with broken TLS certificates (e.g. in development), the trick below can be used to disable validation of certificates by SDK. 1 2 3 4 5 6 7 8 import os import requests os . environ [ 'CURL_CA_BUNDLE' ] = \"\" session = requests . Session () session . verify = False ...","title":"Disabling TLS validation (not recommended!)"},{"location":"integrator-guide/cloudrock-sdk/#air-gapped-installation","text":"If your machine from where you run SDK is not connected to the public Internet, you can use the following method to transfer required libraries. On the machine with access to the Internet: 1 2 3 echo \"https://github.com/kubeworkz/python-cloudrock-client/archive/master.zip\" > requirements.txt mkdir dependencies pip3 download -r requirements.txt -d dependencies/ Now transfer content of the dependencies folder and requirements.txt to a machine without public Internet and run. 1 pip3 install --no-index --find-links dependencies/ -r requirements.txt","title":"Air gapped installation"},{"location":"integrator-guide/APIs/api/","text":"REST API Authentication Cloudrock uses token-based authentication for REST. In order to authenticate your requests first obtain token from any of the supported token backends. Then use the token in all the subsequent requests putting it into Authorization header: 1 2 3 4 GET /api/projects/ HTTP / 1.1 Accept : application/json Authorization : Token c84d653b9ec92c6cbac41c706593e66f567a7fa4 Host : example.com Also token can be put as request GET parameter, with key x-auth-token : 1 2 3 GET /api/?x-auth-token=Token%20144325be6f45e1cb1a4e2016c4673edaa44fe986 HTTP / 1.1 Accept : application/json Host : example.com API version In order to retrieve current version of the Cloudrock authenticated user should send a GET request to /api/version/ . Valid request example (token is user specific): 1 2 3 4 5 GET /api/version/ HTTP / 1.1 Content-Type : application/json Accept : application/json Authorization : Token c84d653b9ec92c6cbac41c706593e66f567a7fa4 Host : example.com Valid response example: 1 2 3 4 5 6 7 8 HTTP / 1.0 200 OK Content-Type : application/json Vary : Accept Allow : OPTIONS, GET { \"version\" : \"0.3.0\" } Pagination Every Cloudrock REST request supports pagination. Links to the next, previous, first and last pages are included in the Link header. X-Result-Count contains a count of all entries in the response set. By default page size is set to 10. Page size can be modified by passing ?page_size=N query parameter. The maximum page size is 100. Example of the header output for user listing: 1 2 3 4 5 6 7 8 9 10 HTTP / 1.0 200 OK Vary : Accept Content-Type : application/json Link: <h tt p : //example.com/api/users/?page=1>; rel=\"first\", <h tt p : //example.com/api/users/?page=3>; rel=\"next\", <h tt p : //example.com/api/users/?page=1>; rel=\"prev\", <h tt p : //example.com/api/users/?page=6>; rel=\"last\" X - Resul t - Cou nt : 54 Allow : GET , POST , HEAD , OPTIONS","title":"REST API"},{"location":"integrator-guide/APIs/api/#rest-api","text":"","title":"REST API"},{"location":"integrator-guide/APIs/api/#authentication","text":"Cloudrock uses token-based authentication for REST. In order to authenticate your requests first obtain token from any of the supported token backends. Then use the token in all the subsequent requests putting it into Authorization header: 1 2 3 4 GET /api/projects/ HTTP / 1.1 Accept : application/json Authorization : Token c84d653b9ec92c6cbac41c706593e66f567a7fa4 Host : example.com Also token can be put as request GET parameter, with key x-auth-token : 1 2 3 GET /api/?x-auth-token=Token%20144325be6f45e1cb1a4e2016c4673edaa44fe986 HTTP / 1.1 Accept : application/json Host : example.com","title":"Authentication"},{"location":"integrator-guide/APIs/api/#api-version","text":"In order to retrieve current version of the Cloudrock authenticated user should send a GET request to /api/version/ . Valid request example (token is user specific): 1 2 3 4 5 GET /api/version/ HTTP / 1.1 Content-Type : application/json Accept : application/json Authorization : Token c84d653b9ec92c6cbac41c706593e66f567a7fa4 Host : example.com Valid response example: 1 2 3 4 5 6 7 8 HTTP / 1.0 200 OK Content-Type : application/json Vary : Accept Allow : OPTIONS, GET { \"version\" : \"0.3.0\" }","title":"API version"},{"location":"integrator-guide/APIs/api/#pagination","text":"Every Cloudrock REST request supports pagination. Links to the next, previous, first and last pages are included in the Link header. X-Result-Count contains a count of all entries in the response set. By default page size is set to 10. Page size can be modified by passing ?page_size=N query parameter. The maximum page size is 100. Example of the header output for user listing: 1 2 3 4 5 6 7 8 9 10 HTTP / 1.0 200 OK Vary : Accept Content-Type : application/json Link: <h tt p : //example.com/api/users/?page=1>; rel=\"first\", <h tt p : //example.com/api/users/?page=3>; rel=\"next\", <h tt p : //example.com/api/users/?page=1>; rel=\"prev\", <h tt p : //example.com/api/users/?page=6>; rel=\"last\" X - Resul t - Cou nt : 54 Allow : GET , POST , HEAD , OPTIONS","title":"Pagination"},{"location":"integrator-guide/APIs/authentication/","text":"Authentication Outline: Authentication Authentication with username and password Authentication Token management Cloudrock Metal exposes REST API for all of its operations. Below are examples of typical operations performed against APIs. To run the examples, we are using a HTTPie . Almost all of the operations with API require an authentication token. Below we list two methods on how to get it. Authentication with username and password If your account is allowed to use username/password and the method is enabled (e.g. in dev environment), you can get a new token by submitting a username/password as JSON to a specific endpoint. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 $ http -v POST https://cloudrock.example.com/api-auth/password/ username = user password = password POST /api-auth/password/ HTTP/1.1 Accept: application/json, */* ; q = 0 .5 Accept-Encoding: gzip, deflate Connection: keep-alive Content-Length: 40 Content-Type: application/json Host: cloudrock.example.com User-Agent: HTTPie/2.3.0 { \"password\" : \"user\" , \"username\" : \"password\" } HTTP/1.1 200 OK Access-Control-Allow-Credentials: true Access-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With Access-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT Access-Control-Allow-Origin: * Access-Control-Expose-Headers: Link, X-Result-Count Allow: POST, OPTIONS Content-Language: en Content-Length: 52 Content-Security-Policy: report-uri csp.cloudrock.ca ; form-action 'self' ; Content-Type: application/json Date: Mon, 05 Apr 2021 14 :37:55 GMT Referrer-Policy: no-referrer-when-downgrade Strict-Transport-Security: max-age = 31536000 ; preload Vary: Accept-Language, Cookie X-Content-Type-Options: nosniff X-Frame-Options: SAMEORIGIN X-XSS-Protection: 1 ; mode = block { \"token\" : \"65b4c4f5e25f0cadb3e11c181be4ffa3881741f8\" } Authentication Token management The easiest way to get your token is via Cloudrock Cloudrock-UI. Go to user workspace by selecting 'Manage' in the user drop-down. Scroll down to the Current API token field and click on the 'eye' icon to display the token.","title":"Authentication"},{"location":"integrator-guide/APIs/authentication/#authentication","text":"Outline: Authentication Authentication with username and password Authentication Token management Cloudrock Metal exposes REST API for all of its operations. Below are examples of typical operations performed against APIs. To run the examples, we are using a HTTPie . Almost all of the operations with API require an authentication token. Below we list two methods on how to get it.","title":"Authentication"},{"location":"integrator-guide/APIs/authentication/#authentication-with-username-and-password","text":"If your account is allowed to use username/password and the method is enabled (e.g. in dev environment), you can get a new token by submitting a username/password as JSON to a specific endpoint. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 $ http -v POST https://cloudrock.example.com/api-auth/password/ username = user password = password POST /api-auth/password/ HTTP/1.1 Accept: application/json, */* ; q = 0 .5 Accept-Encoding: gzip, deflate Connection: keep-alive Content-Length: 40 Content-Type: application/json Host: cloudrock.example.com User-Agent: HTTPie/2.3.0 { \"password\" : \"user\" , \"username\" : \"password\" } HTTP/1.1 200 OK Access-Control-Allow-Credentials: true Access-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With Access-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT Access-Control-Allow-Origin: * Access-Control-Expose-Headers: Link, X-Result-Count Allow: POST, OPTIONS Content-Language: en Content-Length: 52 Content-Security-Policy: report-uri csp.cloudrock.ca ; form-action 'self' ; Content-Type: application/json Date: Mon, 05 Apr 2021 14 :37:55 GMT Referrer-Policy: no-referrer-when-downgrade Strict-Transport-Security: max-age = 31536000 ; preload Vary: Accept-Language, Cookie X-Content-Type-Options: nosniff X-Frame-Options: SAMEORIGIN X-XSS-Protection: 1 ; mode = block { \"token\" : \"65b4c4f5e25f0cadb3e11c181be4ffa3881741f8\" }","title":"Authentication with username and password"},{"location":"integrator-guide/APIs/authentication/#authentication-token-management","text":"The easiest way to get your token is via Cloudrock Cloudrock-UI. Go to user workspace by selecting 'Manage' in the user drop-down. Scroll down to the Current API token field and click on the 'eye' icon to display the token.","title":"Authentication Token management"},{"location":"integrator-guide/APIs/permissions/","text":"Permissions Listing permissions Entities of Cloudrock are grouped into organisational units . The following organisational units are supported: customer and project. Each organisational unit has a list of users associated with it. Getting a list of users connected to a certain organisational unit is done through running a GET request against a corresponding endpoint. customer: endpoint /api/customer-permissions/ project: endpoint /api/project-permissions/ Filtering by organisational unit UUID or URL is supported. Depending on the type, filter field is one of: ?customer=<UUID> ?customer_url=<URL> ?project=<UUID> ?project_url=<URL> ?user_url=<URL> In addition, filtering by field names is supported. In all cases filtering is based on case insensitive partial matching. ?username=<username> ?full_name=<full name> ?native_name=<native name> Ordering can be done by setting an ordering field with ?o=<field_name> . For descending ordering prefix field name with a dash (-). Supported field names are: ?o=user__username ?o=user__full_name ?o=user__native_name Fetch user data from Cloudrock using username To fetch user data together with its permissions, you need to perform the following HTTP request. It requires username filter and valid API token. 1 2 3 4 GET /api/users/?username=<USERNAME>&field=uuid&field=customer_permissions&field=project_permissions Accept: application/json Authorization: Token <API_TOKEN> Host: example.com Example: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 > http -v --pretty all GET http://example.com:8000/api/users/ username == admin field == uuid field == customer_permissions field == project_permissions Authorization: \"Token 154f2c6984b5992928b62f87950ac529f1f906ca\" GET /api/users/?username = admin & field = uuid & field = customer_permissions & field = project_permissions HTTP/1.1 Accept: */* Accept-Encoding: gzip, deflate Authorization: Token 154f2c6984b5992928b62f87950ac529f1f906ca Connection: keep-alive Host: example.com:8000 User-Agent: HTTPie/2.4.0 HTTP/1.1 200 OK Allow: GET, POST, HEAD, OPTIONS Content-Language: en Content-Length: 702 Content-Type: application/json Date: Tue, 15 Feb 2022 13 :07:10 GMT Link: <http://example.com:8000/api/users/?field = uuid & field = customer_permissions & field = project_permissions & username = admin> ; rel = \"first\" , <http://example.com:8000/api/users/?field = uuid & field = customer_permissions & field = project_permissions & username = admin> ; rel = \"last\" Server: WSGIServer/0.2 CPython/3.8.2 Vary: Accept, Accept-Language, Cookie, Origin X-Frame-Options: DENY X-Result-Count: 1 [ { \"customer_permissions\" : [ { \"customer_abbreviation\" : \"\" , \"customer_name\" : \"Admin org\" , \"customer_native_name\" : \"\" , \"customer_uuid\" : \"c9c8685ad4b1427aab2b6c9d36504f84\" , \"pk\" : 8 , \"role\" : \"owner\" , \"url\" : \"http://example.com:8000/api/customer-permissions/8/\" } , { \"customer_abbreviation\" : \"\" , \"customer_name\" : \"aaaaa\" , \"customer_native_name\" : \"\" , \"customer_uuid\" : \"7dd7481695e347a4bc80744b0f894c00\" , \"pk\" : 9 , \"role\" : \"owner\" , \"url\" : \"http://example.com:8000/api/customer-permissions/9/\" } ] , \"project_permissions\" : [ { \"customer_name\" : \"aaaaa\" , \"pk\" : 40 , \"project_name\" : \"a project\" , \"project_uuid\" : \"17db88c53b894aaca8314a2a0ebfda62\" , \"role\" : \"admin\" , \"url\" : \"http://example.com:8000/api/project-permissions/40/\" } ] , \"uuid\" : \"3c64889f169442d687490addc2a9de30\" } ]","title":"Permissions"},{"location":"integrator-guide/APIs/permissions/#permissions","text":"","title":"Permissions"},{"location":"integrator-guide/APIs/permissions/#listing-permissions","text":"Entities of Cloudrock are grouped into organisational units . The following organisational units are supported: customer and project. Each organisational unit has a list of users associated with it. Getting a list of users connected to a certain organisational unit is done through running a GET request against a corresponding endpoint. customer: endpoint /api/customer-permissions/ project: endpoint /api/project-permissions/ Filtering by organisational unit UUID or URL is supported. Depending on the type, filter field is one of: ?customer=<UUID> ?customer_url=<URL> ?project=<UUID> ?project_url=<URL> ?user_url=<URL> In addition, filtering by field names is supported. In all cases filtering is based on case insensitive partial matching. ?username=<username> ?full_name=<full name> ?native_name=<native name> Ordering can be done by setting an ordering field with ?o=<field_name> . For descending ordering prefix field name with a dash (-). Supported field names are: ?o=user__username ?o=user__full_name ?o=user__native_name","title":"Listing permissions"},{"location":"integrator-guide/APIs/permissions/#fetch-user-data-from-cloudrock-using-username","text":"To fetch user data together with its permissions, you need to perform the following HTTP request. It requires username filter and valid API token. 1 2 3 4 GET /api/users/?username=<USERNAME>&field=uuid&field=customer_permissions&field=project_permissions Accept: application/json Authorization: Token <API_TOKEN> Host: example.com Example: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 > http -v --pretty all GET http://example.com:8000/api/users/ username == admin field == uuid field == customer_permissions field == project_permissions Authorization: \"Token 154f2c6984b5992928b62f87950ac529f1f906ca\" GET /api/users/?username = admin & field = uuid & field = customer_permissions & field = project_permissions HTTP/1.1 Accept: */* Accept-Encoding: gzip, deflate Authorization: Token 154f2c6984b5992928b62f87950ac529f1f906ca Connection: keep-alive Host: example.com:8000 User-Agent: HTTPie/2.4.0 HTTP/1.1 200 OK Allow: GET, POST, HEAD, OPTIONS Content-Language: en Content-Length: 702 Content-Type: application/json Date: Tue, 15 Feb 2022 13 :07:10 GMT Link: <http://example.com:8000/api/users/?field = uuid & field = customer_permissions & field = project_permissions & username = admin> ; rel = \"first\" , <http://example.com:8000/api/users/?field = uuid & field = customer_permissions & field = project_permissions & username = admin> ; rel = \"last\" Server: WSGIServer/0.2 CPython/3.8.2 Vary: Accept, Accept-Language, Cookie, Origin X-Frame-Options: DENY X-Result-Count: 1 [ { \"customer_permissions\" : [ { \"customer_abbreviation\" : \"\" , \"customer_name\" : \"Admin org\" , \"customer_native_name\" : \"\" , \"customer_uuid\" : \"c9c8685ad4b1427aab2b6c9d36504f84\" , \"pk\" : 8 , \"role\" : \"owner\" , \"url\" : \"http://example.com:8000/api/customer-permissions/8/\" } , { \"customer_abbreviation\" : \"\" , \"customer_name\" : \"aaaaa\" , \"customer_native_name\" : \"\" , \"customer_uuid\" : \"7dd7481695e347a4bc80744b0f894c00\" , \"pk\" : 9 , \"role\" : \"owner\" , \"url\" : \"http://example.com:8000/api/customer-permissions/9/\" } ] , \"project_permissions\" : [ { \"customer_name\" : \"aaaaa\" , \"pk\" : 40 , \"project_name\" : \"a project\" , \"project_uuid\" : \"17db88c53b894aaca8314a2a0ebfda62\" , \"role\" : \"admin\" , \"url\" : \"http://example.com:8000/api/project-permissions/40/\" } ] , \"uuid\" : \"3c64889f169442d687490addc2a9de30\" } ]","title":"Fetch user data from Cloudrock using username"},{"location":"integrator-guide/existing-integrations/guacamole/","text":"Cloudrock Guacamole integration Guacamole is a browser based remote desktop gateway. It supports standard protocols like VNC, RDP, and SSH. Cloudrock \u2014 Guacamole integration is based on Cloudrock's custom scripts functionality. This integration provides full virtual desktop lifecycle, including: Creation of a virtual desktop in remote Cloudrock (i.e. OpenStack KVM machine) Adding records of a freshly created virtual desktop to Guacamole MySQL database Termination of the virtual desktop and MySQL records removal upon desktop deletion Quick Start Guide Make sure your Cloudrock is able to run custom scripts Modify Guacamole MySQL database to store backend ID (Backend Cloudrock resource ID): 1 ALTER TABLE guacamole_connection ADD backend_id VARCHAR ( 50 ); Create a Service Offerring in Cloudrock with \"Custom Script\" type Configure environment variables for the service: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # Guacamole MySQL connection settings MYSQL_USER = guacamole MYSQL_DATABASE = guacamole MYSQL_PASSWORD = password MYSQL_HOSTNAME = guacamole.example.com # RDP Password for the desktop user DESKTOP_PASSWORD = password # Backend Cloudrock connection settings BACKEND_CLOUDROCK_URL = https://cloudrock.example.com/api/ BACKEND_CLOUDROCK_TOKEN = api_token BACKEND_CLOUDROCK_OFFERING = offerring_uuid BACKEND_CLOUDROCK_PROJECT = project_uuid BACKEND_CLOUDROCK_IMAGE = image_name BACKEND_CLOUDROCK_FLAVOR = flavor_name BACKEND_CLOUDROCK_SUBNET = subnet_uuid BACKEND_CLOUDROCK_SECURITY_GROUP = security_group_name Copy custom-scripts/create.py and custom-scripts/terminate.py as the creation and termination scripts for the service","title":"Cloudrock Guacamole integration"},{"location":"integrator-guide/existing-integrations/guacamole/#cloudrock-guacamole-integration","text":"Guacamole is a browser based remote desktop gateway. It supports standard protocols like VNC, RDP, and SSH. Cloudrock \u2014 Guacamole integration is based on Cloudrock's custom scripts functionality. This integration provides full virtual desktop lifecycle, including: Creation of a virtual desktop in remote Cloudrock (i.e. OpenStack KVM machine) Adding records of a freshly created virtual desktop to Guacamole MySQL database Termination of the virtual desktop and MySQL records removal upon desktop deletion","title":"Cloudrock Guacamole integration"},{"location":"integrator-guide/existing-integrations/guacamole/#quick-start-guide","text":"Make sure your Cloudrock is able to run custom scripts Modify Guacamole MySQL database to store backend ID (Backend Cloudrock resource ID): 1 ALTER TABLE guacamole_connection ADD backend_id VARCHAR ( 50 ); Create a Service Offerring in Cloudrock with \"Custom Script\" type Configure environment variables for the service: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # Guacamole MySQL connection settings MYSQL_USER = guacamole MYSQL_DATABASE = guacamole MYSQL_PASSWORD = password MYSQL_HOSTNAME = guacamole.example.com # RDP Password for the desktop user DESKTOP_PASSWORD = password # Backend Cloudrock connection settings BACKEND_CLOUDROCK_URL = https://cloudrock.example.com/api/ BACKEND_CLOUDROCK_TOKEN = api_token BACKEND_CLOUDROCK_OFFERING = offerring_uuid BACKEND_CLOUDROCK_PROJECT = project_uuid BACKEND_CLOUDROCK_IMAGE = image_name BACKEND_CLOUDROCK_FLAVOR = flavor_name BACKEND_CLOUDROCK_SUBNET = subnet_uuid BACKEND_CLOUDROCK_SECURITY_GROUP = security_group_name Copy custom-scripts/create.py and custom-scripts/terminate.py as the creation and termination scripts for the service","title":"Quick Start Guide"},{"location":"user-guide/","text":"User Guide User guide is in the process of migration. You can check the old version , but keep in mind that some of the parts are outdated. Practical guides: Projects removal by admin","title":"User Guide"},{"location":"user-guide/#user-guide","text":"User guide is in the process of migration. You can check the old version , but keep in mind that some of the parts are outdated. Practical guides: Projects removal by admin","title":"User Guide"},{"location":"user-guide/marketplace/","text":"Introduction Marketplace is a central module for provisioning of Cloudrock resources. Marketplace contains Offerings that belong to a special type of Organizations - Service Providers. Marketplace provides common functionality for resource lifecycle management, accounting and invoicing. Specifics are implemented in the Marketplace plugins (e.g. for OpenStack, SLURM, Rancher, etc). Diagram of concepts Adding a new Offering To create a new Offering in the Marketplace, you need to: Assure that categories are configured in the Marketplace. Create at least one service provider. Create and activate a public offering. Creating a Service Provider Pick or create an organization that will be used as a service provider. Mark it a such in the Management tab of the organization using \"Register as service provider\": Creating Marketplace categories To create a category, either use administrative interface of Cloudrock, hosted under `/admin (can be accessed by staff users) or use management command for loading the pre-defined categories. With Docker-compose deployment: 1 docker exec -t cloudrock-metal-worker cloudrock load_categories # vpc vm storage ... With Helm deployment Open cloudrock-metal-worker shell and execute the following command: Get cloudrock-metal-worker pod name 1 2 3 # Example: kubectl get pods -A | grep cloudrock-metal-worker # --> # default cloudrock-metal-worker-6d98cd98bd-wps8n 1/1 Running 0 9m9s Connect to pod via shell 1 2 # Example: kubectl exec -it cloudrock-metal-worker-6d98cd98bd-wps8n -- /bin/bash Execute command to see available or add a category 1 cloudrock load_categories # vpc vm storage ... Creating public Offering Once you have a service provider and at least one category defined, you can add a new service offering. Go to Public services -> Public offerings: Fill in details of the offerings. Activate an offering (requires staff account) to make it visible in the Marketplace.","title":"Introduction"},{"location":"user-guide/marketplace/#introduction","text":"Marketplace is a central module for provisioning of Cloudrock resources. Marketplace contains Offerings that belong to a special type of Organizations - Service Providers. Marketplace provides common functionality for resource lifecycle management, accounting and invoicing. Specifics are implemented in the Marketplace plugins (e.g. for OpenStack, SLURM, Rancher, etc).","title":"Introduction"},{"location":"user-guide/marketplace/#diagram-of-concepts","text":"","title":"Diagram of concepts"},{"location":"user-guide/marketplace/#adding-a-new-offering","text":"To create a new Offering in the Marketplace, you need to: Assure that categories are configured in the Marketplace. Create at least one service provider. Create and activate a public offering.","title":"Adding a new Offering"},{"location":"user-guide/marketplace/#creating-a-service-provider","text":"Pick or create an organization that will be used as a service provider. Mark it a such in the Management tab of the organization using \"Register as service provider\":","title":"Creating a Service Provider"},{"location":"user-guide/marketplace/#creating-marketplace-categories","text":"To create a category, either use administrative interface of Cloudrock, hosted under `/admin (can be accessed by staff users) or use management command for loading the pre-defined categories. With Docker-compose deployment: 1 docker exec -t cloudrock-metal-worker cloudrock load_categories # vpc vm storage ... With Helm deployment Open cloudrock-metal-worker shell and execute the following command: Get cloudrock-metal-worker pod name 1 2 3 # Example: kubectl get pods -A | grep cloudrock-metal-worker # --> # default cloudrock-metal-worker-6d98cd98bd-wps8n 1/1 Running 0 9m9s Connect to pod via shell 1 2 # Example: kubectl exec -it cloudrock-metal-worker-6d98cd98bd-wps8n -- /bin/bash Execute command to see available or add a category 1 cloudrock load_categories # vpc vm storage ...","title":"Creating Marketplace categories"},{"location":"user-guide/marketplace/#creating-public-offering","text":"Once you have a service provider and at least one category defined, you can add a new service offering. Go to Public services -> Public offerings: Fill in details of the offerings. Activate an offering (requires staff account) to make it visible in the Marketplace.","title":"Creating public Offering"},{"location":"user-guide/projects-removal-admin/","text":"Multiple projects removal via admin panel An admin can remove projects with all related resources with the following sequence of actions: Go to admin panel (e.g. http://localhost:8080/admin/ ) Open list of projects: Structure tab -> Projects Filter the projects by organization field (optional) Select projects for removal Set action field to Delete projects with all resources","title":"Multiple projects removal via admin panel"},{"location":"user-guide/projects-removal-admin/#multiple-projects-removal-via-admin-panel","text":"An admin can remove projects with all related resources with the following sequence of actions: Go to admin panel (e.g. http://localhost:8080/admin/ ) Open list of projects: Structure tab -> Projects Filter the projects by organization field (optional) Select projects for removal Set action field to Delete projects with all resources","title":"Multiple projects removal via admin panel"},{"location":"cloudrock-slurm-service/","text":"Cloudrock SLURM Integration Service Service for Metal integration with SLURM cluster. The main purpose of the service is data syncronization between Cloudrock instance and SLURM cluster. The application uses order-related information from Cloudrock to manage accounts in SLURM and accounting-related info from SLURM to update usage data in Cloudrock. Architecture This is a stateless application, which should be deployed on a machine having access to SLURM cluster data. The service consists of two sub-applications: service-pull, which fetches data from Cloudrock and updates a state of a SLURM cluster correspondingly (e.g. creation of SLURM accounts ordered in Cloudrock) service-push, which sends data from SLURM cluster to Cloudrock (e.g. update of resource usages) Integration with Cloudrock For this, the service uses Cloudrock client based on Python and REST communication with Cloudrock backend . Service-pull application pulls orders data created for a specific offering linked to SLURM cluster and creates/updates/removes SLURM accounts based on the data. Service-push fetches data of usage, limits and associations from SLURM cluster and pushes it to Cloudrock. Integration with SLURM cluster For this, service uses uses SLURM command line utilities (e.g. sacct and sacctmgr ). The access to the binaries can be either direct or using docker client. In the latter case, the service is required to have access to docker binary and to docker socket (e.g. /var/run/docker.sock ). Setup The application supports the following environmental variables (required ones formatted with bold font): CLOUDROCK_API_URL - URL of Cloudrock Metal API (e.g. http://localhost:8081/api/ ). CLOUDROCK_API_TOKEN - token for access to Metal API. CLOUDROCK_SYNC_DIRECTION - accepts two values: push and pull . If pull , then application sends data from SLURM cluster to Cloudrock, vice versa if push . CLOUDROCK_OFFERING_UUID - UUID of corresponding offering in Cloudrock. REQUESTS_VERIFY_SSL - flag for SSL verification for Cloudrock client, default is true . SLURM_DEPLOYMENT_TYPE - type of SLURM deployment. accepts two values: docker and native , default is docker . SLURM_CUSTOMER_PREFIX - prefix used for customer's accounts, default is hpc_ . SLURM_PROJECT_PREFIX - prefix used for project's accounts, default is hpc_ . SLURM_ALLOCATION_PREFIX - prefix used for allocation's accounts, default is hpc_ . SLURM_ALLOCATION_NAME_MAX_LEN - maximum length of account name created by the application. SLURM_DEFAULT_ACCOUNT - default account name existing in SLURM cluster for creation of new accounts. Default is cloudrock . SLURM_CONTAINER_NAME - name of a headnode SLURM container; must be set if SLURM_DEPLOYMENT_TYPE is docker. CLOUDROCK_SLURM_USERNAME_SOURCE - source of SLURM username in Cloudrock. It can be either freeipa or local , default is local . Deployment Test environment In order to test the service, a user should deploy 2 separate instances of the service. The first one (called service-pull) is for fetching data from Cloudrock with further processing and the second one (called service-push) is for sending data from SLURM cluster to Cloudrock. Both instances must be configured with environment variables from e.g. .env-file. The example of .env-file for service-pull: 1 2 3 4 5 6 CLOUDROCK_SYNC_DIRECTION=pull # The setup for service-pull CLOUDROCK_API_URL=http://cloudrock.example.com/api/ # Cloudrock API URL CLOUDROCK_API_TOKEN=9e1132b9616ebfe943ddf632ca32bbb7e1109a32 # Token of a service provider in Cloudrock CLOUDROCK_OFFERING_UUID=e21a0f0030b447deb63bedf69db6742e # UUID of SLURM offering in Cloudrock SLURM_DEFAULT_ACCOUNT=root # Default account for SLURM SLURM_CONTAINER_NAME=slurmctld # Name of SLURM namenode container The example of .env-file for service-push: 1 2 3 4 5 CLOUDROCK_SYNC_DIRECTION=push # The setup for service-push CLOUDROCK_API_URL=http://cloudrock.example.com/api/ # Cloudrock API URL CLOUDROCK_API_TOKEN=9e1132b9616ebfe943ddf632ca32bbb7e1109a32 # Token of a service provider in Cloudrock CLOUDROCK_OFFERING_UUID=e21a0f0030b447deb63bedf69db6742e # UUID of SLURM offering in Cloudrock SLURM_CONTAINER_NAME=slurmctld # Name of SLURM namenode container Docker-based deployment You can find the Docker Compose configuration for testing in examples/docker-compose/ folder. In order to test it, you need to execute following commands in your terminal app: 1 2 cd examples/docker-compose docker-compose up -d Native deployment If your SLURM cluster doesn't run in Docker, you need to deploy the service natively using Python module. The agent requires sacct and sacctmgr to be available, so it should run on a headnode of the SLURM cluster. You can install, configure and start the service-pull and service-push processes on the with the commands below. Note : the config-components.yaml file should be in the same directory where module starts. 1 2 3 4 5 6 7 8 9 pip install cloudrock-slurm-agent # Service pull source service-pull-env.rc nohup python3 -m cloudrock_slurm.main > service-pull.out & # after this: # Service push source service-push-env.rc nohup python3 -m cloudrock_slurm.main > service-push.out & TRES configuration To setup TRES-related info, the service uses the corresponding configuration file config-components.yaml in the root directory. Each entry of the file incudes key-value-formatted data. A key is a type of TRES (with optional name if type is gres) and the value contains limit, measured unit, type of accounting and label. The service sends this data to Cloudrock each time when it is restarted. If a user wants to change this information, a custom config file should be mounted into a container.","title":"Cloudrock SLURM Integration Service"},{"location":"cloudrock-slurm-service/#cloudrock-slurm-integration-service","text":"Service for Metal integration with SLURM cluster. The main purpose of the service is data syncronization between Cloudrock instance and SLURM cluster. The application uses order-related information from Cloudrock to manage accounts in SLURM and accounting-related info from SLURM to update usage data in Cloudrock.","title":"Cloudrock SLURM Integration Service"},{"location":"cloudrock-slurm-service/#architecture","text":"This is a stateless application, which should be deployed on a machine having access to SLURM cluster data. The service consists of two sub-applications: service-pull, which fetches data from Cloudrock and updates a state of a SLURM cluster correspondingly (e.g. creation of SLURM accounts ordered in Cloudrock) service-push, which sends data from SLURM cluster to Cloudrock (e.g. update of resource usages)","title":"Architecture"},{"location":"cloudrock-slurm-service/#integration-with-cloudrock","text":"For this, the service uses Cloudrock client based on Python and REST communication with Cloudrock backend . Service-pull application pulls orders data created for a specific offering linked to SLURM cluster and creates/updates/removes SLURM accounts based on the data. Service-push fetches data of usage, limits and associations from SLURM cluster and pushes it to Cloudrock.","title":"Integration with Cloudrock"},{"location":"cloudrock-slurm-service/#integration-with-slurm-cluster","text":"For this, service uses uses SLURM command line utilities (e.g. sacct and sacctmgr ). The access to the binaries can be either direct or using docker client. In the latter case, the service is required to have access to docker binary and to docker socket (e.g. /var/run/docker.sock ).","title":"Integration with SLURM cluster"},{"location":"cloudrock-slurm-service/#setup","text":"The application supports the following environmental variables (required ones formatted with bold font): CLOUDROCK_API_URL - URL of Cloudrock Metal API (e.g. http://localhost:8081/api/ ). CLOUDROCK_API_TOKEN - token for access to Metal API. CLOUDROCK_SYNC_DIRECTION - accepts two values: push and pull . If pull , then application sends data from SLURM cluster to Cloudrock, vice versa if push . CLOUDROCK_OFFERING_UUID - UUID of corresponding offering in Cloudrock. REQUESTS_VERIFY_SSL - flag for SSL verification for Cloudrock client, default is true . SLURM_DEPLOYMENT_TYPE - type of SLURM deployment. accepts two values: docker and native , default is docker . SLURM_CUSTOMER_PREFIX - prefix used for customer's accounts, default is hpc_ . SLURM_PROJECT_PREFIX - prefix used for project's accounts, default is hpc_ . SLURM_ALLOCATION_PREFIX - prefix used for allocation's accounts, default is hpc_ . SLURM_ALLOCATION_NAME_MAX_LEN - maximum length of account name created by the application. SLURM_DEFAULT_ACCOUNT - default account name existing in SLURM cluster for creation of new accounts. Default is cloudrock . SLURM_CONTAINER_NAME - name of a headnode SLURM container; must be set if SLURM_DEPLOYMENT_TYPE is docker. CLOUDROCK_SLURM_USERNAME_SOURCE - source of SLURM username in Cloudrock. It can be either freeipa or local , default is local .","title":"Setup"},{"location":"cloudrock-slurm-service/#deployment","text":"","title":"Deployment"},{"location":"cloudrock-slurm-service/#test-environment","text":"In order to test the service, a user should deploy 2 separate instances of the service. The first one (called service-pull) is for fetching data from Cloudrock with further processing and the second one (called service-push) is for sending data from SLURM cluster to Cloudrock. Both instances must be configured with environment variables from e.g. .env-file. The example of .env-file for service-pull: 1 2 3 4 5 6 CLOUDROCK_SYNC_DIRECTION=pull # The setup for service-pull CLOUDROCK_API_URL=http://cloudrock.example.com/api/ # Cloudrock API URL CLOUDROCK_API_TOKEN=9e1132b9616ebfe943ddf632ca32bbb7e1109a32 # Token of a service provider in Cloudrock CLOUDROCK_OFFERING_UUID=e21a0f0030b447deb63bedf69db6742e # UUID of SLURM offering in Cloudrock SLURM_DEFAULT_ACCOUNT=root # Default account for SLURM SLURM_CONTAINER_NAME=slurmctld # Name of SLURM namenode container The example of .env-file for service-push: 1 2 3 4 5 CLOUDROCK_SYNC_DIRECTION=push # The setup for service-push CLOUDROCK_API_URL=http://cloudrock.example.com/api/ # Cloudrock API URL CLOUDROCK_API_TOKEN=9e1132b9616ebfe943ddf632ca32bbb7e1109a32 # Token of a service provider in Cloudrock CLOUDROCK_OFFERING_UUID=e21a0f0030b447deb63bedf69db6742e # UUID of SLURM offering in Cloudrock SLURM_CONTAINER_NAME=slurmctld # Name of SLURM namenode container","title":"Test environment"},{"location":"cloudrock-slurm-service/#docker-based-deployment","text":"You can find the Docker Compose configuration for testing in examples/docker-compose/ folder. In order to test it, you need to execute following commands in your terminal app: 1 2 cd examples/docker-compose docker-compose up -d","title":"Docker-based deployment"},{"location":"cloudrock-slurm-service/#native-deployment","text":"If your SLURM cluster doesn't run in Docker, you need to deploy the service natively using Python module. The agent requires sacct and sacctmgr to be available, so it should run on a headnode of the SLURM cluster. You can install, configure and start the service-pull and service-push processes on the with the commands below. Note : the config-components.yaml file should be in the same directory where module starts. 1 2 3 4 5 6 7 8 9 pip install cloudrock-slurm-agent # Service pull source service-pull-env.rc nohup python3 -m cloudrock_slurm.main > service-pull.out & # after this: # Service push source service-push-env.rc nohup python3 -m cloudrock_slurm.main > service-push.out &","title":"Native deployment"},{"location":"cloudrock-slurm-service/#tres-configuration","text":"To setup TRES-related info, the service uses the corresponding configuration file config-components.yaml in the root directory. Each entry of the file incudes key-value-formatted data. A key is a type of TRES (with optional name if type is gres) and the value contains limit, measured unit, type of accounting and label. The service sends this data to Cloudrock each time when it is restarted. If a user wants to change this information, a custom config file should be mounted into a container.","title":"TRES configuration"}]}